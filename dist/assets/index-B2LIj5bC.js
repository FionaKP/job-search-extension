import{r as c,j as t,R as F,a as tt,g as gs,b as ps,e as ys,c as bs}from"./extractor-BlsyOXNW.js";const vs=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],Ce={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},wt=["saved","in_progress","applied","interviewing","offer","accepted","rejected"],ws={required_skill:"Required Skills",preferred_skill:"Preferred Skills",soft_skill:"Soft Skills",experience:"Experience",education:"Education",values:"Values & Culture",tools:"Tools",industry:"Industry"},js=["required_skill","preferred_skill","soft_skill","experience","education","tools","values","industry"],jt={recruiter:"Recruiter",employee:"Employee",referral:"Referral",alumni:"Alumni",other:"Other"},Fn={1:"Weak",2:"Moderate",3:"Strong"},pt={email:"Email",call:"Call",meeting:"Meeting",linkedin:"LinkedIn",other:"Other"},Ns=["accepted","rejected","withdrawn"];function Et(e){return Ns.includes(e)}function ks({isOpen:e,onClose:n,title:s,children:r,width:a="max-w-md"}){const o=c.useCallback(l=>{l.key==="Escape"&&n()},[n]);return c.useEffect(()=>(e&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}),[e,o]),e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),t.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10",children:t.jsx("div",{className:`w-screen ${a}`,children:t.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[s&&t.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s}),t.jsxs("button",{onClick:n,className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:r})]})})})]}):null}function Cs({value:e,onChange:n,placeholder:s="Search...",debounceMs:r=300,inputRef:a}){const[o,l]=c.useState(e);c.useEffect(()=>{l(e)},[e]),c.useEffect(()=>{const u=setTimeout(()=>{o!==e&&n(o)},r);return()=>clearTimeout(u)},[o,e,n,r]);const i=u=>{l(u.target.value)},d=()=>{l(""),n("")};return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),t.jsx("input",{ref:a,type:"text",value:o,onChange:i,placeholder:s,className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-8 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),o&&t.jsx("button",{onClick:d,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function xn({label:e,options:n,value:s,onChange:r}){const[a,o]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{const d=u=>{l.current&&!l.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const i=n.find(d=>d.value===s);return t.jsxs("div",{className:"relative",ref:l,children:[t.jsxs("button",{onClick:()=>o(!a),className:"inline-flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i?i.label:e,t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),a&&t.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>{r(null),o(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===null?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:"All"}),n.map(d=>t.jsx("button",{onClick:()=>{r(d.value),o(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===d.value?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:d.label},String(d.value)))]})})]})}function qt({priority:e,onChange:n,size:s="md",readOnly:r=!1}){const a=s==="sm"?"h-4 w-4":"h-5 w-5",o=s==="sm"?"gap-0.5":"gap-1",l=i=>{!r&&n&&n(i)};return t.jsx("div",{className:`flex ${o}`,children:[1,2,3].map(i=>t.jsx("button",{onClick:()=>l(i),disabled:r,className:`${r?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Priority ${i}`,children:t.jsx("svg",{className:`${a} ${i<=e?"text-yellow-400":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},i))})}function en({tag:e,onRemove:n,size:s="sm"}){const r=s==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm";return t.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full bg-blue-100 text-blue-700 ${r}`,children:[e,n&&t.jsx("button",{onClick:n,className:"ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full hover:bg-blue-200",children:t.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function Ss({tags:e,onTagsChange:n,suggestedTags:s=[]}){const[r,a]=c.useState(!1),[o,l]=c.useState(""),i=c.useRef(null),d=c.useRef(null);c.useEffect(()=>{const m=h=>{i.current&&!i.current.contains(h.target)&&a(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),c.useEffect(()=>{r&&d.current&&d.current.focus()},[r]);const u=m=>{const h=m.trim().toLowerCase();h&&!e.includes(h)&&n([...e,h]),l("")},f=m=>{n(e.filter(h=>h!==m))},x=m=>{m.key==="Enter"&&o.trim()&&(m.preventDefault(),u(o))},g=s.filter(m=>!e.includes(m));return t.jsxs("div",{className:"relative",ref:i,children:[t.jsxs("button",{onClick:()=>a(!r),className:"inline-flex items-center gap-1 rounded border border-dashed border-gray-300 px-2 py-1 text-xs text-gray-500 hover:border-gray-400 hover:text-gray-600",children:[t.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),r&&t.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-black ring-opacity-5",children:[t.jsx("input",{ref:d,type:"text",value:o,onChange:m=>l(m.target.value),onKeyDown:x,placeholder:"Type and press Enter",className:"w-full rounded border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(m=>t.jsx(en,{tag:m,onRemove:()=>f(m)},m))}),g.length>0&&t.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-2",children:[t.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Suggestions:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:g.slice(0,5).map(m=>t.jsx("button",{onClick:()=>u(m),className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600 hover:bg-gray-200",children:m},m))})]})]})]})}function mn({children:e,items:n}){const[s,r]=c.useState(!1),[a,o]=c.useState({x:0,y:0}),l=c.useRef(null);c.useEffect(()=>{const u=x=>{l.current&&!l.current.contains(x.target)&&r(!1)},f=x=>{x.key==="Escape"&&r(!1)};return document.addEventListener("mousedown",u),document.addEventListener("keydown",f),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",f)}},[]);const i=u=>{u.preventDefault(),o({x:u.clientX,y:u.clientY}),r(!0)},d=u=>{u.onClick(),r(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onContextMenu:i,children:e}),s&&t.jsx("div",{ref:l,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",style:{left:a.x,top:a.y},children:n.map((u,f)=>u.divider?t.jsx("div",{className:"my-1 border-t border-gray-100"},f):t.jsxs("button",{onClick:()=>d(u),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm ${u.danger?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100"}`,children:[u.icon,u.label]},f))})]})}const $={POSTINGS:"postings",CONNECTIONS:"connections",SETTINGS:"settings",SCHEMA_VERSION:"schemaVersion",VIEW_PREFERENCE:"viewPreference",COLLAPSED_COLUMNS:"collapsedColumns",STATS_EXPANDED:"statsExpanded"};async function $e(){return(await chrome.storage.local.get($.POSTINGS))[$.POSTINGS]||[]}async function Ue(e){await chrome.storage.local.set({[$.POSTINGS]:e})}async function ne(){return(await chrome.storage.local.get($.CONNECTIONS))[$.CONNECTIONS]||[]}async function We(e){await chrome.storage.local.set({[$.CONNECTIONS]:e})}async function gn(e){const n=await ne(),s=n.findIndex(r=>r.id===e.id);s>=0?n[s]={...e,dateModified:Date.now()}:n.push(e),await We(n)}async function Ds(e){const s=(await ne()).filter(o=>o.id!==e);await We(s);const a=(await $e()).map(o=>({...o,connectionIds:o.connectionIds.filter(l=>l!==e)}));await Ue(a)}async function Ls(e,n){const s=await ne(),r=await $e(),a=s.findIndex(l=>l.id===e);if(a>=0){const l=s[a];l.linkedPostingIds.includes(n)||(s[a]={...l,linkedPostingIds:[...l.linkedPostingIds,n],dateModified:Date.now()})}const o=r.findIndex(l=>l.id===n);if(o>=0){const l=r[o];l.connectionIds.includes(e)||(r[o]={...l,connectionIds:[...l.connectionIds,e],dateModified:Date.now()})}await We(s),await Ue(r)}async function pn(e,n){const s=await ne(),r=await $e(),a=s.findIndex(l=>l.id===e);if(a>=0){const l=s[a];s[a]={...l,linkedPostingIds:l.linkedPostingIds.filter(i=>i!==n),dateModified:Date.now()}}const o=r.findIndex(l=>l.id===n);if(o>=0){const l=r[o];r[o]={...l,connectionIds:l.connectionIds.filter(i=>i!==e),dateModified:Date.now()}}await We(s),await Ue(r)}async function Es(){return(await chrome.storage.local.get($.SETTINGS))[$.SETTINGS]||Ms()}function Ms(){return{defaultView:"kanban",theme:"light",collapsedColumns:["rejected"]}}async function Rs(){return(await chrome.storage.local.get($.VIEW_PREFERENCE))[$.VIEW_PREFERENCE]||"kanban"}async function As(e){await chrome.storage.local.set({[$.VIEW_PREFERENCE]:e})}async function Is(){return(await chrome.storage.local.get($.COLLAPSED_COLUMNS))[$.COLLAPSED_COLUMNS]??["rejected"]}async function Os(e){await chrome.storage.local.set({[$.COLLAPSED_COLUMNS]:e})}async function Ts(){return(await chrome.storage.local.get($.STATS_EXPANDED))[$.STATS_EXPANDED]??!1}async function Ps(e){await chrome.storage.local.set({[$.STATS_EXPANDED]:e})}async function Fs(){return(await chrome.storage.local.get($.SCHEMA_VERSION))[$.SCHEMA_VERSION]||1}async function zs(e){await chrome.storage.local.set({[$.SCHEMA_VERSION]:e})}const yt=3,yn=["jobApplications","applications"];async function Bs(){const e=await Fs();if(e>=yt)return;console.log(`[Migration] Current schema version: ${e}, target: ${yt}`);const n=await chrome.storage.local.get([...yn,"postings"]);let s=[],r="";for(const a of yn)if(n[a]&&Array.isArray(n[a])&&n[a].length>0){s=n[a],r=a;break}if(s.length>0){console.log(`[Migration] Found ${s.length} V1 postings under key: ${r}`);const a=zn(s),o=n.postings||[],l=new Set(o.map(u=>u.url)),i=a.filter(u=>!l.has(u.url)),d=[...o,...i];await Ue(d),await chrome.storage.local.set({_v1_backup:s}),console.log(`[Migration] Migrated ${i.length} new postings, ${a.length-i.length} duplicates skipped`)}e<3&&await $s(),await zs(yt),console.log(`[Migration] Schema version updated to ${yt}`)}async function $s(){const e=await ne();if(e.length===0){console.log("[Migration] No connections to migrate");return}const n=e.map(s=>({...s,email:s.email||void 0,linkedInUrl:s.linkedInUrl||void 0,relationshipType:s.relationshipType||"other",howWeMet:s.howWeMet||void 0,relationshipStrength:s.relationshipStrength||2,notes:s.notes||s.relationshipNotes||"",contactHistory:s.contactHistory||[],dateAdded:s.dateAdded||Date.now(),dateModified:s.dateModified||Date.now()}));await We(n),console.log(`[Migration] Migrated ${n.length} connections to V3 schema`)}function zn(e){return e.map(n=>({id:n.id,url:n.url,company:n.company,companyLogo:void 0,title:n.title,location:n.location,description:n.description,salary:n.salary,status:n.status,priority:Us(n.interest),tags:n.tags||[],notes:n.notes||"",dateAdded:_t(n.dateAdded),dateModified:_t(n.dateAdded),dateApplied:n.dateApplied?_t(n.dateApplied):void 0,nextActionDate:void 0,connectionIds:[]}))}function Us(e){return!e||e<=1?1:e<=3?2:3}function _t(e){if(typeof e=="number")return e;const n=new Date(e).getTime();return isNaN(n)?Date.now():n}async function Ws(){const[e,n,s]=await Promise.all([$e(),ne(),Es()]);return{version:3,exportDate:new Date().toISOString(),postings:e,connections:n,settings:s}}async function Hs(){const e=await Ws(),n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`jobflow-backup-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s)}async function _s(e){try{const n=await e.text(),s=JSON.parse(n);let r;if(s.version===1||!s.version){const a=s.postings||s.applications||[],o=zn(a);r={version:2,exportDate:s.exportDate||new Date().toISOString(),postings:o,connections:s.connections||[],settings:s.settings||{defaultView:"kanban",theme:"light"}}}else r=s;return Array.isArray(r.postings)?{success:!0,data:r,fileName:e.name}:{success:!1,data:null,fileName:e.name,error:"Invalid file format: missing postings array"}}catch(n){return{success:!1,data:null,fileName:e.name,error:n instanceof Error?n.message:"Failed to parse JSON file"}}}function Vs(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.title=="string"&&typeof n.company=="string"&&typeof n.url=="string"&&n.id.length>0&&n.title.length>0}function Ks(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n){const a=s.get(r.id);(!a||r.dateModified>a.dateModified)&&s.set(r.id,r)}return Array.from(s.values())}function Ys(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.name=="string"&&typeof n.company=="string"&&n.id.length>0&&n.name.length>0}function Xs(e){return{id:e.id,name:e.name,email:e.email||void 0,linkedInUrl:e.linkedInUrl||void 0,company:e.company,role:e.role||void 0,relationshipType:e.relationshipType||"other",howWeMet:e.howWeMet||void 0,relationshipStrength:e.relationshipStrength||2,notes:e.notes||e.relationshipNotes||"",lastContactDate:e.lastContactDate||void 0,nextFollowUp:e.nextFollowUp||void 0,contactHistory:e.contactHistory||[],linkedPostingIds:e.linkedPostingIds||[],dateAdded:e.dateAdded||Date.now(),dateModified:e.dateModified||Date.now()}}function Gs(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n)if(Ys(r)){const a=Xs(r),o=s.get(a.id);(!o||a.dateModified>o.dateModified)&&s.set(a.id,a)}return Array.from(s.values())}async function qs(e){var d;const n=[];let s=0;const r=[];for(let u=0;u<e.postings.length;u++){const f=e.postings[u];Vs(f)?r.push({...f,status:f.status||"saved",priority:f.priority||2,tags:f.tags||[],notes:f.notes||"",dateAdded:f.dateAdded||Date.now(),dateModified:f.dateModified||Date.now(),connectionIds:f.connectionIds||[],keywords:f.keywords,keywordsExtractedAt:f.keywordsExtractedAt}):(n.push(`Posting ${u+1}: missing required field (id or title)`),s++)}const[a,o]=await Promise.all([$e(),ne()]),l=Ks(a,r),i=Gs(o,e.connections||[]);return await Promise.all([Ue(l),We(i)]),{success:n.length===0,postings:r.length,connections:((d=e.connections)==null?void 0:d.length)||0,errors:n,skipped:s}}function Js(){return new Promise(e=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=s=>{var a;const r=(a=s.target.files)==null?void 0:a[0];e(r||null)},n.addEventListener("cancel",()=>e(null)),n.click()})}function Qs({className:e=""}){const[n,s]=c.useState(!1),r=async()=>{s(!0);try{await Hs()}catch(a){console.error("Export failed:",a),alert("Failed to export data. Please try again.")}finally{s(!1)}};return t.jsxs("button",{onClick:r,disabled:n,className:`inline-flex items-center gap-2 ${e}`,title:"Export data to JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),n?"Exporting...":"Export Data"]})}function Zs({isOpen:e,parsedFile:n,onConfirm:s,onCancel:r,isImporting:a,importResult:o}){var i;if(!e)return null;const l=d=>{try{return new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return d}};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:a?void 0:r}),t.jsxs("div",{className:"relative w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:o?"Import Complete":"Import Backup"}),n&&!n.success&&t.jsxs("div",{className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700",children:[t.jsx("p",{className:"font-medium",children:"Failed to parse file"}),t.jsx("p",{children:n.error})]}),(n==null?void 0:n.success)&&n.data&&!o&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:"File:"})," ",n.fileName]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:"Exported:"})," ",l(n.data.exportDate)]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Found:"}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-gray-600",children:[t.jsxs("li",{children:[n.data.postings.length," postings"]}),t.jsxs("li",{children:[((i=n.data.connections)==null?void 0:i.length)||0," connections"]})]})]}),t.jsx("div",{className:"rounded-md bg-blue-50 p-3 text-sm text-blue-700",children:t.jsx("p",{children:"Import will merge with existing data. Newer entries will overwrite older ones."})})]}),o&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`rounded-md p-3 text-sm ${o.success?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:t.jsx("p",{className:"font-medium",children:o.success?"Import successful!":"Import completed with warnings"})}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-gray-600",children:[t.jsxs("li",{children:[o.postings," postings imported"]}),t.jsxs("li",{children:[o.connections," connections imported"]}),o.skipped>0&&t.jsxs("li",{className:"text-yellow-600",children:[o.skipped," items skipped"]})]}),o.errors.length>0&&t.jsxs("div",{className:"rounded-md bg-yellow-50 p-3",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Warnings:"}),t.jsxs("ul",{className:"mt-1 list-disc pl-4 text-sm text-yellow-600",children:[o.errors.slice(0,5).map((d,u)=>t.jsx("li",{children:d},u)),o.errors.length>5&&t.jsxs("li",{children:["...and ",o.errors.length-5," more"]})]})]})]}),t.jsx("div",{className:"mt-6 flex justify-end gap-3",children:o?t.jsx("button",{onClick:r,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Done"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:r,disabled:a,className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:s,disabled:a||!(n!=null&&n.success),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:a?"Importing...":"Import"})]})})]})]})}function er({className:e="",onImportComplete:n}){const[s,r]=c.useState(!1),[a,o]=c.useState(null),[l,i]=c.useState(!1),[d,u]=c.useState(null),f=async()=>{const m=await Js();if(!m)return;const h=await _s(m);o(h),u(null),r(!0)},x=async()=>{if(!(!(a!=null&&a.success)||!a.data)){i(!0);try{const m=await qs(a.data);u(m),n==null||n()}catch(m){console.error("Import failed:",m),u({success:!1,postings:0,connections:0,errors:[m instanceof Error?m.message:"Unknown error occurred"],skipped:0})}finally{i(!1)}}},g=()=>{r(!1),o(null),u(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:f,className:`inline-flex items-center gap-2 ${e}`,title:"Import data from JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),t.jsx(Zs,{isOpen:s,parsedFile:a,onConfirm:x,onCancel:g,isImporting:l,importResult:d})]})}function tr({availableTags:e,selectedTags:n,onChange:s}){const[r,a]=c.useState(!1),o=c.useRef(null);c.useEffect(()=>{const d=u=>{o.current&&!o.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const l=d=>{n.includes(d)?s(n.filter(u=>u!==d)):s([...n,d])},i=n.length>0;return t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>a(!r),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${i?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[t.jsx("span",{children:"Tags"}),i&&t.jsx("span",{className:"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white",children:n.length}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:e.length===0?t.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No tags available"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.map(d=>t.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-4 py-2 hover:bg-gray-100",children:[t.jsx("input",{type:"checkbox",checked:n.includes(d),onChange:()=>l(d),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:d})]},d))}),i&&t.jsx("div",{className:"border-t border-gray-100 px-4 py-2",children:t.jsx("button",{onClick:()=>s([]),className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear selection"})})]})})]})}function nr({availableCompanies:e,value:n,onChange:s}){const[r,a]=c.useState(!1),[o,l]=c.useState(n),i=c.useRef(null),d=c.useRef(null);c.useEffect(()=>{l(n)},[n]),c.useEffect(()=>{const h=b=>{d.current&&!d.current.contains(b.target)&&a(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=e.filter(h=>h.toLowerCase().includes(o.toLowerCase())).slice(0,10),f=h=>{const b=h.target.value;l(b),s(b),a(!0)},x=h=>{l(h),s(h),a(!1)},g=()=>{var h;l(""),s(""),(h=i.current)==null||h.focus()},m=n.length>0;return t.jsxs("div",{className:"relative",ref:d,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:i,type:"text",value:o,onChange:f,onFocus:()=>a(!0),placeholder:"Company...",className:`w-36 rounded-md border px-3 py-2 pr-8 text-sm ${m?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),m&&t.jsx("button",{onClick:g,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&u.length>0&&o.length>0&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-full rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:t.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.map(h=>t.jsx("button",{onClick:()=>x(h),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:h},h))})})]})}function sr({fromDate:e,toDate:n,onFromChange:s,onToChange:r}){const a=e!==null||n!==null,o=()=>{s(null),r(null)};return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Date added:"}),t.jsx("input",{type:"date",value:e||"",onChange:l=>s(l.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),t.jsx("span",{className:"text-sm text-gray-500",children:"to"}),t.jsx("input",{type:"date",value:n||"",onChange:l=>r(l.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${n?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),a&&t.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",title:"Clear date range",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function rr({dateFrom:e,dateTo:n,hasDeadline:s,deadlineSoon:r,needsAction:a,hasConnections:o,noConnections:l,onDateFromChange:i,onDateToChange:d,onHasDeadlineChange:u,onDeadlineSoonChange:f,onNeedsActionChange:x,onHasConnectionsChange:g,onNoConnectionsChange:m,onClearAll:h}){const[b,w]=c.useState(!1),y=c.useRef(null);c.useEffect(()=>{const j=D=>{y.current&&!y.current.contains(D.target)&&w(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const k=[e!==null||n!==null,s,r,a,o,l].filter(Boolean).length;return t.jsxs("div",{className:"relative",ref:y,children:[t.jsxs("button",{onClick:()=>w(!b),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${k>0?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),t.jsx("span",{children:"More Filters"}),k>0&&t.jsx("span",{className:"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white",children:k}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${b?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&t.jsx("div",{className:"absolute right-0 z-20 mt-1 w-96 rounded-md bg-white p-4 shadow-lg ring-1 ring-black ring-opacity-5",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(sr,{fromDate:e,toDate:n,onFromChange:i,onToChange:d}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:s,onChange:j=>u(j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Has deadline"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:r,onChange:j=>f(j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Deadline within 7 days"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:j=>x(j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Needs action (stale)"})]})]}),t.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[t.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-gray-500",children:"Networking"}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:j=>{g(j.target.checked),j.target.checked&&m(!1)},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Has connections"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:l,onChange:j=>{m(j.target.checked),j.target.checked&&g(!1)},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"No connections"})]})]})]}),k>0&&t.jsx("div",{className:"border-t border-gray-100 pt-3",children:t.jsx("button",{onClick:()=>{h(),w(!1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all filters"})})]})})]})}const or=[{title:"Global",shortcuts:[{keys:"/",description:"Focus search"},{keys:"⌘K",description:"Focus search (alt)"},{keys:"Esc",description:"Close panel / clear search"},{keys:"?",description:"Show this help"},{keys:"N",description:"New posting"}]},{title:"Status Filter",shortcuts:[{keys:"1",description:"Filter to Saved"},{keys:"2",description:"Filter to In Progress"},{keys:"3",description:"Filter to Applied"},{keys:"4",description:"Filter to Interviewing"},{keys:"5",description:"Filter to Offer"},{keys:"6",description:"Filter to Accepted"},{keys:"7",description:"Filter to Rejected"},{keys:"0",description:"Clear status filter"}]},{title:"Card Navigation",shortcuts:[{keys:"J / ↓",description:"Next card"},{keys:"K / ↑",description:"Previous card"},{keys:"↵",description:"Open detail panel"}]},{title:"Card Actions",shortcuts:[{keys:"S",description:"Cycle priority"},{keys:"O",description:"Open original URL"},{keys:"D",description:"Delete posting"}]}];function ar({isOpen:e,onClose:n}){return c.useEffect(()=>{const s=r=>{r.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,n]),e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),t.jsxs("div",{className:"relative max-h-[80vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white shadow-xl",children:[t.jsxs("div",{className:"sticky top-0 flex items-center justify-between border-b border-gray-200 bg-white px-6 py-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Keyboard Shortcuts"}),t.jsx("button",{onClick:n,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"grid gap-6 p-6 sm:grid-cols-2",children:or.map(s=>t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase text-gray-500",children:s.title}),t.jsx("div",{className:"space-y-2",children:s.shortcuts.map(r=>t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("span",{className:"text-sm text-gray-600",children:r.description}),t.jsx("kbd",{className:"rounded bg-gray-100 px-2 py-1 text-xs font-mono text-gray-700",children:r.keys})]},r.keys))})]},s.title))}),t.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 text-center text-sm text-gray-500",children:["Press ",t.jsx("kbd",{className:"rounded bg-gray-100 px-1.5 py-0.5 font-mono text-xs",children:"Esc"})," to close"]})]})]}):null}const ir=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function lr({searchQuery:e,onSearchChange:n,priorityFilter:s,onPriorityFilterChange:r,currentView:a,onViewChange:o,onAddClick:l,availableTags:i,availableCompanies:d,tagFilters:u,onTagFiltersChange:f,companyFilter:x,onCompanyFilterChange:g,dateFrom:m,dateTo:h,onDateFromChange:b,onDateToChange:w,hasDeadline:y,deadlineSoon:k,needsAction:j,hasConnections:D,noConnections:E,onHasDeadlineChange:C,onDeadlineSoonChange:N,onNeedsActionChange:S,onHasConnectionsChange:R,onNoConnectionsChange:T,onClearAllFilters:A,activeFilterCount:P,searchInputRef:U,statusFilter:O,onStatusFilterChange:ve}){const[ee,z]=c.useState(!1),se=c.useRef(null);return c.useEffect(()=>{const Y=de=>{se.current&&!se.current.contains(de.target)&&z(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),t.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 bg-white px-4 py-3",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"JobFlow"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-64",children:t.jsx(Cs,{value:e,onChange:n,placeholder:"Search jobs... (Press /)",inputRef:U})}),t.jsx(xn,{label:"Priority",options:ir,value:s,onChange:r}),t.jsx(xn,{label:"Status",options:wt.map(Y=>({value:Y,label:Ce[Y]})),value:O,onChange:ve}),t.jsx(tr,{availableTags:i,selectedTags:u,onChange:f}),t.jsx(nr,{availableCompanies:d,value:x,onChange:g}),t.jsx(rr,{dateFrom:m,dateTo:h,hasDeadline:y,deadlineSoon:k,needsAction:j,hasConnections:D,noConnections:E,onDateFromChange:b,onDateToChange:w,onHasDeadlineChange:C,onDeadlineSoonChange:N,onNeedsActionChange:S,onHasConnectionsChange:R,onNoConnectionsChange:T,onClearAll:A}),P>0&&t.jsxs("button",{onClick:A,className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm text-blue-600 hover:bg-blue-50",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear all (",P,")"]}),t.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[t.jsx("button",{onClick:()=>o("kanban"),className:`px-3 py-2 text-sm ${a==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),t.jsx("button",{onClick:()=>o("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${a==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),t.jsxs("div",{className:"relative",ref:se,children:[t.jsx("button",{onClick:()=>z(!ee),className:"rounded-md border border-gray-300 p-2 text-gray-600 hover:bg-gray-50",title:"Settings (? for shortcuts)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),ee&&t.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[t.jsx(Qs,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"}),t.jsx(er,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onImportComplete:()=>z(!1)})]})]}),t.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",title:"Add new posting (N)",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})}const cr={saved:"bg-blue-500",in_progress:"bg-orange-500",applied:"bg-green-500",interviewing:"bg-purple-500",offer:"bg-yellow-500",accepted:"bg-emerald-500",rejected:"bg-gray-400",withdrawn:"bg-gray-400"};function bt({icon:e,label:n,value:s,color:r="text-gray-600"}){return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`${r}`,children:e}),t.jsxs("div",{children:[t.jsx("span",{className:"text-lg font-semibold text-gray-900",children:s}),t.jsx("span",{className:"ml-1 text-sm text-gray-500",children:n})]})]})}function dr({status:e,count:n,total:s}){const r=s>0?n/s*100:0;return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-24 text-sm text-gray-600",children:Ce[e]}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"h-4 overflow-hidden rounded-full bg-gray-100",children:t.jsx("div",{className:`h-full ${cr[e]} transition-all duration-300`,style:{width:`${r}%`}})})}),t.jsx("span",{className:"w-8 text-right text-sm font-medium text-gray-700",children:n})]})}function ur({stats:e,expanded:n,onExpandedChange:s}){return t.jsxs("div",{className:"border-b border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx(bt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"total",value:e.total}),t.jsx(bt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"active",value:e.active,color:"text-blue-600"}),t.jsx(bt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),label:"this week",value:e.thisWeek,color:"text-green-600"}),e.stale>0&&t.jsx(bt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),label:"stale",value:e.stale,color:"text-orange-600"})]}),t.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-1 rounded px-2 py-1 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:[t.jsx("span",{children:n?"Hide":"Details"}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&t.jsxs("div",{className:"border-t border-gray-100 px-4 py-3",children:[t.jsx("h4",{className:"mb-3 text-sm font-medium text-gray-500",children:"BY STATUS"}),t.jsx("div",{className:"space-y-2",children:wt.map(r=>t.jsx(dr,{status:r,count:e.byStatus[r],total:e.total},r))})]})]})}const Mt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function He(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function tn(e){return"nodeType"in e}function Z(e){var n,s;return e?He(e)?e:tn(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function nn(e){const{Document:n}=Z(e);return e instanceof n}function lt(e){return He(e)?!1:e instanceof Z(e).HTMLElement}function Bn(e){return e instanceof Z(e).SVGElement}function _e(e){return e?He(e)?e.document:tn(e)?nn(e)?e:lt(e)||Bn(e)?e.ownerDocument:document:document:document}const Se=Mt?c.useLayoutEffect:c.useEffect;function Rt(e){const n=c.useRef(e);return Se(()=>{n.current=e}),c.useCallback(function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return n.current==null?void 0:n.current(...r)},[])}function hr(){const e=c.useRef(null),n=c.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),s=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ot(e,n){n===void 0&&(n=[e]);const s=c.useRef(e);return Se(()=>{s.current!==e&&(s.current=e)},n),s}function ct(e,n){const s=c.useRef();return c.useMemo(()=>{const r=e(s.current);return s.current=r,r},[...n])}function Nt(e){const n=Rt(e),s=c.useRef(null),r=c.useCallback(a=>{a!==s.current&&(n==null||n(a,s.current)),s.current=a},[]);return[s,r]}function kt(e){const n=c.useRef();return c.useEffect(()=>{n.current=e},[e]),n.current}let Vt={};function At(e,n){return c.useMemo(()=>{if(n)return n;const s=Vt[e]==null?0:Vt[e]+1;return Vt[e]=s,e+"-"+s},[e,n])}function $n(e){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return r.reduce((o,l)=>{const i=Object.entries(l);for(const[d,u]of i){const f=o[d];f!=null&&(o[d]=f+e*u)}return o},{...n})}}const ze=$n(1),at=$n(-1);function fr(e){return"clientX"in e&&"clientY"in e}function sn(e){if(!e)return!1;const{KeyboardEvent:n}=Z(e.target);return n&&e instanceof n}function xr(e){if(!e)return!1;const{TouchEvent:n}=Z(e.target);return n&&e instanceof n}function Ct(e){if(xr(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return fr(e)?{x:e.clientX,y:e.clientY}:null}const Be=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Be.Translate.toString(e),Be.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:r}=e;return n+" "+s+"ms "+r}}}),bn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mr(e){return e.matches(bn)?e:e.querySelector(bn)}const gr={display:"none"};function pr(e){let{id:n,value:s}=e;return F.createElement("div",{id:n,style:gr},s)}function yr(e){let{id:n,announcement:s,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return F.createElement("div",{id:n,style:a,role:"status","aria-live":r,"aria-atomic":!0},s)}function br(){const[e,n]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&n(r)},[]),announcement:e}}const Un=c.createContext(null);function vr(e){const n=c.useContext(Un);c.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function wr(){const[e]=c.useState(()=>new Set),n=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:a,event:o}=r;e.forEach(l=>{var i;return(i=l[a])==null?void 0:i.call(l,o)})},[e]),n]}const jr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Nr={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function kr(e){let{announcements:n=Nr,container:s,hiddenTextDescribedById:r,screenReaderInstructions:a=jr}=e;const{announce:o,announcement:l}=br(),i=At("DndLiveRegion"),[d,u]=c.useState(!1);if(c.useEffect(()=>{u(!0)},[]),vr(c.useMemo(()=>({onDragStart(x){let{active:g}=x;o(n.onDragStart({active:g}))},onDragMove(x){let{active:g,over:m}=x;n.onDragMove&&o(n.onDragMove({active:g,over:m}))},onDragOver(x){let{active:g,over:m}=x;o(n.onDragOver({active:g,over:m}))},onDragEnd(x){let{active:g,over:m}=x;o(n.onDragEnd({active:g,over:m}))},onDragCancel(x){let{active:g,over:m}=x;o(n.onDragCancel({active:g,over:m}))}}),[o,n])),!d)return null;const f=F.createElement(F.Fragment,null,F.createElement(pr,{id:r,value:a.draggable}),F.createElement(yr,{id:i,announcement:l}));return s?tt.createPortal(f,s):f}var _;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(_||(_={}));function St(){}function vn(e,n){return c.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Cr(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return c.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const me=Object.freeze({x:0,y:0});function Wn(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Sr(e,n){const s=Ct(e);if(!s)return"0 0";const r={x:(s.x-n.left)/n.width*100,y:(s.y-n.top)/n.height*100};return r.x+"% "+r.y+"%"}function Hn(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return s-r}function Dr(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return r-s}function wn(e){let{left:n,top:s,height:r,width:a}=e;return[{x:n,y:s},{x:n+a,y:s},{x:n,y:s+r},{x:n+a,y:s+r}]}function _n(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function jn(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const Lr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const a=jn(n,n.left,n.top),o=[];for(const l of r){const{id:i}=l,d=s.get(i);if(d){const u=Wn(jn(d),a);o.push({id:i,data:{droppableContainer:l,value:u}})}}return o.sort(Hn)},Er=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const a=wn(n),o=[];for(const l of r){const{id:i}=l,d=s.get(i);if(d){const u=wn(d),f=a.reduce((g,m,h)=>g+Wn(u[h],m),0),x=Number((f/4).toFixed(4));o.push({id:i,data:{droppableContainer:l,value:x}})}}return o.sort(Hn)};function Mr(e,n){const s=Math.max(n.top,e.top),r=Math.max(n.left,e.left),a=Math.min(n.left+n.width,e.left+e.width),o=Math.min(n.top+n.height,e.top+e.height),l=a-r,i=o-s;if(r<a&&s<o){const d=n.width*n.height,u=e.width*e.height,f=l*i,x=f/(d+u-f);return Number(x.toFixed(4))}return 0}const Rr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const a=[];for(const o of r){const{id:l}=o,i=s.get(l);if(i){const d=Mr(i,n);d>0&&a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(Dr)};function Ar(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function Vn(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:me}function Ir(e){return function(s){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce((l,i)=>({...l,top:l.top+e*i.y,bottom:l.bottom+e*i.y,left:l.left+e*i.x,right:l.right+e*i.x}),{...s})}}const Or=Ir(1);function Kn(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Tr(e,n,s){const r=Kn(n);if(!r)return e;const{scaleX:a,scaleY:o,x:l,y:i}=r,d=e.left-l-(1-a)*parseFloat(s),u=e.top-i-(1-o)*parseFloat(s.slice(s.indexOf(" ")+1)),f=a?e.width/a:e.width,x=o?e.height/o:e.height;return{width:f,height:x,top:u,right:d+f,bottom:u+x,left:d}}const Pr={ignoreTransform:!1};function dt(e,n){n===void 0&&(n=Pr);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:u,transformOrigin:f}=Z(e).getComputedStyle(e);u&&(s=Tr(s,u,f))}const{top:r,left:a,width:o,height:l,bottom:i,right:d}=s;return{top:r,left:a,width:o,height:l,bottom:i,right:d}}function Nn(e){return dt(e,{ignoreTransform:!0})}function Fr(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function zr(e,n){return n===void 0&&(n=Z(e).getComputedStyle(e)),n.position==="fixed"}function Br(e,n){n===void 0&&(n=Z(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=n[a];return typeof o=="string"?s.test(o):!1})}function It(e,n){const s=[];function r(a){if(n!=null&&s.length>=n||!a)return s;if(nn(a)&&a.scrollingElement!=null&&!s.includes(a.scrollingElement))return s.push(a.scrollingElement),s;if(!lt(a)||Bn(a)||s.includes(a))return s;const o=Z(e).getComputedStyle(a);return a!==e&&Br(a,o)&&s.push(a),zr(a,o)?s:r(a.parentNode)}return e?r(e):s}function Yn(e){const[n]=It(e,1);return n??null}function Kt(e){return!Mt||!e?null:He(e)?e:tn(e)?nn(e)||e===_e(e).scrollingElement?window:lt(e)?e:null:null}function Xn(e){return He(e)?e.scrollX:e.scrollLeft}function Gn(e){return He(e)?e.scrollY:e.scrollTop}function Jt(e){return{x:Xn(e),y:Gn(e)}}var V;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(V||(V={}));function qn(e){return!Mt||!e?!1:e===document.scrollingElement}function Jn(e){const n={x:0,y:0},s=qn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},a=e.scrollTop<=n.y,o=e.scrollLeft<=n.x,l=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:a,isLeft:o,isBottom:l,isRight:i,maxScroll:r,minScroll:n}}const $r={x:.2,y:.2};function Ur(e,n,s,r,a){let{top:o,left:l,right:i,bottom:d}=s;r===void 0&&(r=10),a===void 0&&(a=$r);const{isTop:u,isBottom:f,isLeft:x,isRight:g}=Jn(e),m={x:0,y:0},h={x:0,y:0},b={height:n.height*a.y,width:n.width*a.x};return!u&&o<=n.top+b.height?(m.y=V.Backward,h.y=r*Math.abs((n.top+b.height-o)/b.height)):!f&&d>=n.bottom-b.height&&(m.y=V.Forward,h.y=r*Math.abs((n.bottom-b.height-d)/b.height)),!g&&i>=n.right-b.width?(m.x=V.Forward,h.x=r*Math.abs((n.right-b.width-i)/b.width)):!x&&l<=n.left+b.width&&(m.x=V.Backward,h.x=r*Math.abs((n.left+b.width-l)/b.width)),{direction:m,speed:h}}function Wr(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:n,left:s,right:r,bottom:a}=e.getBoundingClientRect();return{top:n,left:s,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Qn(e){return e.reduce((n,s)=>ze(n,Jt(s)),me)}function Hr(e){return e.reduce((n,s)=>n+Xn(s),0)}function _r(e){return e.reduce((n,s)=>n+Gn(s),0)}function Zn(e,n){if(n===void 0&&(n=dt),!e)return;const{top:s,left:r,bottom:a,right:o}=n(e);Yn(e)&&(a<=0||o<=0||s>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Vr=[["x",["left","right"],Hr],["y",["top","bottom"],_r]];class rn{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=It(s),a=Qn(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[o,l,i]of Vr)for(const d of l)Object.defineProperty(this,d,{get:()=>{const u=i(r),f=a[o]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class nt{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...s)})},this.target=n}add(n,s,r){var a;(a=this.target)==null||a.addEventListener(n,s,r),this.listeners.push([n,s,r])}}function Kr(e){const{EventTarget:n}=Z(e);return e instanceof n?e:_e(e)}function Yt(e,n){const s=Math.abs(e.x),r=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+r**2)>n:"x"in n&&"y"in n?s>n.x&&r>n.y:"x"in n?s>n.x:"y"in n?r>n.y:!1}var ce;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ce||(ce={}));function kn(e){e.preventDefault()}function Yr(e){e.stopPropagation()}var M;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(M||(M={}));const es={start:[M.Space,M.Enter],cancel:[M.Esc],end:[M.Space,M.Enter,M.Tab]},Xr=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case M.Right:return{...s,x:s.x+25};case M.Left:return{...s,x:s.x-25};case M.Down:return{...s,y:s.y+25};case M.Up:return{...s,y:s.y-25}}};class on{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new nt(_e(s)),this.windowListeners=new nt(Z(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ce.Resize,this.handleCancel),this.windowListeners.add(ce.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ce.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,r=n.node.current;r&&Zn(r),s(me)}handleKeyDown(n){if(sn(n)){const{active:s,context:r,options:a}=this.props,{keyboardCodes:o=es,coordinateGetter:l=Xr,scrollBehavior:i="smooth"}=a,{code:d}=n;if(o.end.includes(d)){this.handleEnd(n);return}if(o.cancel.includes(d)){this.handleCancel(n);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:me;this.referenceCoordinates||(this.referenceCoordinates=f);const x=l(n,{active:s,context:r.current,currentCoordinates:f});if(x){const g=at(x,f),m={x:0,y:0},{scrollableAncestors:h}=r.current;for(const b of h){const w=n.code,{isTop:y,isRight:k,isLeft:j,isBottom:D,maxScroll:E,minScroll:C}=Jn(b),N=Wr(b),S={x:Math.min(w===M.Right?N.right-N.width/2:N.right,Math.max(w===M.Right?N.left:N.left+N.width/2,x.x)),y:Math.min(w===M.Down?N.bottom-N.height/2:N.bottom,Math.max(w===M.Down?N.top:N.top+N.height/2,x.y))},R=w===M.Right&&!k||w===M.Left&&!j,T=w===M.Down&&!D||w===M.Up&&!y;if(R&&S.x!==x.x){const A=b.scrollLeft+g.x,P=w===M.Right&&A<=E.x||w===M.Left&&A>=C.x;if(P&&!g.y){b.scrollTo({left:A,behavior:i});return}P?m.x=b.scrollLeft-A:m.x=w===M.Right?b.scrollLeft-E.x:b.scrollLeft-C.x,m.x&&b.scrollBy({left:-m.x,behavior:i});break}else if(T&&S.y!==x.y){const A=b.scrollTop+g.y,P=w===M.Down&&A<=E.y||w===M.Up&&A>=C.y;if(P&&!g.x){b.scrollTo({top:A,behavior:i});return}P?m.y=b.scrollTop-A:m.y=w===M.Down?b.scrollTop-E.y:b.scrollTop-C.y,m.y&&b.scrollBy({top:-m.y,behavior:i});break}}this.handleMove(n,ze(at(x,this.referenceCoordinates),m))}}}handleMove(n,s){const{onMove:r}=this.props;n.preventDefault(),r(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}on.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:r=es,onActivation:a}=n,{active:o}=s;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Cn(e){return!!(e&&"distance"in e)}function Sn(e){return!!(e&&"delay"in e)}class an{constructor(n,s,r){var a;r===void 0&&(r=Kr(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:o}=n,{target:l}=o;this.props=n,this.events=s,this.document=_e(l),this.documentListeners=new nt(this.document),this.listeners=new nt(r),this.windowListeners=new nt(Z(l)),this.initialCoordinates=(a=Ct(o))!=null?a:me,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(ce.Resize,this.handleCancel),this.windowListeners.add(ce.DragStart,kn),this.windowListeners.add(ce.VisibilityChange,this.handleCancel),this.windowListeners.add(ce.ContextMenu,kn),this.documentListeners.add(ce.Keydown,this.handleKeydown),s){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Sn(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(Cn(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:r,onPending:a}=this.props;a(r,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(ce.Click,Yr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ce.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:r,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:i}}=o;if(!a)return;const d=(s=Ct(n))!=null?s:me,u=at(a,d);if(!r&&i){if(Cn(i)){if(i.tolerance!=null&&Yt(u,i.tolerance))return this.handleCancel();if(Yt(u,i.distance))return this.handleStart()}if(Sn(i)&&Yt(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}n.cancelable&&n.preventDefault(),l(d)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===M.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const Gr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ln extends an{constructor(n){const{event:s}=n,r=_e(s.target);super(n,Gr,r)}}ln.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return!s.isPrimary||s.button!==0?!1:(r==null||r({event:s}),!0)}}];const qr={move:{name:"mousemove"},end:{name:"mouseup"}};var Qt;(function(e){e[e.RightClick=2]="RightClick"})(Qt||(Qt={}));class Jr extends an{constructor(n){super(n,qr,_e(n.event.target))}}Jr.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return s.button===Qt.RightClick?!1:(r==null||r({event:s}),!0)}}];const Xt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Qr extends an{constructor(n){super(n,Xt)}static setup(){return window.addEventListener(Xt.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Xt.move.name,n)};function n(){}}}Qr.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;const{touches:a}=s;return a.length>1?!1:(r==null||r({event:s}),!0)}}];var st;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(st||(st={}));var Dt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Dt||(Dt={}));function Zr(e){let{acceleration:n,activator:s=st.Pointer,canScroll:r,draggingRect:a,enabled:o,interval:l=5,order:i=Dt.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:x,threshold:g}=e;const m=to({delta:x,disabled:!o}),[h,b]=hr(),w=c.useRef({x:0,y:0}),y=c.useRef({x:0,y:0}),k=c.useMemo(()=>{switch(s){case st.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case st.DraggableRect:return a}},[s,a,d]),j=c.useRef(null),D=c.useCallback(()=>{const C=j.current;if(!C)return;const N=w.current.x*y.current.x,S=w.current.y*y.current.y;C.scrollBy(N,S)},[]),E=c.useMemo(()=>i===Dt.TreeOrder?[...u].reverse():u,[i,u]);c.useEffect(()=>{if(!o||!u.length||!k){b();return}for(const C of E){if((r==null?void 0:r(C))===!1)continue;const N=u.indexOf(C),S=f[N];if(!S)continue;const{direction:R,speed:T}=Ur(C,S,k,n,g);for(const A of["x","y"])m[A][R[A]]||(T[A]=0,R[A]=0);if(T.x>0||T.y>0){b(),j.current=C,h(D,l),w.current=T,y.current=R;return}}w.current={x:0,y:0},y.current={x:0,y:0},b()},[n,D,r,b,o,l,JSON.stringify(k),JSON.stringify(m),h,u,E,f,JSON.stringify(g)])}const eo={x:{[V.Backward]:!1,[V.Forward]:!1},y:{[V.Backward]:!1,[V.Forward]:!1}};function to(e){let{delta:n,disabled:s}=e;const r=kt(n);return ct(a=>{if(s||!r||!a)return eo;const o={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[V.Backward]:a.x[V.Backward]||o.x===-1,[V.Forward]:a.x[V.Forward]||o.x===1},y:{[V.Backward]:a.y[V.Backward]||o.y===-1,[V.Forward]:a.y[V.Forward]||o.y===1}}},[s,n,r])}function no(e,n){const s=n!=null?e.get(n):void 0,r=s?s.node.current:null;return ct(a=>{var o;return n==null?null:(o=r??a)!=null?o:null},[r,n])}function so(e,n){return c.useMemo(()=>e.reduce((s,r)=>{const{sensor:a}=r,o=a.activators.map(l=>({eventName:l.eventName,handler:n(l.handler,r)}));return[...s,...o]},[]),[e,n])}var it;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(it||(it={}));var Zt;(function(e){e.Optimized="optimized"})(Zt||(Zt={}));const Dn=new Map;function ro(e,n){let{dragging:s,dependencies:r,config:a}=n;const[o,l]=c.useState(null),{frequency:i,measure:d,strategy:u}=a,f=c.useRef(e),x=w(),g=ot(x),m=c.useCallback(function(y){y===void 0&&(y=[]),!g.current&&l(k=>k===null?y:k.concat(y.filter(j=>!k.includes(j))))},[g]),h=c.useRef(null),b=ct(y=>{if(x&&!s)return Dn;if(!y||y===Dn||f.current!==e||o!=null){const k=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){k.set(j.id,j.rect.current);continue}const D=j.node.current,E=D?new rn(d(D),D):null;j.rect.current=E,E&&k.set(j.id,E)}return k}return y},[e,o,s,x,d]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{x||m()},[s,x]),c.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),c.useEffect(()=>{x||typeof i!="number"||h.current!==null||(h.current=setTimeout(()=>{m(),h.current=null},i))},[i,x,m,...r]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:o!=null};function w(){switch(u){case it.Always:return!1;case it.BeforeDragging:return s;default:return!s}}}function cn(e,n){return ct(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function oo(e,n){return cn(e,n)}function ao(e){let{callback:n,disabled:s}=e;const r=Rt(n),a=c.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,s]);return c.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Ot(e){let{callback:n,disabled:s}=e;const r=Rt(n),a=c.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[s]);return c.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function io(e){return new rn(dt(e),e)}function Ln(e,n,s){n===void 0&&(n=io);const[r,a]=c.useState(null);function o(){a(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??s)!=null?u:null}const f=n(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const l=ao({callback(d){if(e)for(const u of d){const{type:f,target:x}=u;if(f==="childList"&&x instanceof HTMLElement&&x.contains(e)){o();break}}}}),i=Ot({callback:o});return Se(()=>{o(),e?(i==null||i.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),l==null||l.disconnect())},[e]),r}function lo(e){const n=cn(e);return Vn(e,n)}const En=[];function co(e){const n=c.useRef(e),s=ct(r=>e?r&&r!==En&&e&&n.current&&e.parentNode===n.current.parentNode?r:It(e):En,[e]);return c.useEffect(()=>{n.current=e},[e]),s}function uo(e){const[n,s]=c.useState(null),r=c.useRef(e),a=c.useCallback(o=>{const l=Kt(o.target);l&&s(i=>i?(i.set(l,Jt(l)),new Map(i)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){l(o);const i=e.map(d=>{const u=Kt(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Jt(u)]):null}).filter(d=>d!=null);s(i.length?new Map(i):null),r.current=e}return()=>{l(e),l(o)};function l(i){i.forEach(d=>{const u=Kt(d);u==null||u.removeEventListener("scroll",a)})}},[a,e]),c.useMemo(()=>e.length?n?Array.from(n.values()).reduce((o,l)=>ze(o,l),me):Qn(e):me,[e,n])}function Mn(e,n){n===void 0&&(n=[]);const s=c.useRef(null);return c.useEffect(()=>{s.current=null},n),c.useEffect(()=>{const r=e!==me;r&&!s.current&&(s.current=e),!r&&s.current&&(s.current=null)},[e]),s.current?at(e,s.current):me}function ho(e){c.useEffect(()=>{if(!Mt)return;const n=e.map(s=>{let{sensor:r}=s;return r.setup==null?void 0:r.setup()});return()=>{for(const s of n)s==null||s()}},e.map(n=>{let{sensor:s}=n;return s}))}function fo(e,n){return c.useMemo(()=>e.reduce((s,r)=>{let{eventName:a,handler:o}=r;return s[a]=l=>{o(l,n)},s},{}),[e,n])}function ts(e){return c.useMemo(()=>e?Fr(e):null,[e])}const Rn=[];function xo(e,n){n===void 0&&(n=dt);const[s]=e,r=ts(s?Z(s):null),[a,o]=c.useState(Rn);function l(){o(()=>e.length?e.map(d=>qn(d)?r:new rn(n(d),d)):Rn)}const i=Ot({callback:l});return Se(()=>{i==null||i.disconnect(),l(),e.forEach(d=>i==null?void 0:i.observe(d))},[e]),a}function ns(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return lt(n)?n:e}function mo(e){let{measure:n}=e;const[s,r]=c.useState(null),a=c.useCallback(u=>{for(const{target:f}of u)if(lt(f)){r(x=>{const g=n(f);return x?{...x,width:g.width,height:g.height}:g});break}},[n]),o=Ot({callback:a}),l=c.useCallback(u=>{const f=ns(u);o==null||o.disconnect(),f&&(o==null||o.observe(f)),r(f?n(f):null)},[n,o]),[i,d]=Nt(l);return c.useMemo(()=>({nodeRef:i,rect:s,setRef:d}),[s,i,d])}const go=[{sensor:ln,options:{}},{sensor:on,options:{}}],po={current:{}},vt={draggable:{measure:Nn},droppable:{measure:Nn,strategy:it.WhileDragging,frequency:Zt.Optimized},dragOverlay:{measure:dt}};class rt extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,r;return(s=(r=this.get(n))==null?void 0:r.node.current)!=null?s:void 0}}const yo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:St},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:vt,measureDroppableContainers:St,windowRect:null,measuringScheduled:!1},ss={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:St,draggableNodes:new Map,over:null,measureDroppableContainers:St},ut=c.createContext(ss),rs=c.createContext(yo);function bo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rt}}}function vo(e,n){switch(n.type){case _.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case _.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case _.DragEnd:case _.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _.RegisterDroppable:{const{element:s}=n,{id:r}=s,a=new rt(e.droppable.containers);return a.set(r,s),{...e,droppable:{...e.droppable,containers:a}}}case _.SetDroppableDisabled:{const{id:s,key:r,disabled:a}=n,o=e.droppable.containers.get(s);if(!o||r!==o.key)return e;const l=new rt(e.droppable.containers);return l.set(s,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case _.UnregisterDroppable:{const{id:s,key:r}=n,a=e.droppable.containers.get(s);if(!a||r!==a.key)return e;const o=new rt(e.droppable.containers);return o.delete(s),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function wo(e){let{disabled:n}=e;const{active:s,activatorEvent:r,draggableNodes:a}=c.useContext(ut),o=kt(r),l=kt(s==null?void 0:s.id);return c.useEffect(()=>{if(!n&&!r&&o&&l!=null){if(!sn(o)||document.activeElement===o.target)return;const i=a.get(l);if(!i)return;const{activatorNode:d,node:u}=i;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const x=mr(f);if(x){x.focus();break}}})}},[r,n,a,l,o]),null}function os(e,n){let{transform:s,...r}=n;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...r}),s):s}function jo(e){return c.useMemo(()=>({draggable:{...vt.draggable,...e==null?void 0:e.draggable},droppable:{...vt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...vt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function No(e){let{activeNode:n,measure:s,initialRect:r,config:a=!0}=e;const o=c.useRef(!1),{x:l,y:i}=typeof a=="boolean"?{x:a,y:a}:a;Se(()=>{if(!l&&!i||!n){o.current=!1;return}if(o.current||!r)return;const u=n==null?void 0:n.node.current;if(!u||u.isConnected===!1)return;const f=s(u),x=Vn(f,r);if(l||(x.x=0),i||(x.y=0),o.current=!0,Math.abs(x.x)>0||Math.abs(x.y)>0){const g=Yn(u);g&&g.scrollBy({top:x.y,left:x.x})}},[n,l,i,r,s])}const Tt=c.createContext({...me,scaleX:1,scaleY:1});var Ae;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ae||(Ae={}));const ko=c.memo(function(n){var s,r,a,o;let{id:l,accessibility:i,autoScroll:d=!0,children:u,sensors:f=go,collisionDetection:x=Rr,measuring:g,modifiers:m,...h}=n;const b=c.useReducer(vo,void 0,bo),[w,y]=b,[k,j]=wr(),[D,E]=c.useState(Ae.Uninitialized),C=D===Ae.Initialized,{draggable:{active:N,nodes:S,translate:R},droppable:{containers:T}}=w,A=N!=null?S.get(N):null,P=c.useRef({initial:null,translated:null}),U=c.useMemo(()=>{var B;return N!=null?{id:N,data:(B=A==null?void 0:A.data)!=null?B:po,rect:P}:null},[N,A]),O=c.useRef(null),[ve,ee]=c.useState(null),[z,se]=c.useState(null),Y=ot(h,Object.values(h)),de=At("DndDescribedBy",l),Ve=c.useMemo(()=>T.getEnabled(),[T]),re=jo(g),{droppableRects:we,measureDroppableContainers:ge,measuringScheduled:Ke}=ro(Ve,{dragging:C,dependencies:[R.x,R.y],config:re.droppable}),K=no(S,N),Ye=c.useMemo(()=>z?Ct(z):null,[z]),De=Ut(),Xe=oo(K,re.draggable.measure);No({activeNode:N!=null?S.get(N):null,config:De.layoutShiftCompensation,initialRect:Xe,measure:re.draggable.measure});const oe=Ln(K,re.draggable.measure,Xe),Oe=Ln(K?K.parentElement:null),te=c.useRef({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:we,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=T.getNodeFor((s=te.current.over)==null?void 0:s.id),pe=mo({measure:re.dragOverlay.measure}),Te=(r=pe.nodeRef.current)!=null?r:K,je=C?(a=pe.rect)!=null?a:oe:null,ht=!!(pe.nodeRef.current&&pe.rect),Ge=lo(ht?null:oe),qe=ts(Te?Z(Te):null),ye=co(C?ae??K:null),ue=xo(ye),Pe=os(m,{transform:{x:R.x-Ge.x,y:R.y-Ge.y,scaleX:1,scaleY:1},activatorEvent:z,active:U,activeNodeRect:oe,containerNodeRect:Oe,draggingNodeRect:je,over:te.current.over,overlayNodeRect:pe.rect,scrollableAncestors:ye,scrollableAncestorRects:ue,windowRect:qe}),ft=Ye?ze(Ye,R):null,xt=uo(ye),Pt=Mn(xt),Ft=Mn(xt,[oe]),Le=ze(Pe,Pt),G=je?Or(je,Pe):null,Ie=U&&G?x({active:U,collisionRect:G,droppableRects:we,droppableContainers:Ve,pointerCoordinates:ft}):null,mt=_n(Ie,"id"),[he,gt]=c.useState(null),zt=ht?Pe:ze(Pe,Ft),Bt=Ar(zt,(o=he==null?void 0:he.rect)!=null?o:null,oe),Ee=c.useRef(null),Je=c.useCallback((B,q)=>{let{sensor:J,options:be}=q;if(O.current==null)return;const Q=S.get(O.current);if(!Q)return;const X=B.nativeEvent,le=new J({active:O.current,activeNode:Q,event:X,options:be,context:te,onAbort(W){if(!S.get(W))return;const{onDragAbort:ie}=Y.current,xe={id:W};ie==null||ie(xe),k({type:"onDragAbort",event:xe})},onPending(W,fe,ie,xe){if(!S.get(W))return;const{onDragPending:Ne}=Y.current,H={id:W,constraint:fe,initialCoordinates:ie,offset:xe};Ne==null||Ne(H),k({type:"onDragPending",event:H})},onStart(W){const fe=O.current;if(fe==null)return;const ie=S.get(fe);if(!ie)return;const{onDragStart:xe}=Y.current,Re={activatorEvent:X,active:{id:fe,data:ie.data,rect:P}};tt.unstable_batchedUpdates(()=>{xe==null||xe(Re),E(Ae.Initializing),y({type:_.DragStart,initialCoordinates:W,active:fe}),k({type:"onDragStart",event:Re}),ee(Ee.current),se(X)})},onMove(W){y({type:_.DragMove,coordinates:W})},onEnd:Me(_.DragEnd),onCancel:Me(_.DragCancel)});Ee.current=le;function Me(W){return async function(){const{active:ie,collisions:xe,over:Re,scrollAdjustedTranslate:Ne}=te.current;let H=null;if(ie&&Ne){const{cancelDrop:p}=Y.current;H={activatorEvent:X,active:ie,collisions:xe,delta:Ne,over:Re},W===_.DragEnd&&typeof p=="function"&&await Promise.resolve(p(H))&&(W=_.DragCancel)}O.current=null,tt.unstable_batchedUpdates(()=>{y({type:W}),E(Ae.Uninitialized),gt(null),ee(null),se(null),Ee.current=null;const p=W===_.DragEnd?"onDragEnd":"onDragCancel";if(H){const v=Y.current[p];v==null||v(H),k({type:p,event:H})}})}}},[S]),Qe=c.useCallback((B,q)=>(J,be)=>{const Q=J.nativeEvent,X=S.get(be);if(O.current!==null||!X||Q.dndKit||Q.defaultPrevented)return;const le={active:X};B(J,q.options,le)===!0&&(Q.dndKit={capturedBy:q.sensor},O.current=be,Je(J,q))},[S,Je]),Ze=so(f,Qe);ho(f),Se(()=>{oe&&D===Ae.Initializing&&E(Ae.Initialized)},[oe,D]),c.useEffect(()=>{const{onDragMove:B}=Y.current,{active:q,activatorEvent:J,collisions:be,over:Q}=te.current;if(!q||!J)return;const X={active:q,activatorEvent:J,collisions:be,delta:{x:Le.x,y:Le.y},over:Q};tt.unstable_batchedUpdates(()=>{B==null||B(X),k({type:"onDragMove",event:X})})},[Le.x,Le.y]),c.useEffect(()=>{const{active:B,activatorEvent:q,collisions:J,droppableContainers:be,scrollAdjustedTranslate:Q}=te.current;if(!B||O.current==null||!q||!Q)return;const{onDragOver:X}=Y.current,le=be.get(mt),Me=le&&le.rect.current?{id:le.id,rect:le.rect.current,data:le.data,disabled:le.disabled}:null,W={active:B,activatorEvent:q,collisions:J,delta:{x:Q.x,y:Q.y},over:Me};tt.unstable_batchedUpdates(()=>{gt(Me),X==null||X(W),k({type:"onDragOver",event:W})})},[mt]),Se(()=>{te.current={activatorEvent:z,active:U,activeNode:K,collisionRect:G,collisions:Ie,droppableRects:we,draggableNodes:S,draggingNode:Te,draggingNodeRect:je,droppableContainers:T,over:he,scrollableAncestors:ye,scrollAdjustedTranslate:Le},P.current={initial:je,translated:G}},[U,K,Ie,G,S,Te,je,we,T,he,ye,Le]),Zr({...De,delta:R,draggingRect:G,pointerCoordinates:ft,scrollableAncestors:ye,scrollableAncestorRects:ue});const $t=c.useMemo(()=>({active:U,activeNode:K,activeNodeRect:oe,activatorEvent:z,collisions:Ie,containerNodeRect:Oe,dragOverlay:pe,draggableNodes:S,droppableContainers:T,droppableRects:we,over:he,measureDroppableContainers:ge,scrollableAncestors:ye,scrollableAncestorRects:ue,measuringConfiguration:re,measuringScheduled:Ke,windowRect:qe}),[U,K,oe,z,Ie,Oe,pe,S,T,we,he,ge,ye,ue,re,Ke,qe]),Fe=c.useMemo(()=>({activatorEvent:z,activators:Ze,active:U,activeNodeRect:oe,ariaDescribedById:{draggable:de},dispatch:y,draggableNodes:S,over:he,measureDroppableContainers:ge}),[z,Ze,U,oe,y,de,S,he,ge]);return F.createElement(Un.Provider,{value:j},F.createElement(ut.Provider,{value:Fe},F.createElement(rs.Provider,{value:$t},F.createElement(Tt.Provider,{value:Bt},u)),F.createElement(wo,{disabled:(i==null?void 0:i.restoreFocus)===!1})),F.createElement(kr,{...i,hiddenTextDescribedById:de}));function Ut(){const B=(ve==null?void 0:ve.autoScrollEnabled)===!1,q=typeof d=="object"?d.enabled===!1:d===!1,J=C&&!B&&!q;return typeof d=="object"?{...d,enabled:J}:{enabled:J}}}),Co=c.createContext(null),An="button",So="Draggable";function Do(e){let{id:n,data:s,disabled:r=!1,attributes:a}=e;const o=At(So),{activators:l,activatorEvent:i,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:x,over:g}=c.useContext(ut),{role:m=An,roleDescription:h="draggable",tabIndex:b=0}=a??{},w=(d==null?void 0:d.id)===n,y=c.useContext(w?Tt:Co),[k,j]=Nt(),[D,E]=Nt(),C=fo(l,n),N=ot(s);Se(()=>(x.set(n,{id:n,key:o,node:k,activatorNode:D,data:N}),()=>{const R=x.get(n);R&&R.key===o&&x.delete(n)}),[x,n]);const S=c.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":r,"aria-pressed":w&&m===An?!0:void 0,"aria-roledescription":h,"aria-describedby":f.draggable}),[r,m,b,w,h,f.draggable]);return{active:d,activatorEvent:i,activeNodeRect:u,attributes:S,isDragging:w,listeners:r?void 0:C,node:k,over:g,setNodeRef:j,setActivatorNodeRef:E,transform:y}}function Lo(){return c.useContext(rs)}const Eo="Droppable",Mo={timeout:25};function as(e){let{data:n,disabled:s=!1,id:r,resizeObserverConfig:a}=e;const o=At(Eo),{active:l,dispatch:i,over:d,measureDroppableContainers:u}=c.useContext(ut),f=c.useRef({disabled:s}),x=c.useRef(!1),g=c.useRef(null),m=c.useRef(null),{disabled:h,updateMeasurementsFor:b,timeout:w}={...Mo,...a},y=ot(b??r),k=c.useCallback(()=>{if(!x.current){x.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),m.current=null},w)},[w]),j=Ot({callback:k,disabled:h||!l}),D=c.useCallback((S,R)=>{j&&(R&&(j.unobserve(R),x.current=!1),S&&j.observe(S))},[j]),[E,C]=Nt(D),N=ot(n);return c.useEffect(()=>{!j||!E.current||(j.disconnect(),x.current=!1,j.observe(E.current))},[E,j]),c.useEffect(()=>(i({type:_.RegisterDroppable,element:{id:r,key:o,disabled:s,node:E,rect:g,data:N}}),()=>i({type:_.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{s!==f.current.disabled&&(i({type:_.SetDroppableDisabled,id:r,key:o,disabled:s}),f.current.disabled=s)},[r,o,s,i]),{active:l,rect:g,isOver:(d==null?void 0:d.id)===r,node:E,over:d,setNodeRef:C}}function Ro(e){let{animation:n,children:s}=e;const[r,a]=c.useState(null),[o,l]=c.useState(null),i=kt(s);return!s&&!r&&i&&a(i),Se(()=>{if(!o)return;const d=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(d==null||u==null){a(null);return}Promise.resolve(n(u,o)).then(()=>{a(null)})},[n,r,o]),F.createElement(F.Fragment,null,s,r?c.cloneElement(r,{ref:l}):null)}const Ao={x:0,y:0,scaleX:1,scaleY:1};function Io(e){let{children:n}=e;return F.createElement(ut.Provider,{value:ss},F.createElement(Tt.Provider,{value:Ao},n))}const Oo={position:"fixed",touchAction:"none"},To=e=>sn(e)?"transform 250ms ease":void 0,Po=c.forwardRef((e,n)=>{let{as:s,activatorEvent:r,adjustScale:a,children:o,className:l,rect:i,style:d,transform:u,transition:f=To}=e;if(!i)return null;const x=a?u:{...u,scaleX:1,scaleY:1},g={...Oo,width:i.width,height:i.height,top:i.top,left:i.left,transform:Be.Transform.toString(x),transformOrigin:a&&r?Sr(r,i):void 0,transition:typeof f=="function"?f(r):f,...d};return F.createElement(s,{className:l,style:g,ref:n},o)}),Fo=e=>n=>{let{active:s,dragOverlay:r}=n;const a={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[i,d]of Object.entries(o.active))d!==void 0&&(a[i]=s.node.style.getPropertyValue(i),s.node.style.setProperty(i,d));if(o!=null&&o.dragOverlay)for(const[i,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(i,d);return l!=null&&l.active&&s.node.classList.add(l.active),l!=null&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[d,u]of Object.entries(a))s.node.style.setProperty(d,u);l!=null&&l.active&&s.node.classList.remove(l.active)}},zo=e=>{let{transform:{initial:n,final:s}}=e;return[{transform:Be.Transform.toString(n)},{transform:Be.Transform.toString(s)}]},Bo={duration:250,easing:"ease",keyframes:zo,sideEffects:Fo({styles:{active:{opacity:"0"}}})};function $o(e){let{config:n,draggableNodes:s,droppableContainers:r,measuringConfiguration:a}=e;return Rt((o,l)=>{if(n===null)return;const i=s.get(o);if(!i)return;const d=i.node.current;if(!d)return;const u=ns(l);if(!u)return;const{transform:f}=Z(l).getComputedStyle(l),x=Kn(f);if(!x)return;const g=typeof n=="function"?n:Uo(n);return Zn(d,a.draggable.measure),g({active:{id:o,data:i.data,node:d,rect:a.draggable.measure(d)},draggableNodes:s,dragOverlay:{node:l,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:x})})}function Uo(e){const{duration:n,easing:s,sideEffects:r,keyframes:a}={...Bo,...e};return o=>{let{active:l,dragOverlay:i,transform:d,...u}=o;if(!n)return;const f={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},x={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/i.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/i.rect.height:1},g={x:d.x-f.x,y:d.y-f.y,...x},m=a({...u,active:l,dragOverlay:i,transform:{initial:d,final:g}}),[h]=m,b=m[m.length-1];if(JSON.stringify(h)===JSON.stringify(b))return;const w=r==null?void 0:r({active:l,dragOverlay:i,...u}),y=i.node.animate(m,{duration:n,easing:s,fill:"forwards"});return new Promise(k=>{y.onfinish=()=>{w==null||w(),k()}})}}let In=0;function Wo(e){return c.useMemo(()=>{if(e!=null)return In++,In},[e])}const Ho=F.memo(e=>{let{adjustScale:n=!1,children:s,dropAnimation:r,style:a,transition:o,modifiers:l,wrapperElement:i="div",className:d,zIndex:u=999}=e;const{activatorEvent:f,active:x,activeNodeRect:g,containerNodeRect:m,draggableNodes:h,droppableContainers:b,dragOverlay:w,over:y,measuringConfiguration:k,scrollableAncestors:j,scrollableAncestorRects:D,windowRect:E}=Lo(),C=c.useContext(Tt),N=Wo(x==null?void 0:x.id),S=os(l,{activatorEvent:f,active:x,activeNodeRect:g,containerNodeRect:m,draggingNodeRect:w.rect,over:y,overlayNodeRect:w.rect,scrollableAncestors:j,scrollableAncestorRects:D,transform:C,windowRect:E}),R=cn(g),T=$o({config:r,draggableNodes:h,droppableContainers:b,measuringConfiguration:k}),A=R?w.setRef:void 0;return F.createElement(Io,null,F.createElement(Ro,{animation:T},x&&N?F.createElement(Po,{key:N,id:x.id,ref:A,as:i,activatorEvent:f,adjustScale:n,className:d,transition:o,rect:R,style:{zIndex:u,...a},transform:S},s):null))});function Lt(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const _o=[M.Down,M.Right,M.Up,M.Left],Vo=(e,n)=>{let{context:{active:s,collisionRect:r,droppableRects:a,droppableContainers:o,over:l,scrollableAncestors:i}}=n;if(_o.includes(e.code)){if(e.preventDefault(),!s||!r)return;const d=[];o.getEnabled().forEach(x=>{if(!x||x!=null&&x.disabled)return;const g=a.get(x.id);if(g)switch(e.code){case M.Down:r.top<g.top&&d.push(x);break;case M.Up:r.top>g.top&&d.push(x);break;case M.Left:r.left>g.left&&d.push(x);break;case M.Right:r.left<g.left&&d.push(x);break}});const u=Er({collisionRect:r,droppableRects:a,droppableContainers:d});let f=_n(u,"id");if(f===(l==null?void 0:l.id)&&u.length>1&&(f=u[1].id),f!=null){const x=o.get(s.id),g=o.get(f),m=g?a.get(g.id):null,h=g==null?void 0:g.node.current;if(h&&m&&x&&g){const w=It(h).some((C,N)=>i[N]!==C),y=is(x,g),k=Ko(x,g),j=w||!y?{x:0,y:0}:{x:k?r.width-m.width:0,y:k?r.height-m.height:0},D={x:m.left,y:m.top};return j.x&&j.y?D:at(D,j)}}}};function is(e,n){return!Lt(e)||!Lt(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function Ko(e,n){return!Lt(e)||!Lt(n)||!is(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}function ls({connection:e,onSelect:n,onEdit:s,compact:r=!1}){const a=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,o=e.nextFollowUp&&!a&&new Date(e.nextFollowUp)<=new Date(Date.now()+7*24*60*60*1e3),l=Array.from({length:3},(d,u)=>t.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${u<e.relationshipStrength?"bg-indigo-500":"bg-gray-200"}`},u)),i=d=>d?new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null;return r?t.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n(e.id),children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium text-sm flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[e.role?`${e.role} @ `:"",e.company]})]}),a&&t.jsx("span",{className:"text-amber-500 text-xs",title:"Follow-up due",children:"!"})]}):t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(e.id),children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-semibold text-lg flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.name}),t.jsx("span",{className:"flex gap-0.5",children:l})]}),t.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:jt[e.relationshipType]}),e.linkedPostingIds.length>0&&t.jsxs("span",{className:"text-xs text-gray-500",children:[e.linkedPostingIds.length," posting",e.linkedPostingIds.length!==1?"s":""]})]})]}),s&&t.jsx("button",{onClick:d=>{d.stopPropagation(),s(e.id)},className:"p-1.5 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit connection",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.lastContactDate&&t.jsxs("span",{children:["Last contact: ",i(e.lastContactDate)]}),e.contactHistory.length>0&&t.jsxs("span",{children:[e.contactHistory.length," interaction",e.contactHistory.length!==1?"s":""]})]}),e.nextFollowUp&&t.jsxs("span",{className:`flex items-center gap-1 ${a?"text-red-600 font-medium":o?"text-amber-600":"text-gray-500"}`,children:[a&&t.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Follow-up: ",i(e.nextFollowUp)]})]})]})}function Yo({connections:e,onSelectConnection:n,onEditConnection:s,onAddConnection:r}){const[a,o]=c.useState(""),[l,i]=c.useState("all"),[d,u]=c.useState(""),f=c.useMemo(()=>[...new Set(e.map(b=>b.company))].sort(),[e]),x=c.useMemo(()=>e.filter(h=>{var b,w;if(a){const y=a.toLowerCase();if(!(h.name.toLowerCase().includes(y)||h.company.toLowerCase().includes(y)||((b=h.role)==null?void 0:b.toLowerCase().includes(y))||((w=h.notes)==null?void 0:w.toLowerCase().includes(y))))return!1}if(d&&h.company!==d)return!1;switch(l){case"follow-up-due":return h.nextFollowUp&&new Date(h.nextFollowUp)<=new Date;case"has-postings":return h.linkedPostingIds.length>0;case"no-postings":return h.linkedPostingIds.length===0;default:return!0}}),[e,a,l,d]),g=c.useMemo(()=>[...x].sort((h,b)=>{const w=h.nextFollowUp&&new Date(h.nextFollowUp)<=new Date,y=b.nextFollowUp&&new Date(b.nextFollowUp)<=new Date;return w&&!y?-1:!w&&y?1:h.name.localeCompare(b.name)}),[x]),m=e.filter(h=>h.nextFollowUp&&new Date(h.nextFollowUp)<=new Date).length;return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Connections"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," connection",e.length!==1?"s":"",m>0&&t.jsxs("span",{className:"text-amber-600 ml-2",children:["(",m," follow-up",m!==1?"s":""," due)"]})]})]}),t.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Connection"]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:a,onChange:h=>o(h.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),t.jsxs("select",{value:l,onChange:h=>i(h.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Connections"}),t.jsx("option",{value:"follow-up-due",children:"Follow-up Due"}),t.jsx("option",{value:"has-postings",children:"Linked to Postings"}),t.jsx("option",{value:"no-postings",children:"No Postings Linked"})]}),t.jsxs("select",{value:d,onChange:h=>u(h.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"All Companies"}),f.map(h=>t.jsx("option",{value:h,children:h},h))]}),(a||l!=="all"||d)&&t.jsx("button",{onClick:()=>{o(""),i("all"),u("")},className:"text-sm text-indigo-600 hover:text-indigo-700",children:"Clear filters"})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:g.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.length===0?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No connections yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Start building your network by adding contacts you meet during your job search."}),t.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Your First Connection"]})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No matches found"}),t.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters."})]})]}):t.jsx("div",{className:"grid gap-3",children:g.map(h=>t.jsx(ls,{connection:h,onSelect:n,onEdit:s},h.id))})})]})}function Xo({isOpen:e,onClose:n,onSave:s,connection:r,postings:a=[],prefilledCompany:o}){const l=!!r,[i,d]=c.useState({name:"",email:"",linkedInUrl:"",company:o||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),[u,f]=c.useState({});c.useEffect(()=>{e&&(d(r?{name:r.name,email:r.email||"",linkedInUrl:r.linkedInUrl||"",company:r.company,role:r.role||"",relationshipType:r.relationshipType,howWeMet:r.howWeMet||"",relationshipStrength:r.relationshipStrength,notes:r.notes,nextFollowUp:r.nextFollowUp||"",linkedPostingIds:r.linkedPostingIds}:{name:"",email:"",linkedInUrl:"",company:o||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),f({}))},[e,r,o]);const x=y=>{const{name:k,value:j}=y.target;d(D=>({...D,[k]:j})),u[k]&&f(D=>({...D,[k]:""}))},g=y=>{d(k=>({...k,relationshipStrength:y}))},m=y=>{d(k=>({...k,linkedPostingIds:k.linkedPostingIds.includes(y)?k.linkedPostingIds.filter(j=>j!==y):[...k.linkedPostingIds,y]}))},h=()=>{const y={};return i.name.trim()||(y.name="Name is required"),i.company.trim()||(y.company="Company is required"),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(y.email="Invalid email address"),i.linkedInUrl&&!i.linkedInUrl.includes("linkedin.com")&&(y.linkedInUrl="Must be a LinkedIn URL"),f(y),Object.keys(y).length===0},b=y=>{if(y.preventDefault(),!h())return;const k=Date.now(),j={id:(r==null?void 0:r.id)||`conn_${k}_${Math.random().toString(36).slice(2,9)}`,name:i.name.trim(),email:i.email.trim()||void 0,linkedInUrl:i.linkedInUrl.trim()||void 0,company:i.company.trim(),role:i.role.trim()||void 0,relationshipType:i.relationshipType,howWeMet:i.howWeMet.trim()||void 0,relationshipStrength:i.relationshipStrength,notes:i.notes,lastContactDate:r==null?void 0:r.lastContactDate,nextFollowUp:i.nextFollowUp||void 0,contactHistory:(r==null?void 0:r.contactHistory)||[],linkedPostingIds:i.linkedPostingIds,dateAdded:(r==null?void 0:r.dateAdded)||k,dateModified:k};s(j),n()};if(!e)return null;const w=[...a].sort((y,k)=>{const j=y.company.toLowerCase()===i.company.toLowerCase(),D=k.company.toLowerCase()===i.company.toLowerCase();return j&&!D?-1:!j&&D?1:y.company.localeCompare(k.company)});return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l?"Edit Connection":"Add Connection"}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("form",{onSubmit:b,className:"flex-1 overflow-auto p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:i.name,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.name?"border-red-300":"border-gray-200"}`,placeholder:"John Smith"}),u.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"company",value:i.company,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.company?"border-red-300":"border-gray-200"}`,placeholder:"Anthropic"}),u.company&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.company})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),t.jsx("input",{type:"text",name:"role",value:i.role,onChange:x,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Technical Recruiter"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(jt).map(y=>t.jsx("button",{type:"button",onClick:()=>d(k=>({...k,relationshipType:y})),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${i.relationshipType===y?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"} border`,children:jt[y]},y))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship Strength"}),t.jsx("div",{className:"flex gap-4",children:[1,2,3].map(y=>t.jsxs("button",{type:"button",onClick:()=>g(y),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${i.relationshipStrength===y?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"flex gap-0.5",children:Array.from({length:3},(k,j)=>t.jsx("span",{className:`w-2 h-2 rounded-full ${j<y?"bg-indigo-500":"bg-gray-200"}`},j))}),t.jsx("span",{className:"text-sm",children:Fn[y]})]},y))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How did you meet?"}),t.jsx("input",{type:"text",name:"howWeMet",value:i.howWeMet,onChange:x,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Career fair at MIT, October 2024"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:i.email,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.email?"border-red-300":"border-gray-200"}`,placeholder:"john@company.com"}),u.email&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),t.jsx("input",{type:"url",name:"linkedInUrl",value:i.linkedInUrl,onChange:x,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.linkedInUrl?"border-red-300":"border-gray-200"}`,placeholder:"linkedin.com/in/..."}),u.linkedInUrl&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.linkedInUrl})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Follow-up Date"}),t.jsx("input",{type:"date",name:"nextFollowUp",value:i.nextFollowUp,onChange:x,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{name:"notes",value:i.notes,onChange:x,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Any notes about this connection..."})]}),a.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Postings"}),t.jsx("div",{className:"max-h-40 overflow-auto border border-gray-200 rounded-lg",children:w.slice(0,10).map(y=>t.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.linkedPostingIds.includes(y.id),onChange:()=>m(y.id),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),t.jsxs("span",{className:"text-sm text-gray-700 truncate",children:[y.title," @ ",y.company]})]},y.id))}),a.length>10&&t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Showing first 10 postings. Search by company name to find more."})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:b,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:l?"Save Changes":"Add Connection"})]})]})})}function Go({connection:e,linkedPostings:n,isOpen:s,onClose:r,onEdit:a,onDelete:o,onLogContact:l,onViewPosting:i,onUnlinkPosting:d,onUpdateFollowUp:u}){const[f,x]=c.useState(!1),[g,m]=c.useState({type:"email",notes:"",date:new Date().toISOString().split("T")[0]}),[h,b]=c.useState(!1);if(!s)return null;const w=Array.from({length:3},(C,N)=>t.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${N<e.relationshipStrength?"bg-indigo-500":"bg-gray-200"}`},N)),y=C=>C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",k=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,j=()=>{const C={id:`contact_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,date:g.date,type:g.type,notes:g.notes.trim()||void 0};l(C),x(!1),m({type:"email",notes:"",date:new Date().toISOString().split("T")[0]})},D=()=>{o(),b(!1)},E=[...e.contactHistory].sort((C,N)=>new Date(N.date).getTime()-new Date(C.date).getTime());return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:r}),t.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-semibold text-xl flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-gray-600",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"flex gap-0.5",children:w}),t.jsxs("span",{className:"text-sm text-gray-500",children:[Fn[e.relationshipStrength]," connection"]})]})]})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[e.email&&t.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.email]}),e.linkedInUrl&&t.jsxs("a",{href:e.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"View LinkedIn Profile"]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Type"}),t.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 text-gray-700 text-sm",children:jt[e.relationshipType]})]}),e.howWeMet&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"How We Met"}),t.jsx("p",{className:"text-gray-700",children:e.howWeMet})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Next Follow-up"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"date",value:e.nextFollowUp||"",onChange:C=>u(C.target.value||void 0),className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${k?"border-red-300 bg-red-50":"border-gray-200"}`}),k&&t.jsxs("span",{className:"text-sm text-red-600 font-medium flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Overdue!"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Contact History"}),t.jsxs("button",{onClick:()=>x(!f),className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Contact"]})]}),f&&t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),t.jsx("select",{value:g.type,onChange:C=>m({...g,type:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Object.keys(pt).map(C=>t.jsx("option",{value:C,children:pt[C]},C))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:g.date,onChange:C=>m({...g,date:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Notes (optional)"}),t.jsx("textarea",{value:g.notes,onChange:C=>m({...g,notes:C.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Brief description of the conversation..."})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),t.jsx("button",{onClick:j,className:"px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save"})]})]}),E.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No contact history yet."}):t.jsx("div",{className:"space-y-3",children:E.map(C=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-xs text-gray-500",children:pt[C.type].charAt(0)})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:pt[C.type]}),t.jsx("span",{className:"text-xs text-gray-400",children:y(C.date)})]}),C.notes&&t.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:C.notes})]})]},C.id))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:["Linked Postings (",n.length,")"]}),n.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No postings linked yet."}):t.jsx("div",{className:"space-y-2",children:n.map(C=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("button",{onClick:()=>i(C.id),className:"text-left flex-1 hover:text-indigo-600",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.title}),t.jsxs("p",{className:"text-xs text-gray-500",children:[C.company," · ",C.status]})]}),t.jsx("button",{onClick:()=>d(C.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Unlink posting",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},C.id))})]}),e.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Notes"}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.notes})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{onClick:()=>b(!0),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Edit Connection"})]})]}),h&&t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Connection?"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["This will permanently delete ",t.jsx("strong",{children:e.name})," and remove them from all linked postings."]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:D,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}function On({connections:e,onClick:n,size:s="sm"}){if(e.length===0)return null;const a=e.map(l=>l.name).slice(0,3).join(", ")+(e.length>3?` +${e.length-3} more`:""),o=s==="sm"?"text-xs gap-1 px-1.5 py-0.5":"text-sm gap-1.5 px-2 py-1";return t.jsxs("button",{onClick:l=>{l.stopPropagation(),n==null||n()},className:`flex items-center ${o} bg-indigo-50 text-indigo-600 rounded-full hover:bg-indigo-100 transition-colors`,title:a,children:[t.jsx("svg",{className:s==="sm"?"w-3 h-3":"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.jsx("span",{children:e.length})]})}function qo({isOpen:e,onClose:n,connections:s,posting:r,linkedConnectionIds:a,onLinkConnection:o,onUnlinkConnection:l,onCreateConnection:i}){const[d,u]=c.useState(""),f=c.useMemo(()=>{const m=s.filter(w=>{var k;if(!d)return!0;const y=d.toLowerCase();return w.name.toLowerCase().includes(y)||w.company.toLowerCase().includes(y)||((k=w.role)==null?void 0:k.toLowerCase().includes(y))}),h=m.filter(w=>w.company.toLowerCase()===r.company.toLowerCase()),b=m.filter(w=>w.company.toLowerCase()!==r.company.toLowerCase());return{sameCompany:h,others:b}},[s,r.company,d]),x=m=>{a.includes(m)?l(m):o(m)};if(!e)return null;const g=m=>{const h=a.includes(m.id);return t.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${h?"bg-indigo-50":"hover:bg-gray-50"}`,children:[t.jsx("input",{type:"checkbox",checked:h,onChange:()=>x(m.id),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium text-sm flex-shrink-0",children:m.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:`text-sm font-medium truncate ${h?"text-indigo-700":"text-gray-900"}`,children:m.name}),t.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[m.role?`${m.role} @ `:"",m.company]})]})]},m.id)};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Link Connections"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[r.title," @ ",r.company]})]}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:d,onChange:m=>u(m.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",autoFocus:!0})]})}),t.jsx("div",{className:"flex-1 overflow-auto p-4",children:s.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-gray-500 mb-3",children:"No connections yet"}),t.jsx("button",{onClick:i,className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"+ Create your first connection"})]}):f.sameCompany.length===0&&f.others.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"No connections match your search"})}):t.jsxs("div",{className:"space-y-4",children:[f.sameCompany.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["At ",r.company," (",f.sameCompany.length,")"]}),t.jsx("div",{className:"space-y-1",children:f.sameCompany.map(g)})]}),f.others.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["Other Connections (",f.others.length,")"]}),t.jsx("div",{className:"space-y-1",children:f.others.map(g)})]})]})}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsxs("button",{onClick:i,className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Connection"]}),t.jsx("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Done"})]})]})})}function Tn(e){return e.split(" ").slice(0,2).map(n=>n[0]).join("").toUpperCase()}function dn(e){return Math.floor((Date.now()-e)/(1e3*60*60*24))}function Pn(e){const n=dn(e);return n===0?"Today":n===1?"1d":`${n}d`}function Jo(e,n){return e<=3?"text-gray-400":e<=7?"text-orange-500":n?"text-red-500 font-semibold":"text-red-500"}function Qo(e){return Et(e.status)?!1:dn(e.dateModified)>=7}function un({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,variant:o="kanban",linkedConnections:l=[],onConnectionClick:i}){const d=[{label:"Open URL",onClick:()=>window.open(e.url,"_blank"),icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(g=>g!==e.status).map(g=>({label:`Move to ${Ce[g]}`,onClick:()=>r(e.id,g)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>a(e.id),danger:!0,icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],u=Qo(e),f=dn(e.dateModified),x=Jo(f,u);return o==="list"?t.jsx(mn,{items:d,children:t.jsxs("div",{onClick:()=>n(e.id),className:"flex cursor-pointer items-center gap-4 border-b border-gray-200 bg-white px-4 py-3 hover:bg-gray-50",children:[t.jsxs("div",{className:"relative",children:[e.companyLogo?t.jsx("img",{src:e.companyLogo,alt:e.company,className:"h-10 w-10 rounded object-contain"}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:Tn(e.company)}),u&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-100",children:t.jsx("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate font-medium text-gray-900",children:e.title}),t.jsx("p",{className:"truncate text-sm text-gray-500",children:e.company})]}),t.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:e.location}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600",children:Ce[e.status]})}),t.jsx("div",{className:"flex-shrink-0",onClick:g=>g.stopPropagation(),children:t.jsx(qt,{priority:e.priority,onChange:g=>s(e.id,g),size:"sm"})}),t.jsxs("div",{className:`flex flex-shrink-0 items-center gap-1 text-xs ${x}`,children:[u&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Pn(e.dateModified)]}),t.jsx("div",{className:"flex-shrink-0",onClick:g=>g.stopPropagation(),children:t.jsx(On,{connections:l,onClick:i,size:"sm"})})]})}):t.jsx(mn,{items:d,children:t.jsxs("div",{onClick:()=>n(e.id),className:`cursor-pointer rounded-lg border bg-white p-3 shadow-sm transition-shadow hover:shadow-md ${u?"border-red-200":"border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[e.companyLogo?t.jsx("img",{src:e.companyLogo,alt:e.company,className:"h-10 w-10 rounded object-contain"}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:Tn(e.company)}),u&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-100",children:t.jsx("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate font-medium text-gray-900",children:e.title}),t.jsx("p",{className:"truncate text-sm text-gray-600",children:e.company}),t.jsx("p",{className:"truncate text-xs text-gray-500",children:e.location})]})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",onClick:g=>g.stopPropagation(),children:[t.jsx(qt,{priority:e.priority,onChange:g=>s(e.id,g),size:"sm"}),t.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(g=>t.jsx(en,{tag:g,size:"sm"},g)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-2]})]}),t.jsx(On,{connections:l,onClick:i,size:"sm"})]}),t.jsxs("div",{className:`flex items-center gap-1 text-xs ${x}`,children:[u&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Pn(e.dateModified)]})]})]})})}function Zo({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,linkedConnections:o,onConnectionClick:l}){const{attributes:i,listeners:d,setNodeRef:u,transform:f,isDragging:x}=Do({id:e.id}),g={transform:Be.Translate.toString(f)};return t.jsx("div",{ref:u,style:g,...d,...i,className:`touch-none ${x?"opacity-50":""}`,children:t.jsx(un,{posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,variant:"kanban",linkedConnections:o,onConnectionClick:l})})}const ea={saved:"bg-blue-50 border-blue-200",in_progress:"bg-orange-50 border-orange-200",applied:"bg-green-50 border-green-200",interviewing:"bg-purple-50 border-purple-200",offer:"bg-yellow-50 border-yellow-200",accepted:"bg-emerald-50 border-emerald-200",rejected:"bg-gray-50 border-gray-300",withdrawn:"bg-gray-50 border-gray-300"},ta={saved:"bg-blue-100 text-blue-800",in_progress:"bg-orange-100 text-orange-800",applied:"bg-green-100 text-green-800",interviewing:"bg-purple-100 text-purple-800",offer:"bg-yellow-100 text-yellow-800",accepted:"bg-emerald-100 text-emerald-800",rejected:"bg-gray-200 text-gray-700",withdrawn:"bg-gray-200 text-gray-700"},na={saved:"ring-blue-400 bg-blue-100",in_progress:"ring-orange-400 bg-orange-100",applied:"ring-green-400 bg-green-100",interviewing:"ring-purple-400 bg-purple-100",offer:"ring-yellow-400 bg-yellow-100",accepted:"ring-emerald-400 bg-emerald-100",rejected:"ring-gray-400 bg-gray-200",withdrawn:"ring-gray-400 bg-gray-200"};function sa({status:e,postings:n,onPostingSelect:s,onPriorityChange:r,onStatusChange:a,onDelete:o,onCollapse:l,isOver:i=!1,isDragging:d=!1,getLinkedConnections:u,onConnectionClick:f}){const{setNodeRef:x}=as({id:e});return t.jsxs("div",{ref:x,className:`flex h-full w-full flex-col rounded-lg border transition-colors duration-200 ${ea[e]} ${i?`ring-2 ${na[e]}`:""} ${d&&!i?"opacity-75":""}`,children:[t.jsxs("div",{className:`flex items-center justify-between rounded-t-lg px-3 py-2 ${ta[e]}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:l,className:"rounded p-0.5 opacity-60 hover:bg-black hover:bg-opacity-10 hover:opacity-100",title:`Collapse ${Ce[e]} column`,children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"font-medium",children:Ce[e]})]}),t.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-2 py-0.5 text-sm font-medium",children:n.length})]}),t.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto p-2",children:[n.map(g=>t.jsx(Zo,{posting:g,onSelect:s,onPriorityChange:r,onStatusChange:a,onDelete:o,linkedConnections:u==null?void 0:u(g.id),onConnectionClick:()=>f==null?void 0:f(g.id)},g.id)),n.length===0&&t.jsx("div",{className:`rounded-lg border-2 border-dashed py-8 text-center text-sm transition-colors ${i?"border-gray-400 bg-gray-100 text-gray-600":"border-transparent text-gray-400"}`,children:i?"Drop here":"No postings"})]})]})}const ra={saved:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-orange-100 text-orange-800 border-orange-200",applied:"bg-green-100 text-green-800 border-green-200",interviewing:"bg-purple-100 text-purple-800 border-purple-200",offer:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-emerald-100 text-emerald-800 border-emerald-200",rejected:"bg-gray-200 text-gray-700 border-gray-300",withdrawn:"bg-gray-200 text-gray-700 border-gray-300"},oa={saved:"ring-blue-400",in_progress:"ring-orange-400",applied:"ring-green-400",interviewing:"ring-purple-400",offer:"ring-yellow-400",accepted:"ring-emerald-400",rejected:"ring-gray-400",withdrawn:"ring-gray-400"};function aa({status:e,count:n,onExpand:s,isOver:r=!1}){const{setNodeRef:a}=as({id:e});return t.jsx("div",{ref:a,className:`flex h-full w-full flex-col items-center rounded-lg border transition-colors duration-200 ${ra[e]} ${r?`ring-2 ${oa[e]}`:""}`,children:t.jsxs("button",{onClick:s,className:"flex h-full w-full flex-col items-center justify-center gap-2 py-3 hover:opacity-80",title:`Expand ${Ce[e]} column`,children:[t.jsx("span",{className:"text-xs font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:Ce[e]}),t.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-1.5 py-0.5 text-xs font-medium",children:n}),t.jsx("svg",{className:"h-4 w-4 opacity-60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}function ia({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,collapsedColumns:o,onCollapseChange:l,getLinkedConnections:i,onConnectionClick:d}){const[u,f]=c.useState(null),[x,g]=c.useState(null),m=Cr(vn(ln,{activationConstraint:{distance:8}}),vn(on,{coordinateGetter:Vo})),h=N=>e.filter(S=>S.status===N),b=u?e.find(N=>N.id===u):null,w=c.useCallback(N=>{f(N.active.id)},[]),y=c.useCallback(N=>{var S;g((S=N.over)==null?void 0:S.id)},[]),k=c.useCallback(N=>{const{active:S,over:R}=N;if(f(null),g(null),!R)return;const T=S.id,A=R.id;if(wt.includes(A)){const P=e.find(U=>U.id===T);P&&P.status!==A&&r(T,A)}},[e,r]),j=c.useCallback(()=>{f(null),g(null)},[]),D=c.useCallback(N=>{o.includes(N)||l([...o,N])},[o,l]),E=c.useCallback(N=>{l(o.filter(S=>S!==N))},[o,l]),C=N=>o.includes(N);return t.jsxs(ko,{sensors:m,collisionDetection:Lr,onDragStart:w,onDragOver:y,onDragEnd:k,onDragCancel:j,children:[t.jsx("div",{className:"flex h-full gap-4 overflow-x-auto p-4",children:wt.map(N=>t.jsx("div",{className:"flex-shrink-0 transition-all duration-300 ease-in-out",style:{width:C(N)?"48px":"288px"},children:C(N)?t.jsx(aa,{status:N,count:h(N).length,onExpand:()=>E(N),isOver:x===N}):t.jsx(sa,{status:N,postings:h(N),onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,onCollapse:()=>D(N),isOver:x===N,isDragging:u!==null,getLinkedConnections:i,onConnectionClick:d})},N))}),t.jsx(Ho,{dropAnimation:null,children:b?t.jsx("div",{className:"rotate-3 opacity-90",children:t.jsx(un,{posting:b,onSelect:()=>{},onPriorityChange:()=>{},onStatusChange:()=>{},onDelete:()=>{},variant:"kanban"})}):null})]})}function la({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,getLinkedConnections:o,onConnectionClick:l}){const[i,d]=c.useState("dateAdded"),[u,f]=c.useState("desc"),x=h=>{i===h?f(u==="asc"?"desc":"asc"):(d(h),f("asc"))},g=[...e].sort((h,b)=>{let w=0;switch(i){case"title":w=h.title.localeCompare(b.title);break;case"company":w=h.company.localeCompare(b.company);break;case"dateAdded":w=h.dateAdded-b.dateAdded;break;case"priority":w=h.priority-b.priority;break;case"status":w=h.status.localeCompare(b.status);break}return u==="asc"?w:-w}),m=({field:h,label:b})=>t.jsxs("button",{onClick:()=>x(h),className:"flex items-center gap-1 text-left text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700",children:[b,i===h&&t.jsx("svg",{className:`h-4 w-4 ${u==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return t.jsxs("div",{className:"h-full overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-4 border-b border-gray-200 bg-gray-50 px-4 py-2",children:[t.jsx("div",{className:"w-10"}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsx(m,{field:"title",label:"Title / Company"})}),t.jsx("div",{className:"w-32",children:t.jsx(m,{field:"status",label:"Status"})}),t.jsx("div",{className:"w-24",children:t.jsx(m,{field:"priority",label:"Priority"})}),t.jsx("div",{className:"w-16",children:t.jsx(m,{field:"dateAdded",label:"Added"})})]}),t.jsxs("div",{children:[g.map(h=>t.jsx(un,{posting:h,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,variant:"list",linkedConnections:o==null?void 0:o(h.id),onConnectionClick:()=>l==null?void 0:l(h.id)},h.id)),e.length===0&&t.jsx("div",{className:"py-12 text-center text-gray-500",children:"No postings found"})]})]})}function ca({keyword:e,onClose:n}){if(!e.contexts||e.contexts.length===0)return null;const s=r=>{const a=e.term.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`(${a})`,"gi");return r.split(o).map((i,d)=>o.test(i)?t.jsx("mark",{className:"bg-yellow-200 px-0.5 rounded",children:i},d):t.jsx("span",{children:i},d))};return t.jsxs("div",{className:"mt-1 mb-2 ml-6 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-medium text-gray-700",children:['"',e.term,'" appears ',e.frequency," time",e.frequency!==1?"s":""]}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"space-y-2",children:e.contexts.map((r,a)=>t.jsxs("div",{className:"text-gray-600 text-xs leading-relaxed",children:[t.jsxs("span",{className:"text-gray-400 mr-1",children:[a+1,"."]}),s(r)]},a))})]})}function da({keyword:e,onToggleAddressed:n}){const[s,r]=c.useState(!1),a=t.jsx("span",{className:"flex gap-0.5",title:`${e.importance} importance`,children:[0,1,2].map(o=>t.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full ${e.importance==="high"&&o<3||e.importance==="medium"&&o<2||e.importance==="low"&&o<1?"bg-indigo-500":"bg-gray-200"}`},o))});return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center gap-2 py-1.5 group",children:[t.jsx("input",{type:"checkbox",checked:e.addressed,onChange:o=>n(e.term,o.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),t.jsx("button",{onClick:()=>r(!s),className:`flex-1 text-left text-sm ${e.addressed?"text-gray-400 line-through":"text-gray-700"} hover:text-indigo-600 transition-colors`,children:e.term}),a,t.jsxs("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.frequency,"x"]})]}),s&&e.contexts&&e.contexts.length>0&&t.jsx(ca,{keyword:e,onClose:()=>r(!1)})]})}function ua({keywords:e,onToggleAddressed:n,onRefresh:s,isExtracting:r=!1}){const a=c.useMemo(()=>gs(e),[e]),o=c.useMemo(()=>ps(e),[e]);return e.length===0&&!r?t.jsxs("div",{className:"p-4 text-center",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No keywords extracted"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Extract keywords from the job description to track your application coverage."}),t.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Extract Keywords"]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Keywords Analysis"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," keyword",e.length!==1?"s":""," extracted"]})]}),t.jsx("button",{onClick:s,disabled:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors disabled:opacity-50",title:"Re-extract keywords",children:t.jsx("svg",{className:`w-4 h-4 ${r?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Coverage"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[o.addressed,"/",o.total," addressed (",o.percentage,"%)"]})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${o.percentage}%`}})})]}),t.jsx("div",{className:"space-y-3",children:js.map(l=>{const i=a[l];if(i.length===0)return null;const d=o.byCategory[l];return t.jsx(ha,{category:l,keywords:i,addressedCount:d.addressed,totalCount:d.total,onToggleAddressed:n},l)})})]})}function ha({category:e,keywords:n,addressedCount:s,totalCount:r,onToggleAddressed:a}){return t.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h4",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:[ws[e]," (",r,")"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:[s,"/",r]})]}),t.jsx("div",{className:"space-y-0.5",children:n.map(o=>t.jsx(da,{keyword:o,onToggleAddressed:a},o.term))})]})}function fa({posting:e,isOpen:n,onClose:s,onUpdate:r,onDelete:a,connections:o=[],linkedConnections:l=[],onLinkConnection:i,onUnlinkConnection:d,onViewConnection:u,onAddConnection:f,onExtractKeywords:x,isExtractingKeywords:g=!1}){var P,U;const[m,h]=c.useState(""),[b,w]=c.useState(!1),[y,k]=c.useState(!1),[j,D]=c.useState("details");c.useEffect(()=>{e&&h(e.notes)},[e==null?void 0:e.id,e==null?void 0:e.notes]),c.useEffect(()=>{D("details")},[e==null?void 0:e.id]);const E=()=>{e&&m!==e.notes&&r(e.id,{notes:m})},C=()=>{e&&(a(e.id),w(!1),s())},N=(O,ve)=>{if(!e||!e.keywords)return;const ee=e.keywords.map(z=>z.term===O?{...z,addressed:ve}:z);r(e.id,{keywords:ee})},S=()=>{e&&x&&x(e.id)};if(!e)return null;const R=O=>new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),T=((P=e.keywords)==null?void 0:P.length)||0,A=((U=e.keywords)==null?void 0:U.filter(O=>O.addressed).length)||0;return t.jsxs(ks,{isOpen:n,onClose:s,width:"max-w-lg",children:[t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"border-b border-gray-200 px-4 py-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.title}),t.jsx("p",{className:"text-gray-600",children:e.company}),e.location&&t.jsx("p",{className:"text-sm text-gray-500",children:e.location})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>window.open(e.url,"_blank"),className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Open URL (O)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),t.jsx("button",{onClick:s,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Close (Esc or ⌘S)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.jsxs("div",{className:"mt-4 flex gap-1 border-b border-gray-200 -mb-px",children:[t.jsx(Gt,{active:j==="details",onClick:()=>D("details"),children:"Details"}),t.jsx(Gt,{active:j==="keywords",onClick:()=>D("keywords"),badge:T>0?`${A}/${T}`:void 0,children:"Keywords"}),t.jsx(Gt,{active:j==="connections",onClick:()=>D("connections"),badge:l.length>0?l.length.toString():void 0,children:"Connections"})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[j==="details"&&t.jsx(xa,{posting:e,notes:m,setNotes:h,handleNotesBlur:E,onUpdate:r}),j==="keywords"&&t.jsx("div",{className:"p-4",children:t.jsx(ua,{keywords:e.keywords||[],onToggleAddressed:N,onRefresh:S,isExtracting:g})}),j==="connections"&&t.jsx(ma,{linkedConnections:l,onViewConnection:u,onShowQuickLink:()=>k(!0)})]}),t.jsx("div",{className:"border-t border-gray-200 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("div",{children:[t.jsxs("p",{children:["Added: ",R(e.dateAdded)]}),t.jsxs("p",{children:["Modified: ",R(e.dateModified)]})]}),b?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-600",children:"Delete this posting?"}),t.jsx("button",{onClick:C,className:"rounded bg-red-600 px-2 py-1 text-white hover:bg-red-700",children:"Yes"}),t.jsx("button",{onClick:()=>w(!1),className:"rounded bg-gray-200 px-2 py-1 text-gray-700 hover:bg-gray-300",children:"No"})]}):t.jsx("button",{onClick:()=>w(!0),className:"text-red-600 hover:text-red-700",children:"Delete posting"})]})})]}),e&&t.jsx(qo,{isOpen:y,onClose:()=>k(!1),connections:o,posting:e,linkedConnectionIds:l.map(O=>O.id),onLinkConnection:O=>{i==null||i(O)},onUnlinkConnection:O=>{d==null||d(O)},onCreateConnection:()=>{k(!1),f==null||f()}})]})}function Gt({active:e,onClick:n,children:s,badge:r}){return t.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${e?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s,r&&t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${e?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"}`,children:r})]})}function xa({posting:e,notes:n,setNotes:s,handleNotesBlur:r,onUpdate:a}){return t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),t.jsx("select",{value:e.status,onChange:o=>a(e.id,{status:o.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:vs.map(o=>t.jsx("option",{value:o,children:Ce[o]},o))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Priority"}),t.jsx(qt,{priority:e.priority,onChange:o=>a(e.id,{priority:o})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tags"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.tags.map(o=>t.jsx(en,{tag:o,onRemove:()=>a(e.id,{tags:e.tags.filter(l=>l!==o)})},o)),t.jsx(Ss,{tags:e.tags,onTagsChange:o=>a(e.id,{tags:o}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Next Action Date"}),t.jsx("input",{type:"date",value:e.nextActionDate||"",onChange:o=>a(e.id,{nextActionDate:o.target.value||void 0}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.salary&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Salary"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.salary})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600 whitespace-pre-wrap",children:e.description||"No description available"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Notes"}),t.jsx("textarea",{value:n,onChange:o=>s(o.target.value),onBlur:r,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})}function ma({linkedConnections:e,onViewConnection:n,onShowQuickLink:s}){return t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Linked Connections (",e.length,")"]}),t.jsx("button",{onClick:s,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"+ Link Connection"})]}),e.length>0?t.jsx("div",{className:"space-y-2",children:e.map(r=>t.jsx(ls,{connection:r,onSelect:a=>n==null?void 0:n(a),compact:!0},r.id))}):t.jsxs("div",{className:"rounded-md bg-gray-50 p-4 text-center",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No connections linked"}),t.jsx("button",{onClick:s,className:"text-sm text-indigo-600 hover:text-indigo-700",children:"Link a connection"})]})]})}function ga(e){return Et(e.status)?!1:(Date.now()-e.dateModified)/(1e3*60*60*24)>=7}function pa(e){return(Date.now()-e.dateAdded)/864e5<=7}function ya(e){return c.useMemo(()=>{const n={saved:0,in_progress:0,applied:0,interviewing:0,offer:0,accepted:0,rejected:0,withdrawn:0};let s=0,r=0,a=0;return e.forEach(o=>{n[o.status]++,Et(o.status)||s++,pa(o)&&r++,ga(o)&&a++}),{total:e.length,active:s,thisWeek:r,stale:a,byStatus:n}},[e])}function ba(e){const n=c.useCallback(s=>{const r=s.target,a=r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r.isContentEditable;for(const o of e){if(a&&!o.allowInInput&&s.key!=="Escape")continue;const l=o.meta?s.metaKey:!s.metaKey,i=o.ctrl?s.ctrlKey:!s.ctrlKey,d=o.shift?s.shiftKey:!s.shiftKey;if((s.key.toLowerCase()===o.key.toLowerCase()||s.key===o.key)&&l&&i&&d){s.preventDefault(),o.handler();return}}},[e]);c.useEffect(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n])}function va(){const[e,n]=c.useState([]),[s,r]=c.useState([]),[a,o]=c.useState(!0),[l,i]=c.useState("jobs"),[d,u]=c.useState("kanban"),[f,x]=c.useState(""),[g,m]=c.useState(null),[h,b]=c.useState(null),[w,y]=c.useState(!1),[k,j]=c.useState(["rejected"]),[D,E]=c.useState(null),[C,N]=c.useState(!1),[S,R]=c.useState(!1),[T,A]=c.useState(null),[P,U]=c.useState([]),[O,ve]=c.useState(""),[ee,z]=c.useState(null),[se,Y]=c.useState(null),[de,Ve]=c.useState(!1),[re,we]=c.useState(!1),[ge,Ke]=c.useState(!1),[K,Ye]=c.useState(!1),[De,Xe]=c.useState(!1),[oe,Oe]=c.useState(!1),[te,ae]=c.useState(null),pe=c.useRef(null),[Te,je]=c.useState(!1),[ht,Ge]=c.useState(!1),qe=ya(e),ye=c.useCallback(async p=>{Ge(p);try{await Ps(p)}catch(v){console.error("Failed to save stats expanded preference:",v)}},[]);c.useEffect(()=>{(async()=>{try{await Bs();const[L,I,ke,Wt,Ht]=await Promise.all([$e(),ne(),Rs(),Is(),Ts()]);n(L),r(I),u(ke),j(Wt),Ge(Ht)}catch(L){console.error("Failed to initialize app:",L)}finally{o(!1)}})();const v=L=>{L.postings&&n(L.postings.newValue||[]),L.connections&&r(L.connections.newValue||[])};return chrome.storage.onChanged.addListener(v),()=>chrome.storage.onChanged.removeListener(v)},[]),c.useEffect(()=>{const v=new URLSearchParams(window.location.search).get("highlight");v&&(b(v),y(!0))},[]);const ue=c.useCallback(async p=>{try{await Ue(p),n(p)}catch(v){console.error("Failed to save postings:",v)}},[]),Pe=c.useCallback(async p=>{u(p);try{await As(p)}catch(v){console.error("Failed to save view preference:",v)}},[]),ft=c.useCallback(async p=>{j(p);try{await Os(p)}catch(v){console.error("Failed to save collapsed columns:",v)}},[]),xt=c.useMemo(()=>{const p=new Set;return e.forEach(v=>v.tags.forEach(L=>p.add(L))),Array.from(p).sort()},[e]),Pt=c.useMemo(()=>{const p=new Set;return e.forEach(v=>p.add(v.company)),Array.from(p).sort()},[e]),Ft=p=>Et(p.status)?!1:(Date.now()-p.dateModified)/(1e3*60*60*24)>=7,Le=p=>{if(!p.nextActionDate)return!1;const v=new Date(p.nextActionDate),L=new Date,I=(v.getTime()-L.getTime())/(1e3*60*60*24);return I>=0&&I<=7},G=c.useMemo(()=>e.filter(p=>{const v=f.toLowerCase(),L=!f||p.title.toLowerCase().includes(v)||p.company.toLowerCase().includes(v)||p.location.toLowerCase().includes(v)||p.notes.toLowerCase().includes(v)||p.tags.some(et=>et.toLowerCase().includes(v)),I=!g||p.priority===g,ke=!te||p.status===te,Wt=P.length===0||P.some(et=>p.tags.includes(et)),Ht=!O||p.company.toLowerCase().includes(O.toLowerCase()),hn=new Date(p.dateAdded),cs=!ee||hn>=new Date(ee),ds=!se||hn<=new Date(se+"T23:59:59"),us=!de||!!p.nextActionDate,hs=!re||Le(p),fs=!ge||Ft(p),fn=s.filter(et=>et.linkedPostingIds.includes(p.id)),xs=!K||fn.length>0,ms=!De||fn.length===0;return L&&I&&ke&&Wt&&Ht&&cs&&ds&&us&&hs&&fs&&xs&&ms}),[e,s,f,g,te,P,O,ee,se,de,re,ge,K,De]),Ie=c.useMemo(()=>{let p=0;return f&&p++,g!==null&&p++,te!==null&&p++,P.length>0&&p++,O&&p++,(ee||se)&&p++,de&&p++,re&&p++,ge&&p++,K&&p++,De&&p++,p},[f,g,te,P,O,ee,se,de,re,ge,K,De]),mt=c.useCallback(()=>{x(""),m(null),ae(null),U([]),ve(""),z(null),Y(null),Ve(!1),we(!1),Ke(!1),Ye(!1),Xe(!1)},[]),he=c.useCallback(()=>{var p;(p=pe.current)==null||p.focus()},[]),gt=c.useCallback(()=>{if(!h)return;const p=e.find(L=>L.id===h);if(!p)return;const v=p.priority%3+1;Qe(h,v)},[h,e]),zt=c.useCallback(()=>{if(!h)return;const p=e.find(v=>v.id===h);p&&window.open(p.url,"_blank")},[h,e]),Bt=c.useCallback(()=>{h&&confirm("Are you sure you want to delete this posting?")&&Fe(h)},[h]),Ee=c.useCallback(p=>{if(G.length===0)return;const v=h?G.findIndex(I=>I.id===h):-1;let L;p==="next"?L=v<G.length-1?v+1:0:L=v>0?v-1:G.length-1,b(G[L].id)},[G,h]),Je=p=>{b(p),y(!0)},Qe=(p,v)=>{const L=e.map(I=>I.id===p?{...I,priority:v,dateModified:Date.now()}:I);ue(L)},Ze=(p,v)=>{const L=e.map(I=>I.id===p?{...I,status:v,dateModified:Date.now(),dateApplied:v==="applied"&&!I.dateApplied?Date.now():I.dateApplied}:I);ue(L)},$t=(p,v)=>{const L=e.map(I=>I.id===p?{...I,...v,dateModified:Date.now()}:I);ue(L)},Fe=p=>{const v=e.filter(L=>L.id!==p);ue(v),h===p&&(b(null),y(!1))},Ut=c.useCallback(p=>{const v=e.find(L=>L.id===p);!v||!v.description||(je(!0),setTimeout(()=>{try{const L=ys(v.description),I=e.map(ke=>ke.id===p?{...ke,keywords:L,keywordsExtractedAt:Date.now(),dateModified:Date.now()}:ke);ue(I)}catch(L){console.error("Failed to extract keywords:",L)}finally{je(!1)}},10))},[e,ue]),B=c.useCallback(p=>s.filter(v=>v.linkedPostingIds.includes(p)),[s]),q=c.useCallback(async p=>{if(h)try{await Ls(p,h);const v=await ne();r(v)}catch(v){console.error("Failed to link connection:",v)}},[h]),J=c.useCallback(async p=>{if(h)try{await pn(p,h);const v=await ne();r(v)}catch(v){console.error("Failed to unlink connection:",v)}},[h]),be=c.useCallback(p=>{console.log("View connection:",p)},[]),Q=c.useCallback(()=>{A(null),R(!0)},[]),X=c.useCallback(p=>{const v=s.find(L=>L.id===p);v&&(A(v),R(!0))},[s]),le=c.useCallback(async p=>{try{await gn(p);const v=await ne();r(v),R(!1),A(null)}catch(v){console.error("Failed to save connection:",v)}},[]),Me=c.useCallback(async p=>{if(confirm("Are you sure you want to delete this connection?"))try{await Ds(p);const v=await ne();r(v),N(!1),E(null)}catch(v){console.error("Failed to delete connection:",v)}},[]),W=c.useCallback(p=>{E(p),N(!0)},[]),fe=c.useCallback(async(p,v)=>{const L=s.find(I=>I.id===p);if(L)try{const I={...L,...v,dateModified:Date.now()};await gn(I);const ke=await ne();r(ke)}catch(I){console.error("Failed to update connection:",I)}},[s]),ie=c.useCallback(p=>{b(p),y(!0)},[]),xe=c.useCallback(p=>{const v=s.find(L=>L.id===p);return v?e.filter(L=>v.linkedPostingIds.includes(L.id)):[]},[s,e]),Re=c.useCallback(()=>{alert("Use the extension popup on a job posting page to add new jobs.")},[]);ba([{key:"/",handler:he},{key:"k",meta:!0,handler:he},{key:"Escape",allowInInput:!0,handler:()=>{w?y(!1):f&&x("")}},{key:"?",handler:()=>Oe(!0)},{key:"n",handler:Re},{key:"1",handler:()=>ae("saved")},{key:"2",handler:()=>ae("in_progress")},{key:"3",handler:()=>ae("applied")},{key:"4",handler:()=>ae("interviewing")},{key:"5",handler:()=>ae("offer")},{key:"6",handler:()=>ae("accepted")},{key:"7",handler:()=>ae("rejected")},{key:"0",handler:()=>ae(null)},{key:"j",handler:()=>Ee("next")},{key:"ArrowDown",handler:()=>Ee("next")},{key:"k",handler:()=>Ee("prev")},{key:"ArrowUp",handler:()=>Ee("prev")},{key:"Enter",handler:()=>h&&y(!0)},{key:"s",handler:gt},{key:"e",handler:()=>h&&y(!0)},{key:"o",handler:zt},{key:"d",handler:Bt},{key:"s",meta:!0,allowInInput:!0,handler:()=>y(!1)}]);const Ne=e.find(p=>p.id===h)||null;if(a)return t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})});const H=s.find(p=>p.id===D)||null;return t.jsxs("div",{className:"flex h-screen flex-col bg-gray-50",children:[t.jsx("div",{className:"border-b border-gray-200 bg-white",children:t.jsxs("div",{className:"flex items-center px-4",children:[t.jsxs("button",{onClick:()=>i("jobs"),className:`relative px-4 py-3 text-sm font-medium transition-colors ${l==="jobs"?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:["Jobs",l==="jobs"&&t.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]}),t.jsxs("button",{onClick:()=>i("connections"),className:`relative px-4 py-3 text-sm font-medium transition-colors ${l==="connections"?"text-indigo-600":"text-gray-500 hover:text-gray-700"}`,children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Connections",s.length>0&&t.jsx("span",{className:"rounded-full bg-indigo-100 px-2 py-0.5 text-xs text-indigo-600",children:s.length})]}),l==="connections"&&t.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]})]})}),l==="jobs"?t.jsxs(t.Fragment,{children:[t.jsx(lr,{searchQuery:f,onSearchChange:x,priorityFilter:g,onPriorityFilterChange:m,currentView:d,onViewChange:Pe,onAddClick:Re,availableTags:xt,availableCompanies:Pt,tagFilters:P,onTagFiltersChange:U,companyFilter:O,onCompanyFilterChange:ve,dateFrom:ee,dateTo:se,onDateFromChange:z,onDateToChange:Y,hasDeadline:de,deadlineSoon:re,needsAction:ge,hasConnections:K,noConnections:De,onHasDeadlineChange:Ve,onDeadlineSoonChange:we,onNeedsActionChange:Ke,onHasConnectionsChange:Ye,onNoConnectionsChange:Xe,onClearAllFilters:mt,activeFilterCount:Ie,searchInputRef:pe,statusFilter:te,onStatusFilterChange:ae}),t.jsx(ur,{stats:qe,expanded:ht,onExpandedChange:ye}),t.jsx("main",{className:"flex-1 overflow-hidden",children:d==="kanban"?t.jsx(ia,{postings:G,onPostingSelect:Je,onPriorityChange:Qe,onStatusChange:Ze,onDelete:Fe,collapsedColumns:k,onCollapseChange:ft,getLinkedConnections:B,onConnectionClick:ie}):t.jsx(la,{postings:G,onPostingSelect:Je,onPriorityChange:Qe,onStatusChange:Ze,onDelete:Fe,getLinkedConnections:B,onConnectionClick:ie})}),t.jsx(fa,{posting:Ne,isOpen:w,onClose:()=>y(!1),onUpdate:$t,onDelete:Fe,connections:s,linkedConnections:Ne?B(Ne.id):[],onLinkConnection:q,onUnlinkConnection:J,onViewConnection:be,onAddConnection:Q,onExtractKeywords:Ut,isExtractingKeywords:Te})]}):t.jsx(Yo,{connections:s,onSelectConnection:W,onAddConnection:Q,onEditConnection:X}),t.jsx(Xo,{isOpen:S,onClose:()=>{R(!1),A(null)},onSave:le,connection:T}),H&&t.jsx(Go,{connection:H,isOpen:C,onClose:()=>{N(!1),E(null)},onEdit:()=>X(H.id),onDelete:()=>Me(H.id),linkedPostings:xe(H.id),onViewPosting:p=>{b(p),y(!0),i("jobs")},onLogContact:async p=>{const v={...H,contactHistory:[...H.contactHistory,p],lastContactDate:p.date};await fe(H.id,v)},onUnlinkPosting:async p=>{await pn(H.id,p);const v=await ne();r(v)},onUpdateFollowUp:async p=>{await fe(H.id,{nextFollowUp:p})}}),t.jsx(ar,{isOpen:oe,onClose:()=>Oe(!1)})]})}bs.createRoot(document.getElementById("root")).render(t.jsx(F.StrictMode,{children:t.jsx(va,{})}));
