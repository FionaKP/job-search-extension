import{r as i,j as r,R as I,a as Ue,c as Kn}from"./client-D6vcrbFg.js";const Xn=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],ge={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},ut=["saved","in_progress","applied","interviewing","offer","accepted","rejected"],Yn=["accepted","rejected","withdrawn"];function vt(e){return Yn.includes(e)}function Gn({isOpen:e,onClose:t,title:n,children:s,width:a="max-w-md"}){const o=i.useCallback(c=>{c.key==="Escape"&&t()},[t]);return i.useEffect(()=>(e&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}),[e,o]),e?r.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),r.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10",children:r.jsx("div",{className:`w-screen ${a}`,children:r.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[n&&r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),r.jsxs("button",{onClick:t,className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:s})]})})})]}):null}function Jn({value:e,onChange:t,placeholder:n="Search...",debounceMs:s=300,inputRef:a}){const[o,c]=i.useState(e);i.useEffect(()=>{c(e)},[e]),i.useEffect(()=>{const u=setTimeout(()=>{o!==e&&t(o)},s);return()=>clearTimeout(u)},[o,e,t,s]);const l=u=>{c(u.target.value)},d=()=>{c(""),t("")};return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),r.jsx("input",{ref:a,type:"text",value:o,onChange:l,placeholder:n,className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-8 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),o&&r.jsx("button",{onClick:d,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function qt({label:e,options:t,value:n,onChange:s}){const[a,o]=i.useState(!1),c=i.useRef(null);i.useEffect(()=>{const d=u=>{c.current&&!c.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const l=t.find(d=>d.value===n);return r.jsxs("div",{className:"relative",ref:c,children:[r.jsxs("button",{onClick:()=>o(!a),className:"inline-flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l?l.label:e,r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),a&&r.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:r.jsxs("div",{className:"py-1",children:[r.jsx("button",{onClick:()=>{s(null),o(!1)},className:`block w-full px-4 py-2 text-left text-sm ${n===null?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:"All"}),t.map(d=>r.jsx("button",{onClick:()=>{s(d.value),o(!1)},className:`block w-full px-4 py-2 text-left text-sm ${n===d.value?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:d.label},String(d.value)))]})})]})}function Tt({priority:e,onChange:t,size:n="md",readOnly:s=!1}){const a=n==="sm"?"h-4 w-4":"h-5 w-5",o=n==="sm"?"gap-0.5":"gap-1",c=l=>{!s&&t&&t(l)};return r.jsx("div",{className:`flex ${o}`,children:[1,2,3].map(l=>r.jsx("button",{onClick:()=>c(l),disabled:s,className:`${s?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Priority ${l}`,children:r.jsx("svg",{className:`${a} ${l<=e?"text-yellow-400":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},l))})}function zt({tag:e,onRemove:t,size:n="sm"}){const s=n==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm";return r.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full bg-blue-100 text-blue-700 ${s}`,children:[e,t&&r.jsx("button",{onClick:t,className:"ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full hover:bg-blue-200",children:r.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function qn({tags:e,onTagsChange:t,suggestedTags:n=[]}){const[s,a]=i.useState(!1),[o,c]=i.useState(""),l=i.useRef(null),d=i.useRef(null);i.useEffect(()=>{const g=x=>{l.current&&!l.current.contains(x.target)&&a(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),i.useEffect(()=>{s&&d.current&&d.current.focus()},[s]);const u=g=>{const x=g.trim().toLowerCase();x&&!e.includes(x)&&t([...e,x]),c("")},f=g=>{t(e.filter(x=>x!==g))},h=g=>{g.key==="Enter"&&o.trim()&&(g.preventDefault(),u(o))},m=n.filter(g=>!e.includes(g));return r.jsxs("div",{className:"relative",ref:l,children:[r.jsxs("button",{onClick:()=>a(!s),className:"inline-flex items-center gap-1 rounded border border-dashed border-gray-300 px-2 py-1 text-xs text-gray-500 hover:border-gray-400 hover:text-gray-600",children:[r.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),s&&r.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-black ring-opacity-5",children:[r.jsx("input",{ref:d,type:"text",value:o,onChange:g=>c(g.target.value),onKeyDown:h,placeholder:"Type and press Enter",className:"w-full rounded border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(g=>r.jsx(zt,{tag:g,onRemove:()=>f(g)},g))}),m.length>0&&r.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-2",children:[r.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Suggestions:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:m.slice(0,5).map(g=>r.jsx("button",{onClick:()=>u(g),className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600 hover:bg-gray-200",children:g},g))})]})]})]})}function Qt({children:e,items:t}){const[n,s]=i.useState(!1),[a,o]=i.useState({x:0,y:0}),c=i.useRef(null);i.useEffect(()=>{const u=h=>{c.current&&!c.current.contains(h.target)&&s(!1)},f=h=>{h.key==="Escape"&&s(!1)};return document.addEventListener("mousedown",u),document.addEventListener("keydown",f),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",f)}},[]);const l=u=>{u.preventDefault(),o({x:u.clientX,y:u.clientY}),s(!0)},d=u=>{u.onClick(),s(!1)};return r.jsxs(r.Fragment,{children:[r.jsx("div",{onContextMenu:l,children:e}),n&&r.jsx("div",{ref:c,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",style:{left:a.x,top:a.y},children:t.map((u,f)=>u.divider?r.jsx("div",{className:"my-1 border-t border-gray-100"},f):r.jsxs("button",{onClick:()=>d(u),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm ${u.danger?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100"}`,children:[u.icon,u.label]},f))})]})}const z={POSTINGS:"postings",CONNECTIONS:"connections",SETTINGS:"settings",SCHEMA_VERSION:"schemaVersion",VIEW_PREFERENCE:"viewPreference",COLLAPSED_COLUMNS:"collapsedColumns",STATS_EXPANDED:"statsExpanded"};async function $t(){return(await chrome.storage.local.get(z.POSTINGS))[z.POSTINGS]||[]}async function Ft(e){await chrome.storage.local.set({[z.POSTINGS]:e})}async function vn(){return(await chrome.storage.local.get(z.CONNECTIONS))[z.CONNECTIONS]||[]}async function Qn(e){await chrome.storage.local.set({[z.CONNECTIONS]:e})}async function Zn(){return(await chrome.storage.local.get(z.SETTINGS))[z.SETTINGS]||er()}function er(){return{defaultView:"kanban",theme:"light",collapsedColumns:["rejected"]}}async function tr(){return(await chrome.storage.local.get(z.VIEW_PREFERENCE))[z.VIEW_PREFERENCE]||"kanban"}async function nr(e){await chrome.storage.local.set({[z.VIEW_PREFERENCE]:e})}async function rr(){return(await chrome.storage.local.get(z.COLLAPSED_COLUMNS))[z.COLLAPSED_COLUMNS]??["rejected"]}async function sr(e){await chrome.storage.local.set({[z.COLLAPSED_COLUMNS]:e})}async function or(){return(await chrome.storage.local.get(z.STATS_EXPANDED))[z.STATS_EXPANDED]??!1}async function ar(e){await chrome.storage.local.set({[z.STATS_EXPANDED]:e})}async function ir(){return(await chrome.storage.local.get(z.SCHEMA_VERSION))[z.SCHEMA_VERSION]||1}async function lr(e){await chrome.storage.local.set({[z.SCHEMA_VERSION]:e})}const lt=2,Zt=["jobApplications","applications"];async function cr(){const e=await ir();if(e>=lt)return;console.log(`[Migration] Current schema version: ${e}, target: ${lt}`);const t=await chrome.storage.local.get([...Zt,"postings"]);let n=[],s="";for(const a of Zt)if(t[a]&&Array.isArray(t[a])&&t[a].length>0){n=t[a],s=a;break}if(n.length>0){console.log(`[Migration] Found ${n.length} V1 postings under key: ${s}`);const a=bn(n),o=t.postings||[],c=new Set(o.map(u=>u.url)),l=a.filter(u=>!c.has(u.url)),d=[...o,...l];await Ft(d),await chrome.storage.local.set({_v1_backup:n}),console.log(`[Migration] Migrated ${l.length} new postings, ${a.length-l.length} duplicates skipped`)}await lr(lt),console.log(`[Migration] Schema version updated to ${lt}`)}function bn(e){return e.map(t=>({id:t.id,url:t.url,company:t.company,companyLogo:void 0,title:t.title,location:t.location,description:t.description,salary:t.salary,status:t.status,priority:dr(t.interest),tags:t.tags||[],notes:t.notes||"",dateAdded:Lt(t.dateAdded),dateModified:Lt(t.dateAdded),dateApplied:t.dateApplied?Lt(t.dateApplied):void 0,nextActionDate:void 0,connectionIds:[]}))}function dr(e){return!e||e<=1?1:e<=3?2:3}function Lt(e){if(typeof e=="number")return e;const t=new Date(e).getTime();return isNaN(t)?Date.now():t}async function ur(){const[e,t,n]=await Promise.all([$t(),vn(),Zn()]);return{version:2,exportDate:new Date().toISOString(),postings:e,connections:t,settings:n}}async function fr(){const e=await ur(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=`jobflow-backup-${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(n)}async function hr(e){try{const t=await e.text(),n=JSON.parse(t);let s;if(n.version===1||!n.version){const a=n.postings||n.applications||[],o=bn(a);s={version:2,exportDate:n.exportDate||new Date().toISOString(),postings:o,connections:n.connections||[],settings:n.settings||{defaultView:"kanban",theme:"light"}}}else s=n;return Array.isArray(s.postings)?{success:!0,data:s,fileName:e.name}:{success:!1,data:null,fileName:e.name,error:"Invalid file format: missing postings array"}}catch(t){return{success:!1,data:null,fileName:e.name,error:t instanceof Error?t.message:"Failed to parse JSON file"}}}function gr(e){if(typeof e!="object"||e===null)return!1;const t=e;return typeof t.id=="string"&&typeof t.title=="string"&&typeof t.company=="string"&&typeof t.url=="string"&&t.id.length>0&&t.title.length>0}function mr(e,t){const n=new Map(e.map(s=>[s.id,s]));for(const s of t){const a=n.get(s.id);(!a||s.dateModified>a.dateModified)&&n.set(s.id,s)}return Array.from(n.values())}function xr(e,t){const n=new Map(e.map(s=>[s.id,s]));for(const s of t)n.set(s.id,s);return Array.from(n.values())}async function pr(e){var d;const t=[];let n=0;const s=[];for(let u=0;u<e.postings.length;u++){const f=e.postings[u];gr(f)?s.push({...f,status:f.status||"saved",priority:f.priority||2,tags:f.tags||[],notes:f.notes||"",dateAdded:f.dateAdded||Date.now(),dateModified:f.dateModified||Date.now(),connectionIds:f.connectionIds||[]}):(t.push(`Posting ${u+1}: missing required field (id or title)`),n++)}const[a,o]=await Promise.all([$t(),vn()]),c=mr(a,s),l=xr(o,e.connections||[]);return await Promise.all([Ft(c),Qn(l)]),{success:t.length===0,postings:s.length,connections:((d=e.connections)==null?void 0:d.length)||0,errors:t,skipped:n}}function vr(){return new Promise(e=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=n=>{var a;const s=(a=n.target.files)==null?void 0:a[0];e(s||null)},t.addEventListener("cancel",()=>e(null)),t.click()})}function br({className:e=""}){const[t,n]=i.useState(!1),s=async()=>{n(!0);try{await fr()}catch(a){console.error("Export failed:",a),alert("Failed to export data. Please try again.")}finally{n(!1)}};return r.jsxs("button",{onClick:s,disabled:t,className:`inline-flex items-center gap-2 ${e}`,title:"Export data to JSON file",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),t?"Exporting...":"Export Data"]})}function yr({isOpen:e,parsedFile:t,onConfirm:n,onCancel:s,isImporting:a,importResult:o}){var l;if(!e)return null;const c=d=>{try{return new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return d}};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:a?void 0:s}),r.jsxs("div",{className:"relative w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[r.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:o?"Import Complete":"Import Backup"}),t&&!t.success&&r.jsxs("div",{className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700",children:[r.jsx("p",{className:"font-medium",children:"Failed to parse file"}),r.jsx("p",{children:t.error})]}),(t==null?void 0:t.success)&&t.data&&!o&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"File:"})," ",t.fileName]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Exported:"})," ",c(t.data.exportDate)]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Found:"}),r.jsxs("ul",{className:"ml-4 list-disc text-sm text-gray-600",children:[r.jsxs("li",{children:[t.data.postings.length," postings"]}),r.jsxs("li",{children:[((l=t.data.connections)==null?void 0:l.length)||0," connections"]})]})]}),r.jsx("div",{className:"rounded-md bg-blue-50 p-3 text-sm text-blue-700",children:r.jsx("p",{children:"Import will merge with existing data. Newer entries will overwrite older ones."})})]}),o&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:`rounded-md p-3 text-sm ${o.success?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:r.jsx("p",{className:"font-medium",children:o.success?"Import successful!":"Import completed with warnings"})}),r.jsxs("ul",{className:"ml-4 list-disc text-sm text-gray-600",children:[r.jsxs("li",{children:[o.postings," postings imported"]}),r.jsxs("li",{children:[o.connections," connections imported"]}),o.skipped>0&&r.jsxs("li",{className:"text-yellow-600",children:[o.skipped," items skipped"]})]}),o.errors.length>0&&r.jsxs("div",{className:"rounded-md bg-yellow-50 p-3",children:[r.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Warnings:"}),r.jsxs("ul",{className:"mt-1 list-disc pl-4 text-sm text-yellow-600",children:[o.errors.slice(0,5).map((d,u)=>r.jsx("li",{children:d},u)),o.errors.length>5&&r.jsxs("li",{children:["...and ",o.errors.length-5," more"]})]})]})]}),r.jsx("div",{className:"mt-6 flex justify-end gap-3",children:o?r.jsx("button",{onClick:s,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Done"}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:s,disabled:a,className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:n,disabled:a||!(t!=null&&t.success),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:a?"Importing...":"Import"})]})})]})]})}function wr({className:e="",onImportComplete:t}){const[n,s]=i.useState(!1),[a,o]=i.useState(null),[c,l]=i.useState(!1),[d,u]=i.useState(null),f=async()=>{const g=await vr();if(!g)return;const x=await hr(g);o(x),u(null),s(!0)},h=async()=>{if(!(!(a!=null&&a.success)||!a.data)){l(!0);try{const g=await pr(a.data);u(g),t==null||t()}catch(g){console.error("Import failed:",g),u({success:!1,postings:0,connections:0,errors:[g instanceof Error?g.message:"Unknown error occurred"],skipped:0})}finally{l(!1)}}},m=()=>{s(!1),o(null),u(null)};return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:f,className:`inline-flex items-center gap-2 ${e}`,title:"Import data from JSON file",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),r.jsx(yr,{isOpen:n,parsedFile:a,onConfirm:h,onCancel:m,isImporting:c,importResult:d})]})}function jr({availableTags:e,selectedTags:t,onChange:n}){const[s,a]=i.useState(!1),o=i.useRef(null);i.useEffect(()=>{const d=u=>{o.current&&!o.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=d=>{t.includes(d)?n(t.filter(u=>u!==d)):n([...t,d])},l=t.length>0;return r.jsxs("div",{className:"relative",ref:o,children:[r.jsxs("button",{onClick:()=>a(!s),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${l?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx("span",{children:"Tags"}),l&&r.jsx("span",{className:"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white",children:t.length}),r.jsx("svg",{className:`h-4 w-4 transition-transform ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&r.jsx("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:e.length===0?r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No tags available"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.map(d=>r.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-4 py-2 hover:bg-gray-100",children:[r.jsx("input",{type:"checkbox",checked:t.includes(d),onChange:()=>c(d),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:d})]},d))}),l&&r.jsx("div",{className:"border-t border-gray-100 px-4 py-2",children:r.jsx("button",{onClick:()=>n([]),className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear selection"})})]})})]})}function Cr({availableCompanies:e,value:t,onChange:n}){const[s,a]=i.useState(!1),[o,c]=i.useState(t),l=i.useRef(null),d=i.useRef(null);i.useEffect(()=>{c(t)},[t]),i.useEffect(()=>{const x=v=>{d.current&&!d.current.contains(v.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const u=e.filter(x=>x.toLowerCase().includes(o.toLowerCase())).slice(0,10),f=x=>{const v=x.target.value;c(v),n(v),a(!0)},h=x=>{c(x),n(x),a(!1)},m=()=>{var x;c(""),n(""),(x=l.current)==null||x.focus()},g=t.length>0;return r.jsxs("div",{className:"relative",ref:d,children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:l,type:"text",value:o,onChange:f,onFocus:()=>a(!0),placeholder:"Company...",className:`w-36 rounded-md border px-3 py-2 pr-8 text-sm ${g?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),g&&r.jsx("button",{onClick:m,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s&&u.length>0&&o.length>0&&r.jsx("div",{className:"absolute left-0 z-20 mt-1 w-full rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:r.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.map(x=>r.jsx("button",{onClick:()=>h(x),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:x},x))})})]})}function Nr({fromDate:e,toDate:t,onFromChange:n,onToChange:s}){const a=e!==null||t!==null,o=()=>{n(null),s(null)};return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Date added:"}),r.jsx("input",{type:"date",value:e||"",onChange:c=>n(c.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),r.jsx("span",{className:"text-sm text-gray-500",children:"to"}),r.jsx("input",{type:"date",value:t||"",onChange:c=>s(c.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${t?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),a&&r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",title:"Clear date range",children:r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function kr({dateFrom:e,dateTo:t,hasDeadline:n,deadlineSoon:s,needsAction:a,onDateFromChange:o,onDateToChange:c,onHasDeadlineChange:l,onDeadlineSoonChange:d,onNeedsActionChange:u,onClearAll:f}){const[h,m]=i.useState(!1),g=i.useRef(null);i.useEffect(()=>{const v=y=>{g.current&&!g.current.contains(y.target)&&m(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const x=[e!==null||t!==null,n,s,a].filter(Boolean).length;return r.jsxs("div",{className:"relative",ref:g,children:[r.jsxs("button",{onClick:()=>m(!h),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${x>0?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),r.jsx("span",{children:"More Filters"}),x>0&&r.jsx("span",{className:"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white",children:x}),r.jsx("svg",{className:`h-4 w-4 transition-transform ${h?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&r.jsx("div",{className:"absolute right-0 z-20 mt-1 w-96 rounded-md bg-white p-4 shadow-lg ring-1 ring-black ring-opacity-5",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(Nr,{fromDate:e,toDate:t,onFromChange:o,onToChange:c}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:n,onChange:v=>l(v.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Has deadline"})]}),r.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:s,onChange:v=>d(v.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Deadline within 7 days"})]}),r.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:v=>u(v.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Needs action (stale)"})]})]}),x>0&&r.jsx("div",{className:"border-t border-gray-100 pt-3",children:r.jsx("button",{onClick:()=>{f(),m(!1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all filters"})})]})})]})}const Sr=[{title:"Global",shortcuts:[{keys:"/",description:"Focus search"},{keys:"⌘K",description:"Focus search (alt)"},{keys:"Esc",description:"Close panel / clear search"},{keys:"?",description:"Show this help"},{keys:"N",description:"New posting"}]},{title:"Status Filter",shortcuts:[{keys:"1",description:"Filter to Saved"},{keys:"2",description:"Filter to In Progress"},{keys:"3",description:"Filter to Applied"},{keys:"4",description:"Filter to Interviewing"},{keys:"5",description:"Filter to Offer"},{keys:"6",description:"Filter to Accepted"},{keys:"7",description:"Filter to Rejected"},{keys:"0",description:"Clear status filter"}]},{title:"Card Navigation",shortcuts:[{keys:"J / ↓",description:"Next card"},{keys:"K / ↑",description:"Previous card"},{keys:"↵",description:"Open detail panel"}]},{title:"Card Actions",shortcuts:[{keys:"S",description:"Cycle priority"},{keys:"O",description:"Open original URL"},{keys:"D",description:"Delete posting"}]}];function Dr({isOpen:e,onClose:t}){return i.useEffect(()=>{const n=s=>{s.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t]),e?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),r.jsxs("div",{className:"relative max-h-[80vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white shadow-xl",children:[r.jsxs("div",{className:"sticky top-0 flex items-center justify-between border-b border-gray-200 bg-white px-6 py-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Keyboard Shortcuts"}),r.jsx("button",{onClick:t,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"grid gap-6 p-6 sm:grid-cols-2",children:Sr.map(n=>r.jsxs("div",{children:[r.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase text-gray-500",children:n.title}),r.jsx("div",{className:"space-y-2",children:n.shortcuts.map(s=>r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-sm text-gray-600",children:s.description}),r.jsx("kbd",{className:"rounded bg-gray-100 px-2 py-1 text-xs font-mono text-gray-700",children:s.keys})]},s.keys))})]},n.title))}),r.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 text-center text-sm text-gray-500",children:["Press ",r.jsx("kbd",{className:"rounded bg-gray-100 px-1.5 py-0.5 font-mono text-xs",children:"Esc"})," to close"]})]})]}):null}const Er=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function Lr({searchQuery:e,onSearchChange:t,priorityFilter:n,onPriorityFilterChange:s,currentView:a,onViewChange:o,onAddClick:c,availableTags:l,availableCompanies:d,tagFilters:u,onTagFiltersChange:f,companyFilter:h,onCompanyFilterChange:m,dateFrom:g,dateTo:x,onDateFromChange:v,onDateToChange:y,hasDeadline:D,deadlineSoon:C,needsAction:S,onHasDeadlineChange:L,onDeadlineSoonChange:b,onNeedsActionChange:N,onClearAllFilters:k,activeFilterCount:j,searchInputRef:M,statusFilter:O,onStatusFilterChange:T}){const[F,_]=i.useState(!1),K=i.useRef(null);return i.useEffect(()=>{const Z=ee=>{K.current&&!K.current.contains(ee.target)&&_(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]),r.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 bg-white px-4 py-3",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"JobFlow"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-64",children:r.jsx(Jn,{value:e,onChange:t,placeholder:"Search jobs... (Press /)",inputRef:M})}),r.jsx(qt,{label:"Priority",options:Er,value:n,onChange:s}),r.jsx(qt,{label:"Status",options:ut.map(Z=>({value:Z,label:ge[Z]})),value:O,onChange:T}),r.jsx(jr,{availableTags:l,selectedTags:u,onChange:f}),r.jsx(Cr,{availableCompanies:d,value:h,onChange:m}),r.jsx(kr,{dateFrom:g,dateTo:x,hasDeadline:D,deadlineSoon:C,needsAction:S,onDateFromChange:v,onDateToChange:y,onHasDeadlineChange:L,onDeadlineSoonChange:b,onNeedsActionChange:N,onClearAll:k}),j>0&&r.jsxs("button",{onClick:k,className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm text-blue-600 hover:bg-blue-50",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear all (",j,")"]}),r.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[r.jsx("button",{onClick:()=>o("kanban"),className:`px-3 py-2 text-sm ${a==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),r.jsx("button",{onClick:()=>o("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${a==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),r.jsxs("div",{className:"relative",ref:K,children:[r.jsx("button",{onClick:()=>_(!F),className:"rounded-md border border-gray-300 p-2 text-gray-600 hover:bg-gray-50",title:"Settings (? for shortcuts)",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),F&&r.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[r.jsx(br,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"}),r.jsx(wr,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onImportComplete:()=>_(!1)})]})]}),r.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",title:"Add new posting (N)",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})}const Rr={saved:"bg-blue-500",in_progress:"bg-orange-500",applied:"bg-green-500",interviewing:"bg-purple-500",offer:"bg-yellow-500",accepted:"bg-emerald-500",rejected:"bg-gray-400",withdrawn:"bg-gray-400"};function ct({icon:e,label:t,value:n,color:s="text-gray-600"}){return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`${s}`,children:e}),r.jsxs("div",{children:[r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:n}),r.jsx("span",{className:"ml-1 text-sm text-gray-500",children:t})]})]})}function Mr({status:e,count:t,total:n}){const s=n>0?t/n*100:0;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"w-24 text-sm text-gray-600",children:ge[e]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"h-4 overflow-hidden rounded-full bg-gray-100",children:r.jsx("div",{className:`h-full ${Rr[e]} transition-all duration-300`,style:{width:`${s}%`}})})}),r.jsx("span",{className:"w-8 text-right text-sm font-medium text-gray-700",children:t})]})}function Ar({stats:e,expanded:t,onExpandedChange:n}){return r.jsxs("div",{className:"border-b border-gray-200 bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx(ct,{icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"total",value:e.total}),r.jsx(ct,{icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"active",value:e.active,color:"text-blue-600"}),r.jsx(ct,{icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),label:"this week",value:e.thisWeek,color:"text-green-600"}),e.stale>0&&r.jsx(ct,{icon:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),label:"stale",value:e.stale,color:"text-orange-600"})]}),r.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-1 rounded px-2 py-1 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:[r.jsx("span",{children:t?"Hide":"Details"}),r.jsx("svg",{className:`h-4 w-4 transition-transform ${t?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t&&r.jsxs("div",{className:"border-t border-gray-100 px-4 py-3",children:[r.jsx("h4",{className:"mb-3 text-sm font-medium text-gray-500",children:"BY STATUS"}),r.jsx("div",{className:"space-y-2",children:ut.map(s=>r.jsx(Mr,{status:s,count:e.byStatus[s],total:e.total},s))})]})]})}const bt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ae(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vt(e){return"nodeType"in e}function H(e){var t,n;return e?Ae(e)?e:Vt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Wt(e){const{Document:t}=H(e);return e instanceof t}function qe(e){return Ae(e)?!1:e instanceof H(e).HTMLElement}function yn(e){return e instanceof H(e).SVGElement}function Oe(e){return e?Ae(e)?e.document:Vt(e)?Wt(e)?e:qe(e)||yn(e)?e.ownerDocument:document:document:document}const me=bt?i.useLayoutEffect:i.useEffect;function yt(e){const t=i.useRef(e);return me(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function Or(){const e=i.useRef(null),t=i.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ye(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return me(()=>{n.current!==e&&(n.current=e)},t),n}function Qe(e,t){const n=i.useRef();return i.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function ft(e){const t=yt(e),n=i.useRef(null),s=i.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,s]}function ht(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let Rt={};function wt(e,t){return i.useMemo(()=>{if(t)return t;const n=Rt[e]==null?0:Rt[e]+1;return Rt[e]=n,e+"-"+n},[e,t])}function wn(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((o,c)=>{const l=Object.entries(c);for(const[d,u]of l){const f=o[d];f!=null&&(o[d]=f+e*u)}return o},{...t})}}const Re=wn(1),Ge=wn(-1);function Tr(e){return"clientX"in e&&"clientY"in e}function _t(e){if(!e)return!1;const{KeyboardEvent:t}=H(e.target);return t&&e instanceof t}function Ir(e){if(!e)return!1;const{TouchEvent:t}=H(e.target);return t&&e instanceof t}function gt(e){if(Ir(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Tr(e)?{x:e.clientX,y:e.clientY}:null}const Me=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Me.Translate.toString(e),Me.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),en="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Pr(e){return e.matches(en)?e:e.querySelector(en)}const Br={display:"none"};function zr(e){let{id:t,value:n}=e;return I.createElement("div",{id:t,style:Br},n)}function $r(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function Fr(){const[e,t]=i.useState("");return{announce:i.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const jn=i.createContext(null);function Vr(e){const t=i.useContext(jn);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Wr(){const[e]=i.useState(()=>new Set),t=i.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[i.useCallback(s=>{let{type:a,event:o}=s;e.forEach(c=>{var l;return(l=c[a])==null?void 0:l.call(c,o)})},[e]),t]}const _r={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ur={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Hr(e){let{announcements:t=Ur,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=_r}=e;const{announce:o,announcement:c}=Fr(),l=wt("DndLiveRegion"),[d,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),Vr(i.useMemo(()=>({onDragStart(h){let{active:m}=h;o(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&o(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;o(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;o(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;o(t.onDragCancel({active:m,over:g}))}}),[o,t])),!d)return null;const f=I.createElement(I.Fragment,null,I.createElement(zr,{id:s,value:a.draggable}),I.createElement($r,{id:l,announcement:c}));return n?Ue.createPortal(f,n):f}var $;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})($||($={}));function mt(){}function tn(e,t){return i.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Kr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const re=Object.freeze({x:0,y:0});function Cn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Xr(e,t){const n=gt(e);if(!n)return"0 0";const s={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function Nn(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function Yr(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function nn(e){let{left:t,top:n,height:s,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+s},{x:t+a,y:n+s}]}function kn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function rn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Gr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=rn(t,t.left,t.top),o=[];for(const c of s){const{id:l}=c,d=n.get(l);if(d){const u=Cn(rn(d),a);o.push({id:l,data:{droppableContainer:c,value:u}})}}return o.sort(Nn)},Jr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=nn(t),o=[];for(const c of s){const{id:l}=c,d=n.get(l);if(d){const u=nn(d),f=a.reduce((m,g,x)=>m+Cn(u[x],g),0),h=Number((f/4).toFixed(4));o.push({id:l,data:{droppableContainer:c,value:h}})}}return o.sort(Nn)};function qr(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),c=a-s,l=o-n;if(s<a&&n<o){const d=t.width*t.height,u=e.width*e.height,f=c*l,h=f/(d+u-f);return Number(h.toFixed(4))}return 0}const Qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=[];for(const o of s){const{id:c}=o,l=n.get(c);if(l){const d=qr(l,t);d>0&&a.push({id:c,data:{droppableContainer:o,value:d}})}}return a.sort(Yr)};function Zr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Sn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:re}function es(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((c,l)=>({...c,top:c.top+e*l.y,bottom:c.bottom+e*l.y,left:c.left+e*l.x,right:c.right+e*l.x}),{...n})}}const ts=es(1);function Dn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ns(e,t,n){const s=Dn(t);if(!s)return e;const{scaleX:a,scaleY:o,x:c,y:l}=s,d=e.left-c-(1-a)*parseFloat(n),u=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=o?e.height/o:e.height;return{width:f,height:h,top:u,right:d+f,bottom:u+h,left:d}}const rs={ignoreTransform:!1};function Ze(e,t){t===void 0&&(t=rs);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=H(e).getComputedStyle(e);u&&(n=ns(n,u,f))}const{top:s,left:a,width:o,height:c,bottom:l,right:d}=n;return{top:s,left:a,width:o,height:c,bottom:l,right:d}}function sn(e){return Ze(e,{ignoreTransform:!0})}function ss(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function os(e,t){return t===void 0&&(t=H(e).getComputedStyle(e)),t.position==="fixed"}function as(e,t){t===void 0&&(t=H(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?n.test(o):!1})}function jt(e,t){const n=[];function s(a){if(t!=null&&n.length>=t||!a)return n;if(Wt(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!qe(a)||yn(a)||n.includes(a))return n;const o=H(e).getComputedStyle(a);return a!==e&&as(a,o)&&n.push(a),os(a,o)?n:s(a.parentNode)}return e?s(e):n}function En(e){const[t]=jt(e,1);return t??null}function Mt(e){return!bt||!e?null:Ae(e)?e:Vt(e)?Wt(e)||e===Oe(e).scrollingElement?window:qe(e)?e:null:null}function Ln(e){return Ae(e)?e.scrollX:e.scrollLeft}function Rn(e){return Ae(e)?e.scrollY:e.scrollTop}function It(e){return{x:Ln(e),y:Rn(e)}}var V;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(V||(V={}));function Mn(e){return!bt||!e?!1:e===document.scrollingElement}function An(e){const t={x:0,y:0},n=Mn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,c=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:c,isRight:l,maxScroll:s,minScroll:t}}const is={x:.2,y:.2};function ls(e,t,n,s,a){let{top:o,left:c,right:l,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=is);const{isTop:u,isBottom:f,isLeft:h,isRight:m}=An(e),g={x:0,y:0},x={x:0,y:0},v={height:t.height*a.y,width:t.width*a.x};return!u&&o<=t.top+v.height?(g.y=V.Backward,x.y=s*Math.abs((t.top+v.height-o)/v.height)):!f&&d>=t.bottom-v.height&&(g.y=V.Forward,x.y=s*Math.abs((t.bottom-v.height-d)/v.height)),!m&&l>=t.right-v.width?(g.x=V.Forward,x.x=s*Math.abs((t.right-v.width-l)/v.width)):!h&&c<=t.left+v.width&&(g.x=V.Backward,x.x=s*Math.abs((t.left+v.width-c)/v.width)),{direction:g,speed:x}}function cs(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:c}=window;return{top:0,left:0,right:o,bottom:c,width:o,height:c}}const{top:t,left:n,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function On(e){return e.reduce((t,n)=>Re(t,It(n)),re)}function ds(e){return e.reduce((t,n)=>t+Ln(n),0)}function us(e){return e.reduce((t,n)=>t+Rn(n),0)}function Tn(e,t){if(t===void 0&&(t=Ze),!e)return;const{top:n,left:s,bottom:a,right:o}=t(e);En(e)&&(a<=0||o<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const fs=[["x",["left","right"],ds],["y",["top","bottom"],us]];class Ut{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=jt(n),a=On(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,c,l]of fs)for(const d of c)Object.defineProperty(this,d,{get:()=>{const u=l(s),f=a[o]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class He{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var a;(a=this.target)==null||a.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function hs(e){const{EventTarget:t}=H(e);return e instanceof t?e:Oe(e)}function At(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Q;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Q||(Q={}));function on(e){e.preventDefault()}function gs(e){e.stopPropagation()}var E;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(E||(E={}));const In={start:[E.Space,E.Enter],cancel:[E.Esc],end:[E.Space,E.Enter,E.Tab]},ms=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case E.Right:return{...n,x:n.x+25};case E.Left:return{...n,x:n.x-25};case E.Down:return{...n,y:n.y+25};case E.Up:return{...n,y:n.y-25}}};class Ht{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new He(Oe(n)),this.windowListeners=new He(H(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Q.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&Tn(s),n(re)}handleKeyDown(t){if(_t(t)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:o=In,coordinateGetter:c=ms,scrollBehavior:l="smooth"}=a,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=s.current,f=u?{x:u.left,y:u.top}:re;this.referenceCoordinates||(this.referenceCoordinates=f);const h=c(t,{active:n,context:s.current,currentCoordinates:f});if(h){const m=Ge(h,f),g={x:0,y:0},{scrollableAncestors:x}=s.current;for(const v of x){const y=t.code,{isTop:D,isRight:C,isLeft:S,isBottom:L,maxScroll:b,minScroll:N}=An(v),k=cs(v),j={x:Math.min(y===E.Right?k.right-k.width/2:k.right,Math.max(y===E.Right?k.left:k.left+k.width/2,h.x)),y:Math.min(y===E.Down?k.bottom-k.height/2:k.bottom,Math.max(y===E.Down?k.top:k.top+k.height/2,h.y))},M=y===E.Right&&!C||y===E.Left&&!S,O=y===E.Down&&!L||y===E.Up&&!D;if(M&&j.x!==h.x){const T=v.scrollLeft+m.x,F=y===E.Right&&T<=b.x||y===E.Left&&T>=N.x;if(F&&!m.y){v.scrollTo({left:T,behavior:l});return}F?g.x=v.scrollLeft-T:g.x=y===E.Right?v.scrollLeft-b.x:v.scrollLeft-N.x,g.x&&v.scrollBy({left:-g.x,behavior:l});break}else if(O&&j.y!==h.y){const T=v.scrollTop+m.y,F=y===E.Down&&T<=b.y||y===E.Up&&T>=N.y;if(F&&!m.x){v.scrollTo({top:T,behavior:l});return}F?g.y=v.scrollTop-T:g.y=y===E.Down?v.scrollTop-b.y:v.scrollTop-N.y,g.y&&v.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,Re(Ge(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ht.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=In,onActivation:a}=t,{active:o}=n;const{code:c}=e.nativeEvent;if(s.start.includes(c)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function an(e){return!!(e&&"distance"in e)}function ln(e){return!!(e&&"delay"in e)}class Kt{constructor(t,n,s){var a;s===void 0&&(s=hs(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:c}=o;this.props=t,this.events=n,this.document=Oe(c),this.documentListeners=new He(this.document),this.listeners=new He(s),this.windowListeners=new He(H(c)),this.initialCoordinates=(a=gt(o))!=null?a:re,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Q.Resize,this.handleCancel),this.windowListeners.add(Q.DragStart,on),this.windowListeners.add(Q.VisibilityChange,this.handleCancel),this.windowListeners.add(Q.ContextMenu,on),this.documentListeners.add(Q.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ln(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(an(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Q.Click,gs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Q.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:c,options:{activationConstraint:l}}=o;if(!a)return;const d=(n=gt(t))!=null?n:re,u=Ge(a,d);if(!s&&l){if(an(l)){if(l.tolerance!=null&&At(u,l.tolerance))return this.handleCancel();if(At(u,l.distance))return this.handleStart()}if(ln(l)&&At(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),c(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===E.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const xs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Xt extends Kt{constructor(t){const{event:n}=t,s=Oe(n.target);super(t,xs,s)}}Xt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const ps={move:{name:"mousemove"},end:{name:"mouseup"}};var Pt;(function(e){e[e.RightClick=2]="RightClick"})(Pt||(Pt={}));class vs extends Kt{constructor(t){super(t,ps,Oe(t.event.target))}}vs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Pt.RightClick?!1:(s==null||s({event:n}),!0)}}];const Ot={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class bs extends Kt{constructor(t){super(t,Ot)}static setup(){return window.addEventListener(Ot.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ot.move.name,t)};function t(){}}}bs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:a}=n;return a.length>1?!1:(s==null||s({event:n}),!0)}}];var Ke;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ke||(Ke={}));var xt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(xt||(xt={}));function ys(e){let{acceleration:t,activator:n=Ke.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:c=5,order:l=xt.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:h,threshold:m}=e;const g=js({delta:h,disabled:!o}),[x,v]=Or(),y=i.useRef({x:0,y:0}),D=i.useRef({x:0,y:0}),C=i.useMemo(()=>{switch(n){case Ke.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Ke.DraggableRect:return a}},[n,a,d]),S=i.useRef(null),L=i.useCallback(()=>{const N=S.current;if(!N)return;const k=y.current.x*D.current.x,j=y.current.y*D.current.y;N.scrollBy(k,j)},[]),b=i.useMemo(()=>l===xt.TreeOrder?[...u].reverse():u,[l,u]);i.useEffect(()=>{if(!o||!u.length||!C){v();return}for(const N of b){if((s==null?void 0:s(N))===!1)continue;const k=u.indexOf(N),j=f[k];if(!j)continue;const{direction:M,speed:O}=ls(N,j,C,t,m);for(const T of["x","y"])g[T][M[T]]||(O[T]=0,M[T]=0);if(O.x>0||O.y>0){v(),S.current=N,x(L,c),y.current=O,D.current=M;return}}y.current={x:0,y:0},D.current={x:0,y:0},v()},[t,L,s,v,o,c,JSON.stringify(C),JSON.stringify(g),x,u,b,f,JSON.stringify(m)])}const ws={x:{[V.Backward]:!1,[V.Forward]:!1},y:{[V.Backward]:!1,[V.Forward]:!1}};function js(e){let{delta:t,disabled:n}=e;const s=ht(t);return Qe(a=>{if(n||!s||!a)return ws;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[V.Backward]:a.x[V.Backward]||o.x===-1,[V.Forward]:a.x[V.Forward]||o.x===1},y:{[V.Backward]:a.y[V.Backward]||o.y===-1,[V.Forward]:a.y[V.Forward]||o.y===1}}},[n,t,s])}function Cs(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return Qe(a=>{var o;return t==null?null:(o=s??a)!=null?o:null},[s,t])}function Ns(e,t){return i.useMemo(()=>e.reduce((n,s)=>{const{sensor:a}=s,o=a.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,s)}));return[...n,...o]},[]),[e,t])}var Je;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Je||(Je={}));var Bt;(function(e){e.Optimized="optimized"})(Bt||(Bt={}));const cn=new Map;function ks(e,t){let{dragging:n,dependencies:s,config:a}=t;const[o,c]=i.useState(null),{frequency:l,measure:d,strategy:u}=a,f=i.useRef(e),h=y(),m=Ye(h),g=i.useCallback(function(D){D===void 0&&(D=[]),!m.current&&c(C=>C===null?D:C.concat(D.filter(S=>!C.includes(S))))},[m]),x=i.useRef(null),v=Qe(D=>{if(h&&!n)return cn;if(!D||D===cn||f.current!==e||o!=null){const C=new Map;for(let S of e){if(!S)continue;if(o&&o.length>0&&!o.includes(S.id)&&S.rect.current){C.set(S.id,S.rect.current);continue}const L=S.node.current,b=L?new Ut(d(L),L):null;S.rect.current=b,b&&C.set(S.id,b)}return C}return D},[e,o,n,h,d]);return i.useEffect(()=>{f.current=e},[e]),i.useEffect(()=>{h||g()},[n,h]),i.useEffect(()=>{o&&o.length>0&&c(null)},[JSON.stringify(o)]),i.useEffect(()=>{h||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},l))},[l,h,g,...s]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:o!=null};function y(){switch(u){case Je.Always:return!1;case Je.BeforeDragging:return n;default:return!n}}}function Yt(e,t){return Qe(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ss(e,t){return Yt(e,t)}function Ds(e){let{callback:t,disabled:n}=e;const s=yt(t),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,n]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Ct(e){let{callback:t,disabled:n}=e;const s=yt(t),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[n]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Es(e){return new Ut(Ze(e),e)}function dn(e,t,n){t===void 0&&(t=Es);const[s,a]=i.useState(null);function o(){a(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const c=Ds({callback(d){if(e)for(const u of d){const{type:f,target:h}=u;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){o();break}}}}),l=Ct({callback:o});return me(()=>{o(),e?(l==null||l.observe(e),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),c==null||c.disconnect())},[e]),s}function Ls(e){const t=Yt(e);return Sn(e,t)}const un=[];function Rs(e){const t=i.useRef(e),n=Qe(s=>e?s&&s!==un&&e&&t.current&&e.parentNode===t.current.parentNode?s:jt(e):un,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function Ms(e){const[t,n]=i.useState(null),s=i.useRef(e),a=i.useCallback(o=>{const c=Mt(o.target);c&&n(l=>l?(l.set(c,It(c)),new Map(l)):null)},[]);return i.useEffect(()=>{const o=s.current;if(e!==o){c(o);const l=e.map(d=>{const u=Mt(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,It(u)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),s.current=e}return()=>{c(e),c(o)};function c(l){l.forEach(d=>{const u=Mt(d);u==null||u.removeEventListener("scroll",a)})}},[a,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,c)=>Re(o,c),re):On(e):re,[e,t])}function fn(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const s=e!==re;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?Ge(e,n.current):re}function As(e){i.useEffect(()=>{if(!bt)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Os(e,t){return i.useMemo(()=>e.reduce((n,s)=>{let{eventName:a,handler:o}=s;return n[a]=c=>{o(c,t)},n},{}),[e,t])}function Pn(e){return i.useMemo(()=>e?ss(e):null,[e])}const hn=[];function Ts(e,t){t===void 0&&(t=Ze);const[n]=e,s=Pn(n?H(n):null),[a,o]=i.useState(hn);function c(){o(()=>e.length?e.map(d=>Mn(d)?s:new Ut(t(d),d)):hn)}const l=Ct({callback:c});return me(()=>{l==null||l.disconnect(),c(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),a}function Bn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return qe(t)?t:e}function Is(e){let{measure:t}=e;const[n,s]=i.useState(null),a=i.useCallback(u=>{for(const{target:f}of u)if(qe(f)){s(h=>{const m=t(f);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),o=Ct({callback:a}),c=i.useCallback(u=>{const f=Bn(u);o==null||o.disconnect(),f&&(o==null||o.observe(f)),s(f?t(f):null)},[t,o]),[l,d]=ft(c);return i.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const Ps=[{sensor:Xt,options:{}},{sensor:Ht,options:{}}],Bs={current:{}},dt={draggable:{measure:sn},droppable:{measure:sn,strategy:Je.WhileDragging,frequency:Bt.Optimized},dragOverlay:{measure:Ze}};class Xe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const zs={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dt,measureDroppableContainers:mt,windowRect:null,measuringScheduled:!1},zn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mt,draggableNodes:new Map,over:null,measureDroppableContainers:mt},et=i.createContext(zn),$n=i.createContext(zs);function $s(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xe}}}function Fs(e,t){switch(t.type){case $.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case $.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case $.DragEnd:case $.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $.RegisterDroppable:{const{element:n}=t,{id:s}=n,a=new Xe(e.droppable.containers);return a.set(s,n),{...e,droppable:{...e.droppable,containers:a}}}case $.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=t,o=e.droppable.containers.get(n);if(!o||s!==o.key)return e;const c=new Xe(e.droppable.containers);return c.set(n,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:c}}}case $.UnregisterDroppable:{const{id:n,key:s}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const o=new Xe(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Vs(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:a}=i.useContext(et),o=ht(s),c=ht(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!s&&o&&c!=null){if(!_t(o)||document.activeElement===o.target)return;const l=a.get(c);if(!l)return;const{activatorNode:d,node:u}=l;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const h=Pr(f);if(h){h.focus();break}}})}},[s,t,a,c,o]),null}function Fn(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...s}),n):n}function Ws(e){return i.useMemo(()=>({draggable:{...dt.draggable,...e==null?void 0:e.draggable},droppable:{...dt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...dt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function _s(e){let{activeNode:t,measure:n,initialRect:s,config:a=!0}=e;const o=i.useRef(!1),{x:c,y:l}=typeof a=="boolean"?{x:a,y:a}:a;me(()=>{if(!c&&!l||!t){o.current=!1;return}if(o.current||!s)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),h=Sn(f,s);if(c||(h.x=0),l||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=En(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,c,l,s,n])}const Nt=i.createContext({...re,scaleX:1,scaleY:1});var ye;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ye||(ye={}));const Us=i.memo(function(t){var n,s,a,o;let{id:c,accessibility:l,autoScroll:d=!0,children:u,sensors:f=Ps,collisionDetection:h=Qr,measuring:m,modifiers:g,...x}=t;const v=i.useReducer(Fs,void 0,$s),[y,D]=v,[C,S]=Wr(),[L,b]=i.useState(ye.Uninitialized),N=L===ye.Initialized,{draggable:{active:k,nodes:j,translate:M},droppable:{containers:O}}=y,T=k!=null?j.get(k):null,F=i.useRef({initial:null,translated:null}),_=i.useMemo(()=>{var U;return k!=null?{id:k,data:(U=T==null?void 0:T.data)!=null?U:Bs,rect:F}:null},[k,T]),K=i.useRef(null),[Z,ee]=i.useState(null),[P,Te]=i.useState(null),ie=Ye(x,Object.values(x)),Ce=wt("DndDescribedBy",c),tt=i.useMemo(()=>O.getEnabled(),[O]),le=Ws(m),{droppableRects:te,measureDroppableContainers:Ne,measuringScheduled:nt}=ks(tt,{dragging:N,dependencies:[M.x,M.y],config:le.droppable}),X=Cs(j,k),rt=i.useMemo(()=>P?gt(P):null,[P]),st=Hn(),ot=Ss(X,le.draggable.measure);_s({activeNode:k!=null?j.get(k):null,config:st.layoutShiftCompensation,initialRect:ot,measure:le.draggable.measure});const B=dn(X,le.draggable.measure,ot),Ie=dn(X?X.parentElement:null),ce=i.useRef({activatorEvent:null,active:null,activeNode:X,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=O.getNodeFor((n=ce.current.over)==null?void 0:n.id),de=Is({measure:le.dragOverlay.measure}),ke=(s=de.nodeRef.current)!=null?s:X,xe=N?(a=de.rect)!=null?a:B:null,we=!!(de.nodeRef.current&&de.rect),Be=Ls(we?null:B),je=Pn(ke?H(ke):null),ne=Rs(N?Pe??X:null),Se=Ts(ne),ue=Fn(g,{transform:{x:M.x-Be.x,y:M.y-Be.y,scaleX:1,scaleY:1},activatorEvent:P,active:_,activeNodeRect:B,containerNodeRect:Ie,draggingNodeRect:xe,over:ce.current.over,overlayNodeRect:de.rect,scrollableAncestors:ne,scrollableAncestorRects:Se,windowRect:je}),ze=rt?Re(rt,M):null,at=Ms(ne),p=fn(at),w=fn(at,[B]),R=Re(ue,p),A=xe?ts(xe,ue):null,fe=_&&A?h({active:_,collisionRect:A,droppableRects:te,droppableContainers:tt,pointerCoordinates:ze}):null,De=kn(fe,"id"),[se,$e]=i.useState(null),kt=we?ue:Re(ue,w),St=Zr(kt,(o=se==null?void 0:se.rect)!=null?o:null,B),Fe=i.useRef(null),it=i.useCallback((U,Y)=>{let{sensor:G,options:pe}=Y;if(K.current==null)return;const q=j.get(K.current);if(!q)return;const J=U.nativeEvent,oe=new G({active:K.current,activeNode:q,event:J,options:pe,context:ce,onAbort(W){if(!j.get(W))return;const{onDragAbort:ae}=ie.current,he={id:W};ae==null||ae(he),C({type:"onDragAbort",event:he})},onPending(W,ve,ae,he){if(!j.get(W))return;const{onDragPending:We}=ie.current,be={id:W,constraint:ve,initialCoordinates:ae,offset:he};We==null||We(be),C({type:"onDragPending",event:be})},onStart(W){const ve=K.current;if(ve==null)return;const ae=j.get(ve);if(!ae)return;const{onDragStart:he}=ie.current,Ve={activatorEvent:J,active:{id:ve,data:ae.data,rect:F}};Ue.unstable_batchedUpdates(()=>{he==null||he(Ve),b(ye.Initializing),D({type:$.DragStart,initialCoordinates:W,active:ve}),C({type:"onDragStart",event:Ve}),ee(Fe.current),Te(J)})},onMove(W){D({type:$.DragMove,coordinates:W})},onEnd:Le($.DragEnd),onCancel:Le($.DragCancel)});Fe.current=oe;function Le(W){return async function(){const{active:ae,collisions:he,over:Ve,scrollAdjustedTranslate:We}=ce.current;let be=null;if(ae&&We){const{cancelDrop:_e}=ie.current;be={activatorEvent:J,active:ae,collisions:he,delta:We,over:Ve},W===$.DragEnd&&typeof _e=="function"&&await Promise.resolve(_e(be))&&(W=$.DragCancel)}K.current=null,Ue.unstable_batchedUpdates(()=>{D({type:W}),b(ye.Uninitialized),$e(null),ee(null),Te(null),Fe.current=null;const _e=W===$.DragEnd?"onDragEnd":"onDragCancel";if(be){const Et=ie.current[_e];Et==null||Et(be),C({type:_e,event:be})}})}}},[j]),Dt=i.useCallback((U,Y)=>(G,pe)=>{const q=G.nativeEvent,J=j.get(pe);if(K.current!==null||!J||q.dndKit||q.defaultPrevented)return;const oe={active:J};U(G,Y.options,oe)===!0&&(q.dndKit={capturedBy:Y.sensor},K.current=pe,it(G,Y))},[j,it]),Ee=Ns(f,Dt);As(f),me(()=>{B&&L===ye.Initializing&&b(ye.Initialized)},[B,L]),i.useEffect(()=>{const{onDragMove:U}=ie.current,{active:Y,activatorEvent:G,collisions:pe,over:q}=ce.current;if(!Y||!G)return;const J={active:Y,activatorEvent:G,collisions:pe,delta:{x:R.x,y:R.y},over:q};Ue.unstable_batchedUpdates(()=>{U==null||U(J),C({type:"onDragMove",event:J})})},[R.x,R.y]),i.useEffect(()=>{const{active:U,activatorEvent:Y,collisions:G,droppableContainers:pe,scrollAdjustedTranslate:q}=ce.current;if(!U||K.current==null||!Y||!q)return;const{onDragOver:J}=ie.current,oe=pe.get(De),Le=oe&&oe.rect.current?{id:oe.id,rect:oe.rect.current,data:oe.data,disabled:oe.disabled}:null,W={active:U,activatorEvent:Y,collisions:G,delta:{x:q.x,y:q.y},over:Le};Ue.unstable_batchedUpdates(()=>{$e(Le),J==null||J(W),C({type:"onDragOver",event:W})})},[De]),me(()=>{ce.current={activatorEvent:P,active:_,activeNode:X,collisionRect:A,collisions:fe,droppableRects:te,draggableNodes:j,draggingNode:ke,draggingNodeRect:xe,droppableContainers:O,over:se,scrollableAncestors:ne,scrollAdjustedTranslate:R},F.current={initial:xe,translated:A}},[_,X,fe,A,j,ke,xe,te,O,se,ne,R]),ys({...st,delta:M,draggingRect:A,pointerCoordinates:ze,scrollableAncestors:ne,scrollableAncestorRects:Se});const _n=i.useMemo(()=>({active:_,activeNode:X,activeNodeRect:B,activatorEvent:P,collisions:fe,containerNodeRect:Ie,dragOverlay:de,draggableNodes:j,droppableContainers:O,droppableRects:te,over:se,measureDroppableContainers:Ne,scrollableAncestors:ne,scrollableAncestorRects:Se,measuringConfiguration:le,measuringScheduled:nt,windowRect:je}),[_,X,B,P,fe,Ie,de,j,O,te,se,Ne,ne,Se,le,nt,je]),Un=i.useMemo(()=>({activatorEvent:P,activators:Ee,active:_,activeNodeRect:B,ariaDescribedById:{draggable:Ce},dispatch:D,draggableNodes:j,over:se,measureDroppableContainers:Ne}),[P,Ee,_,B,D,Ce,j,se,Ne]);return I.createElement(jn.Provider,{value:S},I.createElement(et.Provider,{value:Un},I.createElement($n.Provider,{value:_n},I.createElement(Nt.Provider,{value:St},u)),I.createElement(Vs,{disabled:(l==null?void 0:l.restoreFocus)===!1})),I.createElement(Hr,{...l,hiddenTextDescribedById:Ce}));function Hn(){const U=(Z==null?void 0:Z.autoScrollEnabled)===!1,Y=typeof d=="object"?d.enabled===!1:d===!1,G=N&&!U&&!Y;return typeof d=="object"?{...d,enabled:G}:{enabled:G}}}),Hs=i.createContext(null),gn="button",Ks="Draggable";function Xs(e){let{id:t,data:n,disabled:s=!1,attributes:a}=e;const o=wt(Ks),{activators:c,activatorEvent:l,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:h,over:m}=i.useContext(et),{role:g=gn,roleDescription:x="draggable",tabIndex:v=0}=a??{},y=(d==null?void 0:d.id)===t,D=i.useContext(y?Nt:Hs),[C,S]=ft(),[L,b]=ft(),N=Os(c,t),k=Ye(n);me(()=>(h.set(t,{id:t,key:o,node:C,activatorNode:L,data:k}),()=>{const M=h.get(t);M&&M.key===o&&h.delete(t)}),[h,t]);const j=i.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":s,"aria-pressed":y&&g===gn?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[s,g,v,y,x,f.draggable]);return{active:d,activatorEvent:l,activeNodeRect:u,attributes:j,isDragging:y,listeners:s?void 0:N,node:C,over:m,setNodeRef:S,setActivatorNodeRef:b,transform:D}}function Ys(){return i.useContext($n)}const Gs="Droppable",Js={timeout:25};function Vn(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:a}=e;const o=wt(Gs),{active:c,dispatch:l,over:d,measureDroppableContainers:u}=i.useContext(et),f=i.useRef({disabled:n}),h=i.useRef(!1),m=i.useRef(null),g=i.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:y}={...Js,...a},D=Ye(v??s),C=i.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(D.current)?D.current:[D.current]),g.current=null},y)},[y]),S=Ct({callback:C,disabled:x||!c}),L=i.useCallback((j,M)=>{S&&(M&&(S.unobserve(M),h.current=!1),j&&S.observe(j))},[S]),[b,N]=ft(L),k=Ye(t);return i.useEffect(()=>{!S||!b.current||(S.disconnect(),h.current=!1,S.observe(b.current))},[b,S]),i.useEffect(()=>(l({type:$.RegisterDroppable,element:{id:s,key:o,disabled:n,node:b,rect:m,data:k}}),()=>l({type:$.UnregisterDroppable,key:o,id:s})),[s]),i.useEffect(()=>{n!==f.current.disabled&&(l({type:$.SetDroppableDisabled,id:s,key:o,disabled:n}),f.current.disabled=n)},[s,o,n,l]),{active:c,rect:m,isOver:(d==null?void 0:d.id)===s,node:b,over:d,setNodeRef:N}}function qs(e){let{animation:t,children:n}=e;const[s,a]=i.useState(null),[o,c]=i.useState(null),l=ht(n);return!n&&!s&&l&&a(l),me(()=>{if(!o)return;const d=s==null?void 0:s.key,u=s==null?void 0:s.props.id;if(d==null||u==null){a(null);return}Promise.resolve(t(u,o)).then(()=>{a(null)})},[t,s,o]),I.createElement(I.Fragment,null,n,s?i.cloneElement(s,{ref:c}):null)}const Qs={x:0,y:0,scaleX:1,scaleY:1};function Zs(e){let{children:t}=e;return I.createElement(et.Provider,{value:zn},I.createElement(Nt.Provider,{value:Qs},t))}const eo={position:"fixed",touchAction:"none"},to=e=>_t(e)?"transform 250ms ease":void 0,no=i.forwardRef((e,t)=>{let{as:n,activatorEvent:s,adjustScale:a,children:o,className:c,rect:l,style:d,transform:u,transition:f=to}=e;if(!l)return null;const h=a?u:{...u,scaleX:1,scaleY:1},m={...eo,width:l.width,height:l.height,top:l.top,left:l.left,transform:Me.Transform.toString(h),transformOrigin:a&&s?Xr(s,l):void 0,transition:typeof f=="function"?f(s):f,...d};return I.createElement(n,{className:c,style:m,ref:t},o)}),ro=e=>t=>{let{active:n,dragOverlay:s}=t;const a={},{styles:o,className:c}=e;if(o!=null&&o.active)for(const[l,d]of Object.entries(o.active))d!==void 0&&(a[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,d));if(o!=null&&o.dragOverlay)for(const[l,d]of Object.entries(o.dragOverlay))d!==void 0&&s.node.style.setProperty(l,d);return c!=null&&c.active&&n.node.classList.add(c.active),c!=null&&c.dragOverlay&&s.node.classList.add(c.dragOverlay),function(){for(const[d,u]of Object.entries(a))n.node.style.setProperty(d,u);c!=null&&c.active&&n.node.classList.remove(c.active)}},so=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Me.Transform.toString(t)},{transform:Me.Transform.toString(n)}]},oo={duration:250,easing:"ease",keyframes:so,sideEffects:ro({styles:{active:{opacity:"0"}}})};function ao(e){let{config:t,draggableNodes:n,droppableContainers:s,measuringConfiguration:a}=e;return yt((o,c)=>{if(t===null)return;const l=n.get(o);if(!l)return;const d=l.node.current;if(!d)return;const u=Bn(c);if(!u)return;const{transform:f}=H(c).getComputedStyle(c),h=Dn(f);if(!h)return;const m=typeof t=="function"?t:io(t);return Tn(d,a.draggable.measure),m({active:{id:o,data:l.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:c,rect:a.dragOverlay.measure(u)},droppableContainers:s,measuringConfiguration:a,transform:h})})}function io(e){const{duration:t,easing:n,sideEffects:s,keyframes:a}={...oo,...e};return o=>{let{active:c,dragOverlay:l,transform:d,...u}=o;if(!t)return;const f={x:l.rect.left-c.rect.left,y:l.rect.top-c.rect.top},h={scaleX:d.scaleX!==1?c.rect.width*d.scaleX/l.rect.width:1,scaleY:d.scaleY!==1?c.rect.height*d.scaleY/l.rect.height:1},m={x:d.x-f.x,y:d.y-f.y,...h},g=a({...u,active:c,dragOverlay:l,transform:{initial:d,final:m}}),[x]=g,v=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(v))return;const y=s==null?void 0:s({active:c,dragOverlay:l,...u}),D=l.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(C=>{D.onfinish=()=>{y==null||y(),C()}})}}let mn=0;function lo(e){return i.useMemo(()=>{if(e!=null)return mn++,mn},[e])}const co=I.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:s,style:a,transition:o,modifiers:c,wrapperElement:l="div",className:d,zIndex:u=999}=e;const{activatorEvent:f,active:h,activeNodeRect:m,containerNodeRect:g,draggableNodes:x,droppableContainers:v,dragOverlay:y,over:D,measuringConfiguration:C,scrollableAncestors:S,scrollableAncestorRects:L,windowRect:b}=Ys(),N=i.useContext(Nt),k=lo(h==null?void 0:h.id),j=Fn(c,{activatorEvent:f,active:h,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:y.rect,over:D,overlayNodeRect:y.rect,scrollableAncestors:S,scrollableAncestorRects:L,transform:N,windowRect:b}),M=Yt(m),O=ao({config:s,draggableNodes:x,droppableContainers:v,measuringConfiguration:C}),T=M?y.setRef:void 0;return I.createElement(Zs,null,I.createElement(qs,{animation:O},h&&k?I.createElement(no,{key:k,id:h.id,ref:T,as:l,activatorEvent:f,adjustScale:t,className:d,transition:o,rect:M,style:{zIndex:u,...a},transform:j},n):null))});function pt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const uo=[E.Down,E.Right,E.Up,E.Left],fo=(e,t)=>{let{context:{active:n,collisionRect:s,droppableRects:a,droppableContainers:o,over:c,scrollableAncestors:l}}=t;if(uo.includes(e.code)){if(e.preventDefault(),!n||!s)return;const d=[];o.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case E.Down:s.top<m.top&&d.push(h);break;case E.Up:s.top>m.top&&d.push(h);break;case E.Left:s.left>m.left&&d.push(h);break;case E.Right:s.left<m.left&&d.push(h);break}});const u=Jr({collisionRect:s,droppableRects:a,droppableContainers:d});let f=kn(u,"id");if(f===(c==null?void 0:c.id)&&u.length>1&&(f=u[1].id),f!=null){const h=o.get(n.id),m=o.get(f),g=m?a.get(m.id):null,x=m==null?void 0:m.node.current;if(x&&g&&h&&m){const y=jt(x).some((N,k)=>l[k]!==N),D=Wn(h,m),C=ho(h,m),S=y||!D?{x:0,y:0}:{x:C?s.width-g.width:0,y:C?s.height-g.height:0},L={x:g.left,y:g.top};return S.x&&S.y?L:Ge(L,S)}}}};function Wn(e,t){return!pt(e)||!pt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function ho(e,t){return!pt(e)||!pt(t)||!Wn(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function xn(e){return e.split(" ").slice(0,2).map(t=>t[0]).join("").toUpperCase()}function Gt(e){return Math.floor((Date.now()-e)/(1e3*60*60*24))}function pn(e){const t=Gt(e);return t===0?"Today":t===1?"1d":`${t}d`}function go(e,t){return e<=3?"text-gray-400":e<=7?"text-orange-500":t?"text-red-500 font-semibold":"text-red-500"}function mo(e){return vt(e.status)?!1:Gt(e.dateModified)>=7}function Jt({posting:e,onSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a,variant:o="kanban"}){const c=[{label:"Open URL",onClick:()=>window.open(e.url,"_blank"),icon:r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(f=>f!==e.status).map(f=>({label:`Move to ${ge[f]}`,onClick:()=>s(e.id,f)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>a(e.id),danger:!0,icon:r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],l=mo(e),d=Gt(e.dateModified),u=go(d,l);return o==="list"?r.jsx(Qt,{items:c,children:r.jsxs("div",{onClick:()=>t(e.id),className:"flex cursor-pointer items-center gap-4 border-b border-gray-200 bg-white px-4 py-3 hover:bg-gray-50",children:[r.jsxs("div",{className:"relative",children:[e.companyLogo?r.jsx("img",{src:e.companyLogo,alt:e.company,className:"h-10 w-10 rounded object-contain"}):r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:xn(e.company)}),l&&r.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-100",children:r.jsx("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"truncate font-medium text-gray-900",children:e.title}),r.jsx("p",{className:"truncate text-sm text-gray-500",children:e.company})]}),r.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:e.location}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600",children:ge[e.status]})}),r.jsx("div",{className:"flex-shrink-0",onClick:f=>f.stopPropagation(),children:r.jsx(Tt,{priority:e.priority,onChange:f=>n(e.id,f),size:"sm"})}),r.jsxs("div",{className:`flex flex-shrink-0 items-center gap-1 text-xs ${u}`,children:[l&&r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),pn(e.dateModified)]})]})}):r.jsx(Qt,{items:c,children:r.jsxs("div",{onClick:()=>t(e.id),className:`cursor-pointer rounded-lg border bg-white p-3 shadow-sm transition-shadow hover:shadow-md ${l?"border-red-200":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[e.companyLogo?r.jsx("img",{src:e.companyLogo,alt:e.company,className:"h-10 w-10 rounded object-contain"}):r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:xn(e.company)}),l&&r.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-100",children:r.jsx("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"truncate font-medium text-gray-900",children:e.title}),r.jsx("p",{className:"truncate text-sm text-gray-600",children:e.company}),r.jsx("p",{className:"truncate text-xs text-gray-500",children:e.location})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",onClick:f=>f.stopPropagation(),children:[r.jsx(Tt,{priority:e.priority,onChange:f=>n(e.id,f),size:"sm"}),r.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(f=>r.jsx(zt,{tag:f,size:"sm"},f)),e.tags.length>2&&r.jsxs("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-2]})]})]}),r.jsxs("div",{className:`flex items-center gap-1 text-xs ${u}`,children:[l&&r.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),pn(e.dateModified)]})]})]})})}function xo({posting:e,onSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a}){const{attributes:o,listeners:c,setNodeRef:l,transform:d,isDragging:u}=Xs({id:e.id}),f={transform:Me.Translate.toString(d)};return r.jsx("div",{ref:l,style:f,...c,...o,className:`touch-none ${u?"opacity-50":""}`,children:r.jsx(Jt,{posting:e,onSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a,variant:"kanban"})})}const po={saved:"bg-blue-50 border-blue-200",in_progress:"bg-orange-50 border-orange-200",applied:"bg-green-50 border-green-200",interviewing:"bg-purple-50 border-purple-200",offer:"bg-yellow-50 border-yellow-200",accepted:"bg-emerald-50 border-emerald-200",rejected:"bg-gray-50 border-gray-300",withdrawn:"bg-gray-50 border-gray-300"},vo={saved:"bg-blue-100 text-blue-800",in_progress:"bg-orange-100 text-orange-800",applied:"bg-green-100 text-green-800",interviewing:"bg-purple-100 text-purple-800",offer:"bg-yellow-100 text-yellow-800",accepted:"bg-emerald-100 text-emerald-800",rejected:"bg-gray-200 text-gray-700",withdrawn:"bg-gray-200 text-gray-700"},bo={saved:"ring-blue-400 bg-blue-100",in_progress:"ring-orange-400 bg-orange-100",applied:"ring-green-400 bg-green-100",interviewing:"ring-purple-400 bg-purple-100",offer:"ring-yellow-400 bg-yellow-100",accepted:"ring-emerald-400 bg-emerald-100",rejected:"ring-gray-400 bg-gray-200",withdrawn:"ring-gray-400 bg-gray-200"};function yo({status:e,postings:t,onPostingSelect:n,onPriorityChange:s,onStatusChange:a,onDelete:o,onCollapse:c,isOver:l=!1,isDragging:d=!1}){const{setNodeRef:u}=Vn({id:e});return r.jsxs("div",{ref:u,className:`flex h-full w-full flex-col rounded-lg border transition-colors duration-200 ${po[e]} ${l?`ring-2 ${bo[e]}`:""} ${d&&!l?"opacity-75":""}`,children:[r.jsxs("div",{className:`flex items-center justify-between rounded-t-lg px-3 py-2 ${vo[e]}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:c,className:"rounded p-0.5 opacity-60 hover:bg-black hover:bg-opacity-10 hover:opacity-100",title:`Collapse ${ge[e]} column`,children:r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h3",{className:"font-medium",children:ge[e]})]}),r.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-2 py-0.5 text-sm font-medium",children:t.length})]}),r.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto p-2",children:[t.map(f=>r.jsx(xo,{posting:f,onSelect:n,onPriorityChange:s,onStatusChange:a,onDelete:o},f.id)),t.length===0&&r.jsx("div",{className:`rounded-lg border-2 border-dashed py-8 text-center text-sm transition-colors ${l?"border-gray-400 bg-gray-100 text-gray-600":"border-transparent text-gray-400"}`,children:l?"Drop here":"No postings"})]})]})}const wo={saved:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-orange-100 text-orange-800 border-orange-200",applied:"bg-green-100 text-green-800 border-green-200",interviewing:"bg-purple-100 text-purple-800 border-purple-200",offer:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-emerald-100 text-emerald-800 border-emerald-200",rejected:"bg-gray-200 text-gray-700 border-gray-300",withdrawn:"bg-gray-200 text-gray-700 border-gray-300"},jo={saved:"ring-blue-400",in_progress:"ring-orange-400",applied:"ring-green-400",interviewing:"ring-purple-400",offer:"ring-yellow-400",accepted:"ring-emerald-400",rejected:"ring-gray-400",withdrawn:"ring-gray-400"};function Co({status:e,count:t,onExpand:n,isOver:s=!1}){const{setNodeRef:a}=Vn({id:e});return r.jsx("div",{ref:a,className:`flex h-full w-full flex-col items-center rounded-lg border transition-colors duration-200 ${wo[e]} ${s?`ring-2 ${jo[e]}`:""}`,children:r.jsxs("button",{onClick:n,className:"flex h-full w-full flex-col items-center justify-center gap-2 py-3 hover:opacity-80",title:`Expand ${ge[e]} column`,children:[r.jsx("span",{className:"text-xs font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:ge[e]}),r.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-1.5 py-0.5 text-xs font-medium",children:t}),r.jsx("svg",{className:"h-4 w-4 opacity-60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}function No({postings:e,onPostingSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a,collapsedColumns:o,onCollapseChange:c}){const[l,d]=i.useState(null),[u,f]=i.useState(null),h=Kr(tn(Xt,{activationConstraint:{distance:8}}),tn(Ht,{coordinateGetter:fo})),m=b=>e.filter(N=>N.status===b),g=l?e.find(b=>b.id===l):null,x=i.useCallback(b=>{d(b.active.id)},[]),v=i.useCallback(b=>{var N;f((N=b.over)==null?void 0:N.id)},[]),y=i.useCallback(b=>{const{active:N,over:k}=b;if(d(null),f(null),!k)return;const j=N.id,M=k.id;if(ut.includes(M)){const O=e.find(T=>T.id===j);O&&O.status!==M&&s(j,M)}},[e,s]),D=i.useCallback(()=>{d(null),f(null)},[]),C=i.useCallback(b=>{o.includes(b)||c([...o,b])},[o,c]),S=i.useCallback(b=>{c(o.filter(N=>N!==b))},[o,c]),L=b=>o.includes(b);return r.jsxs(Us,{sensors:h,collisionDetection:Gr,onDragStart:x,onDragOver:v,onDragEnd:y,onDragCancel:D,children:[r.jsx("div",{className:"flex h-full gap-4 overflow-x-auto p-4",children:ut.map(b=>r.jsx("div",{className:"flex-shrink-0 transition-all duration-300 ease-in-out",style:{width:L(b)?"48px":"288px"},children:L(b)?r.jsx(Co,{status:b,count:m(b).length,onExpand:()=>S(b),isOver:u===b}):r.jsx(yo,{status:b,postings:m(b),onPostingSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a,onCollapse:()=>C(b),isOver:u===b,isDragging:l!==null})},b))}),r.jsx(co,{dropAnimation:null,children:g?r.jsx("div",{className:"rotate-3 opacity-90",children:r.jsx(Jt,{posting:g,onSelect:()=>{},onPriorityChange:()=>{},onStatusChange:()=>{},onDelete:()=>{},variant:"kanban"})}):null})]})}function ko({postings:e,onPostingSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a}){const[o,c]=i.useState("dateAdded"),[l,d]=i.useState("desc"),u=m=>{o===m?d(l==="asc"?"desc":"asc"):(c(m),d("asc"))},f=[...e].sort((m,g)=>{let x=0;switch(o){case"title":x=m.title.localeCompare(g.title);break;case"company":x=m.company.localeCompare(g.company);break;case"dateAdded":x=m.dateAdded-g.dateAdded;break;case"priority":x=m.priority-g.priority;break;case"status":x=m.status.localeCompare(g.status);break}return l==="asc"?x:-x}),h=({field:m,label:g})=>r.jsxs("button",{onClick:()=>u(m),className:"flex items-center gap-1 text-left text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700",children:[g,o===m&&r.jsx("svg",{className:`h-4 w-4 ${l==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return r.jsxs("div",{className:"h-full overflow-auto",children:[r.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-4 border-b border-gray-200 bg-gray-50 px-4 py-2",children:[r.jsx("div",{className:"w-10"}),r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx(h,{field:"title",label:"Title / Company"})}),r.jsx("div",{className:"w-32",children:r.jsx(h,{field:"status",label:"Status"})}),r.jsx("div",{className:"w-24",children:r.jsx(h,{field:"priority",label:"Priority"})}),r.jsx("div",{className:"w-16",children:r.jsx(h,{field:"dateAdded",label:"Added"})})]}),r.jsxs("div",{children:[f.map(m=>r.jsx(Jt,{posting:m,onSelect:t,onPriorityChange:n,onStatusChange:s,onDelete:a,variant:"list"},m.id)),e.length===0&&r.jsx("div",{className:"py-12 text-center text-gray-500",children:"No postings found"})]})]})}function So({posting:e,isOpen:t,onClose:n,onUpdate:s,onDelete:a}){const[o,c]=i.useState(""),[l,d]=i.useState(!1);i.useEffect(()=>{e&&c(e.notes)},[e==null?void 0:e.id,e==null?void 0:e.notes]);const u=()=>{e&&o!==e.notes&&s(e.id,{notes:o})},f=()=>{e&&(a(e.id),d(!1),n())};if(!e)return null;const h=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return r.jsx(Gn,{isOpen:t,onClose:n,width:"max-w-lg",children:r.jsxs("div",{className:"flex h-full flex-col",children:[r.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.title}),r.jsx("p",{className:"text-gray-600",children:e.company}),e.location&&r.jsx("p",{className:"text-sm text-gray-500",children:e.location})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>window.open(e.url,"_blank"),className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Open URL (O)",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),r.jsx("button",{onClick:n,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Close (Esc or ⌘S)",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),r.jsx("select",{value:e.status,onChange:m=>s(e.id,{status:m.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:Xn.map(m=>r.jsx("option",{value:m,children:ge[m]},m))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Priority"}),r.jsx(Tt,{priority:e.priority,onChange:m=>s(e.id,{priority:m})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tags"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.tags.map(m=>r.jsx(zt,{tag:m,onRemove:()=>s(e.id,{tags:e.tags.filter(g=>g!==m)})},m)),r.jsx(qn,{tags:e.tags,onTagsChange:m=>s(e.id,{tags:m}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Next Action Date"}),r.jsx("input",{type:"date",value:e.nextActionDate||"",onChange:m=>s(e.id,{nextActionDate:m.target.value||void 0}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.salary&&r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Salary"}),r.jsx("p",{className:"text-sm text-gray-600",children:e.salary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600",children:e.description||"No description available"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Notes"}),r.jsx("textarea",{value:o,onChange:m=>c(m.target.value),onBlur:u,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),r.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[r.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Connections"}),r.jsx("p",{className:"text-sm text-gray-400 italic",children:"Connections feature coming in Phase 4"})]})]})}),r.jsx("div",{className:"border-t border-gray-200 px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("div",{children:[r.jsxs("p",{children:["Added: ",h(e.dateAdded)]}),r.jsxs("p",{children:["Modified: ",h(e.dateModified)]})]}),l?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-600",children:"Delete this posting?"}),r.jsx("button",{onClick:f,className:"rounded bg-red-600 px-2 py-1 text-white hover:bg-red-700",children:"Yes"}),r.jsx("button",{onClick:()=>d(!1),className:"rounded bg-gray-200 px-2 py-1 text-gray-700 hover:bg-gray-300",children:"No"})]}):r.jsx("button",{onClick:()=>d(!0),className:"text-red-600 hover:text-red-700",children:"Delete posting"})]})})]})})}function Do(e){return vt(e.status)?!1:(Date.now()-e.dateModified)/(1e3*60*60*24)>=7}function Eo(e){return(Date.now()-e.dateAdded)/864e5<=7}function Lo(e){return i.useMemo(()=>{const t={saved:0,in_progress:0,applied:0,interviewing:0,offer:0,accepted:0,rejected:0,withdrawn:0};let n=0,s=0,a=0;return e.forEach(o=>{t[o.status]++,vt(o.status)||n++,Eo(o)&&s++,Do(o)&&a++}),{total:e.length,active:n,thisWeek:s,stale:a,byStatus:t}},[e])}function Ro(e){const t=i.useCallback(n=>{const s=n.target,a=s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement||s.isContentEditable;for(const o of e){if(a&&!o.allowInInput&&n.key!=="Escape")continue;const c=o.meta?n.metaKey:!n.metaKey,l=o.ctrl?n.ctrlKey:!n.ctrlKey,d=o.shift?n.shiftKey:!n.shiftKey;if((n.key.toLowerCase()===o.key.toLowerCase()||n.key===o.key)&&c&&l&&d){n.preventDefault(),o.handler();return}}},[e]);i.useEffect(()=>(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)),[t])}function Mo(){const[e,t]=i.useState([]),[n,s]=i.useState(!0),[a,o]=i.useState("kanban"),[c,l]=i.useState(""),[d,u]=i.useState(null),[f,h]=i.useState(null),[m,g]=i.useState(!1),[x,v]=i.useState(["rejected"]),[y,D]=i.useState([]),[C,S]=i.useState(""),[L,b]=i.useState(null),[N,k]=i.useState(null),[j,M]=i.useState(!1),[O,T]=i.useState(!1),[F,_]=i.useState(!1),[K,Z]=i.useState(!1),[ee,P]=i.useState(null),Te=i.useRef(null),[ie,Ce]=i.useState(!1),tt=Lo(e),le=i.useCallback(async p=>{Ce(p);try{await ar(p)}catch(w){console.error("Failed to save stats expanded preference:",w)}},[]);i.useEffect(()=>{(async()=>{try{await cr();const[R,A,fe,De]=await Promise.all([$t(),tr(),rr(),or()]);t(R),o(A),v(fe),Ce(De)}catch(R){console.error("Failed to initialize app:",R)}finally{s(!1)}})();const w=R=>{R.postings&&t(R.postings.newValue||[])};return chrome.storage.onChanged.addListener(w),()=>chrome.storage.onChanged.removeListener(w)},[]),i.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("highlight");w&&(h(w),g(!0))},[]);const te=i.useCallback(async p=>{try{await Ft(p),t(p)}catch(w){console.error("Failed to save postings:",w)}},[]),Ne=i.useCallback(async p=>{o(p);try{await nr(p)}catch(w){console.error("Failed to save view preference:",w)}},[]),nt=i.useCallback(async p=>{v(p);try{await sr(p)}catch(w){console.error("Failed to save collapsed columns:",w)}},[]),X=i.useMemo(()=>{const p=new Set;return e.forEach(w=>w.tags.forEach(R=>p.add(R))),Array.from(p).sort()},[e]),rt=i.useMemo(()=>{const p=new Set;return e.forEach(w=>p.add(w.company)),Array.from(p).sort()},[e]),st=p=>vt(p.status)?!1:(Date.now()-p.dateModified)/(1e3*60*60*24)>=7,ot=p=>{if(!p.nextActionDate)return!1;const w=new Date(p.nextActionDate),R=new Date,A=(w.getTime()-R.getTime())/(1e3*60*60*24);return A>=0&&A<=7},B=i.useMemo(()=>e.filter(p=>{const w=c.toLowerCase(),R=!c||p.title.toLowerCase().includes(w)||p.company.toLowerCase().includes(w)||p.location.toLowerCase().includes(w)||p.notes.toLowerCase().includes(w)||p.tags.some(Ee=>Ee.toLowerCase().includes(w)),A=!d||p.priority===d,fe=!ee||p.status===ee,De=y.length===0||y.some(Ee=>p.tags.includes(Ee)),se=!C||p.company.toLowerCase().includes(C.toLowerCase()),$e=new Date(p.dateAdded),kt=!L||$e>=new Date(L),St=!N||$e<=new Date(N+"T23:59:59"),Fe=!j||!!p.nextActionDate,it=!O||ot(p),Dt=!F||st(p);return R&&A&&fe&&De&&se&&kt&&St&&Fe&&it&&Dt}),[e,c,d,ee,y,C,L,N,j,O,F]),Ie=i.useMemo(()=>{let p=0;return c&&p++,d!==null&&p++,ee!==null&&p++,y.length>0&&p++,C&&p++,(L||N)&&p++,j&&p++,O&&p++,F&&p++,p},[c,d,ee,y,C,L,N,j,O,F]),ce=i.useCallback(()=>{l(""),u(null),P(null),D([]),S(""),b(null),k(null),M(!1),T(!1),_(!1)},[]),Pe=i.useCallback(()=>{var p;(p=Te.current)==null||p.focus()},[]),de=i.useCallback(()=>{if(!f)return;const p=e.find(R=>R.id===f);if(!p)return;const w=p.priority%3+1;je(f,w)},[f,e]),ke=i.useCallback(()=>{if(!f)return;const p=e.find(w=>w.id===f);p&&window.open(p.url,"_blank")},[f,e]),xe=i.useCallback(()=>{f&&confirm("Are you sure you want to delete this posting?")&&ue(f)},[f]),we=i.useCallback(p=>{if(B.length===0)return;const w=f?B.findIndex(A=>A.id===f):-1;let R;p==="next"?R=w<B.length-1?w+1:0:R=w>0?w-1:B.length-1,h(B[R].id)},[B,f]),Be=p=>{h(p),g(!0)},je=(p,w)=>{const R=e.map(A=>A.id===p?{...A,priority:w,dateModified:Date.now()}:A);te(R)},ne=(p,w)=>{const R=e.map(A=>A.id===p?{...A,status:w,dateModified:Date.now(),dateApplied:w==="applied"&&!A.dateApplied?Date.now():A.dateApplied}:A);te(R)},Se=(p,w)=>{const R=e.map(A=>A.id===p?{...A,...w,dateModified:Date.now()}:A);te(R)},ue=p=>{const w=e.filter(R=>R.id!==p);te(w),f===p&&(h(null),g(!1))},ze=i.useCallback(()=>{alert("Use the extension popup on a job posting page to add new jobs.")},[]);Ro([{key:"/",handler:Pe},{key:"k",meta:!0,handler:Pe},{key:"Escape",allowInInput:!0,handler:()=>{m?g(!1):c&&l("")}},{key:"?",handler:()=>Z(!0)},{key:"n",handler:ze},{key:"1",handler:()=>P("saved")},{key:"2",handler:()=>P("in_progress")},{key:"3",handler:()=>P("applied")},{key:"4",handler:()=>P("interviewing")},{key:"5",handler:()=>P("offer")},{key:"6",handler:()=>P("accepted")},{key:"7",handler:()=>P("rejected")},{key:"0",handler:()=>P(null)},{key:"j",handler:()=>we("next")},{key:"ArrowDown",handler:()=>we("next")},{key:"k",handler:()=>we("prev")},{key:"ArrowUp",handler:()=>we("prev")},{key:"Enter",handler:()=>f&&g(!0)},{key:"s",handler:de},{key:"e",handler:()=>f&&g(!0)},{key:"o",handler:ke},{key:"d",handler:xe},{key:"s",meta:!0,allowInInput:!0,handler:()=>g(!1)}]);const at=e.find(p=>p.id===f)||null;return n?r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):r.jsxs("div",{className:"flex h-screen flex-col bg-gray-50",children:[r.jsx(Lr,{searchQuery:c,onSearchChange:l,priorityFilter:d,onPriorityFilterChange:u,currentView:a,onViewChange:Ne,onAddClick:ze,availableTags:X,availableCompanies:rt,tagFilters:y,onTagFiltersChange:D,companyFilter:C,onCompanyFilterChange:S,dateFrom:L,dateTo:N,onDateFromChange:b,onDateToChange:k,hasDeadline:j,deadlineSoon:O,needsAction:F,onHasDeadlineChange:M,onDeadlineSoonChange:T,onNeedsActionChange:_,onClearAllFilters:ce,activeFilterCount:Ie,searchInputRef:Te,statusFilter:ee,onStatusFilterChange:P}),r.jsx(Ar,{stats:tt,expanded:ie,onExpandedChange:le}),r.jsx("main",{className:"flex-1 overflow-hidden",children:a==="kanban"?r.jsx(No,{postings:B,onPostingSelect:Be,onPriorityChange:je,onStatusChange:ne,onDelete:ue,collapsedColumns:x,onCollapseChange:nt}):r.jsx(ko,{postings:B,onPostingSelect:Be,onPriorityChange:je,onStatusChange:ne,onDelete:ue})}),r.jsx(So,{posting:at,isOpen:m,onClose:()=>g(!1),onUpdate:Se,onDelete:ue}),r.jsx(Dr,{isOpen:K,onClose:()=>Z(!1)})]})}Kn.createRoot(document.getElementById("root")).render(r.jsx(I.StrictMode,{children:r.jsx(Mo,{})}));
