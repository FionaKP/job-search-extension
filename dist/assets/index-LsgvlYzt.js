import{r as l,j as t,R as F,a as nt,g as vs,b as ys,e as ws,c as js}from"./extractor-BlsyOXNW.js";const Ns=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],Ce={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},jt=["saved","in_progress","applied","interviewing","offer","accepted","rejected"],ks={required_skill:"Required Skills",preferred_skill:"Preferred Skills",soft_skill:"Soft Skills",experience:"Experience",education:"Education",values:"Values & Culture",tools:"Tools",industry:"Industry"},Cs=["required_skill","preferred_skill","soft_skill","experience","education","tools","values","industry"],Nt={recruiter:"Recruiter",employee:"Employee",referral:"Referral",alumni:"Alumni",other:"Other"},zn={1:"Weak",2:"Moderate",3:"Strong"},bt={email:"Email",call:"Call",meeting:"Meeting",linkedin:"LinkedIn",other:"Other"},Ss=["accepted","rejected","withdrawn"];function Mt(e){return Ss.includes(e)}const Ds=(e,n)=>[{id:"jobs",label:"Jobs",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),badge:e},{id:"connections",label:"Connections",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),badge:n}],Ls=[{id:"settings",label:"Settings",icon:t.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"help",label:"Help",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}];function mn({children:e,label:n,show:s}){const[r,o]=l.useState(!1);return s?t.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[e,r&&t.jsxs("div",{className:"absolute left-full top-1/2 z-tooltip ml-2 -translate-y-1/2 whitespace-nowrap rounded-md bg-wine-600 px-2.5 py-1.5 text-xs font-medium text-white shadow-lg",children:[n,t.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-wine-600"})]})]}):t.jsx(t.Fragment,{children:e})}function Es({currentPage:e,onNavigate:n,jobCount:s,connectionCount:r}){const[o,a]=l.useState(()=>{const i=localStorage.getItem("sidebar-expanded");return i!==null?i==="true":!0});l.useEffect(()=>{localStorage.setItem("sidebar-expanded",String(o))},[o]);const c=Ds(s,r);return t.jsxs("aside",{className:`
        flex flex-col bg-wine transition-all duration-slow ease-out
        ${o?"w-56":"w-16"}
      `,children:[t.jsxs("div",{className:`flex items-center border-b border-wine-400/30 p-4 ${o?"justify-between":"justify-center"}`,children:[o&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-flatred",children:t.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("span",{className:"text-lg font-bold text-champagne",children:"JobFlow"})]}),t.jsx("button",{onClick:()=>a(!o),className:"flex h-8 w-8 items-center justify-center rounded-lg text-champagne/70 transition-colors hover:bg-wine-400/20 hover:text-champagne",title:o?"Collapse sidebar":"Expand sidebar",children:t.jsx("svg",{className:`h-5 w-5 transition-transform duration-slow ${o?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),t.jsx("nav",{className:"flex-1 p-2",children:t.jsx("ul",{className:"space-y-1",children:c.map(i=>{const d=e===i.id;return t.jsx("li",{children:t.jsx(mn,{label:i.label,show:!o,children:t.jsxs("button",{onClick:()=>n(i.id),className:`
                      group flex w-full items-center gap-3 rounded-lg px-3 py-2.5
                      transition-all duration-base
                      ${d?"bg-flatred text-white shadow-md":"text-champagne/80 hover:bg-pandora/20 hover:text-pandora"}
                      ${o?"":"justify-center"}
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2 focus-visible:ring-offset-wine
                    `,children:[t.jsx("span",{className:`flex-shrink-0 transition-transform duration-base ${d?"":"group-hover:scale-110"}`,children:i.icon}),o&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-1 text-left text-sm font-medium",children:i.label}),i.badge!==void 0&&i.badge>0&&t.jsx("span",{className:`
                              rounded-full px-2 py-0.5 text-xs font-bold
                              ${d?"bg-white/20 text-white":"bg-pandora/30 text-pandora"}
                            `,children:i.badge})]}),!o&&i.badge!==void 0&&i.badge>0&&t.jsx("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-pandora text-[10px] font-bold text-white",children:i.badge>99?"99+":i.badge})]})})},i.id)})})}),t.jsx("div",{className:"mx-4 border-t border-wine-400/30"}),t.jsx("nav",{className:"p-2",children:t.jsx("ul",{className:"space-y-1",children:Ls.map(i=>{const d=e===i.id;return t.jsx("li",{children:t.jsx(mn,{label:i.label,show:!o,children:t.jsxs("button",{onClick:()=>n(i.id),className:`
                      group flex w-full items-center gap-3 rounded-lg px-3 py-2.5
                      transition-all duration-base
                      ${d?"bg-flatred text-white shadow-md":"text-champagne/60 hover:bg-wine-400/20 hover:text-champagne"}
                      ${o?"":"justify-center"}
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2 focus-visible:ring-offset-wine
                    `,children:[t.jsx("span",{className:"flex-shrink-0",children:i.icon}),o&&t.jsx("span",{className:"text-sm font-medium",children:i.label})]})})},i.id)})})}),o&&t.jsx("div",{className:"border-t border-wine-400/30 p-4",children:t.jsxs("p",{className:"text-xs text-champagne/50",children:["Press ",t.jsx("kbd",{className:"rounded bg-wine-400/30 px-1.5 py-0.5 font-mono text-champagne/70",children:"?"})," for shortcuts"]})})]})}function Ms({isOpen:e,onClose:n,title:s,children:r,width:o="max-w-md"}){const a=l.useCallback(c=>{c.key==="Escape"&&n()},[n]);return l.useEffect(()=>(e&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow=""}),[e,a]),e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),t.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10",children:t.jsx("div",{className:`w-screen ${o}`,children:t.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[s&&t.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s}),t.jsxs("button",{onClick:n,className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:r})]})})})]}):null}function As({value:e,onChange:n,placeholder:s="Search...",debounceMs:r=300,inputRef:o}){const[a,c]=l.useState(e);l.useEffect(()=>{c(e)},[e]),l.useEffect(()=>{const u=setTimeout(()=>{a!==e&&n(a)},r);return()=>clearTimeout(u)},[a,e,n,r]);const i=u=>{c(u.target.value)},d=()=>{c(""),n("")};return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),t.jsx("input",{ref:o,type:"text",value:a,onChange:i,placeholder:s,className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-8 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),a&&t.jsx("button",{onClick:d,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function pn({label:e,options:n,value:s,onChange:r}){const[o,a]=l.useState(!1),c=l.useRef(null);l.useEffect(()=>{const d=u=>{c.current&&!c.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const i=n.find(d=>d.value===s);return t.jsxs("div",{className:"relative",ref:c,children:[t.jsxs("button",{onClick:()=>a(!o),className:"inline-flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i?i.label:e,t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),o&&t.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>{r(null),a(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===null?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:"All"}),n.map(d=>t.jsx("button",{onClick:()=>{r(d.value),a(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===d.value?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:d.label},String(d.value)))]})})]})}function Qt({priority:e,onChange:n,size:s="md",readOnly:r=!1}){const o=s==="sm"?"h-4 w-4":"h-5 w-5",a=s==="sm"?"gap-0.5":"gap-1",c=i=>{!r&&n&&n(i)};return t.jsx("div",{className:`flex ${a}`,children:[1,2,3].map(i=>t.jsx("button",{onClick:()=>c(i),disabled:r,className:`${r?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Priority ${i}`,children:t.jsx("svg",{className:`${o} ${i<=e?"text-yellow-400":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},i))})}function nn({tag:e,onRemove:n,size:s="sm"}){const r=s==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm";return t.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full bg-blue-100 text-blue-700 ${r}`,children:[e,n&&t.jsx("button",{onClick:n,className:"ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full hover:bg-blue-200",children:t.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function Rs({tags:e,onTagsChange:n,suggestedTags:s=[]}){const[r,o]=l.useState(!1),[a,c]=l.useState(""),i=l.useRef(null),d=l.useRef(null);l.useEffect(()=>{const g=x=>{i.current&&!i.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),l.useEffect(()=>{r&&d.current&&d.current.focus()},[r]);const u=g=>{const x=g.trim().toLowerCase();x&&!e.includes(x)&&n([...e,x]),c("")},h=g=>{n(e.filter(x=>x!==g))},f=g=>{g.key==="Enter"&&a.trim()&&(g.preventDefault(),u(a))},m=s.filter(g=>!e.includes(g));return t.jsxs("div",{className:"relative",ref:i,children:[t.jsxs("button",{onClick:()=>o(!r),className:"inline-flex items-center gap-1 rounded border border-dashed border-gray-300 px-2 py-1 text-xs text-gray-500 hover:border-gray-400 hover:text-gray-600",children:[t.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),r&&t.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-black ring-opacity-5",children:[t.jsx("input",{ref:d,type:"text",value:a,onChange:g=>c(g.target.value),onKeyDown:f,placeholder:"Type and press Enter",className:"w-full rounded border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(g=>t.jsx(nn,{tag:g,onRemove:()=>h(g)},g))}),m.length>0&&t.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-2",children:[t.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Suggestions:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:m.slice(0,5).map(g=>t.jsx("button",{onClick:()=>u(g),className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600 hover:bg-gray-200",children:g},g))})]})]})]})}function bn({children:e,items:n}){const[s,r]=l.useState(!1),[o,a]=l.useState({x:0,y:0}),c=l.useRef(null);l.useEffect(()=>{const u=f=>{c.current&&!c.current.contains(f.target)&&r(!1)},h=f=>{f.key==="Escape"&&r(!1)};return document.addEventListener("mousedown",u),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",h)}},[]);const i=u=>{u.preventDefault(),a({x:u.clientX,y:u.clientY}),r(!0)},d=u=>{u.onClick(),r(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onContextMenu:i,children:e}),s&&t.jsx("div",{ref:c,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",style:{left:o.x,top:o.y},children:n.map((u,h)=>u.divider?t.jsx("div",{className:"my-1 border-t border-gray-100"},h):t.jsxs("button",{onClick:()=>d(u),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm ${u.danger?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100"}`,children:[u.icon,u.label]},h))})]})}const z={POSTINGS:"postings",CONNECTIONS:"connections",SETTINGS:"settings",SCHEMA_VERSION:"schemaVersion",VIEW_PREFERENCE:"viewPreference",COLLAPSED_COLUMNS:"collapsedColumns",STATS_EXPANDED:"statsExpanded"};async function Ue(){return(await chrome.storage.local.get(z.POSTINGS))[z.POSTINGS]||[]}async function We(e){await chrome.storage.local.set({[z.POSTINGS]:e})}async function se(){return(await chrome.storage.local.get(z.CONNECTIONS))[z.CONNECTIONS]||[]}async function He(e){await chrome.storage.local.set({[z.CONNECTIONS]:e})}async function vn(e){const n=await se(),s=n.findIndex(r=>r.id===e.id);s>=0?n[s]={...e,dateModified:Date.now()}:n.push(e),await He(n)}async function Is(e){const s=(await se()).filter(a=>a.id!==e);await He(s);const o=(await Ue()).map(a=>({...a,connectionIds:a.connectionIds.filter(c=>c!==e)}));await We(o)}async function Os(e,n){const s=await se(),r=await Ue(),o=s.findIndex(c=>c.id===e);if(o>=0){const c=s[o];c.linkedPostingIds.includes(n)||(s[o]={...c,linkedPostingIds:[...c.linkedPostingIds,n],dateModified:Date.now()})}const a=r.findIndex(c=>c.id===n);if(a>=0){const c=r[a];c.connectionIds.includes(e)||(r[a]={...c,connectionIds:[...c.connectionIds,e],dateModified:Date.now()})}await He(s),await We(r)}async function yn(e,n){const s=await se(),r=await Ue(),o=s.findIndex(c=>c.id===e);if(o>=0){const c=s[o];s[o]={...c,linkedPostingIds:c.linkedPostingIds.filter(i=>i!==n),dateModified:Date.now()}}const a=r.findIndex(c=>c.id===n);if(a>=0){const c=r[a];r[a]={...c,connectionIds:c.connectionIds.filter(i=>i!==e),dateModified:Date.now()}}await He(s),await We(r)}async function Ts(){return(await chrome.storage.local.get(z.SETTINGS))[z.SETTINGS]||Ps()}function Ps(){return{defaultView:"kanban",theme:"light",collapsedColumns:["rejected"]}}async function Fs(){return(await chrome.storage.local.get(z.VIEW_PREFERENCE))[z.VIEW_PREFERENCE]||"kanban"}async function $s(e){await chrome.storage.local.set({[z.VIEW_PREFERENCE]:e})}async function Bs(){return(await chrome.storage.local.get(z.COLLAPSED_COLUMNS))[z.COLLAPSED_COLUMNS]??["rejected"]}async function zs(e){await chrome.storage.local.set({[z.COLLAPSED_COLUMNS]:e})}async function Us(){return(await chrome.storage.local.get(z.STATS_EXPANDED))[z.STATS_EXPANDED]??!1}async function Ws(e){await chrome.storage.local.set({[z.STATS_EXPANDED]:e})}async function Hs(){return(await chrome.storage.local.get(z.SCHEMA_VERSION))[z.SCHEMA_VERSION]||1}async function _s(e){await chrome.storage.local.set({[z.SCHEMA_VERSION]:e})}const vt=3,wn=["jobApplications","applications"];async function Vs(){const e=await Hs();if(e>=vt)return;console.log(`[Migration] Current schema version: ${e}, target: ${vt}`);const n=await chrome.storage.local.get([...wn,"postings"]);let s=[],r="";for(const o of wn)if(n[o]&&Array.isArray(n[o])&&n[o].length>0){s=n[o],r=o;break}if(s.length>0){console.log(`[Migration] Found ${s.length} V1 postings under key: ${r}`);const o=Un(s),a=n.postings||[],c=new Set(a.map(u=>u.url)),i=o.filter(u=>!c.has(u.url)),d=[...a,...i];await We(d),await chrome.storage.local.set({_v1_backup:s}),console.log(`[Migration] Migrated ${i.length} new postings, ${o.length-i.length} duplicates skipped`)}e<3&&await Ks(),await _s(vt),console.log(`[Migration] Schema version updated to ${vt}`)}async function Ks(){const e=await se();if(e.length===0){console.log("[Migration] No connections to migrate");return}const n=e.map(s=>({...s,email:s.email||void 0,linkedInUrl:s.linkedInUrl||void 0,relationshipType:s.relationshipType||"other",howWeMet:s.howWeMet||void 0,relationshipStrength:s.relationshipStrength||2,notes:s.notes||s.relationshipNotes||"",contactHistory:s.contactHistory||[],dateAdded:s.dateAdded||Date.now(),dateModified:s.dateModified||Date.now()}));await He(n),console.log(`[Migration] Migrated ${n.length} connections to V3 schema`)}function Un(e){return e.map(n=>({id:n.id,url:n.url,company:n.company,companyLogo:void 0,title:n.title,location:n.location,description:n.description,salary:n.salary,status:n.status,priority:Ys(n.interest),tags:n.tags||[],notes:n.notes||"",dateAdded:Vt(n.dateAdded),dateModified:Vt(n.dateAdded),dateApplied:n.dateApplied?Vt(n.dateApplied):void 0,nextActionDate:void 0,connectionIds:[]}))}function Ys(e){return!e||e<=1?1:e<=3?2:3}function Vt(e){if(typeof e=="number")return e;const n=new Date(e).getTime();return isNaN(n)?Date.now():n}async function Gs(){const[e,n,s]=await Promise.all([Ue(),se(),Ts()]);return{version:3,exportDate:new Date().toISOString(),postings:e,connections:n,settings:s}}async function Xs(){const e=await Gs(),n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`jobflow-backup-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s)}async function qs(e){try{const n=await e.text(),s=JSON.parse(n);let r;if(s.version===1||!s.version){const o=s.postings||s.applications||[],a=Un(o);r={version:2,exportDate:s.exportDate||new Date().toISOString(),postings:a,connections:s.connections||[],settings:s.settings||{defaultView:"kanban",theme:"light"}}}else r=s;return Array.isArray(r.postings)?{success:!0,data:r,fileName:e.name}:{success:!1,data:null,fileName:e.name,error:"Invalid file format: missing postings array"}}catch(n){return{success:!1,data:null,fileName:e.name,error:n instanceof Error?n.message:"Failed to parse JSON file"}}}function Js(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.title=="string"&&typeof n.company=="string"&&typeof n.url=="string"&&n.id.length>0&&n.title.length>0}function Qs(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n){const o=s.get(r.id);(!o||r.dateModified>o.dateModified)&&s.set(r.id,r)}return Array.from(s.values())}function Zs(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.name=="string"&&typeof n.company=="string"&&n.id.length>0&&n.name.length>0}function er(e){return{id:e.id,name:e.name,email:e.email||void 0,linkedInUrl:e.linkedInUrl||void 0,company:e.company,role:e.role||void 0,relationshipType:e.relationshipType||"other",howWeMet:e.howWeMet||void 0,relationshipStrength:e.relationshipStrength||2,notes:e.notes||e.relationshipNotes||"",lastContactDate:e.lastContactDate||void 0,nextFollowUp:e.nextFollowUp||void 0,contactHistory:e.contactHistory||[],linkedPostingIds:e.linkedPostingIds||[],dateAdded:e.dateAdded||Date.now(),dateModified:e.dateModified||Date.now()}}function tr(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n)if(Zs(r)){const o=er(r),a=s.get(o.id);(!a||o.dateModified>a.dateModified)&&s.set(o.id,o)}return Array.from(s.values())}async function nr(e){var d;const n=[];let s=0;const r=[];for(let u=0;u<e.postings.length;u++){const h=e.postings[u];Js(h)?r.push({...h,status:h.status||"saved",priority:h.priority||2,tags:h.tags||[],notes:h.notes||"",dateAdded:h.dateAdded||Date.now(),dateModified:h.dateModified||Date.now(),connectionIds:h.connectionIds||[],keywords:h.keywords,keywordsExtractedAt:h.keywordsExtractedAt}):(n.push(`Posting ${u+1}: missing required field (id or title)`),s++)}const[o,a]=await Promise.all([Ue(),se()]),c=Qs(o,r),i=tr(a,e.connections||[]);return await Promise.all([We(c),He(i)]),{success:n.length===0,postings:r.length,connections:((d=e.connections)==null?void 0:d.length)||0,errors:n,skipped:s}}function sr(){return new Promise(e=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=s=>{var o;const r=(o=s.target.files)==null?void 0:o[0];e(r||null)},n.addEventListener("cancel",()=>e(null)),n.click()})}function rr({className:e=""}){const[n,s]=l.useState(!1),r=async()=>{s(!0);try{await Xs()}catch(o){console.error("Export failed:",o),alert("Failed to export data. Please try again.")}finally{s(!1)}};return t.jsxs("button",{onClick:r,disabled:n,className:`inline-flex items-center gap-2 ${e}`,title:"Export data to JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),n?"Exporting...":"Export Data"]})}function or({isOpen:e,parsedFile:n,onConfirm:s,onCancel:r,isImporting:o,importResult:a}){var i;if(!e)return null;const c=d=>{try{return new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return d}};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75",onClick:o?void 0:r}),t.jsxs("div",{className:"relative w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:a?"Import Complete":"Import Backup"}),n&&!n.success&&t.jsxs("div",{className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700",children:[t.jsx("p",{className:"font-medium",children:"Failed to parse file"}),t.jsx("p",{children:n.error})]}),(n==null?void 0:n.success)&&n.data&&!a&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:"File:"})," ",n.fileName]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:"Exported:"})," ",c(n.data.exportDate)]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Found:"}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-gray-600",children:[t.jsxs("li",{children:[n.data.postings.length," postings"]}),t.jsxs("li",{children:[((i=n.data.connections)==null?void 0:i.length)||0," connections"]})]})]}),t.jsx("div",{className:"rounded-md bg-blue-50 p-3 text-sm text-blue-700",children:t.jsx("p",{children:"Import will merge with existing data. Newer entries will overwrite older ones."})})]}),a&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`rounded-md p-3 text-sm ${a.success?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:t.jsx("p",{className:"font-medium",children:a.success?"Import successful!":"Import completed with warnings"})}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-gray-600",children:[t.jsxs("li",{children:[a.postings," postings imported"]}),t.jsxs("li",{children:[a.connections," connections imported"]}),a.skipped>0&&t.jsxs("li",{className:"text-yellow-600",children:[a.skipped," items skipped"]})]}),a.errors.length>0&&t.jsxs("div",{className:"rounded-md bg-yellow-50 p-3",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Warnings:"}),t.jsxs("ul",{className:"mt-1 list-disc pl-4 text-sm text-yellow-600",children:[a.errors.slice(0,5).map((d,u)=>t.jsx("li",{children:d},u)),a.errors.length>5&&t.jsxs("li",{children:["...and ",a.errors.length-5," more"]})]})]})]}),t.jsx("div",{className:"mt-6 flex justify-end gap-3",children:a?t.jsx("button",{onClick:r,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Done"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:r,disabled:o,className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:s,disabled:o||!(n!=null&&n.success),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:o?"Importing...":"Import"})]})})]})]})}function ar({className:e="",onImportComplete:n}){const[s,r]=l.useState(!1),[o,a]=l.useState(null),[c,i]=l.useState(!1),[d,u]=l.useState(null),h=async()=>{const g=await sr();if(!g)return;const x=await qs(g);a(x),u(null),r(!0)},f=async()=>{if(!(!(o!=null&&o.success)||!o.data)){i(!0);try{const g=await nr(o.data);u(g),n==null||n()}catch(g){console.error("Import failed:",g),u({success:!1,postings:0,connections:0,errors:[g instanceof Error?g.message:"Unknown error occurred"],skipped:0})}finally{i(!1)}}},m=()=>{r(!1),a(null),u(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:h,className:`inline-flex items-center gap-2 ${e}`,title:"Import data from JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),t.jsx(or,{isOpen:s,parsedFile:o,onConfirm:f,onCancel:m,isImporting:c,importResult:d})]})}function ir({availableTags:e,selectedTags:n,onChange:s}){const[r,o]=l.useState(!1),a=l.useRef(null);l.useEffect(()=>{const d=u=>{a.current&&!a.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=d=>{n.includes(d)?s(n.filter(u=>u!==d)):s([...n,d])},i=n.length>0;return t.jsxs("div",{className:"relative",ref:a,children:[t.jsxs("button",{onClick:()=>o(!r),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${i?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[t.jsx("span",{children:"Tags"}),i&&t.jsx("span",{className:"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white",children:n.length}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:e.length===0?t.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No tags available"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.map(d=>t.jsxs("label",{className:"flex cursor-pointer items-center gap-2 px-4 py-2 hover:bg-gray-100",children:[t.jsx("input",{type:"checkbox",checked:n.includes(d),onChange:()=>c(d),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:d})]},d))}),i&&t.jsx("div",{className:"border-t border-gray-100 px-4 py-2",children:t.jsx("button",{onClick:()=>s([]),className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear selection"})})]})})]})}function lr({availableCompanies:e,value:n,onChange:s}){const[r,o]=l.useState(!1),[a,c]=l.useState(n),i=l.useRef(null),d=l.useRef(null);l.useEffect(()=>{c(n)},[n]),l.useEffect(()=>{const x=v=>{d.current&&!d.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const u=e.filter(x=>x.toLowerCase().includes(a.toLowerCase())).slice(0,10),h=x=>{const v=x.target.value;c(v),s(v),o(!0)},f=x=>{c(x),s(x),o(!1)},m=()=>{var x;c(""),s(""),(x=i.current)==null||x.focus()},g=n.length>0;return t.jsxs("div",{className:"relative",ref:d,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:i,type:"text",value:a,onChange:h,onFocus:()=>o(!0),placeholder:"Company...",className:`w-36 rounded-md border px-3 py-2 pr-8 text-sm ${g?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),g&&t.jsx("button",{onClick:m,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&u.length>0&&a.length>0&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-full rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:t.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.map(x=>t.jsx("button",{onClick:()=>f(x),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:x},x))})})]})}function cr({fromDate:e,toDate:n,onFromChange:s,onToChange:r}){const o=e!==null||n!==null,a=()=>{s(null),r(null)};return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Date added:"}),t.jsx("input",{type:"date",value:e||"",onChange:c=>s(c.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),t.jsx("span",{className:"text-sm text-gray-500",children:"to"}),t.jsx("input",{type:"date",value:n||"",onChange:c=>r(c.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${n?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}`}),o&&t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",title:"Clear date range",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function dr({dateFrom:e,dateTo:n,hasDeadline:s,deadlineSoon:r,needsAction:o,hasConnections:a,noConnections:c,onDateFromChange:i,onDateToChange:d,onHasDeadlineChange:u,onDeadlineSoonChange:h,onNeedsActionChange:f,onHasConnectionsChange:m,onNoConnectionsChange:g,onClearAll:x}){const[v,y]=l.useState(!1),b=l.useRef(null);l.useEffect(()=>{const j=D=>{b.current&&!b.current.contains(D.target)&&y(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const k=[e!==null||n!==null,s,r,o,a,c].filter(Boolean).length;return t.jsxs("div",{className:"relative",ref:b,children:[t.jsxs("button",{onClick:()=>y(!v),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${k>0?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),t.jsx("span",{children:"More Filters"}),k>0&&t.jsx("span",{className:"rounded-full bg-blue-500 px-1.5 py-0.5 text-xs text-white",children:k}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${v?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&t.jsx("div",{className:"absolute right-0 z-20 mt-1 w-96 rounded-md bg-white p-4 shadow-lg ring-1 ring-black ring-opacity-5",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(cr,{fromDate:e,toDate:n,onFromChange:i,onToChange:d}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:s,onChange:j=>u(j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Has deadline"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:r,onChange:j=>h(j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Deadline within 7 days"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:j=>f(j.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Needs action (stale)"})]})]}),t.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[t.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-gray-500",children:"Networking"}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:j=>{m(j.target.checked),j.target.checked&&g(!1)},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Has connections"})]}),t.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c,onChange:j=>{g(j.target.checked),j.target.checked&&m(!1)},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"No connections"})]})]})]}),k>0&&t.jsx("div",{className:"border-t border-gray-100 pt-3",children:t.jsx("button",{onClick:()=>{x(),y(!1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all filters"})})]})})]})}const ur=[{title:"Global",shortcuts:[{keys:"/",description:"Focus search"},{keys:"⌘K",description:"Focus search (alt)"},{keys:"Esc",description:"Close panel / clear search"},{keys:"?",description:"Show this help"},{keys:"N",description:"New posting"}]},{title:"Status Filter",shortcuts:[{keys:"1",description:"Filter to Saved"},{keys:"2",description:"Filter to In Progress"},{keys:"3",description:"Filter to Applied"},{keys:"4",description:"Filter to Interviewing"},{keys:"5",description:"Filter to Offer"},{keys:"6",description:"Filter to Accepted"},{keys:"7",description:"Filter to Rejected"},{keys:"0",description:"Clear status filter"}]},{title:"Card Navigation",shortcuts:[{keys:"J / ↓",description:"Next card"},{keys:"K / ↑",description:"Previous card"},{keys:"↵",description:"Open detail panel"}]},{title:"Card Actions",shortcuts:[{keys:"S",description:"Cycle priority"},{keys:"O",description:"Open original URL"},{keys:"D",description:"Delete posting"}]}];function hr({isOpen:e,onClose:n}){return l.useEffect(()=>{const s=r=>{r.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,n]),e?t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),t.jsxs("div",{className:"relative max-h-[80vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white shadow-xl",children:[t.jsxs("div",{className:"sticky top-0 flex items-center justify-between border-b border-gray-200 bg-white px-6 py-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Keyboard Shortcuts"}),t.jsx("button",{onClick:n,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"grid gap-6 p-6 sm:grid-cols-2",children:ur.map(s=>t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase text-gray-500",children:s.title}),t.jsx("div",{className:"space-y-2",children:s.shortcuts.map(r=>t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("span",{className:"text-sm text-gray-600",children:r.description}),t.jsx("kbd",{className:"rounded bg-gray-100 px-2 py-1 text-xs font-mono text-gray-700",children:r.keys})]},r.keys))})]},s.title))}),t.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 text-center text-sm text-gray-500",children:["Press ",t.jsx("kbd",{className:"rounded bg-gray-100 px-1.5 py-0.5 font-mono text-xs",children:"Esc"})," to close"]})]})]}):null}const xr=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function fr({searchQuery:e,onSearchChange:n,priorityFilter:s,onPriorityFilterChange:r,currentView:o,onViewChange:a,onAddClick:c,availableTags:i,availableCompanies:d,tagFilters:u,onTagFiltersChange:h,companyFilter:f,onCompanyFilterChange:m,dateFrom:g,dateTo:x,onDateFromChange:v,onDateToChange:y,hasDeadline:b,deadlineSoon:k,needsAction:j,hasConnections:D,noConnections:E,onHasDeadlineChange:C,onDeadlineSoonChange:N,onNeedsActionChange:S,onHasConnectionsChange:A,onNoConnectionsChange:T,onClearAllFilters:R,activeFilterCount:P,searchInputRef:U,statusFilter:O,onStatusFilterChange:we}){const[te,$]=l.useState(!1),re=l.useRef(null);return l.useEffect(()=>{const K=ue=>{re.current&&!re.current.contains(ue.target)&&$(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]),t.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 bg-white px-4 py-3",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"JobFlow"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-64",children:t.jsx(As,{value:e,onChange:n,placeholder:"Search jobs... (Press /)",inputRef:U})}),t.jsx(pn,{label:"Priority",options:xr,value:s,onChange:r}),t.jsx(pn,{label:"Status",options:jt.map(K=>({value:K,label:Ce[K]})),value:O,onChange:we}),t.jsx(ir,{availableTags:i,selectedTags:u,onChange:h}),t.jsx(lr,{availableCompanies:d,value:f,onChange:m}),t.jsx(dr,{dateFrom:g,dateTo:x,hasDeadline:b,deadlineSoon:k,needsAction:j,hasConnections:D,noConnections:E,onDateFromChange:v,onDateToChange:y,onHasDeadlineChange:C,onDeadlineSoonChange:N,onNeedsActionChange:S,onHasConnectionsChange:A,onNoConnectionsChange:T,onClearAll:R}),P>0&&t.jsxs("button",{onClick:R,className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm text-blue-600 hover:bg-blue-50",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear all (",P,")"]}),t.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[t.jsx("button",{onClick:()=>a("kanban"),className:`px-3 py-2 text-sm ${o==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),t.jsx("button",{onClick:()=>a("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${o==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),t.jsxs("div",{className:"relative",ref:re,children:[t.jsx("button",{onClick:()=>$(!te),className:"rounded-md border border-gray-300 p-2 text-gray-600 hover:bg-gray-50",title:"Settings (? for shortcuts)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),te&&t.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[t.jsx(rr,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"}),t.jsx(ar,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onImportComplete:()=>$(!1)})]})]}),t.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",title:"Add new posting (N)",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})}const gr={saved:"bg-blue-500",in_progress:"bg-orange-500",applied:"bg-green-500",interviewing:"bg-purple-500",offer:"bg-yellow-500",accepted:"bg-emerald-500",rejected:"bg-gray-400",withdrawn:"bg-gray-400"};function yt({icon:e,label:n,value:s,color:r="text-gray-600"}){return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`${r}`,children:e}),t.jsxs("div",{children:[t.jsx("span",{className:"text-lg font-semibold text-gray-900",children:s}),t.jsx("span",{className:"ml-1 text-sm text-gray-500",children:n})]})]})}function mr({status:e,count:n,total:s}){const r=s>0?n/s*100:0;return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-24 text-sm text-gray-600",children:Ce[e]}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"h-4 overflow-hidden rounded-full bg-gray-100",children:t.jsx("div",{className:`h-full ${gr[e]} transition-all duration-300`,style:{width:`${r}%`}})})}),t.jsx("span",{className:"w-8 text-right text-sm font-medium text-gray-700",children:n})]})}function pr({stats:e,expanded:n,onExpandedChange:s}){return t.jsxs("div",{className:"border-b border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx(yt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"total",value:e.total}),t.jsx(yt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"active",value:e.active,color:"text-blue-600"}),t.jsx(yt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),label:"this week",value:e.thisWeek,color:"text-green-600"}),e.stale>0&&t.jsx(yt,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),label:"stale",value:e.stale,color:"text-orange-600"})]}),t.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-1 rounded px-2 py-1 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:[t.jsx("span",{children:n?"Hide":"Details"}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&t.jsxs("div",{className:"border-t border-gray-100 px-4 py-3",children:[t.jsx("h4",{className:"mb-3 text-sm font-medium text-gray-500",children:"BY STATUS"}),t.jsx("div",{className:"space-y-2",children:jt.map(r=>t.jsx(mr,{status:r,count:e.byStatus[r],total:e.total},r))})]})]})}const Kt=[{status:"saved",label:"BOOKMARKED",shortLabel:"BOOKMARKED"},{status:"in_progress",label:"APPLYING",shortLabel:"APPLYING"},{status:"applied",label:"APPLIED",shortLabel:"APPLIED"},{status:"interviewing",label:"INTERVIEWING",shortLabel:"INTERVIEW"},{status:"offer",label:"NEGOTIATING",shortLabel:"NEGOTIATE"},{status:"accepted",label:"ACCEPTED",shortLabel:"ACCEPTED"}],br={saved:{dot:"bg-pandora",bg:"bg-champagne-100",bgActive:"bg-pandora",text:"text-wine",textActive:"text-white",border:"border-pandora/30"},in_progress:{dot:"bg-champagne-400",bg:"bg-champagne-50",bgActive:"bg-champagne-400",text:"text-wine",textActive:"text-wine",border:"border-champagne-300"},applied:{dot:"bg-teal",bg:"bg-teal-100",bgActive:"bg-teal",text:"text-wine",textActive:"text-white",border:"border-teal/30"},interviewing:{dot:"bg-flatred",bg:"bg-flatred-50",bgActive:"bg-flatred",text:"text-wine",textActive:"text-white",border:"border-flatred/30"},offer:{dot:"bg-pandora-500",bg:"bg-pandora-50",bgActive:"bg-pandora-500",text:"text-wine",textActive:"text-white",border:"border-pandora/30"},accepted:{dot:"bg-teal-600",bg:"bg-teal-100",bgActive:"bg-teal-600",text:"text-wine",textActive:"text-white",border:"border-teal-600/30"},rejected:{dot:"bg-sage-600",bg:"bg-sage-100",bgActive:"bg-sage-600",text:"text-wine",textActive:"text-white",border:"border-sage/30"},withdrawn:{dot:"bg-sage-400",bg:"bg-sage-50",bgActive:"bg-sage-400",text:"text-wine",textActive:"text-wine-400",border:"border-sage/30"}};function vr({postings:e,activeStatus:n,onStatusClick:s}){const r=Kt.reduce((d,u)=>(d[u.status]=e.filter(h=>h.status===u.status).length,d),{}),o=e.filter(d=>d.status==="rejected").length,a=e.filter(d=>d.status==="withdrawn").length,c=o+a,i=d=>{s(n===d?null:d)};return t.jsx("div",{className:"sticky top-0 z-sticky border-b border-sage/20 bg-champagne-100/80 backdrop-blur-sm",children:t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[Kt.map((d,u)=>{const h=r[d.status],f=n===d.status,m=br[d.status],g=h>0;return t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{onClick:()=>i(d.status),className:`
                    group relative flex items-center gap-2 rounded-lg px-3 py-2
                    transition-all duration-base
                    ${f?`${m.bgActive} ${m.textActive} shadow-md`:`${m.bg} ${m.text} hover:shadow-sm`}
                    ${g?"cursor-pointer":"cursor-default opacity-60"}
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2
                  `,disabled:!g&&!f,children:[t.jsx("span",{className:`
                      h-2 w-2 rounded-full
                      ${f?"bg-white/80":m.dot}
                      transition-transform duration-base
                      ${f?"scale-110":"group-hover:scale-110"}
                    `}),t.jsx("span",{className:"text-xs font-semibold tracking-wide",children:d.label}),h>0&&t.jsx("span",{className:`
                        ml-1 rounded-full px-1.5 py-0.5 text-xs font-bold
                        ${f?"bg-white/20 text-white":"bg-white/80 text-wine shadow-sm"}
                        transition-all duration-base
                      `,children:h}),h===0&&t.jsx("span",{className:"text-xs opacity-40",children:"– –"})]}),u<Kt.length-1&&t.jsx("svg",{className:"mx-1 h-4 w-4 flex-shrink-0 text-sage/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]},d.status)}),t.jsx("div",{className:"flex-1"}),c>0&&t.jsxs("div",{className:"flex items-center gap-2 border-l border-sage/30 pl-4",children:[o>0&&t.jsxs("button",{onClick:()=>i("rejected"),className:`
                    flex items-center gap-1.5 rounded-lg px-2.5 py-1.5
                    transition-all duration-base
                    ${n==="rejected"?"bg-flatred-700 text-white shadow-md":"bg-flatred-50 text-flatred-700 hover:bg-flatred-100"}
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred
                  `,children:[t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),t.jsx("span",{className:"text-xs font-medium",children:"Rejected"}),t.jsx("span",{className:"rounded-full bg-white/80 px-1.5 text-xs font-bold text-flatred-700",children:o})]}),a>0&&t.jsxs("button",{onClick:()=>i("withdrawn"),className:`
                    flex items-center gap-1.5 rounded-lg px-2.5 py-1.5
                    transition-all duration-base
                    ${n==="withdrawn"?"bg-sage-600 text-white shadow-md":"bg-sage-100 text-sage-700 hover:bg-sage-200"}
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-sage
                  `,children:[t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),t.jsx("span",{className:"text-xs font-medium",children:"Withdrawn"}),t.jsx("span",{className:"rounded-full bg-white/80 px-1.5 text-xs font-bold text-sage-700",children:a})]})]}),n&&t.jsxs("button",{onClick:()=>s(null),className:"ml-2 flex items-center gap-1 rounded-lg bg-wine/10 px-2.5 py-1.5 text-xs font-medium text-wine transition-colors hover:bg-wine/20",children:[t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})})})}const At=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _e(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function sn(e){return"nodeType"in e}function ee(e){var n,s;return e?_e(e)?e:sn(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function rn(e){const{Document:n}=ee(e);return e instanceof n}function ct(e){return _e(e)?!1:e instanceof ee(e).HTMLElement}function Wn(e){return e instanceof ee(e).SVGElement}function Ve(e){return e?_e(e)?e.document:sn(e)?rn(e)?e:ct(e)||Wn(e)?e.ownerDocument:document:document:document}const Se=At?l.useLayoutEffect:l.useEffect;function Rt(e){const n=l.useRef(e);return Se(()=>{n.current=e}),l.useCallback(function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n.current==null?void 0:n.current(...r)},[])}function yr(){const e=l.useRef(null),n=l.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),s=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function at(e,n){n===void 0&&(n=[e]);const s=l.useRef(e);return Se(()=>{s.current!==e&&(s.current=e)},n),s}function dt(e,n){const s=l.useRef();return l.useMemo(()=>{const r=e(s.current);return s.current=r,r},[...n])}function kt(e){const n=Rt(e),s=l.useRef(null),r=l.useCallback(o=>{o!==s.current&&(n==null||n(o,s.current)),s.current=o},[]);return[s,r]}function Ct(e){const n=l.useRef();return l.useEffect(()=>{n.current=e},[e]),n.current}let Yt={};function It(e,n){return l.useMemo(()=>{if(n)return n;const s=Yt[e]==null?0:Yt[e]+1;return Yt[e]=s,e+"-"+s},[e,n])}function Hn(e){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return r.reduce((a,c)=>{const i=Object.entries(c);for(const[d,u]of i){const h=a[d];h!=null&&(a[d]=h+e*u)}return a},{...n})}}const Be=Hn(1),it=Hn(-1);function wr(e){return"clientX"in e&&"clientY"in e}function on(e){if(!e)return!1;const{KeyboardEvent:n}=ee(e.target);return n&&e instanceof n}function jr(e){if(!e)return!1;const{TouchEvent:n}=ee(e.target);return n&&e instanceof n}function St(e){if(jr(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return wr(e)?{x:e.clientX,y:e.clientY}:null}const ze=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[ze.Translate.toString(e),ze.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:r}=e;return n+" "+s+"ms "+r}}}),jn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nr(e){return e.matches(jn)?e:e.querySelector(jn)}const kr={display:"none"};function Cr(e){let{id:n,value:s}=e;return F.createElement("div",{id:n,style:kr},s)}function Sr(e){let{id:n,announcement:s,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return F.createElement("div",{id:n,style:o,role:"status","aria-live":r,"aria-atomic":!0},s)}function Dr(){const[e,n]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&n(r)},[]),announcement:e}}const _n=l.createContext(null);function Lr(e){const n=l.useContext(_n);l.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function Er(){const[e]=l.useState(()=>new Set),n=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:o,event:a}=r;e.forEach(c=>{var i;return(i=c[o])==null?void 0:i.call(c,a)})},[e]),n]}const Mr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ar={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function Rr(e){let{announcements:n=Ar,container:s,hiddenTextDescribedById:r,screenReaderInstructions:o=Mr}=e;const{announce:a,announcement:c}=Dr(),i=It("DndLiveRegion"),[d,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),Lr(l.useMemo(()=>({onDragStart(f){let{active:m}=f;a(n.onDragStart({active:m}))},onDragMove(f){let{active:m,over:g}=f;n.onDragMove&&a(n.onDragMove({active:m,over:g}))},onDragOver(f){let{active:m,over:g}=f;a(n.onDragOver({active:m,over:g}))},onDragEnd(f){let{active:m,over:g}=f;a(n.onDragEnd({active:m,over:g}))},onDragCancel(f){let{active:m,over:g}=f;a(n.onDragCancel({active:m,over:g}))}}),[a,n])),!d)return null;const h=F.createElement(F.Fragment,null,F.createElement(Cr,{id:r,value:o.draggable}),F.createElement(Sr,{id:i,announcement:c}));return s?nt.createPortal(h,s):h}var H;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(H||(H={}));function Dt(){}function Nn(e,n){return l.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Ir(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return l.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const me=Object.freeze({x:0,y:0});function Vn(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Or(e,n){const s=St(e);if(!s)return"0 0";const r={x:(s.x-n.left)/n.width*100,y:(s.y-n.top)/n.height*100};return r.x+"% "+r.y+"%"}function Kn(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return s-r}function Tr(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return r-s}function kn(e){let{left:n,top:s,height:r,width:o}=e;return[{x:n,y:s},{x:n+o,y:s},{x:n,y:s+r},{x:n+o,y:s+r}]}function Yn(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function Cn(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const Pr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const o=Cn(n,n.left,n.top),a=[];for(const c of r){const{id:i}=c,d=s.get(i);if(d){const u=Vn(Cn(d),o);a.push({id:i,data:{droppableContainer:c,value:u}})}}return a.sort(Kn)},Fr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const o=kn(n),a=[];for(const c of r){const{id:i}=c,d=s.get(i);if(d){const u=kn(d),h=o.reduce((m,g,x)=>m+Vn(u[x],g),0),f=Number((h/4).toFixed(4));a.push({id:i,data:{droppableContainer:c,value:f}})}}return a.sort(Kn)};function $r(e,n){const s=Math.max(n.top,e.top),r=Math.max(n.left,e.left),o=Math.min(n.left+n.width,e.left+e.width),a=Math.min(n.top+n.height,e.top+e.height),c=o-r,i=a-s;if(r<o&&s<a){const d=n.width*n.height,u=e.width*e.height,h=c*i,f=h/(d+u-h);return Number(f.toFixed(4))}return 0}const Br=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const o=[];for(const a of r){const{id:c}=a,i=s.get(c);if(i){const d=$r(i,n);d>0&&o.push({id:c,data:{droppableContainer:a,value:d}})}}return o.sort(Tr)};function zr(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function Gn(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:me}function Ur(e){return function(s){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((c,i)=>({...c,top:c.top+e*i.y,bottom:c.bottom+e*i.y,left:c.left+e*i.x,right:c.right+e*i.x}),{...s})}}const Wr=Ur(1);function Xn(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Hr(e,n,s){const r=Xn(n);if(!r)return e;const{scaleX:o,scaleY:a,x:c,y:i}=r,d=e.left-c-(1-o)*parseFloat(s),u=e.top-i-(1-a)*parseFloat(s.slice(s.indexOf(" ")+1)),h=o?e.width/o:e.width,f=a?e.height/a:e.height;return{width:h,height:f,top:u,right:d+h,bottom:u+f,left:d}}const _r={ignoreTransform:!1};function ut(e,n){n===void 0&&(n=_r);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:u,transformOrigin:h}=ee(e).getComputedStyle(e);u&&(s=Hr(s,u,h))}const{top:r,left:o,width:a,height:c,bottom:i,right:d}=s;return{top:r,left:o,width:a,height:c,bottom:i,right:d}}function Sn(e){return ut(e,{ignoreTransform:!0})}function Vr(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function Kr(e,n){return n===void 0&&(n=ee(e).getComputedStyle(e)),n.position==="fixed"}function Yr(e,n){n===void 0&&(n=ee(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=n[o];return typeof a=="string"?s.test(a):!1})}function Ot(e,n){const s=[];function r(o){if(n!=null&&s.length>=n||!o)return s;if(rn(o)&&o.scrollingElement!=null&&!s.includes(o.scrollingElement))return s.push(o.scrollingElement),s;if(!ct(o)||Wn(o)||s.includes(o))return s;const a=ee(e).getComputedStyle(o);return o!==e&&Yr(o,a)&&s.push(o),Kr(o,a)?s:r(o.parentNode)}return e?r(e):s}function qn(e){const[n]=Ot(e,1);return n??null}function Gt(e){return!At||!e?null:_e(e)?e:sn(e)?rn(e)||e===Ve(e).scrollingElement?window:ct(e)?e:null:null}function Jn(e){return _e(e)?e.scrollX:e.scrollLeft}function Qn(e){return _e(e)?e.scrollY:e.scrollTop}function Zt(e){return{x:Jn(e),y:Qn(e)}}var _;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(_||(_={}));function Zn(e){return!At||!e?!1:e===document.scrollingElement}function es(e){const n={x:0,y:0},s=Zn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},o=e.scrollTop<=n.y,a=e.scrollLeft<=n.x,c=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:c,isRight:i,maxScroll:r,minScroll:n}}const Gr={x:.2,y:.2};function Xr(e,n,s,r,o){let{top:a,left:c,right:i,bottom:d}=s;r===void 0&&(r=10),o===void 0&&(o=Gr);const{isTop:u,isBottom:h,isLeft:f,isRight:m}=es(e),g={x:0,y:0},x={x:0,y:0},v={height:n.height*o.y,width:n.width*o.x};return!u&&a<=n.top+v.height?(g.y=_.Backward,x.y=r*Math.abs((n.top+v.height-a)/v.height)):!h&&d>=n.bottom-v.height&&(g.y=_.Forward,x.y=r*Math.abs((n.bottom-v.height-d)/v.height)),!m&&i>=n.right-v.width?(g.x=_.Forward,x.x=r*Math.abs((n.right-v.width-i)/v.width)):!f&&c<=n.left+v.width&&(g.x=_.Backward,x.x=r*Math.abs((n.left+v.width-c)/v.width)),{direction:g,speed:x}}function qr(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:c}=window;return{top:0,left:0,right:a,bottom:c,width:a,height:c}}const{top:n,left:s,right:r,bottom:o}=e.getBoundingClientRect();return{top:n,left:s,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function ts(e){return e.reduce((n,s)=>Be(n,Zt(s)),me)}function Jr(e){return e.reduce((n,s)=>n+Jn(s),0)}function Qr(e){return e.reduce((n,s)=>n+Qn(s),0)}function ns(e,n){if(n===void 0&&(n=ut),!e)return;const{top:s,left:r,bottom:o,right:a}=n(e);qn(e)&&(o<=0||a<=0||s>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Zr=[["x",["left","right"],Jr],["y",["top","bottom"],Qr]];class an{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ot(s),o=ts(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[a,c,i]of Zr)for(const d of c)Object.defineProperty(this,d,{get:()=>{const u=i(r),h=o[a]-u;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class st{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...s)})},this.target=n}add(n,s,r){var o;(o=this.target)==null||o.addEventListener(n,s,r),this.listeners.push([n,s,r])}}function eo(e){const{EventTarget:n}=ee(e);return e instanceof n?e:Ve(e)}function Xt(e,n){const s=Math.abs(e.x),r=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+r**2)>n:"x"in n&&"y"in n?s>n.x&&r>n.y:"x"in n?s>n.x:"y"in n?r>n.y:!1}var de;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(de||(de={}));function Dn(e){e.preventDefault()}function to(e){e.stopPropagation()}var M;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(M||(M={}));const ss={start:[M.Space,M.Enter],cancel:[M.Esc],end:[M.Space,M.Enter,M.Tab]},no=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case M.Right:return{...s,x:s.x+25};case M.Left:return{...s,x:s.x-25};case M.Down:return{...s,y:s.y+25};case M.Up:return{...s,y:s.y-25}}};class ln{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new st(Ve(s)),this.windowListeners=new st(ee(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(de.Resize,this.handleCancel),this.windowListeners.add(de.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(de.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,r=n.node.current;r&&ns(r),s(me)}handleKeyDown(n){if(on(n)){const{active:s,context:r,options:o}=this.props,{keyboardCodes:a=ss,coordinateGetter:c=no,scrollBehavior:i="smooth"}=o,{code:d}=n;if(a.end.includes(d)){this.handleEnd(n);return}if(a.cancel.includes(d)){this.handleCancel(n);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:me;this.referenceCoordinates||(this.referenceCoordinates=h);const f=c(n,{active:s,context:r.current,currentCoordinates:h});if(f){const m=it(f,h),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const v of x){const y=n.code,{isTop:b,isRight:k,isLeft:j,isBottom:D,maxScroll:E,minScroll:C}=es(v),N=qr(v),S={x:Math.min(y===M.Right?N.right-N.width/2:N.right,Math.max(y===M.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(y===M.Down?N.bottom-N.height/2:N.bottom,Math.max(y===M.Down?N.top:N.top+N.height/2,f.y))},A=y===M.Right&&!k||y===M.Left&&!j,T=y===M.Down&&!D||y===M.Up&&!b;if(A&&S.x!==f.x){const R=v.scrollLeft+m.x,P=y===M.Right&&R<=E.x||y===M.Left&&R>=C.x;if(P&&!m.y){v.scrollTo({left:R,behavior:i});return}P?g.x=v.scrollLeft-R:g.x=y===M.Right?v.scrollLeft-E.x:v.scrollLeft-C.x,g.x&&v.scrollBy({left:-g.x,behavior:i});break}else if(T&&S.y!==f.y){const R=v.scrollTop+m.y,P=y===M.Down&&R<=E.y||y===M.Up&&R>=C.y;if(P&&!m.x){v.scrollTo({top:R,behavior:i});return}P?g.y=v.scrollTop-R:g.y=y===M.Down?v.scrollTop-E.y:v.scrollTop-C.y,g.y&&v.scrollBy({top:-g.y,behavior:i});break}}this.handleMove(n,Be(it(f,this.referenceCoordinates),g))}}}handleMove(n,s){const{onMove:r}=this.props;n.preventDefault(),r(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ln.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:r=ss,onActivation:o}=n,{active:a}=s;const{code:c}=e.nativeEvent;if(r.start.includes(c)){const i=a.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function Ln(e){return!!(e&&"distance"in e)}function En(e){return!!(e&&"delay"in e)}class cn{constructor(n,s,r){var o;r===void 0&&(r=eo(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:a}=n,{target:c}=a;this.props=n,this.events=s,this.document=Ve(c),this.documentListeners=new st(this.document),this.listeners=new st(r),this.windowListeners=new st(ee(c)),this.initialCoordinates=(o=St(a))!=null?o:me,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(de.Resize,this.handleCancel),this.windowListeners.add(de.DragStart,Dn),this.windowListeners.add(de.VisibilityChange,this.handleCancel),this.windowListeners.add(de.ContextMenu,Dn),this.documentListeners.add(de.Keydown,this.handleKeydown),s){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(En(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(Ln(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:r,onPending:o}=this.props;o(r,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(de.Click,to,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(de.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:c,options:{activationConstraint:i}}=a;if(!o)return;const d=(s=St(n))!=null?s:me,u=it(o,d);if(!r&&i){if(Ln(i)){if(i.tolerance!=null&&Xt(u,i.tolerance))return this.handleCancel();if(Xt(u,i.distance))return this.handleStart()}if(En(i)&&Xt(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}n.cancelable&&n.preventDefault(),c(d)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===M.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const so={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class dn extends cn{constructor(n){const{event:s}=n,r=Ve(s.target);super(n,so,r)}}dn.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return!s.isPrimary||s.button!==0?!1:(r==null||r({event:s}),!0)}}];const ro={move:{name:"mousemove"},end:{name:"mouseup"}};var en;(function(e){e[e.RightClick=2]="RightClick"})(en||(en={}));class oo extends cn{constructor(n){super(n,ro,Ve(n.event.target))}}oo.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return s.button===en.RightClick?!1:(r==null||r({event:s}),!0)}}];const qt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ao extends cn{constructor(n){super(n,qt)}static setup(){return window.addEventListener(qt.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(qt.move.name,n)};function n(){}}}ao.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;const{touches:o}=s;return o.length>1?!1:(r==null||r({event:s}),!0)}}];var rt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(rt||(rt={}));var Lt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lt||(Lt={}));function io(e){let{acceleration:n,activator:s=rt.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:c=5,order:i=Lt.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:m}=e;const g=co({delta:f,disabled:!a}),[x,v]=yr(),y=l.useRef({x:0,y:0}),b=l.useRef({x:0,y:0}),k=l.useMemo(()=>{switch(s){case rt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case rt.DraggableRect:return o}},[s,o,d]),j=l.useRef(null),D=l.useCallback(()=>{const C=j.current;if(!C)return;const N=y.current.x*b.current.x,S=y.current.y*b.current.y;C.scrollBy(N,S)},[]),E=l.useMemo(()=>i===Lt.TreeOrder?[...u].reverse():u,[i,u]);l.useEffect(()=>{if(!a||!u.length||!k){v();return}for(const C of E){if((r==null?void 0:r(C))===!1)continue;const N=u.indexOf(C),S=h[N];if(!S)continue;const{direction:A,speed:T}=Xr(C,S,k,n,m);for(const R of["x","y"])g[R][A[R]]||(T[R]=0,A[R]=0);if(T.x>0||T.y>0){v(),j.current=C,x(D,c),y.current=T,b.current=A;return}}y.current={x:0,y:0},b.current={x:0,y:0},v()},[n,D,r,v,a,c,JSON.stringify(k),JSON.stringify(g),x,u,E,h,JSON.stringify(m)])}const lo={x:{[_.Backward]:!1,[_.Forward]:!1},y:{[_.Backward]:!1,[_.Forward]:!1}};function co(e){let{delta:n,disabled:s}=e;const r=Ct(n);return dt(o=>{if(s||!r||!o)return lo;const a={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[_.Backward]:o.x[_.Backward]||a.x===-1,[_.Forward]:o.x[_.Forward]||a.x===1},y:{[_.Backward]:o.y[_.Backward]||a.y===-1,[_.Forward]:o.y[_.Forward]||a.y===1}}},[s,n,r])}function uo(e,n){const s=n!=null?e.get(n):void 0,r=s?s.node.current:null;return dt(o=>{var a;return n==null?null:(a=r??o)!=null?a:null},[r,n])}function ho(e,n){return l.useMemo(()=>e.reduce((s,r)=>{const{sensor:o}=r,a=o.activators.map(c=>({eventName:c.eventName,handler:n(c.handler,r)}));return[...s,...a]},[]),[e,n])}var lt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(lt||(lt={}));var tn;(function(e){e.Optimized="optimized"})(tn||(tn={}));const Mn=new Map;function xo(e,n){let{dragging:s,dependencies:r,config:o}=n;const[a,c]=l.useState(null),{frequency:i,measure:d,strategy:u}=o,h=l.useRef(e),f=y(),m=at(f),g=l.useCallback(function(b){b===void 0&&(b=[]),!m.current&&c(k=>k===null?b:k.concat(b.filter(j=>!k.includes(j))))},[m]),x=l.useRef(null),v=dt(b=>{if(f&&!s)return Mn;if(!b||b===Mn||h.current!==e||a!=null){const k=new Map;for(let j of e){if(!j)continue;if(a&&a.length>0&&!a.includes(j.id)&&j.rect.current){k.set(j.id,j.rect.current);continue}const D=j.node.current,E=D?new an(d(D),D):null;j.rect.current=E,E&&k.set(j.id,E)}return k}return b},[e,a,s,f,d]);return l.useEffect(()=>{h.current=e},[e]),l.useEffect(()=>{f||g()},[s,f]),l.useEffect(()=>{a&&a.length>0&&c(null)},[JSON.stringify(a)]),l.useEffect(()=>{f||typeof i!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},i))},[i,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:a!=null};function y(){switch(u){case lt.Always:return!1;case lt.BeforeDragging:return s;default:return!s}}}function un(e,n){return dt(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function fo(e,n){return un(e,n)}function go(e){let{callback:n,disabled:s}=e;const r=Rt(n),o=l.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,s]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Tt(e){let{callback:n,disabled:s}=e;const r=Rt(n),o=l.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[s]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function mo(e){return new an(ut(e),e)}function An(e,n,s){n===void 0&&(n=mo);const[r,o]=l.useState(null);function a(){o(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??s)!=null?u:null}const h=n(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const c=go({callback(d){if(e)for(const u of d){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),i=Tt({callback:a});return Se(()=>{a(),e?(i==null||i.observe(e),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),c==null||c.disconnect())},[e]),r}function po(e){const n=un(e);return Gn(e,n)}const Rn=[];function bo(e){const n=l.useRef(e),s=dt(r=>e?r&&r!==Rn&&e&&n.current&&e.parentNode===n.current.parentNode?r:Ot(e):Rn,[e]);return l.useEffect(()=>{n.current=e},[e]),s}function vo(e){const[n,s]=l.useState(null),r=l.useRef(e),o=l.useCallback(a=>{const c=Gt(a.target);c&&s(i=>i?(i.set(c,Zt(c)),new Map(i)):null)},[]);return l.useEffect(()=>{const a=r.current;if(e!==a){c(a);const i=e.map(d=>{const u=Gt(d);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Zt(u)]):null}).filter(d=>d!=null);s(i.length?new Map(i):null),r.current=e}return()=>{c(e),c(a)};function c(i){i.forEach(d=>{const u=Gt(d);u==null||u.removeEventListener("scroll",o)})}},[o,e]),l.useMemo(()=>e.length?n?Array.from(n.values()).reduce((a,c)=>Be(a,c),me):ts(e):me,[e,n])}function In(e,n){n===void 0&&(n=[]);const s=l.useRef(null);return l.useEffect(()=>{s.current=null},n),l.useEffect(()=>{const r=e!==me;r&&!s.current&&(s.current=e),!r&&s.current&&(s.current=null)},[e]),s.current?it(e,s.current):me}function yo(e){l.useEffect(()=>{if(!At)return;const n=e.map(s=>{let{sensor:r}=s;return r.setup==null?void 0:r.setup()});return()=>{for(const s of n)s==null||s()}},e.map(n=>{let{sensor:s}=n;return s}))}function wo(e,n){return l.useMemo(()=>e.reduce((s,r)=>{let{eventName:o,handler:a}=r;return s[o]=c=>{a(c,n)},s},{}),[e,n])}function rs(e){return l.useMemo(()=>e?Vr(e):null,[e])}const On=[];function jo(e,n){n===void 0&&(n=ut);const[s]=e,r=rs(s?ee(s):null),[o,a]=l.useState(On);function c(){a(()=>e.length?e.map(d=>Zn(d)?r:new an(n(d),d)):On)}const i=Tt({callback:c});return Se(()=>{i==null||i.disconnect(),c(),e.forEach(d=>i==null?void 0:i.observe(d))},[e]),o}function os(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return ct(n)?n:e}function No(e){let{measure:n}=e;const[s,r]=l.useState(null),o=l.useCallback(u=>{for(const{target:h}of u)if(ct(h)){r(f=>{const m=n(h);return f?{...f,width:m.width,height:m.height}:m});break}},[n]),a=Tt({callback:o}),c=l.useCallback(u=>{const h=os(u);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?n(h):null)},[n,a]),[i,d]=kt(c);return l.useMemo(()=>({nodeRef:i,rect:s,setRef:d}),[s,i,d])}const ko=[{sensor:dn,options:{}},{sensor:ln,options:{}}],Co={current:{}},wt={draggable:{measure:Sn},droppable:{measure:Sn,strategy:lt.WhileDragging,frequency:tn.Optimized},dragOverlay:{measure:ut}};class ot extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,r;return(s=(r=this.get(n))==null?void 0:r.node.current)!=null?s:void 0}}const So={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ot,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Dt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:wt,measureDroppableContainers:Dt,windowRect:null,measuringScheduled:!1},as={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Dt,draggableNodes:new Map,over:null,measureDroppableContainers:Dt},ht=l.createContext(as),is=l.createContext(So);function Do(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ot}}}function Lo(e,n){switch(n.type){case H.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case H.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case H.DragEnd:case H.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case H.RegisterDroppable:{const{element:s}=n,{id:r}=s,o=new ot(e.droppable.containers);return o.set(r,s),{...e,droppable:{...e.droppable,containers:o}}}case H.SetDroppableDisabled:{const{id:s,key:r,disabled:o}=n,a=e.droppable.containers.get(s);if(!a||r!==a.key)return e;const c=new ot(e.droppable.containers);return c.set(s,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:c}}}case H.UnregisterDroppable:{const{id:s,key:r}=n,o=e.droppable.containers.get(s);if(!o||r!==o.key)return e;const a=new ot(e.droppable.containers);return a.delete(s),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Eo(e){let{disabled:n}=e;const{active:s,activatorEvent:r,draggableNodes:o}=l.useContext(ht),a=Ct(r),c=Ct(s==null?void 0:s.id);return l.useEffect(()=>{if(!n&&!r&&a&&c!=null){if(!on(a)||document.activeElement===a.target)return;const i=o.get(c);if(!i)return;const{activatorNode:d,node:u}=i;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[d.current,u.current]){if(!h)continue;const f=Nr(h);if(f){f.focus();break}}})}},[r,n,o,c,a]),null}function ls(e,n){let{transform:s,...r}=n;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),s):s}function Mo(e){return l.useMemo(()=>({draggable:{...wt.draggable,...e==null?void 0:e.draggable},droppable:{...wt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...wt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ao(e){let{activeNode:n,measure:s,initialRect:r,config:o=!0}=e;const a=l.useRef(!1),{x:c,y:i}=typeof o=="boolean"?{x:o,y:o}:o;Se(()=>{if(!c&&!i||!n){a.current=!1;return}if(a.current||!r)return;const u=n==null?void 0:n.node.current;if(!u||u.isConnected===!1)return;const h=s(u),f=Gn(h,r);if(c||(f.x=0),i||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=qn(u);m&&m.scrollBy({top:f.y,left:f.x})}},[n,c,i,r,s])}const Pt=l.createContext({...me,scaleX:1,scaleY:1});var Re;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Re||(Re={}));const Ro=l.memo(function(n){var s,r,o,a;let{id:c,accessibility:i,autoScroll:d=!0,children:u,sensors:h=ko,collisionDetection:f=Br,measuring:m,modifiers:g,...x}=n;const v=l.useReducer(Lo,void 0,Do),[y,b]=v,[k,j]=Er(),[D,E]=l.useState(Re.Uninitialized),C=D===Re.Initialized,{draggable:{active:N,nodes:S,translate:A},droppable:{containers:T}}=y,R=N!=null?S.get(N):null,P=l.useRef({initial:null,translated:null}),U=l.useMemo(()=>{var B;return N!=null?{id:N,data:(B=R==null?void 0:R.data)!=null?B:Co,rect:P}:null},[N,R]),O=l.useRef(null),[we,te]=l.useState(null),[$,re]=l.useState(null),K=at(x,Object.values(x)),ue=It("DndDescribedBy",c),Ke=l.useMemo(()=>T.getEnabled(),[T]),oe=Mo(m),{droppableRects:je,measureDroppableContainers:pe,measuringScheduled:Ye}=xo(Ke,{dragging:C,dependencies:[A.x,A.y],config:oe.droppable}),V=uo(S,N),Ge=l.useMemo(()=>$?St($):null,[$]),De=Wt(),Xe=fo(V,oe.draggable.measure);Ao({activeNode:N!=null?S.get(N):null,config:De.layoutShiftCompensation,initialRect:Xe,measure:oe.draggable.measure});const ae=An(V,oe.draggable.measure,Xe),Ie=An(V?V.parentElement:null),X=l.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:je,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ne=T.getNodeFor((s=X.current.over)==null?void 0:s.id),be=No({measure:oe.dragOverlay.measure}),Pe=(r=be.nodeRef.current)!=null?r:V,Ne=C?(o=be.rect)!=null?o:ae:null,xt=!!(be.nodeRef.current&&be.rect),qe=po(xt?null:ae),Je=rs(Pe?ee(Pe):null),ve=bo(C?ne??V:null),he=jo(ve),Fe=ls(g,{transform:{x:A.x-qe.x,y:A.y-qe.y,scaleX:1,scaleY:1},activatorEvent:$,active:U,activeNodeRect:ae,containerNodeRect:Ie,draggingNodeRect:Ne,over:X.current.over,overlayNodeRect:be.rect,scrollableAncestors:ve,scrollableAncestorRects:he,windowRect:Je}),ft=Ge?Be(Ge,A):null,gt=vo(ve),Ft=In(gt),$t=In(gt,[ae]),Le=Be(Fe,Ft),q=Ne?Wr(Ne,Fe):null,Oe=U&&q?f({active:U,collisionRect:q,droppableRects:je,droppableContainers:Ke,pointerCoordinates:ft}):null,mt=Yn(Oe,"id"),[xe,pt]=l.useState(null),Bt=xt?Fe:Be(Fe,$t),zt=zr(Bt,(a=xe==null?void 0:xe.rect)!=null?a:null,ae),Ee=l.useRef(null),Qe=l.useCallback((B,J)=>{let{sensor:Q,options:ye}=J;if(O.current==null)return;const Z=S.get(O.current);if(!Z)return;const Y=B.nativeEvent,le=new Q({active:O.current,activeNode:Z,event:Y,options:ye,context:X,onAbort(W){if(!S.get(W))return;const{onDragAbort:ie}=K.current,ge={id:W};ie==null||ie(ge),k({type:"onDragAbort",event:ge})},onPending(W,fe,ie,ge){if(!S.get(W))return;const{onDragPending:Te}=K.current,ce={id:W,constraint:fe,initialCoordinates:ie,offset:ge};Te==null||Te(ce),k({type:"onDragPending",event:ce})},onStart(W){const fe=O.current;if(fe==null)return;const ie=S.get(fe);if(!ie)return;const{onDragStart:ge}=K.current,Ae={activatorEvent:Y,active:{id:fe,data:ie.data,rect:P}};nt.unstable_batchedUpdates(()=>{ge==null||ge(Ae),E(Re.Initializing),b({type:H.DragStart,initialCoordinates:W,active:fe}),k({type:"onDragStart",event:Ae}),te(Ee.current),re(Y)})},onMove(W){b({type:H.DragMove,coordinates:W})},onEnd:Me(H.DragEnd),onCancel:Me(H.DragCancel)});Ee.current=le;function Me(W){return async function(){const{active:ie,collisions:ge,over:Ae,scrollAdjustedTranslate:Te}=X.current;let ce=null;if(ie&&Te){const{cancelDrop:G}=K.current;ce={activatorEvent:Y,active:ie,collisions:ge,delta:Te,over:Ae},W===H.DragEnd&&typeof G=="function"&&await Promise.resolve(G(ce))&&(W=H.DragCancel)}O.current=null,nt.unstable_batchedUpdates(()=>{b({type:W}),E(Re.Uninitialized),pt(null),te(null),re(null),Ee.current=null;const G=W===H.DragEnd?"onDragEnd":"onDragCancel";if(ce){const p=K.current[G];p==null||p(ce),k({type:G,event:ce})}})}}},[S]),Ze=l.useCallback((B,J)=>(Q,ye)=>{const Z=Q.nativeEvent,Y=S.get(ye);if(O.current!==null||!Y||Z.dndKit||Z.defaultPrevented)return;const le={active:Y};B(Q,J.options,le)===!0&&(Z.dndKit={capturedBy:J.sensor},O.current=ye,Qe(Q,J))},[S,Qe]),et=ho(h,Ze);yo(h),Se(()=>{ae&&D===Re.Initializing&&E(Re.Initialized)},[ae,D]),l.useEffect(()=>{const{onDragMove:B}=K.current,{active:J,activatorEvent:Q,collisions:ye,over:Z}=X.current;if(!J||!Q)return;const Y={active:J,activatorEvent:Q,collisions:ye,delta:{x:Le.x,y:Le.y},over:Z};nt.unstable_batchedUpdates(()=>{B==null||B(Y),k({type:"onDragMove",event:Y})})},[Le.x,Le.y]),l.useEffect(()=>{const{active:B,activatorEvent:J,collisions:Q,droppableContainers:ye,scrollAdjustedTranslate:Z}=X.current;if(!B||O.current==null||!J||!Z)return;const{onDragOver:Y}=K.current,le=ye.get(mt),Me=le&&le.rect.current?{id:le.id,rect:le.rect.current,data:le.data,disabled:le.disabled}:null,W={active:B,activatorEvent:J,collisions:Q,delta:{x:Z.x,y:Z.y},over:Me};nt.unstable_batchedUpdates(()=>{pt(Me),Y==null||Y(W),k({type:"onDragOver",event:W})})},[mt]),Se(()=>{X.current={activatorEvent:$,active:U,activeNode:V,collisionRect:q,collisions:Oe,droppableRects:je,draggableNodes:S,draggingNode:Pe,draggingNodeRect:Ne,droppableContainers:T,over:xe,scrollableAncestors:ve,scrollAdjustedTranslate:Le},P.current={initial:Ne,translated:q}},[U,V,Oe,q,S,Pe,Ne,je,T,xe,ve,Le]),io({...De,delta:A,draggingRect:q,pointerCoordinates:ft,scrollableAncestors:ve,scrollableAncestorRects:he});const Ut=l.useMemo(()=>({active:U,activeNode:V,activeNodeRect:ae,activatorEvent:$,collisions:Oe,containerNodeRect:Ie,dragOverlay:be,draggableNodes:S,droppableContainers:T,droppableRects:je,over:xe,measureDroppableContainers:pe,scrollableAncestors:ve,scrollableAncestorRects:he,measuringConfiguration:oe,measuringScheduled:Ye,windowRect:Je}),[U,V,ae,$,Oe,Ie,be,S,T,je,xe,pe,ve,he,oe,Ye,Je]),$e=l.useMemo(()=>({activatorEvent:$,activators:et,active:U,activeNodeRect:ae,ariaDescribedById:{draggable:ue},dispatch:b,draggableNodes:S,over:xe,measureDroppableContainers:pe}),[$,et,U,ae,b,ue,S,xe,pe]);return F.createElement(_n.Provider,{value:j},F.createElement(ht.Provider,{value:$e},F.createElement(is.Provider,{value:Ut},F.createElement(Pt.Provider,{value:zt},u)),F.createElement(Eo,{disabled:(i==null?void 0:i.restoreFocus)===!1})),F.createElement(Rr,{...i,hiddenTextDescribedById:ue}));function Wt(){const B=(we==null?void 0:we.autoScrollEnabled)===!1,J=typeof d=="object"?d.enabled===!1:d===!1,Q=C&&!B&&!J;return typeof d=="object"?{...d,enabled:Q}:{enabled:Q}}}),Io=l.createContext(null),Tn="button",Oo="Draggable";function To(e){let{id:n,data:s,disabled:r=!1,attributes:o}=e;const a=It(Oo),{activators:c,activatorEvent:i,active:d,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:m}=l.useContext(ht),{role:g=Tn,roleDescription:x="draggable",tabIndex:v=0}=o??{},y=(d==null?void 0:d.id)===n,b=l.useContext(y?Pt:Io),[k,j]=kt(),[D,E]=kt(),C=wo(c,n),N=at(s);Se(()=>(f.set(n,{id:n,key:a,node:k,activatorNode:D,data:N}),()=>{const A=f.get(n);A&&A.key===a&&f.delete(n)}),[f,n]);const S=l.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":y&&g===Tn?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,g,v,y,x,h.draggable]);return{active:d,activatorEvent:i,activeNodeRect:u,attributes:S,isDragging:y,listeners:r?void 0:C,node:k,over:m,setNodeRef:j,setActivatorNodeRef:E,transform:b}}function Po(){return l.useContext(is)}const Fo="Droppable",$o={timeout:25};function cs(e){let{data:n,disabled:s=!1,id:r,resizeObserverConfig:o}=e;const a=It(Fo),{active:c,dispatch:i,over:d,measureDroppableContainers:u}=l.useContext(ht),h=l.useRef({disabled:s}),f=l.useRef(!1),m=l.useRef(null),g=l.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:y}={...$o,...o},b=at(v??r),k=l.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),g.current=null},y)},[y]),j=Tt({callback:k,disabled:x||!c}),D=l.useCallback((S,A)=>{j&&(A&&(j.unobserve(A),f.current=!1),S&&j.observe(S))},[j]),[E,C]=kt(D),N=at(n);return l.useEffect(()=>{!j||!E.current||(j.disconnect(),f.current=!1,j.observe(E.current))},[E,j]),l.useEffect(()=>(i({type:H.RegisterDroppable,element:{id:r,key:a,disabled:s,node:E,rect:m,data:N}}),()=>i({type:H.UnregisterDroppable,key:a,id:r})),[r]),l.useEffect(()=>{s!==h.current.disabled&&(i({type:H.SetDroppableDisabled,id:r,key:a,disabled:s}),h.current.disabled=s)},[r,a,s,i]),{active:c,rect:m,isOver:(d==null?void 0:d.id)===r,node:E,over:d,setNodeRef:C}}function Bo(e){let{animation:n,children:s}=e;const[r,o]=l.useState(null),[a,c]=l.useState(null),i=Ct(s);return!s&&!r&&i&&o(i),Se(()=>{if(!a)return;const d=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(d==null||u==null){o(null);return}Promise.resolve(n(u,a)).then(()=>{o(null)})},[n,r,a]),F.createElement(F.Fragment,null,s,r?l.cloneElement(r,{ref:c}):null)}const zo={x:0,y:0,scaleX:1,scaleY:1};function Uo(e){let{children:n}=e;return F.createElement(ht.Provider,{value:as},F.createElement(Pt.Provider,{value:zo},n))}const Wo={position:"fixed",touchAction:"none"},Ho=e=>on(e)?"transform 250ms ease":void 0,_o=l.forwardRef((e,n)=>{let{as:s,activatorEvent:r,adjustScale:o,children:a,className:c,rect:i,style:d,transform:u,transition:h=Ho}=e;if(!i)return null;const f=o?u:{...u,scaleX:1,scaleY:1},m={...Wo,width:i.width,height:i.height,top:i.top,left:i.left,transform:ze.Transform.toString(f),transformOrigin:o&&r?Or(r,i):void 0,transition:typeof h=="function"?h(r):h,...d};return F.createElement(s,{className:c,style:m,ref:n},a)}),Vo=e=>n=>{let{active:s,dragOverlay:r}=n;const o={},{styles:a,className:c}=e;if(a!=null&&a.active)for(const[i,d]of Object.entries(a.active))d!==void 0&&(o[i]=s.node.style.getPropertyValue(i),s.node.style.setProperty(i,d));if(a!=null&&a.dragOverlay)for(const[i,d]of Object.entries(a.dragOverlay))d!==void 0&&r.node.style.setProperty(i,d);return c!=null&&c.active&&s.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[d,u]of Object.entries(o))s.node.style.setProperty(d,u);c!=null&&c.active&&s.node.classList.remove(c.active)}},Ko=e=>{let{transform:{initial:n,final:s}}=e;return[{transform:ze.Transform.toString(n)},{transform:ze.Transform.toString(s)}]},Yo={duration:250,easing:"ease",keyframes:Ko,sideEffects:Vo({styles:{active:{opacity:"0"}}})};function Go(e){let{config:n,draggableNodes:s,droppableContainers:r,measuringConfiguration:o}=e;return Rt((a,c)=>{if(n===null)return;const i=s.get(a);if(!i)return;const d=i.node.current;if(!d)return;const u=os(c);if(!u)return;const{transform:h}=ee(c).getComputedStyle(c),f=Xn(h);if(!f)return;const m=typeof n=="function"?n:Xo(n);return ns(d,o.draggable.measure),m({active:{id:a,data:i.data,node:d,rect:o.draggable.measure(d)},draggableNodes:s,dragOverlay:{node:c,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function Xo(e){const{duration:n,easing:s,sideEffects:r,keyframes:o}={...Yo,...e};return a=>{let{active:c,dragOverlay:i,transform:d,...u}=a;if(!n)return;const h={x:i.rect.left-c.rect.left,y:i.rect.top-c.rect.top},f={scaleX:d.scaleX!==1?c.rect.width*d.scaleX/i.rect.width:1,scaleY:d.scaleY!==1?c.rect.height*d.scaleY/i.rect.height:1},m={x:d.x-h.x,y:d.y-h.y,...f},g=o({...u,active:c,dragOverlay:i,transform:{initial:d,final:m}}),[x]=g,v=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(v))return;const y=r==null?void 0:r({active:c,dragOverlay:i,...u}),b=i.node.animate(g,{duration:n,easing:s,fill:"forwards"});return new Promise(k=>{b.onfinish=()=>{y==null||y(),k()}})}}let Pn=0;function qo(e){return l.useMemo(()=>{if(e!=null)return Pn++,Pn},[e])}const Jo=F.memo(e=>{let{adjustScale:n=!1,children:s,dropAnimation:r,style:o,transition:a,modifiers:c,wrapperElement:i="div",className:d,zIndex:u=999}=e;const{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:g,draggableNodes:x,droppableContainers:v,dragOverlay:y,over:b,measuringConfiguration:k,scrollableAncestors:j,scrollableAncestorRects:D,windowRect:E}=Po(),C=l.useContext(Pt),N=qo(f==null?void 0:f.id),S=ls(c,{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:g,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:j,scrollableAncestorRects:D,transform:C,windowRect:E}),A=un(m),T=Go({config:r,draggableNodes:x,droppableContainers:v,measuringConfiguration:k}),R=A?y.setRef:void 0;return F.createElement(Uo,null,F.createElement(Bo,{animation:T},f&&N?F.createElement(_o,{key:N,id:f.id,ref:R,as:i,activatorEvent:h,adjustScale:n,className:d,transition:a,rect:A,style:{zIndex:u,...o},transform:S},s):null))});function Et(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const Qo=[M.Down,M.Right,M.Up,M.Left],Zo=(e,n)=>{let{context:{active:s,collisionRect:r,droppableRects:o,droppableContainers:a,over:c,scrollableAncestors:i}}=n;if(Qo.includes(e.code)){if(e.preventDefault(),!s||!r)return;const d=[];a.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=o.get(f.id);if(m)switch(e.code){case M.Down:r.top<m.top&&d.push(f);break;case M.Up:r.top>m.top&&d.push(f);break;case M.Left:r.left>m.left&&d.push(f);break;case M.Right:r.left<m.left&&d.push(f);break}});const u=Fr({collisionRect:r,droppableRects:o,droppableContainers:d});let h=Yn(u,"id");if(h===(c==null?void 0:c.id)&&u.length>1&&(h=u[1].id),h!=null){const f=a.get(s.id),m=a.get(h),g=m?o.get(m.id):null,x=m==null?void 0:m.node.current;if(x&&g&&f&&m){const y=Ot(x).some((C,N)=>i[N]!==C),b=ds(f,m),k=ea(f,m),j=y||!b?{x:0,y:0}:{x:k?r.width-g.width:0,y:k?r.height-g.height:0},D={x:g.left,y:g.top};return j.x&&j.y?D:it(D,j)}}}};function ds(e,n){return!Et(e)||!Et(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function ea(e,n){return!Et(e)||!Et(n)||!ds(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}function us({connection:e,onSelect:n,onEdit:s,compact:r=!1}){const o=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,a=e.nextFollowUp&&!o&&new Date(e.nextFollowUp)<=new Date(Date.now()+7*24*60*60*1e3),c=Array.from({length:3},(d,u)=>t.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${u<e.relationshipStrength?"bg-indigo-500":"bg-gray-200"}`},u)),i=d=>d?new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null;return r?t.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>n(e.id),children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium text-sm flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[e.role?`${e.role} @ `:"",e.company]})]}),o&&t.jsx("span",{className:"text-amber-500 text-xs",title:"Follow-up due",children:"!"})]}):t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n(e.id),children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-semibold text-lg flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.name}),t.jsx("span",{className:"flex gap-0.5",children:c})]}),t.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:Nt[e.relationshipType]}),e.linkedPostingIds.length>0&&t.jsxs("span",{className:"text-xs text-gray-500",children:[e.linkedPostingIds.length," posting",e.linkedPostingIds.length!==1?"s":""]})]})]}),s&&t.jsx("button",{onClick:d=>{d.stopPropagation(),s(e.id)},className:"p-1.5 rounded hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",title:"Edit connection",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.lastContactDate&&t.jsxs("span",{children:["Last contact: ",i(e.lastContactDate)]}),e.contactHistory.length>0&&t.jsxs("span",{children:[e.contactHistory.length," interaction",e.contactHistory.length!==1?"s":""]})]}),e.nextFollowUp&&t.jsxs("span",{className:`flex items-center gap-1 ${o?"text-red-600 font-medium":a?"text-amber-600":"text-gray-500"}`,children:[o&&t.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Follow-up: ",i(e.nextFollowUp)]})]})]})}function ta({connections:e,onSelectConnection:n,onEditConnection:s,onAddConnection:r}){const[o,a]=l.useState(""),[c,i]=l.useState("all"),[d,u]=l.useState(""),h=l.useMemo(()=>[...new Set(e.map(v=>v.company))].sort(),[e]),f=l.useMemo(()=>e.filter(x=>{var v,y;if(o){const b=o.toLowerCase();if(!(x.name.toLowerCase().includes(b)||x.company.toLowerCase().includes(b)||((v=x.role)==null?void 0:v.toLowerCase().includes(b))||((y=x.notes)==null?void 0:y.toLowerCase().includes(b))))return!1}if(d&&x.company!==d)return!1;switch(c){case"follow-up-due":return x.nextFollowUp&&new Date(x.nextFollowUp)<=new Date;case"has-postings":return x.linkedPostingIds.length>0;case"no-postings":return x.linkedPostingIds.length===0;default:return!0}}),[e,o,c,d]),m=l.useMemo(()=>[...f].sort((x,v)=>{const y=x.nextFollowUp&&new Date(x.nextFollowUp)<=new Date,b=v.nextFollowUp&&new Date(v.nextFollowUp)<=new Date;return y&&!b?-1:!y&&b?1:x.name.localeCompare(v.name)}),[f]),g=e.filter(x=>x.nextFollowUp&&new Date(x.nextFollowUp)<=new Date).length;return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Connections"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," connection",e.length!==1?"s":"",g>0&&t.jsxs("span",{className:"text-amber-600 ml-2",children:["(",g," follow-up",g!==1?"s":""," due)"]})]})]}),t.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Connection"]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:o,onChange:x=>a(x.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),t.jsxs("select",{value:c,onChange:x=>i(x.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Connections"}),t.jsx("option",{value:"follow-up-due",children:"Follow-up Due"}),t.jsx("option",{value:"has-postings",children:"Linked to Postings"}),t.jsx("option",{value:"no-postings",children:"No Postings Linked"})]}),t.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"All Companies"}),h.map(x=>t.jsx("option",{value:x,children:x},x))]}),(o||c!=="all"||d)&&t.jsx("button",{onClick:()=>{a(""),i("all"),u("")},className:"text-sm text-indigo-600 hover:text-indigo-700",children:"Clear filters"})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:m.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.length===0?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No connections yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Start building your network by adding contacts you meet during your job search."}),t.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Your First Connection"]})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No matches found"}),t.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters."})]})]}):t.jsx("div",{className:"grid gap-3",children:m.map(x=>t.jsx(us,{connection:x,onSelect:n,onEdit:s},x.id))})})]})}function na({isOpen:e,onClose:n,onSave:s,connection:r,postings:o=[],prefilledCompany:a}){const c=!!r,[i,d]=l.useState({name:"",email:"",linkedInUrl:"",company:a||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),[u,h]=l.useState({});l.useEffect(()=>{e&&(d(r?{name:r.name,email:r.email||"",linkedInUrl:r.linkedInUrl||"",company:r.company,role:r.role||"",relationshipType:r.relationshipType,howWeMet:r.howWeMet||"",relationshipStrength:r.relationshipStrength,notes:r.notes,nextFollowUp:r.nextFollowUp||"",linkedPostingIds:r.linkedPostingIds}:{name:"",email:"",linkedInUrl:"",company:a||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),h({}))},[e,r,a]);const f=b=>{const{name:k,value:j}=b.target;d(D=>({...D,[k]:j})),u[k]&&h(D=>({...D,[k]:""}))},m=b=>{d(k=>({...k,relationshipStrength:b}))},g=b=>{d(k=>({...k,linkedPostingIds:k.linkedPostingIds.includes(b)?k.linkedPostingIds.filter(j=>j!==b):[...k.linkedPostingIds,b]}))},x=()=>{const b={};return i.name.trim()||(b.name="Name is required"),i.company.trim()||(b.company="Company is required"),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(b.email="Invalid email address"),i.linkedInUrl&&!i.linkedInUrl.includes("linkedin.com")&&(b.linkedInUrl="Must be a LinkedIn URL"),h(b),Object.keys(b).length===0},v=b=>{if(b.preventDefault(),!x())return;const k=Date.now(),j={id:(r==null?void 0:r.id)||`conn_${k}_${Math.random().toString(36).slice(2,9)}`,name:i.name.trim(),email:i.email.trim()||void 0,linkedInUrl:i.linkedInUrl.trim()||void 0,company:i.company.trim(),role:i.role.trim()||void 0,relationshipType:i.relationshipType,howWeMet:i.howWeMet.trim()||void 0,relationshipStrength:i.relationshipStrength,notes:i.notes,lastContactDate:r==null?void 0:r.lastContactDate,nextFollowUp:i.nextFollowUp||void 0,contactHistory:(r==null?void 0:r.contactHistory)||[],linkedPostingIds:i.linkedPostingIds,dateAdded:(r==null?void 0:r.dateAdded)||k,dateModified:k};s(j),n()};if(!e)return null;const y=[...o].sort((b,k)=>{const j=b.company.toLowerCase()===i.company.toLowerCase(),D=k.company.toLowerCase()===i.company.toLowerCase();return j&&!D?-1:!j&&D?1:b.company.localeCompare(k.company)});return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c?"Edit Connection":"Add Connection"}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("form",{onSubmit:v,className:"flex-1 overflow-auto p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:i.name,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.name?"border-red-300":"border-gray-200"}`,placeholder:"John Smith"}),u.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"company",value:i.company,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.company?"border-red-300":"border-gray-200"}`,placeholder:"Anthropic"}),u.company&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.company})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),t.jsx("input",{type:"text",name:"role",value:i.role,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Technical Recruiter"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(Nt).map(b=>t.jsx("button",{type:"button",onClick:()=>d(k=>({...k,relationshipType:b})),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${i.relationshipType===b?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"} border`,children:Nt[b]},b))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship Strength"}),t.jsx("div",{className:"flex gap-4",children:[1,2,3].map(b=>t.jsxs("button",{type:"button",onClick:()=>m(b),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${i.relationshipStrength===b?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"flex gap-0.5",children:Array.from({length:3},(k,j)=>t.jsx("span",{className:`w-2 h-2 rounded-full ${j<b?"bg-indigo-500":"bg-gray-200"}`},j))}),t.jsx("span",{className:"text-sm",children:zn[b]})]},b))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How did you meet?"}),t.jsx("input",{type:"text",name:"howWeMet",value:i.howWeMet,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Career fair at MIT, October 2024"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:i.email,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.email?"border-red-300":"border-gray-200"}`,placeholder:"john@company.com"}),u.email&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),t.jsx("input",{type:"url",name:"linkedInUrl",value:i.linkedInUrl,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.linkedInUrl?"border-red-300":"border-gray-200"}`,placeholder:"linkedin.com/in/..."}),u.linkedInUrl&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.linkedInUrl})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Follow-up Date"}),t.jsx("input",{type:"date",name:"nextFollowUp",value:i.nextFollowUp,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{name:"notes",value:i.notes,onChange:f,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Any notes about this connection..."})]}),o.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Postings"}),t.jsx("div",{className:"max-h-40 overflow-auto border border-gray-200 rounded-lg",children:y.slice(0,10).map(b=>t.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.linkedPostingIds.includes(b.id),onChange:()=>g(b.id),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),t.jsxs("span",{className:"text-sm text-gray-700 truncate",children:[b.title," @ ",b.company]})]},b.id))}),o.length>10&&t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Showing first 10 postings. Search by company name to find more."})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:c?"Save Changes":"Add Connection"})]})]})})}function sa({connection:e,linkedPostings:n,isOpen:s,onClose:r,onEdit:o,onDelete:a,onLogContact:c,onViewPosting:i,onUnlinkPosting:d,onUpdateFollowUp:u}){const[h,f]=l.useState(!1),[m,g]=l.useState({type:"email",notes:"",date:new Date().toISOString().split("T")[0]}),[x,v]=l.useState(!1);if(!s)return null;const y=Array.from({length:3},(C,N)=>t.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${N<e.relationshipStrength?"bg-indigo-500":"bg-gray-200"}`},N)),b=C=>C?new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",k=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,j=()=>{const C={id:`contact_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,date:m.date,type:m.type,notes:m.notes.trim()||void 0};c(C),f(!1),g({type:"email",notes:"",date:new Date().toISOString().split("T")[0]})},D=()=>{a(),v(!1)},E=[...e.contactHistory].sort((C,N)=>new Date(N.date).getTime()-new Date(C.date).getTime());return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:r}),t.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-semibold text-xl flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-gray-600",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"flex gap-0.5",children:y}),t.jsxs("span",{className:"text-sm text-gray-500",children:[zn[e.relationshipStrength]," connection"]})]})]})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[e.email&&t.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.email]}),e.linkedInUrl&&t.jsxs("a",{href:e.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"View LinkedIn Profile"]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Type"}),t.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 text-gray-700 text-sm",children:Nt[e.relationshipType]})]}),e.howWeMet&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"How We Met"}),t.jsx("p",{className:"text-gray-700",children:e.howWeMet})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Next Follow-up"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"date",value:e.nextFollowUp||"",onChange:C=>u(C.target.value||void 0),className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${k?"border-red-300 bg-red-50":"border-gray-200"}`}),k&&t.jsxs("span",{className:"text-sm text-red-600 font-medium flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Overdue!"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Contact History"}),t.jsxs("button",{onClick:()=>f(!h),className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Contact"]})]}),h&&t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),t.jsx("select",{value:m.type,onChange:C=>g({...m,type:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Object.keys(bt).map(C=>t.jsx("option",{value:C,children:bt[C]},C))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:m.date,onChange:C=>g({...m,date:C.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Notes (optional)"}),t.jsx("textarea",{value:m.notes,onChange:C=>g({...m,notes:C.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Brief description of the conversation..."})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),t.jsx("button",{onClick:j,className:"px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save"})]})]}),E.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No contact history yet."}):t.jsx("div",{className:"space-y-3",children:E.map(C=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-xs text-gray-500",children:bt[C.type].charAt(0)})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:bt[C.type]}),t.jsx("span",{className:"text-xs text-gray-400",children:b(C.date)})]}),C.notes&&t.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:C.notes})]})]},C.id))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:["Linked Postings (",n.length,")"]}),n.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No postings linked yet."}):t.jsx("div",{className:"space-y-2",children:n.map(C=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("button",{onClick:()=>i(C.id),className:"text-left flex-1 hover:text-indigo-600",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.title}),t.jsxs("p",{className:"text-xs text-gray-500",children:[C.company," · ",C.status]})]}),t.jsx("button",{onClick:()=>d(C.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Unlink posting",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},C.id))})]}),e.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Notes"}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.notes})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{onClick:()=>v(!0),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"}),t.jsx("button",{onClick:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Edit Connection"})]})]}),x&&t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Connection?"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["This will permanently delete ",t.jsx("strong",{children:e.name})," and remove them from all linked postings."]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:D,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}function Fn({connections:e,onClick:n,size:s="sm"}){if(e.length===0)return null;const o=e.map(c=>c.name).slice(0,3).join(", ")+(e.length>3?` +${e.length-3} more`:""),a=s==="sm"?"text-xs gap-1 px-1.5 py-0.5":"text-sm gap-1.5 px-2 py-1";return t.jsxs("button",{onClick:c=>{c.stopPropagation(),n==null||n()},className:`flex items-center ${a} bg-indigo-50 text-indigo-600 rounded-full hover:bg-indigo-100 transition-colors`,title:o,children:[t.jsx("svg",{className:s==="sm"?"w-3 h-3":"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.jsx("span",{children:e.length})]})}function ra({isOpen:e,onClose:n,connections:s,posting:r,linkedConnectionIds:o,onLinkConnection:a,onUnlinkConnection:c,onCreateConnection:i}){const[d,u]=l.useState(""),h=l.useMemo(()=>{const g=s.filter(y=>{var k;if(!d)return!0;const b=d.toLowerCase();return y.name.toLowerCase().includes(b)||y.company.toLowerCase().includes(b)||((k=y.role)==null?void 0:k.toLowerCase().includes(b))}),x=g.filter(y=>y.company.toLowerCase()===r.company.toLowerCase()),v=g.filter(y=>y.company.toLowerCase()!==r.company.toLowerCase());return{sameCompany:x,others:v}},[s,r.company,d]),f=g=>{o.includes(g)?c(g):a(g)};if(!e)return null;const m=g=>{const x=o.includes(g.id);return t.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${x?"bg-indigo-50":"hover:bg-gray-50"}`,children:[t.jsx("input",{type:"checkbox",checked:x,onChange:()=>f(g.id),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium text-sm flex-shrink-0",children:g.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:`text-sm font-medium truncate ${x?"text-indigo-700":"text-gray-900"}`,children:g.name}),t.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[g.role?`${g.role} @ `:"",g.company]})]})]},g.id)};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Link Connections"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[r.title," @ ",r.company]})]}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:d,onChange:g=>u(g.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",autoFocus:!0})]})}),t.jsx("div",{className:"flex-1 overflow-auto p-4",children:s.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-gray-500 mb-3",children:"No connections yet"}),t.jsx("button",{onClick:i,className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"+ Create your first connection"})]}):h.sameCompany.length===0&&h.others.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"No connections match your search"})}):t.jsxs("div",{className:"space-y-4",children:[h.sameCompany.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["At ",r.company," (",h.sameCompany.length,")"]}),t.jsx("div",{className:"space-y-1",children:h.sameCompany.map(m)})]}),h.others.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["Other Connections (",h.others.length,")"]}),t.jsx("div",{className:"space-y-1",children:h.others.map(m)})]})]})}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsxs("button",{onClick:i,className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Connection"]}),t.jsx("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Done"})]})]})})}function $n(e){return e.split(" ").slice(0,2).map(n=>n[0]).join("").toUpperCase()}function hn(e){return Math.floor((Date.now()-e)/(1e3*60*60*24))}function Bn(e){const n=hn(e);return n===0?"Today":n===1?"1d":`${n}d`}function oa(e,n){return e<=3?"text-gray-400":e<=7?"text-orange-500":n?"text-red-500 font-semibold":"text-red-500"}function aa(e){return Mt(e.status)?!1:hn(e.dateModified)>=7}function xn({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,variant:a="kanban",linkedConnections:c=[],onConnectionClick:i}){const d=[{label:"Open URL",onClick:()=>window.open(e.url,"_blank"),icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(m=>m!==e.status).map(m=>({label:`Move to ${Ce[m]}`,onClick:()=>r(e.id,m)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>o(e.id),danger:!0,icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],u=aa(e),h=hn(e.dateModified),f=oa(h,u);return a==="list"?t.jsx(bn,{items:d,children:t.jsxs("div",{onClick:()=>n(e.id),className:"flex cursor-pointer items-center gap-4 border-b border-gray-200 bg-white px-4 py-3 hover:bg-gray-50",children:[t.jsxs("div",{className:"relative",children:[e.companyLogo?t.jsx("img",{src:e.companyLogo,alt:e.company,className:"h-10 w-10 rounded object-contain"}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:$n(e.company)}),u&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-100",children:t.jsx("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate font-medium text-gray-900",children:e.title}),t.jsx("p",{className:"truncate text-sm text-gray-500",children:e.company})]}),t.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:e.location}),t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600",children:Ce[e.status]})}),t.jsx("div",{className:"flex-shrink-0",onClick:m=>m.stopPropagation(),children:t.jsx(Qt,{priority:e.priority,onChange:m=>s(e.id,m),size:"sm"})}),t.jsxs("div",{className:`flex flex-shrink-0 items-center gap-1 text-xs ${f}`,children:[u&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Bn(e.dateModified)]}),t.jsx("div",{className:"flex-shrink-0",onClick:m=>m.stopPropagation(),children:t.jsx(Fn,{connections:c,onClick:i,size:"sm"})})]})}):t.jsx(bn,{items:d,children:t.jsxs("div",{onClick:()=>n(e.id),className:`cursor-pointer rounded-lg border bg-white p-3 shadow-sm transition-shadow hover:shadow-md ${u?"border-red-200":"border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[e.companyLogo?t.jsx("img",{src:e.companyLogo,alt:e.company,className:"h-10 w-10 rounded object-contain"}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:$n(e.company)}),u&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-100",children:t.jsx("svg",{className:"h-3 w-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate font-medium text-gray-900",children:e.title}),t.jsx("p",{className:"truncate text-sm text-gray-600",children:e.company}),t.jsx("p",{className:"truncate text-xs text-gray-500",children:e.location})]})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",onClick:m=>m.stopPropagation(),children:[t.jsx(Qt,{priority:e.priority,onChange:m=>s(e.id,m),size:"sm"}),t.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(m=>t.jsx(nn,{tag:m,size:"sm"},m)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-2]})]}),t.jsx(Fn,{connections:c,onClick:i,size:"sm"})]}),t.jsxs("div",{className:`flex items-center gap-1 text-xs ${f}`,children:[u&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Bn(e.dateModified)]})]})]})})}function ia({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,linkedConnections:a,onConnectionClick:c}){const{attributes:i,listeners:d,setNodeRef:u,transform:h,isDragging:f}=To({id:e.id}),m={transform:ze.Translate.toString(h)};return t.jsx("div",{ref:u,style:m,...d,...i,className:`touch-none ${f?"opacity-50":""}`,children:t.jsx(xn,{posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,variant:"kanban",linkedConnections:a,onConnectionClick:c})})}const la={saved:"bg-blue-50 border-blue-200",in_progress:"bg-orange-50 border-orange-200",applied:"bg-green-50 border-green-200",interviewing:"bg-purple-50 border-purple-200",offer:"bg-yellow-50 border-yellow-200",accepted:"bg-emerald-50 border-emerald-200",rejected:"bg-gray-50 border-gray-300",withdrawn:"bg-gray-50 border-gray-300"},ca={saved:"bg-blue-100 text-blue-800",in_progress:"bg-orange-100 text-orange-800",applied:"bg-green-100 text-green-800",interviewing:"bg-purple-100 text-purple-800",offer:"bg-yellow-100 text-yellow-800",accepted:"bg-emerald-100 text-emerald-800",rejected:"bg-gray-200 text-gray-700",withdrawn:"bg-gray-200 text-gray-700"},da={saved:"ring-blue-400 bg-blue-100",in_progress:"ring-orange-400 bg-orange-100",applied:"ring-green-400 bg-green-100",interviewing:"ring-purple-400 bg-purple-100",offer:"ring-yellow-400 bg-yellow-100",accepted:"ring-emerald-400 bg-emerald-100",rejected:"ring-gray-400 bg-gray-200",withdrawn:"ring-gray-400 bg-gray-200"};function ua({status:e,postings:n,onPostingSelect:s,onPriorityChange:r,onStatusChange:o,onDelete:a,onCollapse:c,isOver:i=!1,isDragging:d=!1,getLinkedConnections:u,onConnectionClick:h}){const{setNodeRef:f}=cs({id:e});return t.jsxs("div",{ref:f,className:`flex h-full w-full flex-col rounded-lg border transition-colors duration-200 ${la[e]} ${i?`ring-2 ${da[e]}`:""} ${d&&!i?"opacity-75":""}`,children:[t.jsxs("div",{className:`flex items-center justify-between rounded-t-lg px-3 py-2 ${ca[e]}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:c,className:"rounded p-0.5 opacity-60 hover:bg-black hover:bg-opacity-10 hover:opacity-100",title:`Collapse ${Ce[e]} column`,children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"font-medium",children:Ce[e]})]}),t.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-2 py-0.5 text-sm font-medium",children:n.length})]}),t.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto p-2",children:[n.map(m=>t.jsx(ia,{posting:m,onSelect:s,onPriorityChange:r,onStatusChange:o,onDelete:a,linkedConnections:u==null?void 0:u(m.id),onConnectionClick:()=>h==null?void 0:h(m.id)},m.id)),n.length===0&&t.jsx("div",{className:`rounded-lg border-2 border-dashed py-8 text-center text-sm transition-colors ${i?"border-gray-400 bg-gray-100 text-gray-600":"border-transparent text-gray-400"}`,children:i?"Drop here":"No postings"})]})]})}const ha={saved:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-orange-100 text-orange-800 border-orange-200",applied:"bg-green-100 text-green-800 border-green-200",interviewing:"bg-purple-100 text-purple-800 border-purple-200",offer:"bg-yellow-100 text-yellow-800 border-yellow-200",accepted:"bg-emerald-100 text-emerald-800 border-emerald-200",rejected:"bg-gray-200 text-gray-700 border-gray-300",withdrawn:"bg-gray-200 text-gray-700 border-gray-300"},xa={saved:"ring-blue-400",in_progress:"ring-orange-400",applied:"ring-green-400",interviewing:"ring-purple-400",offer:"ring-yellow-400",accepted:"ring-emerald-400",rejected:"ring-gray-400",withdrawn:"ring-gray-400"};function fa({status:e,count:n,onExpand:s,isOver:r=!1}){const{setNodeRef:o}=cs({id:e});return t.jsx("div",{ref:o,className:`flex h-full w-full flex-col items-center rounded-lg border transition-colors duration-200 ${ha[e]} ${r?`ring-2 ${xa[e]}`:""}`,children:t.jsxs("button",{onClick:s,className:"flex h-full w-full flex-col items-center justify-center gap-2 py-3 hover:opacity-80",title:`Expand ${Ce[e]} column`,children:[t.jsx("span",{className:"text-xs font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:Ce[e]}),t.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-1.5 py-0.5 text-xs font-medium",children:n}),t.jsx("svg",{className:"h-4 w-4 opacity-60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}function ga({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,collapsedColumns:a,onCollapseChange:c,getLinkedConnections:i,onConnectionClick:d}){const[u,h]=l.useState(null),[f,m]=l.useState(null),g=Ir(Nn(dn,{activationConstraint:{distance:8}}),Nn(ln,{coordinateGetter:Zo})),x=N=>e.filter(S=>S.status===N),v=u?e.find(N=>N.id===u):null,y=l.useCallback(N=>{h(N.active.id)},[]),b=l.useCallback(N=>{var S;m((S=N.over)==null?void 0:S.id)},[]),k=l.useCallback(N=>{const{active:S,over:A}=N;if(h(null),m(null),!A)return;const T=S.id,R=A.id;if(jt.includes(R)){const P=e.find(U=>U.id===T);P&&P.status!==R&&r(T,R)}},[e,r]),j=l.useCallback(()=>{h(null),m(null)},[]),D=l.useCallback(N=>{a.includes(N)||c([...a,N])},[a,c]),E=l.useCallback(N=>{c(a.filter(S=>S!==N))},[a,c]),C=N=>a.includes(N);return t.jsxs(Ro,{sensors:g,collisionDetection:Pr,onDragStart:y,onDragOver:b,onDragEnd:k,onDragCancel:j,children:[t.jsx("div",{className:"flex h-full gap-4 overflow-x-auto p-4",children:jt.map(N=>t.jsx("div",{className:"flex-shrink-0 transition-all duration-300 ease-in-out",style:{width:C(N)?"48px":"288px"},children:C(N)?t.jsx(fa,{status:N,count:x(N).length,onExpand:()=>E(N),isOver:f===N}):t.jsx(ua,{status:N,postings:x(N),onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,onCollapse:()=>D(N),isOver:f===N,isDragging:u!==null,getLinkedConnections:i,onConnectionClick:d})},N))}),t.jsx(Jo,{dropAnimation:null,children:v?t.jsx("div",{className:"rotate-3 opacity-90",children:t.jsx(xn,{posting:v,onSelect:()=>{},onPriorityChange:()=>{},onStatusChange:()=>{},onDelete:()=>{},variant:"kanban"})}):null})]})}function ma({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,getLinkedConnections:a,onConnectionClick:c}){const[i,d]=l.useState("dateAdded"),[u,h]=l.useState("desc"),f=x=>{i===x?h(u==="asc"?"desc":"asc"):(d(x),h("asc"))},m=[...e].sort((x,v)=>{let y=0;switch(i){case"title":y=x.title.localeCompare(v.title);break;case"company":y=x.company.localeCompare(v.company);break;case"dateAdded":y=x.dateAdded-v.dateAdded;break;case"priority":y=x.priority-v.priority;break;case"status":y=x.status.localeCompare(v.status);break}return u==="asc"?y:-y}),g=({field:x,label:v})=>t.jsxs("button",{onClick:()=>f(x),className:"flex items-center gap-1 text-left text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700",children:[v,i===x&&t.jsx("svg",{className:`h-4 w-4 ${u==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return t.jsxs("div",{className:"h-full overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-4 border-b border-gray-200 bg-gray-50 px-4 py-2",children:[t.jsx("div",{className:"w-10"}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsx(g,{field:"title",label:"Title / Company"})}),t.jsx("div",{className:"w-32",children:t.jsx(g,{field:"status",label:"Status"})}),t.jsx("div",{className:"w-24",children:t.jsx(g,{field:"priority",label:"Priority"})}),t.jsx("div",{className:"w-16",children:t.jsx(g,{field:"dateAdded",label:"Added"})})]}),t.jsxs("div",{children:[m.map(x=>t.jsx(xn,{posting:x,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,variant:"list",linkedConnections:a==null?void 0:a(x.id),onConnectionClick:()=>c==null?void 0:c(x.id)},x.id)),e.length===0&&t.jsx("div",{className:"py-12 text-center text-gray-500",children:"No postings found"})]})]})}function pa({keyword:e,onClose:n}){if(!e.contexts||e.contexts.length===0)return null;const s=r=>{const o=e.term.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=new RegExp(`(${o})`,"gi");return r.split(a).map((i,d)=>a.test(i)?t.jsx("mark",{className:"bg-yellow-200 px-0.5 rounded",children:i},d):t.jsx("span",{children:i},d))};return t.jsxs("div",{className:"mt-1 mb-2 ml-6 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-medium text-gray-700",children:['"',e.term,'" appears ',e.frequency," time",e.frequency!==1?"s":""]}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"space-y-2",children:e.contexts.map((r,o)=>t.jsxs("div",{className:"text-gray-600 text-xs leading-relaxed",children:[t.jsxs("span",{className:"text-gray-400 mr-1",children:[o+1,"."]}),s(r)]},o))})]})}function ba({keyword:e,onToggleAddressed:n}){const[s,r]=l.useState(!1),o=t.jsx("span",{className:"flex gap-0.5",title:`${e.importance} importance`,children:[0,1,2].map(a=>t.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full ${e.importance==="high"&&a<3||e.importance==="medium"&&a<2||e.importance==="low"&&a<1?"bg-indigo-500":"bg-gray-200"}`},a))});return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center gap-2 py-1.5 group",children:[t.jsx("input",{type:"checkbox",checked:e.addressed,onChange:a=>n(e.term,a.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),t.jsx("button",{onClick:()=>r(!s),className:`flex-1 text-left text-sm ${e.addressed?"text-gray-400 line-through":"text-gray-700"} hover:text-indigo-600 transition-colors`,children:e.term}),o,t.jsxs("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.frequency,"x"]})]}),s&&e.contexts&&e.contexts.length>0&&t.jsx(pa,{keyword:e,onClose:()=>r(!1)})]})}function va({keywords:e,onToggleAddressed:n,onRefresh:s,isExtracting:r=!1}){const o=l.useMemo(()=>vs(e),[e]),a=l.useMemo(()=>ys(e),[e]);return e.length===0&&!r?t.jsxs("div",{className:"p-4 text-center",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No keywords extracted"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Extract keywords from the job description to track your application coverage."}),t.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Extract Keywords"]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Keywords Analysis"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," keyword",e.length!==1?"s":""," extracted"]})]}),t.jsx("button",{onClick:s,disabled:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors disabled:opacity-50",title:"Re-extract keywords",children:t.jsx("svg",{className:`w-4 h-4 ${r?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Coverage"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[a.addressed,"/",a.total," addressed (",a.percentage,"%)"]})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${a.percentage}%`}})})]}),t.jsx("div",{className:"space-y-3",children:Cs.map(c=>{const i=o[c];if(i.length===0)return null;const d=a.byCategory[c];return t.jsx(ya,{category:c,keywords:i,addressedCount:d.addressed,totalCount:d.total,onToggleAddressed:n},c)})})]})}function ya({category:e,keywords:n,addressedCount:s,totalCount:r,onToggleAddressed:o}){return t.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h4",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:[ks[e]," (",r,")"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:[s,"/",r]})]}),t.jsx("div",{className:"space-y-0.5",children:n.map(a=>t.jsx(ba,{keyword:a,onToggleAddressed:o},a.term))})]})}function wa({posting:e,isOpen:n,onClose:s,onUpdate:r,onDelete:o,connections:a=[],linkedConnections:c=[],onLinkConnection:i,onUnlinkConnection:d,onViewConnection:u,onAddConnection:h,onExtractKeywords:f,isExtractingKeywords:m=!1}){var P,U;const[g,x]=l.useState(""),[v,y]=l.useState(!1),[b,k]=l.useState(!1),[j,D]=l.useState("details");l.useEffect(()=>{e&&x(e.notes)},[e==null?void 0:e.id,e==null?void 0:e.notes]),l.useEffect(()=>{D("details")},[e==null?void 0:e.id]);const E=()=>{e&&g!==e.notes&&r(e.id,{notes:g})},C=()=>{e&&(o(e.id),y(!1),s())},N=(O,we)=>{if(!e||!e.keywords)return;const te=e.keywords.map($=>$.term===O?{...$,addressed:we}:$);r(e.id,{keywords:te})},S=()=>{e&&f&&f(e.id)};if(!e)return null;const A=O=>new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),T=((P=e.keywords)==null?void 0:P.length)||0,R=((U=e.keywords)==null?void 0:U.filter(O=>O.addressed).length)||0;return t.jsxs(Ms,{isOpen:n,onClose:s,width:"max-w-lg",children:[t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"border-b border-gray-200 px-4 py-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.title}),t.jsx("p",{className:"text-gray-600",children:e.company}),e.location&&t.jsx("p",{className:"text-sm text-gray-500",children:e.location})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>window.open(e.url,"_blank"),className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Open URL (O)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),t.jsx("button",{onClick:s,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Close (Esc or ⌘S)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.jsxs("div",{className:"mt-4 flex gap-1 border-b border-gray-200 -mb-px",children:[t.jsx(Jt,{active:j==="details",onClick:()=>D("details"),children:"Details"}),t.jsx(Jt,{active:j==="keywords",onClick:()=>D("keywords"),badge:T>0?`${R}/${T}`:void 0,children:"Keywords"}),t.jsx(Jt,{active:j==="connections",onClick:()=>D("connections"),badge:c.length>0?c.length.toString():void 0,children:"Connections"})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[j==="details"&&t.jsx(ja,{posting:e,notes:g,setNotes:x,handleNotesBlur:E,onUpdate:r}),j==="keywords"&&t.jsx("div",{className:"p-4",children:t.jsx(va,{keywords:e.keywords||[],onToggleAddressed:N,onRefresh:S,isExtracting:m})}),j==="connections"&&t.jsx(Na,{linkedConnections:c,onViewConnection:u,onShowQuickLink:()=>k(!0)})]}),t.jsx("div",{className:"border-t border-gray-200 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("div",{children:[t.jsxs("p",{children:["Added: ",A(e.dateAdded)]}),t.jsxs("p",{children:["Modified: ",A(e.dateModified)]})]}),v?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-red-600",children:"Delete this posting?"}),t.jsx("button",{onClick:C,className:"rounded bg-red-600 px-2 py-1 text-white hover:bg-red-700",children:"Yes"}),t.jsx("button",{onClick:()=>y(!1),className:"rounded bg-gray-200 px-2 py-1 text-gray-700 hover:bg-gray-300",children:"No"})]}):t.jsx("button",{onClick:()=>y(!0),className:"text-red-600 hover:text-red-700",children:"Delete posting"})]})})]}),e&&t.jsx(ra,{isOpen:b,onClose:()=>k(!1),connections:a,posting:e,linkedConnectionIds:c.map(O=>O.id),onLinkConnection:O=>{i==null||i(O)},onUnlinkConnection:O=>{d==null||d(O)},onCreateConnection:()=>{k(!1),h==null||h()}})]})}function Jt({active:e,onClick:n,children:s,badge:r}){return t.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${e?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s,r&&t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${e?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"}`,children:r})]})}function ja({posting:e,notes:n,setNotes:s,handleNotesBlur:r,onUpdate:o}){return t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),t.jsx("select",{value:e.status,onChange:a=>o(e.id,{status:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:Ns.map(a=>t.jsx("option",{value:a,children:Ce[a]},a))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Priority"}),t.jsx(Qt,{priority:e.priority,onChange:a=>o(e.id,{priority:a})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tags"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.tags.map(a=>t.jsx(nn,{tag:a,onRemove:()=>o(e.id,{tags:e.tags.filter(c=>c!==a)})},a)),t.jsx(Rs,{tags:e.tags,onTagsChange:a=>o(e.id,{tags:a}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Next Action Date"}),t.jsx("input",{type:"date",value:e.nextActionDate||"",onChange:a=>o(e.id,{nextActionDate:a.target.value||void 0}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.salary&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Salary"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.salary})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Description"}),t.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600 whitespace-pre-wrap",children:e.description||"No description available"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Notes"}),t.jsx("textarea",{value:n,onChange:a=>s(a.target.value),onBlur:r,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})}function Na({linkedConnections:e,onViewConnection:n,onShowQuickLink:s}){return t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Linked Connections (",e.length,")"]}),t.jsx("button",{onClick:s,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"+ Link Connection"})]}),e.length>0?t.jsx("div",{className:"space-y-2",children:e.map(r=>t.jsx(us,{connection:r,onSelect:o=>n==null?void 0:n(o),compact:!0},r.id))}):t.jsxs("div",{className:"rounded-md bg-gray-50 p-4 text-center",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"No connections linked"}),t.jsx("button",{onClick:s,className:"text-sm text-indigo-600 hover:text-indigo-700",children:"Link a connection"})]})]})}function ka(e){return Mt(e.status)?!1:(Date.now()-e.dateModified)/(1e3*60*60*24)>=7}function Ca(e){return(Date.now()-e.dateAdded)/864e5<=7}function Sa(e){return l.useMemo(()=>{const n={saved:0,in_progress:0,applied:0,interviewing:0,offer:0,accepted:0,rejected:0,withdrawn:0};let s=0,r=0,o=0;return e.forEach(a=>{n[a.status]++,Mt(a.status)||s++,Ca(a)&&r++,ka(a)&&o++}),{total:e.length,active:s,thisWeek:r,stale:o,byStatus:n}},[e])}function Da(e){const n=l.useCallback(s=>{const r=s.target,o=r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r.isContentEditable;for(const a of e){if(o&&!a.allowInInput&&s.key!=="Escape")continue;const c=a.meta?s.metaKey:!s.metaKey,i=a.ctrl?s.ctrlKey:!s.ctrlKey,d=a.shift?s.shiftKey:!s.shiftKey;if((s.key.toLowerCase()===a.key.toLowerCase()||s.key===a.key)&&c&&i&&d){s.preventDefault(),a.handler();return}}},[e]);l.useEffect(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n])}function La(){const[e,n]=l.useState([]),[s,r]=l.useState([]),[o,a]=l.useState(!0),[c,i]=l.useState("jobs"),[d,u]=l.useState("kanban"),[h,f]=l.useState(""),[m,g]=l.useState(null),[x,v]=l.useState(null),[y,b]=l.useState(!1),[k,j]=l.useState(["rejected"]),[D,E]=l.useState(null),[C,N]=l.useState(!1),[S,A]=l.useState(!1),[T,R]=l.useState(null),[P,U]=l.useState([]),[O,we]=l.useState(""),[te,$]=l.useState(null),[re,K]=l.useState(null),[ue,Ke]=l.useState(!1),[oe,je]=l.useState(!1),[pe,Ye]=l.useState(!1),[V,Ge]=l.useState(!1),[De,Xe]=l.useState(!1),[ae,Ie]=l.useState(!1),[X,ne]=l.useState(null),be=l.useRef(null),[Pe,Ne]=l.useState(!1),[xt,qe]=l.useState(!1),Je=Sa(e),ve=l.useCallback(async p=>{qe(p);try{await Ws(p)}catch(w){console.error("Failed to save stats expanded preference:",w)}},[]);l.useEffect(()=>{(async()=>{try{await Vs();const[L,I,ke,Ht,_t]=await Promise.all([Ue(),se(),Fs(),Bs(),Us()]);n(L),r(I),u(ke),j(Ht),qe(_t)}catch(L){console.error("Failed to initialize app:",L)}finally{a(!1)}})();const w=L=>{L.postings&&n(L.postings.newValue||[]),L.connections&&r(L.connections.newValue||[])};return chrome.storage.onChanged.addListener(w),()=>chrome.storage.onChanged.removeListener(w)},[]),l.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("highlight");w&&(v(w),b(!0))},[]);const he=l.useCallback(async p=>{try{await We(p),n(p)}catch(w){console.error("Failed to save postings:",w)}},[]),Fe=l.useCallback(async p=>{u(p);try{await $s(p)}catch(w){console.error("Failed to save view preference:",w)}},[]),ft=l.useCallback(async p=>{j(p);try{await zs(p)}catch(w){console.error("Failed to save collapsed columns:",w)}},[]),gt=l.useMemo(()=>{const p=new Set;return e.forEach(w=>w.tags.forEach(L=>p.add(L))),Array.from(p).sort()},[e]),Ft=l.useMemo(()=>{const p=new Set;return e.forEach(w=>p.add(w.company)),Array.from(p).sort()},[e]),$t=p=>Mt(p.status)?!1:(Date.now()-p.dateModified)/(1e3*60*60*24)>=7,Le=p=>{if(!p.nextActionDate)return!1;const w=new Date(p.nextActionDate),L=new Date,I=(w.getTime()-L.getTime())/(1e3*60*60*24);return I>=0&&I<=7},q=l.useMemo(()=>e.filter(p=>{const w=h.toLowerCase(),L=!h||p.title.toLowerCase().includes(w)||p.company.toLowerCase().includes(w)||p.location.toLowerCase().includes(w)||p.notes.toLowerCase().includes(w)||p.tags.some(tt=>tt.toLowerCase().includes(w)),I=!m||p.priority===m,ke=!X||p.status===X,Ht=P.length===0||P.some(tt=>p.tags.includes(tt)),_t=!O||p.company.toLowerCase().includes(O.toLowerCase()),fn=new Date(p.dateAdded),hs=!te||fn>=new Date(te),xs=!re||fn<=new Date(re+"T23:59:59"),fs=!ue||!!p.nextActionDate,gs=!oe||Le(p),ms=!pe||$t(p),gn=s.filter(tt=>tt.linkedPostingIds.includes(p.id)),ps=!V||gn.length>0,bs=!De||gn.length===0;return L&&I&&ke&&Ht&&_t&&hs&&xs&&fs&&gs&&ms&&ps&&bs}),[e,s,h,m,X,P,O,te,re,ue,oe,pe,V,De]),Oe=l.useMemo(()=>{let p=0;return h&&p++,m!==null&&p++,X!==null&&p++,P.length>0&&p++,O&&p++,(te||re)&&p++,ue&&p++,oe&&p++,pe&&p++,V&&p++,De&&p++,p},[h,m,X,P,O,te,re,ue,oe,pe,V,De]),mt=l.useCallback(()=>{f(""),g(null),ne(null),U([]),we(""),$(null),K(null),Ke(!1),je(!1),Ye(!1),Ge(!1),Xe(!1)},[]),xe=l.useCallback(()=>{var p;(p=be.current)==null||p.focus()},[]),pt=l.useCallback(()=>{if(!x)return;const p=e.find(L=>L.id===x);if(!p)return;const w=p.priority%3+1;Ze(x,w)},[x,e]),Bt=l.useCallback(()=>{if(!x)return;const p=e.find(w=>w.id===x);p&&window.open(p.url,"_blank")},[x,e]),zt=l.useCallback(()=>{x&&confirm("Are you sure you want to delete this posting?")&&$e(x)},[x]),Ee=l.useCallback(p=>{if(q.length===0)return;const w=x?q.findIndex(I=>I.id===x):-1;let L;p==="next"?L=w<q.length-1?w+1:0:L=w>0?w-1:q.length-1,v(q[L].id)},[q,x]),Qe=p=>{v(p),b(!0)},Ze=(p,w)=>{const L=e.map(I=>I.id===p?{...I,priority:w,dateModified:Date.now()}:I);he(L)},et=(p,w)=>{const L=e.map(I=>I.id===p?{...I,status:w,dateModified:Date.now(),dateApplied:w==="applied"&&!I.dateApplied?Date.now():I.dateApplied}:I);he(L)},Ut=(p,w)=>{const L=e.map(I=>I.id===p?{...I,...w,dateModified:Date.now()}:I);he(L)},$e=p=>{const w=e.filter(L=>L.id!==p);he(w),x===p&&(v(null),b(!1))},Wt=l.useCallback(p=>{const w=e.find(L=>L.id===p);!w||!w.description||(Ne(!0),setTimeout(()=>{try{const L=ws(w.description),I=e.map(ke=>ke.id===p?{...ke,keywords:L,keywordsExtractedAt:Date.now(),dateModified:Date.now()}:ke);he(I)}catch(L){console.error("Failed to extract keywords:",L)}finally{Ne(!1)}},10))},[e,he]),B=l.useCallback(p=>s.filter(w=>w.linkedPostingIds.includes(p)),[s]),J=l.useCallback(async p=>{if(x)try{await Os(p,x);const w=await se();r(w)}catch(w){console.error("Failed to link connection:",w)}},[x]),Q=l.useCallback(async p=>{if(x)try{await yn(p,x);const w=await se();r(w)}catch(w){console.error("Failed to unlink connection:",w)}},[x]),ye=l.useCallback(p=>{console.log("View connection:",p)},[]),Z=l.useCallback(()=>{R(null),A(!0)},[]),Y=l.useCallback(p=>{const w=s.find(L=>L.id===p);w&&(R(w),A(!0))},[s]),le=l.useCallback(async p=>{try{await vn(p);const w=await se();r(w),A(!1),R(null)}catch(w){console.error("Failed to save connection:",w)}},[]),Me=l.useCallback(async p=>{if(confirm("Are you sure you want to delete this connection?"))try{await Is(p);const w=await se();r(w),N(!1),E(null)}catch(w){console.error("Failed to delete connection:",w)}},[]),W=l.useCallback(p=>{E(p),N(!0)},[]),fe=l.useCallback(async(p,w)=>{const L=s.find(I=>I.id===p);if(L)try{const I={...L,...w,dateModified:Date.now()};await vn(I);const ke=await se();r(ke)}catch(I){console.error("Failed to update connection:",I)}},[s]),ie=l.useCallback(p=>{v(p),b(!0)},[]),ge=l.useCallback(p=>{const w=s.find(L=>L.id===p);return w?e.filter(L=>w.linkedPostingIds.includes(L.id)):[]},[s,e]),Ae=l.useCallback(()=>{alert("Use the extension popup on a job posting page to add new jobs.")},[]),Te=l.useCallback(p=>{p==="jobs"||p==="connections"?i(p):p==="settings"?console.log("Settings clicked"):p==="help"&&Ie(!0)},[]);Da([{key:"/",handler:xe},{key:"k",meta:!0,handler:xe},{key:"Escape",allowInInput:!0,handler:()=>{y?b(!1):h&&f("")}},{key:"?",handler:()=>Ie(!0)},{key:"n",handler:Ae},{key:"1",handler:()=>ne("saved")},{key:"2",handler:()=>ne("in_progress")},{key:"3",handler:()=>ne("applied")},{key:"4",handler:()=>ne("interviewing")},{key:"5",handler:()=>ne("offer")},{key:"6",handler:()=>ne("accepted")},{key:"7",handler:()=>ne("rejected")},{key:"0",handler:()=>ne(null)},{key:"j",handler:()=>Ee("next")},{key:"ArrowDown",handler:()=>Ee("next")},{key:"k",handler:()=>Ee("prev")},{key:"ArrowUp",handler:()=>Ee("prev")},{key:"Enter",handler:()=>x&&b(!0)},{key:"s",handler:pt},{key:"e",handler:()=>x&&b(!0)},{key:"o",handler:Bt},{key:"d",handler:zt},{key:"s",meta:!0,allowInInput:!0,handler:()=>b(!1)}]);const ce=e.find(p=>p.id===x)||null;if(o)return t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-champagne-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-flatred border-t-transparent"}),t.jsx("p",{className:"mt-2 text-wine/70",children:"Loading..."})]})});const G=s.find(p=>p.id===D)||null;return t.jsxs("div",{className:"flex h-screen bg-champagne-50",children:[t.jsx(Es,{currentPage:c,onNavigate:Te,jobCount:e.length,connectionCount:s.length}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:c==="jobs"?t.jsxs(t.Fragment,{children:[t.jsx(vr,{postings:e,activeStatus:X,onStatusClick:ne}),t.jsx(fr,{searchQuery:h,onSearchChange:f,priorityFilter:m,onPriorityFilterChange:g,currentView:d,onViewChange:Fe,onAddClick:Ae,availableTags:gt,availableCompanies:Ft,tagFilters:P,onTagFiltersChange:U,companyFilter:O,onCompanyFilterChange:we,dateFrom:te,dateTo:re,onDateFromChange:$,onDateToChange:K,hasDeadline:ue,deadlineSoon:oe,needsAction:pe,hasConnections:V,noConnections:De,onHasDeadlineChange:Ke,onDeadlineSoonChange:je,onNeedsActionChange:Ye,onHasConnectionsChange:Ge,onNoConnectionsChange:Xe,onClearAllFilters:mt,activeFilterCount:Oe,searchInputRef:be,statusFilter:X,onStatusFilterChange:ne}),t.jsx(pr,{stats:Je,expanded:xt,onExpandedChange:ve}),t.jsx("main",{className:"flex-1 overflow-hidden",children:d==="kanban"?t.jsx(ga,{postings:q,onPostingSelect:Qe,onPriorityChange:Ze,onStatusChange:et,onDelete:$e,collapsedColumns:k,onCollapseChange:ft,getLinkedConnections:B,onConnectionClick:ie}):t.jsx(ma,{postings:q,onPostingSelect:Qe,onPriorityChange:Ze,onStatusChange:et,onDelete:$e,getLinkedConnections:B,onConnectionClick:ie})}),t.jsx(wa,{posting:ce,isOpen:y,onClose:()=>b(!1),onUpdate:Ut,onDelete:$e,connections:s,linkedConnections:ce?B(ce.id):[],onLinkConnection:J,onUnlinkConnection:Q,onViewConnection:ye,onAddConnection:Z,onExtractKeywords:Wt,isExtractingKeywords:Pe})]}):t.jsx(ta,{connections:s,onSelectConnection:W,onAddConnection:Z,onEditConnection:Y})}),t.jsx(na,{isOpen:S,onClose:()=>{A(!1),R(null)},onSave:le,connection:T}),G&&t.jsx(sa,{connection:G,isOpen:C,onClose:()=>{N(!1),E(null)},onEdit:()=>Y(G.id),onDelete:()=>Me(G.id),linkedPostings:ge(G.id),onViewPosting:p=>{v(p),b(!0),i("jobs")},onLogContact:async p=>{const w={...G,contactHistory:[...G.contactHistory,p],lastContactDate:p.date};await fe(G.id,w)},onUnlinkPosting:async p=>{await yn(G.id,p);const w=await se();r(w)},onUpdateFollowUp:async p=>{await fe(G.id,{nextFollowUp:p})}}),t.jsx(hr,{isOpen:ae,onClose:()=>Ie(!1)})]})}js.createRoot(document.getElementById("root")).render(t.jsx(F.StrictMode,{children:t.jsx(La,{})}));
