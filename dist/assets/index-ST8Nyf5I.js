import{r as x,j as e,c as K,R as G}from"./client-DYDkQYN6.js";function J({isOpen:t,onClose:s,title:a,children:r,width:l="max-w-md"}){const n=x.useCallback(i=>{i.key==="Escape"&&s()},[s]);return x.useEffect(()=>(t&&(document.addEventListener("keydown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.body.style.overflow=""}),[t,n]),t?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:s}),e.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10",children:e.jsx("div",{className:`w-screen ${l}`,children:e.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[a&&e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a}),e.jsxs("button",{onClick:s,className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:r})]})})})]}):null}function Y({value:t,onChange:s,placeholder:a="Search...",debounceMs:r=300}){const[l,n]=x.useState(t);x.useEffect(()=>{n(t)},[t]),x.useEffect(()=>{const u=setTimeout(()=>{l!==t&&s(l)},r);return()=>clearTimeout(u)},[l,t,s,r]);const i=u=>{n(u.target.value)},o=()=>{n(""),s("")};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",value:l,onChange:i,placeholder:a,className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-8 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),l&&e.jsx("button",{onClick:o,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function Q({label:t,options:s,value:a,onChange:r}){const[l,n]=x.useState(!1),i=x.useRef(null);x.useEffect(()=>{const u=h=>{i.current&&!i.current.contains(h.target)&&n(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const o=s.find(u=>u.value===a);return e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{onClick:()=>n(!l),className:"inline-flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o?o.label:t,e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),l&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>{r(null),n(!1)},className:`block w-full px-4 py-2 text-left text-sm ${a===null?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.map(u=>e.jsx("button",{onClick:()=>{r(u.value),n(!1)},className:`block w-full px-4 py-2 text-left text-sm ${a===u.value?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:u.label},String(u.value)))]})})]})}function E({priority:t,onChange:s,size:a="md",readOnly:r=!1}){const l=a==="sm"?"h-4 w-4":"h-5 w-5",n=a==="sm"?"gap-0.5":"gap-1",i=o=>{!r&&s&&s(o)};return e.jsx("div",{className:`flex ${n}`,children:[1,2,3].map(o=>e.jsx("button",{onClick:()=>i(o),disabled:r,className:`${r?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Priority ${o}`,children:e.jsx("svg",{className:`${l} ${o<=t?"text-yellow-400":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},o))})}function P({tag:t,onRemove:s,size:a="sm"}){const r=a==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm";return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full bg-blue-100 text-blue-700 ${r}`,children:[t,s&&e.jsx("button",{onClick:s,className:"ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full hover:bg-blue-200",children:e.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function q({tags:t,onTagsChange:s,suggestedTags:a=[]}){const[r,l]=x.useState(!1),[n,i]=x.useState(""),o=x.useRef(null),u=x.useRef(null);x.useEffect(()=>{const d=g=>{o.current&&!o.current.contains(g.target)&&l(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),x.useEffect(()=>{r&&u.current&&u.current.focus()},[r]);const h=d=>{const g=d.trim().toLowerCase();g&&!t.includes(g)&&s([...t,g]),i("")},j=d=>{s(t.filter(g=>g!==d))},b=d=>{d.key==="Enter"&&n.trim()&&(d.preventDefault(),h(n))},c=a.filter(d=>!t.includes(d));return e.jsxs("div",{className:"relative",ref:o,children:[e.jsxs("button",{onClick:()=>l(!r),className:"inline-flex items-center gap-1 rounded border border-dashed border-gray-300 px-2 py-1 text-xs text-gray-500 hover:border-gray-400 hover:text-gray-600",children:[e.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),r&&e.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-black ring-opacity-5",children:[e.jsx("input",{ref:u,type:"text",value:n,onChange:d=>i(d.target.value),onKeyDown:b,placeholder:"Type and press Enter",className:"w-full rounded border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),t.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.map(d=>e.jsx(P,{tag:d,onRemove:()=>j(d)},d))}),c.length>0&&e.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-2",children:[e.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Suggestions:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:c.slice(0,5).map(d=>e.jsx("button",{onClick:()=>h(d),className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600 hover:bg-gray-200",children:d},d))})]})]})]})}function I({children:t,items:s}){const[a,r]=x.useState(!1),[l,n]=x.useState({x:0,y:0}),i=x.useRef(null);x.useEffect(()=>{const h=b=>{i.current&&!i.current.contains(b.target)&&r(!1)},j=b=>{b.key==="Escape"&&r(!1)};return document.addEventListener("mousedown",h),document.addEventListener("keydown",j),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",j)}},[]);const o=h=>{h.preventDefault(),n({x:h.clientX,y:h.clientY}),r(!0)},u=h=>{h.onClick(),r(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{onContextMenu:o,children:t}),a&&e.jsx("div",{ref:i,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",style:{left:l.x,top:l.y},children:s.map((h,j)=>h.divider?e.jsx("div",{className:"my-1 border-t border-gray-100"},j):e.jsxs("button",{onClick:()=>u(h),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm ${h.danger?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100"}`,children:[h.icon,h.label]},j))})]})}const X=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function Z({searchQuery:t,onSearchChange:s,priorityFilter:a,onPriorityFilterChange:r,currentView:l,onViewChange:n,onAddClick:i,onExport:o,onImport:u}){return e.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 bg-white px-4 py-3",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"JobFlow"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-64",children:e.jsx(Y,{value:t,onChange:s,placeholder:"Search jobs..."})}),e.jsx(Q,{label:"Priority",options:X,value:a,onChange:r}),e.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[e.jsx("button",{onClick:()=>n("kanban"),className:`px-3 py-2 text-sm ${l==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),e.jsx("button",{onClick:()=>n("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${l==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),e.jsxs("div",{className:"flex items-center gap-1 rounded-md border border-gray-300",children:[e.jsx("button",{onClick:o,className:"px-3 py-2 text-sm text-gray-600 hover:bg-gray-50",title:"Export data",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{onClick:u,className:"border-l border-gray-300 px-3 py-2 text-sm text-gray-600 hover:bg-gray-50",title:"Import data",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),e.jsxs("button",{onClick:i,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})}const ee=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],N={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},te=["saved","in_progress","applied","interviewing","offer","accepted","rejected"];function O(t){return t.split(" ").slice(0,2).map(s=>s[0]).join("").toUpperCase()}function V(t){const s=Math.floor((Date.now()-t)/864e5);return s===0?"Today":s===1?"1d":`${s}d`}function $({posting:t,onSelect:s,onPriorityChange:a,onStatusChange:r,onDelete:l,variant:n="kanban"}){const i=[{label:"Open URL",onClick:()=>window.open(t.url,"_blank"),icon:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(o=>o!==t.status).map(o=>({label:`Move to ${N[o]}`,onClick:()=>r(t.id,o)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>l(t.id),danger:!0,icon:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}];return n==="list"?e.jsx(I,{items:i,children:e.jsxs("div",{onClick:()=>s(t.id),className:"flex cursor-pointer items-center gap-4 border-b border-gray-200 bg-white px-4 py-3 hover:bg-gray-50",children:[t.companyLogo?e.jsx("img",{src:t.companyLogo,alt:t.company,className:"h-10 w-10 rounded object-contain"}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:O(t.company)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"truncate text-sm text-gray-500",children:t.company})]}),e.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:t.location}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600",children:N[t.status]})}),e.jsx("div",{className:"flex-shrink-0",onClick:o=>o.stopPropagation(),children:e.jsx(E,{priority:t.priority,onChange:o=>a(t.id,o),size:"sm"})}),e.jsx("div",{className:"flex-shrink-0 text-xs text-gray-400",children:V(t.dateAdded)})]})}):e.jsx(I,{items:i,children:e.jsxs("div",{onClick:()=>s(t.id),className:"cursor-pointer rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[t.companyLogo?e.jsx("img",{src:t.companyLogo,alt:t.company,className:"h-10 w-10 rounded object-contain"}):e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:O(t.company)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"truncate text-sm text-gray-600",children:t.company}),e.jsx("p",{className:"truncate text-xs text-gray-500",children:t.location})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",onClick:o=>o.stopPropagation(),children:[e.jsx(E,{priority:t.priority,onChange:o=>a(t.id,o),size:"sm"}),e.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[t.tags.slice(0,2).map(o=>e.jsx(P,{tag:o,size:"sm"},o)),t.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",t.tags.length-2]})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:V(t.dateAdded)})]})]})})}const se={saved:"bg-blue-50 border-blue-200",in_progress:"bg-orange-50 border-orange-200",applied:"bg-green-50 border-green-200",interviewing:"bg-purple-50 border-purple-200",offer:"bg-yellow-50 border-yellow-200",accepted:"bg-emerald-50 border-emerald-200",rejected:"bg-gray-50 border-gray-300",withdrawn:"bg-gray-50 border-gray-300"},re={saved:"bg-blue-100 text-blue-800",in_progress:"bg-orange-100 text-orange-800",applied:"bg-green-100 text-green-800",interviewing:"bg-purple-100 text-purple-800",offer:"bg-yellow-100 text-yellow-800",accepted:"bg-emerald-100 text-emerald-800",rejected:"bg-gray-200 text-gray-700",withdrawn:"bg-gray-200 text-gray-700"};function ne({status:t,postings:s,onPostingSelect:a,onPriorityChange:r,onStatusChange:l,onDelete:n}){return e.jsxs("div",{className:`flex h-full w-72 flex-shrink-0 flex-col rounded-lg border ${se[t]}`,children:[e.jsxs("div",{className:`flex items-center justify-between rounded-t-lg px-3 py-2 ${re[t]}`,children:[e.jsx("h3",{className:"font-medium",children:N[t]}),e.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-2 py-0.5 text-sm font-medium",children:s.length})]}),e.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto p-2",children:[s.map(i=>e.jsx($,{posting:i,onSelect:a,onPriorityChange:r,onStatusChange:l,onDelete:n,variant:"kanban"},i.id)),s.length===0&&e.jsx("div",{className:"py-8 text-center text-sm text-gray-400",children:"No postings"})]})]})}function ae({postings:t,onPostingSelect:s,onPriorityChange:a,onStatusChange:r,onDelete:l}){const n=i=>t.filter(o=>o.status===i);return e.jsx("div",{className:"flex h-full gap-4 overflow-x-auto p-4",children:te.map(i=>e.jsx(ne,{status:i,postings:n(i),onPostingSelect:s,onPriorityChange:a,onStatusChange:r,onDelete:l},i))})}function le({postings:t,onPostingSelect:s,onPriorityChange:a,onStatusChange:r,onDelete:l}){const[n,i]=x.useState("dateAdded"),[o,u]=x.useState("desc"),h=c=>{n===c?u(o==="asc"?"desc":"asc"):(i(c),u("asc"))},j=[...t].sort((c,d)=>{let g=0;switch(n){case"title":g=c.title.localeCompare(d.title);break;case"company":g=c.company.localeCompare(d.company);break;case"dateAdded":g=c.dateAdded-d.dateAdded;break;case"priority":g=c.priority-d.priority;break;case"status":g=c.status.localeCompare(d.status);break}return o==="asc"?g:-g}),b=({field:c,label:d})=>e.jsxs("button",{onClick:()=>h(c),className:"flex items-center gap-1 text-left text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700",children:[d,n===c&&e.jsx("svg",{className:`h-4 w-4 ${o==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return e.jsxs("div",{className:"h-full overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-4 border-b border-gray-200 bg-gray-50 px-4 py-2",children:[e.jsx("div",{className:"w-10"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx(b,{field:"title",label:"Title / Company"})}),e.jsx("div",{className:"w-32",children:e.jsx(b,{field:"status",label:"Status"})}),e.jsx("div",{className:"w-24",children:e.jsx(b,{field:"priority",label:"Priority"})}),e.jsx("div",{className:"w-16",children:e.jsx(b,{field:"dateAdded",label:"Added"})})]}),e.jsxs("div",{children:[j.map(c=>e.jsx($,{posting:c,onSelect:s,onPriorityChange:a,onStatusChange:r,onDelete:l,variant:"list"},c.id)),t.length===0&&e.jsx("div",{className:"py-12 text-center text-gray-500",children:"No postings found"})]})]})}function oe({posting:t,isOpen:s,onClose:a,onUpdate:r,onDelete:l}){const[n,i]=x.useState(""),[o,u]=x.useState(!1);x.useEffect(()=>{t&&i(t.notes)},[t==null?void 0:t.id,t==null?void 0:t.notes]);const h=()=>{t&&n!==t.notes&&r(t.id,{notes:n})},j=()=>{t&&(l(t.id),u(!1),a())};if(!t)return null;const b=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsx(J,{isOpen:s,onClose:a,width:"max-w-lg",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.company}),t.location&&e.jsx("p",{className:"text-sm text-gray-500",children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>window.open(t.url,"_blank"),className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Open URL",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:a,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("select",{value:t.status,onChange:c=>r(t.id,{status:c.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:ee.map(c=>e.jsx("option",{value:c,children:N[c]},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Priority"}),e.jsx(E,{priority:t.priority,onChange:c=>r(t.id,{priority:c})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[t.tags.map(c=>e.jsx(P,{tag:c,onRemove:()=>r(t.id,{tags:t.tags.filter(d=>d!==c)})},c)),e.jsx(q,{tags:t.tags,onTagsChange:c=>r(t.id,{tags:c}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Next Action Date"}),e.jsx("input",{type:"date",value:t.nextActionDate||"",onChange:c=>r(t.id,{nextActionDate:c.target.value||void 0}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),t.salary&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Salary"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.salary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600",children:t.description||"No description available"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:n,onChange:c=>i(c.target.value),onBlur:h,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[e.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Connections"}),e.jsx("p",{className:"text-sm text-gray-400 italic",children:"Connections feature coming in Phase 4"})]})]})}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["Added: ",b(t.dateAdded)]}),e.jsxs("p",{children:["Modified: ",b(t.dateModified)]})]}),o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600",children:"Delete this posting?"}),e.jsx("button",{onClick:j,className:"rounded bg-red-600 px-2 py-1 text-white hover:bg-red-700",children:"Yes"}),e.jsx("button",{onClick:()=>u(!1),className:"rounded bg-gray-200 px-2 py-1 text-gray-700 hover:bg-gray-300",children:"No"})]}):e.jsx("button",{onClick:()=>u(!0),className:"text-red-600 hover:text-red-700",children:"Delete posting"})]})})]})})}function ie(t,s=[]){const a={exportDate:new Date().toISOString(),version:2,postings:t,connections:s},r=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),l=URL.createObjectURL(r),n=document.createElement("a");n.href=l,n.download=`jobflow-backup-${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(l)}function ce(t){if(typeof t!="object"||t===null)return!1;const s=t;if(!Array.isArray(s.postings))return!1;for(const a of s.postings){if(typeof a!="object"||a===null)return!1;const r=a;if(typeof r.id!="string"||typeof r.title!="string"||typeof r.company!="string"||typeof r.url!="string")return!1}return!0}function de(t){return new Promise(s=>{const a=new FileReader;a.onload=r=>{var l;try{const n=(l=r.target)==null?void 0:l.result;if(typeof n!="string"){s({success:!1,postings:[],connections:[],error:"Failed to read file"});return}const i=JSON.parse(n);if(!ce(i)){s({success:!1,postings:[],connections:[],error:"Invalid file format. Expected JobFlow export file."});return}s({success:!0,postings:i.postings,connections:i.connections||[]})}catch{s({success:!1,postings:[],connections:[],error:"Failed to parse JSON file"})}},a.onerror=()=>{s({success:!1,postings:[],connections:[],error:"Failed to read file"})},a.readAsText(t)})}function ue(){return new Promise(t=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async a=>{var n;const r=(n=a.target.files)==null?void 0:n[0];if(!r){t({success:!1,postings:[],connections:[],error:"No file selected"});return}const l=await de(r);t(l)},s.click()})}const v={POSTINGS:"postings",SCHEMA_VERSION:"schemaVersion",VIEW_PREFERENCE:"viewPreference"};async function xe(){return(await chrome.storage.local.get(v.POSTINGS))[v.POSTINGS]||[]}async function _(t){await chrome.storage.local.set({[v.POSTINGS]:t})}async function me(){return(await chrome.storage.local.get(v.VIEW_PREFERENCE))[v.VIEW_PREFERENCE]||"kanban"}async function he(t){await chrome.storage.local.set({[v.VIEW_PREFERENCE]:t})}async function fe(){return(await chrome.storage.local.get(v.SCHEMA_VERSION))[v.SCHEMA_VERSION]||1}async function ge(t){await chrome.storage.local.set({[v.SCHEMA_VERSION]:t})}const w=2,T=["jobApplications","applications"];async function pe(){const t=await fe();if(t>=w)return;console.log(`[Migration] Current schema version: ${t}, target: ${w}`);const s=await chrome.storage.local.get([...T,"postings"]);let a=[],r="";for(const l of T)if(s[l]&&Array.isArray(s[l])&&s[l].length>0){a=s[l],r=l;break}if(a.length>0){console.log(`[Migration] Found ${a.length} V1 postings under key: ${r}`);const l=ye(a),n=s.postings||[],i=new Set(n.map(h=>h.url)),o=l.filter(h=>!i.has(h.url)),u=[...n,...o];await _(u),await chrome.storage.local.set({_v1_backup:a}),console.log(`[Migration] Migrated ${o.length} new postings, ${l.length-o.length} duplicates skipped`)}await ge(w),console.log(`[Migration] Schema version updated to ${w}`)}function ye(t){return t.map(s=>({id:s.id,url:s.url,company:s.company,companyLogo:void 0,title:s.title,location:s.location,description:s.description,salary:s.salary,status:s.status,priority:be(s.interest),tags:s.tags||[],notes:s.notes||"",dateAdded:L(s.dateAdded),dateModified:L(s.dateAdded),dateApplied:s.dateApplied?L(s.dateApplied):void 0,nextActionDate:void 0,connectionIds:[]}))}function be(t){return!t||t<=1?1:t<=3?2:3}function L(t){if(typeof t=="number")return t;const s=new Date(t).getTime();return isNaN(s)?Date.now():s}function je(){const[t,s]=x.useState([]),[a,r]=x.useState(!0),[l,n]=x.useState("kanban"),[i,o]=x.useState(""),[u,h]=x.useState(null),[j,b]=x.useState(null),[c,d]=x.useState(!1);x.useEffect(()=>{(async()=>{try{await pe();const[y,p]=await Promise.all([xe(),me()]);s(y),n(p)}catch(y){console.error("Failed to initialize app:",y)}finally{r(!1)}})();const f=y=>{y.postings&&s(y.postings.newValue||[])};return chrome.storage.onChanged.addListener(f),()=>chrome.storage.onChanged.removeListener(f)},[]),x.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("highlight");f&&(b(f),d(!0))},[]);const g=x.useCallback(async m=>{try{await _(m),s(m)}catch(f){console.error("Failed to save postings:",f)}},[]),F=x.useCallback(async m=>{n(m);try{await he(m)}catch(f){console.error("Failed to save view preference:",f)}},[]),A=t.filter(m=>{const f=i.toLowerCase(),y=!i||m.title.toLowerCase().includes(f)||m.company.toLowerCase().includes(f)||m.location.toLowerCase().includes(f)||m.tags.some(C=>C.toLowerCase().includes(f)),p=!u||m.priority===u;return y&&p}),M=m=>{b(m),d(!0)},R=(m,f)=>{const y=t.map(p=>p.id===m?{...p,priority:f,dateModified:Date.now()}:p);g(y)},D=(m,f)=>{const y=t.map(p=>p.id===m?{...p,status:f,dateModified:Date.now(),dateApplied:f==="applied"&&!p.dateApplied?Date.now():p.dateApplied}:p);g(y)},B=(m,f)=>{const y=t.map(p=>p.id===m?{...p,...f,dateModified:Date.now()}:p);g(y)},k=m=>{const f=t.filter(y=>y.id!==m);g(f),j===m&&(b(null),d(!1))},z=()=>{alert("Use the extension popup on a job posting page to add new jobs.")},W=()=>{ie(t)},U=async()=>{const m=await ue();if(!m.success){alert(m.error||"Import failed");return}const f=`Import ${m.postings.length} job posting(s)?

This will merge with your existing data. Duplicates (same URL) will be skipped.`;if(!confirm(f))return;const y=new Set(t.map(S=>S.url)),p=m.postings.filter(S=>!y.has(S.url)),C=[...t,...p];g(C),alert(`Imported ${p.length} new posting(s). ${m.postings.length-p.length} duplicate(s) skipped.`)},H=t.find(m=>m.id===j)||null;return a?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{className:"flex h-screen flex-col bg-gray-50",children:[e.jsx(Z,{searchQuery:i,onSearchChange:o,priorityFilter:u,onPriorityFilterChange:h,currentView:l,onViewChange:F,onAddClick:z,onExport:W,onImport:U}),e.jsx("main",{className:"flex-1 overflow-hidden",children:l==="kanban"?e.jsx(ae,{postings:A,onPostingSelect:M,onPriorityChange:R,onStatusChange:D,onDelete:k}):e.jsx(le,{postings:A,onPostingSelect:M,onPriorityChange:R,onStatusChange:D,onDelete:k})}),e.jsx(oe,{posting:H,isOpen:c,onClose:()=>d(!1),onUpdate:B,onDelete:k})]})}K.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(je,{})}));
