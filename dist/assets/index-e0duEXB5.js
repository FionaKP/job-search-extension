import{r as x,j as e,c as z,R as T}from"./client-DYDkQYN6.js";function $({isOpen:t,onClose:s,title:d,children:a,width:c="max-w-md"}){const n=x.useCallback(l=>{l.key==="Escape"&&s()},[s]);return x.useEffect(()=>(t&&(document.addEventListener("keydown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.body.style.overflow=""}),[t,n]),t?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:s}),e.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10",children:e.jsx("div",{className:`w-screen ${c}`,children:e.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[d&&e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d}),e.jsxs("button",{onClick:s,className:"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a})]})})})]}):null}function I({value:t,onChange:s,placeholder:d="Search...",debounceMs:a=300}){const[c,n]=x.useState(t);x.useEffect(()=>{n(t)},[t]),x.useEffect(()=>{const u=setTimeout(()=>{c!==t&&s(c)},a);return()=>clearTimeout(u)},[c,t,s,a]);const l=u=>{n(u.target.value)},r=()=>{n(""),s("")};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",value:c,onChange:l,placeholder:d,className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-8 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),c&&e.jsx("button",{onClick:r,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function _({label:t,options:s,value:d,onChange:a}){const[c,n]=x.useState(!1),l=x.useRef(null);x.useEffect(()=>{const u=m=>{l.current&&!l.current.contains(m.target)&&n(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const r=s.find(u=>u.value===d);return e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{onClick:()=>n(!c),className:"inline-flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r?r.label:t,e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),c&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>{a(null),n(!1)},className:`block w-full px-4 py-2 text-left text-sm ${d===null?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.map(u=>e.jsx("button",{onClick:()=>{a(u.value),n(!1)},className:`block w-full px-4 py-2 text-left text-sm ${d===u.value?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:u.label},String(u.value)))]})})]})}function N({priority:t,onChange:s,size:d="md",readOnly:a=!1}){const c=d==="sm"?"h-4 w-4":"h-5 w-5",n=d==="sm"?"gap-0.5":"gap-1",l=r=>{!a&&s&&s(r)};return e.jsx("div",{className:`flex ${n}`,children:[1,2,3].map(r=>e.jsx("button",{onClick:()=>l(r),disabled:a,className:`${a?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Priority ${r}`,children:e.jsx("svg",{className:`${c} ${r<=t?"text-yellow-400":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},r))})}function k({tag:t,onRemove:s,size:d="sm"}){const a=d==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-sm";return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full bg-blue-100 text-blue-700 ${a}`,children:[t,s&&e.jsx("button",{onClick:s,className:"ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full hover:bg-blue-200",children:e.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function V({tags:t,onTagsChange:s,suggestedTags:d=[]}){const[a,c]=x.useState(!1),[n,l]=x.useState(""),r=x.useRef(null),u=x.useRef(null);x.useEffect(()=>{const o=f=>{r.current&&!r.current.contains(f.target)&&c(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),x.useEffect(()=>{a&&u.current&&u.current.focus()},[a]);const m=o=>{const f=o.trim().toLowerCase();f&&!t.includes(f)&&s([...t,f]),l("")},b=o=>{s(t.filter(f=>f!==o))},p=o=>{o.key==="Enter"&&n.trim()&&(o.preventDefault(),m(n))},i=d.filter(o=>!t.includes(o));return e.jsxs("div",{className:"relative",ref:r,children:[e.jsxs("button",{onClick:()=>c(!a),className:"inline-flex items-center gap-1 rounded border border-dashed border-gray-300 px-2 py-1 text-xs text-gray-500 hover:border-gray-400 hover:text-gray-600",children:[e.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),a&&e.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-black ring-opacity-5",children:[e.jsx("input",{ref:u,type:"text",value:n,onChange:o=>l(o.target.value),onKeyDown:p,placeholder:"Type and press Enter",className:"w-full rounded border border-gray-300 px-2 py-1 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),t.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.map(o=>e.jsx(k,{tag:o,onRemove:()=>b(o)},o))}),i.length>0&&e.jsxs("div",{className:"mt-2 border-t border-gray-100 pt-2",children:[e.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Suggestions:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.slice(0,5).map(o=>e.jsx("button",{onClick:()=>m(o),className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600 hover:bg-gray-200",children:o},o))})]})]})]})}function P({children:t,items:s}){const[d,a]=x.useState(!1),[c,n]=x.useState({x:0,y:0}),l=x.useRef(null);x.useEffect(()=>{const m=p=>{l.current&&!l.current.contains(p.target)&&a(!1)},b=p=>{p.key==="Escape"&&a(!1)};return document.addEventListener("mousedown",m),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",b)}},[]);const r=m=>{m.preventDefault(),n({x:m.clientX,y:m.clientY}),a(!0)},u=m=>{m.onClick(),a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{onContextMenu:r,children:t}),d&&e.jsx("div",{ref:l,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",style:{left:c.x,top:c.y},children:s.map((m,b)=>m.divider?e.jsx("div",{className:"my-1 border-t border-gray-100"},b):e.jsxs("button",{onClick:()=>u(m),className:`flex w-full items-center gap-2 px-4 py-2 text-left text-sm ${m.danger?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100"}`,children:[m.icon,m.label]},b))})]})}const F=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function W({searchQuery:t,onSearchChange:s,priorityFilter:d,onPriorityFilterChange:a,currentView:c,onViewChange:n,onAddClick:l}){return e.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 bg-white px-4 py-3",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"JobFlow"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-64",children:e.jsx(I,{value:t,onChange:s,placeholder:"Search jobs..."})}),e.jsx(_,{label:"Priority",options:F,value:d,onChange:a}),e.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[e.jsx("button",{onClick:()=>n("kanban"),className:`px-3 py-2 text-sm ${c==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),e.jsx("button",{onClick:()=>n("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${c==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),e.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})}const H=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],j={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},U=["saved","in_progress","applied","interviewing","offer","accepted","rejected"];function A(t){return t.split(" ").slice(0,2).map(s=>s[0]).join("").toUpperCase()}function D(t){const s=Math.floor((Date.now()-t)/864e5);return s===0?"Today":s===1?"1d":`${s}d`}function E({posting:t,onSelect:s,onPriorityChange:d,onStatusChange:a,onDelete:c,variant:n="kanban"}){const l=[{label:"Open URL",onClick:()=>window.open(t.url,"_blank"),icon:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(r=>r!==t.status).map(r=>({label:`Move to ${j[r]}`,onClick:()=>a(t.id,r)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>c(t.id),danger:!0,icon:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}];return n==="list"?e.jsx(P,{items:l,children:e.jsxs("div",{onClick:()=>s(t.id),className:"flex cursor-pointer items-center gap-4 border-b border-gray-200 bg-white px-4 py-3 hover:bg-gray-50",children:[t.companyLogo?e.jsx("img",{src:t.companyLogo,alt:t.company,className:"h-10 w-10 rounded object-contain"}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:A(t.company)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"truncate text-sm text-gray-500",children:t.company})]}),e.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:t.location}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600",children:j[t.status]})}),e.jsx("div",{className:"flex-shrink-0",onClick:r=>r.stopPropagation(),children:e.jsx(N,{priority:t.priority,onChange:r=>d(t.id,r),size:"sm"})}),e.jsx("div",{className:"flex-shrink-0 text-xs text-gray-400",children:D(t.dateAdded)})]})}):e.jsx(P,{items:l,children:e.jsxs("div",{onClick:()=>s(t.id),className:"cursor-pointer rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[t.companyLogo?e.jsx("img",{src:t.companyLogo,alt:t.company,className:"h-10 w-10 rounded object-contain"}):e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded bg-gray-200 text-sm font-medium text-gray-600",children:A(t.company)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"truncate text-sm text-gray-600",children:t.company}),e.jsx("p",{className:"truncate text-xs text-gray-500",children:t.location})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",onClick:r=>r.stopPropagation(),children:[e.jsx(N,{priority:t.priority,onChange:r=>d(t.id,r),size:"sm"}),e.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[t.tags.slice(0,2).map(r=>e.jsx(k,{tag:r,size:"sm"},r)),t.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",t.tags.length-2]})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:D(t.dateAdded)})]})]})})}const K={saved:"bg-blue-50 border-blue-200",in_progress:"bg-orange-50 border-orange-200",applied:"bg-green-50 border-green-200",interviewing:"bg-purple-50 border-purple-200",offer:"bg-yellow-50 border-yellow-200",accepted:"bg-emerald-50 border-emerald-200",rejected:"bg-gray-50 border-gray-300",withdrawn:"bg-gray-50 border-gray-300"},Q={saved:"bg-blue-100 text-blue-800",in_progress:"bg-orange-100 text-orange-800",applied:"bg-green-100 text-green-800",interviewing:"bg-purple-100 text-purple-800",offer:"bg-yellow-100 text-yellow-800",accepted:"bg-emerald-100 text-emerald-800",rejected:"bg-gray-200 text-gray-700",withdrawn:"bg-gray-200 text-gray-700"};function Y({status:t,postings:s,onPostingSelect:d,onPriorityChange:a,onStatusChange:c,onDelete:n}){return e.jsxs("div",{className:`flex h-full w-72 flex-shrink-0 flex-col rounded-lg border ${K[t]}`,children:[e.jsxs("div",{className:`flex items-center justify-between rounded-t-lg px-3 py-2 ${Q[t]}`,children:[e.jsx("h3",{className:"font-medium",children:j[t]}),e.jsx("span",{className:"rounded-full bg-white bg-opacity-50 px-2 py-0.5 text-sm font-medium",children:s.length})]}),e.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto p-2",children:[s.map(l=>e.jsx(E,{posting:l,onSelect:d,onPriorityChange:a,onStatusChange:c,onDelete:n,variant:"kanban"},l.id)),s.length===0&&e.jsx("div",{className:"py-8 text-center text-sm text-gray-400",children:"No postings"})]})]})}function G({postings:t,onPostingSelect:s,onPriorityChange:d,onStatusChange:a,onDelete:c}){const n=l=>t.filter(r=>r.status===l);return e.jsx("div",{className:"flex h-full gap-4 overflow-x-auto p-4",children:U.map(l=>e.jsx(Y,{status:l,postings:n(l),onPostingSelect:s,onPriorityChange:d,onStatusChange:a,onDelete:c},l))})}function J({postings:t,onPostingSelect:s,onPriorityChange:d,onStatusChange:a,onDelete:c}){const[n,l]=x.useState("dateAdded"),[r,u]=x.useState("desc"),m=i=>{n===i?u(r==="asc"?"desc":"asc"):(l(i),u("asc"))},b=[...t].sort((i,o)=>{let f=0;switch(n){case"title":f=i.title.localeCompare(o.title);break;case"company":f=i.company.localeCompare(o.company);break;case"dateAdded":f=i.dateAdded-o.dateAdded;break;case"priority":f=i.priority-o.priority;break;case"status":f=i.status.localeCompare(o.status);break}return r==="asc"?f:-f}),p=({field:i,label:o})=>e.jsxs("button",{onClick:()=>m(i),className:"flex items-center gap-1 text-left text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700",children:[o,n===i&&e.jsx("svg",{className:`h-4 w-4 ${r==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return e.jsxs("div",{className:"h-full overflow-auto",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-4 border-b border-gray-200 bg-gray-50 px-4 py-2",children:[e.jsx("div",{className:"w-10"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx(p,{field:"title",label:"Title / Company"})}),e.jsx("div",{className:"w-32",children:e.jsx(p,{field:"status",label:"Status"})}),e.jsx("div",{className:"w-24",children:e.jsx(p,{field:"priority",label:"Priority"})}),e.jsx("div",{className:"w-16",children:e.jsx(p,{field:"dateAdded",label:"Added"})})]}),e.jsxs("div",{children:[b.map(i=>e.jsx(E,{posting:i,onSelect:s,onPriorityChange:d,onStatusChange:a,onDelete:c,variant:"list"},i.id)),t.length===0&&e.jsx("div",{className:"py-12 text-center text-gray-500",children:"No postings found"})]})]})}function X({posting:t,isOpen:s,onClose:d,onUpdate:a,onDelete:c}){const[n,l]=x.useState(""),[r,u]=x.useState(!1);x.useEffect(()=>{t&&l(t.notes)},[t==null?void 0:t.id,t==null?void 0:t.notes]);const m=()=>{t&&n!==t.notes&&a(t.id,{notes:n})},b=()=>{t&&(c(t.id),u(!1),d())};if(!t)return null;const p=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsx($,{isOpen:s,onClose:d,width:"max-w-lg",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"border-b border-gray-200 px-4 py-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.company}),t.location&&e.jsx("p",{className:"text-sm text-gray-500",children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>window.open(t.url,"_blank"),className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"Open URL",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:d,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("select",{value:t.status,onChange:i=>a(t.id,{status:i.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:H.map(i=>e.jsx("option",{value:i,children:j[i]},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Priority"}),e.jsx(N,{priority:t.priority,onChange:i=>a(t.id,{priority:i})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[t.tags.map(i=>e.jsx(k,{tag:i,onRemove:()=>a(t.id,{tags:t.tags.filter(o=>o!==i)})},i)),e.jsx(V,{tags:t.tags,onTagsChange:i=>a(t.id,{tags:i}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Next Action Date"}),e.jsx("input",{type:"date",value:t.nextActionDate||"",onChange:i=>a(t.id,{nextActionDate:i.target.value||void 0}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),t.salary&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Salary"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.salary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-gray-200 bg-gray-50 p-3 text-sm text-gray-600",children:t.description||"No description available"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:n,onChange:i=>l(i.target.value),onBlur:m,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[e.jsx("p",{className:"mb-1 text-xs text-gray-500",children:"Connections"}),e.jsx("p",{className:"text-sm text-gray-400 italic",children:"Connections feature coming in Phase 4"})]})]})}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["Added: ",p(t.dateAdded)]}),e.jsxs("p",{children:["Modified: ",p(t.dateModified)]})]}),r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600",children:"Delete this posting?"}),e.jsx("button",{onClick:b,className:"rounded bg-red-600 px-2 py-1 text-white hover:bg-red-700",children:"Yes"}),e.jsx("button",{onClick:()=>u(!1),className:"rounded bg-gray-200 px-2 py-1 text-gray-700 hover:bg-gray-300",children:"No"})]}):e.jsx("button",{onClick:()=>u(!0),className:"text-red-600 hover:text-red-700",children:"Delete posting"})]})})]})})}function q(){const[t,s]=x.useState([]),[d,a]=x.useState(!0),[c,n]=x.useState("kanban"),[l,r]=x.useState(""),[u,m]=x.useState(null),[b,p]=x.useState(null),[i,o]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const y=await chrome.storage.local.get(["postings"]);s(y.postings||[])}catch(y){console.error("Failed to load postings:",y)}finally{a(!1)}})();const g=y=>{y.postings&&s(y.postings.newValue||[])};return chrome.storage.onChanged.addListener(g),()=>chrome.storage.onChanged.removeListener(g)},[]),x.useEffect(()=>{const g=new URLSearchParams(window.location.search).get("highlight");g&&(p(g),o(!0))},[]);const f=x.useCallback(async h=>{try{await chrome.storage.local.set({postings:h}),s(h)}catch(g){console.error("Failed to save postings:",g)}},[]),C=t.filter(h=>{const g=!l||h.title.toLowerCase().includes(l.toLowerCase())||h.company.toLowerCase().includes(l.toLowerCase())||h.location.toLowerCase().includes(l.toLowerCase()),y=!u||h.priority===u;return g&&y}),L=h=>{p(h),o(!0)},S=(h,g)=>{const y=t.map(v=>v.id===h?{...v,priority:g,dateModified:Date.now()}:v);f(y)},M=(h,g)=>{const y=t.map(v=>v.id===h?{...v,status:g,dateModified:Date.now(),dateApplied:g==="applied"&&!v.dateApplied?Date.now():v.dateApplied}:v);f(y)},R=(h,g)=>{const y=t.map(v=>v.id===h?{...v,...g,dateModified:Date.now()}:v);f(y)},w=h=>{const g=t.filter(y=>y.id!==h);f(g),b===h&&(p(null),o(!1))},B=()=>{alert("Use the extension popup on a job posting page to add new jobs.")},O=t.find(h=>h.id===b)||null;return d?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{className:"flex h-screen flex-col bg-gray-50",children:[e.jsx(W,{searchQuery:l,onSearchChange:r,priorityFilter:u,onPriorityFilterChange:m,currentView:c,onViewChange:n,onAddClick:B}),e.jsx("main",{className:"flex-1 overflow-hidden",children:c==="kanban"?e.jsx(G,{postings:C,onPostingSelect:L,onPriorityChange:S,onStatusChange:M,onDelete:w}):e.jsx(J,{postings:C,onPostingSelect:L,onPriorityChange:S,onStatusChange:M,onDelete:w})}),e.jsx(X,{posting:O,isOpen:i,onClose:()=>o(!1),onUpdate:R,onDelete:w})]})}z.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(q,{})}));
