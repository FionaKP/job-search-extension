import{r as l,j as t,R as U,a as ot,g as Es,b as Ds,e as Ms,c as As}from"./extractor-BlsyOXNW.js";const Rs=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],$e={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},Ye=["saved","in_progress","applied","interviewing","offer","accepted","rejected"],Is={required_skill:"Required Skills",preferred_skill:"Preferred Skills",soft_skill:"Soft Skills",experience:"Experience",education:"Education",values:"Values & Culture",tools:"Tools",industry:"Industry"},Ts=["required_skill","preferred_skill","soft_skill","experience","education","tools","values","industry"],Dt={recruiter:"Recruiter",employee:"Employee",referral:"Referral",alumni:"Alumni",other:"Other"},Vn={1:"Weak",2:"Moderate",3:"Strong"},kt={email:"Email",call:"Call",meeting:"Meeting",linkedin:"LinkedIn",other:"Other"},Os=["accepted","rejected","withdrawn"];function Pt(e){return Os.includes(e)}const Ps=(e,n)=>[{id:"jobs",label:"Jobs",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),badge:e},{id:"connections",label:"Connections",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),badge:n}],$s=[{id:"settings",label:"Settings",icon:t.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"help",label:"Help",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}];function Cn({children:e,label:n,show:s}){const[r,a]=l.useState(!1);return s?t.jsxs("div",{className:"relative",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[e,r&&t.jsxs("div",{className:"absolute left-full top-1/2 z-tooltip ml-2 -translate-y-1/2 whitespace-nowrap rounded-md bg-wine-600 px-2.5 py-1.5 text-xs font-medium text-white shadow-lg",children:[n,t.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-wine-600"})]})]}):t.jsx(t.Fragment,{children:e})}function zs({currentPage:e,onNavigate:n,jobCount:s,connectionCount:r}){const[a,o]=l.useState(()=>{const i=localStorage.getItem("sidebar-expanded");return i!==null?i==="true":!0});l.useEffect(()=>{localStorage.setItem("sidebar-expanded",String(a))},[a]);const c=Ps(s,r);return t.jsxs("aside",{className:`
        flex flex-col bg-wine transition-all duration-slow ease-out
        ${a?"w-56":"w-16"}
      `,children:[t.jsxs("div",{className:`flex items-center border-b border-wine-400/30 p-4 ${a?"justify-between":"justify-center"}`,children:[a&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-flatred",children:t.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("span",{className:"text-lg font-bold text-champagne",children:"JobFlow"})]}),t.jsx("button",{onClick:()=>o(!a),className:"flex h-8 w-8 items-center justify-center rounded-lg text-champagne/70 transition-colors hover:bg-wine-400/20 hover:text-champagne",title:a?"Collapse sidebar":"Expand sidebar",children:t.jsx("svg",{className:`h-5 w-5 transition-transform duration-slow ${a?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),t.jsx("nav",{className:"flex-1 p-2",children:t.jsx("ul",{className:"space-y-1",children:c.map(i=>{const d=e===i.id;return t.jsx("li",{children:t.jsx(Cn,{label:i.label,show:!a,children:t.jsxs("button",{onClick:()=>n(i.id),className:`
                      group flex w-full items-center gap-3 rounded-lg px-3 py-2.5
                      transition-all duration-base
                      ${d?"bg-flatred text-white shadow-md":"text-champagne/80 hover:bg-pandora/20 hover:text-pandora"}
                      ${a?"":"justify-center"}
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2 focus-visible:ring-offset-wine
                    `,children:[t.jsx("span",{className:`flex-shrink-0 transition-transform duration-base ${d?"":"group-hover:scale-110"}`,children:i.icon}),a&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-1 text-left text-sm font-medium",children:i.label}),i.badge!==void 0&&i.badge>0&&t.jsx("span",{className:`
                              rounded-full px-2 py-0.5 text-xs font-bold
                              ${d?"bg-white/20 text-white":"bg-pandora/30 text-pandora"}
                            `,children:i.badge})]}),!a&&i.badge!==void 0&&i.badge>0&&t.jsx("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-pandora text-[10px] font-bold text-white",children:i.badge>99?"99+":i.badge})]})})},i.id)})})}),t.jsx("div",{className:"mx-4 border-t border-wine-400/30"}),t.jsx("nav",{className:"p-2",children:t.jsx("ul",{className:"space-y-1",children:$s.map(i=>{const d=e===i.id;return t.jsx("li",{children:t.jsx(Cn,{label:i.label,show:!a,children:t.jsxs("button",{onClick:()=>n(i.id),className:`
                      group flex w-full items-center gap-3 rounded-lg px-3 py-2.5
                      transition-all duration-base
                      ${d?"bg-flatred text-white shadow-md":"text-champagne/60 hover:bg-wine-400/20 hover:text-champagne"}
                      ${a?"":"justify-center"}
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2 focus-visible:ring-offset-wine
                    `,children:[t.jsx("span",{className:"flex-shrink-0",children:i.icon}),a&&t.jsx("span",{className:"text-sm font-medium",children:i.label})]})})},i.id)})})}),a&&t.jsx("div",{className:"border-t border-wine-400/30 p-4",children:t.jsxs("p",{className:"text-xs text-champagne/50",children:["Press ",t.jsx("kbd",{className:"rounded bg-wine-400/30 px-1.5 py-0.5 font-mono text-champagne/70",children:"?"})," for shortcuts"]})})]})}function Fs({isOpen:e,onClose:n,title:s,children:r,width:a="max-w-md"}){const o=l.useCallback(c=>{c.key==="Escape"&&n()},[n]);return l.useEffect(()=>(e&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}),[e,o]),e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-wine/50 animate-fade-in",onClick:n}),t.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10 animate-slide-right",children:t.jsx("div",{className:`w-screen ${a}`,children:t.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[s&&t.jsxs("div",{className:"flex items-center justify-between border-b border-sage/20 px-4 py-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-wine",children:s}),t.jsxs("button",{onClick:n,className:"rounded-md text-sage hover:text-wine focus:outline-none focus:ring-2 focus:ring-wine",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:r})]})})})]}):null}function Bs({value:e,onChange:n,placeholder:s="Search...",debounceMs:r=300,inputRef:a}){const[o,c]=l.useState(e);l.useEffect(()=>{c(e)},[e]),l.useEffect(()=>{const u=setTimeout(()=>{o!==e&&n(o)},r);return()=>clearTimeout(u)},[o,e,n,r]);const i=u=>{c(u.target.value)},d=()=>{c(""),n("")};return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx("svg",{className:"h-5 w-5 text-sage",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),t.jsx("input",{ref:a,type:"text",value:o,onChange:i,placeholder:s,className:"block w-full rounded-md border border-sage/30 bg-white py-2 pl-10 pr-8 text-sm text-wine placeholder-sage focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"}),o&&t.jsx("button",{onClick:d,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-sage hover:text-wine",children:t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function Sn({label:e,options:n,value:s,onChange:r}){const[a,o]=l.useState(!1),c=l.useRef(null);l.useEffect(()=>{const d=u=>{c.current&&!c.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const i=n.find(d=>d.value===s);return t.jsxs("div",{className:"relative",ref:c,children:[t.jsxs("button",{onClick:()=>o(!a),className:"inline-flex items-center gap-1 rounded-md border border-sage/30 bg-white px-3 py-2 text-sm font-medium text-wine hover:bg-champagne-50 focus:outline-none focus:ring-2 focus:ring-wine",children:[i?i.label:e,t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),a&&t.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-sage/20",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>{r(null),o(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===null?"bg-champagne-100 text-wine":"text-wine/80 hover:bg-champagne-50"}`,children:"All"}),n.map(d=>t.jsx("button",{onClick:()=>{r(d.value),o(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===d.value?"bg-champagne-100 text-wine":"text-wine/80 hover:bg-champagne-50"}`,children:d.label},String(d.value)))]})})]})}function Kn({interest:e,onChange:n,size:s="md",readOnly:r=!1}){const a=s==="sm"?"h-3.5 w-3.5":"h-4 w-4",o=s==="sm"?"gap-0":"gap-0.5",c=i=>{!r&&n&&n(i)};return t.jsx("div",{className:`flex ${o}`,title:`Interest: ${e}/5`,children:[1,2,3,4,5].map(i=>t.jsx("button",{onClick:()=>c(i),disabled:r,className:`${r?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Interest ${i}`,children:t.jsx("svg",{className:`${a} ${i<=e?"text-pandora":"text-sage/30"}`,viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},i))})}function Lt({priority:e,onChange:n,size:s="md",readOnly:r=!1}){return t.jsx(Kn,{interest:e,onChange:n,size:s,readOnly:r})}function it({tag:e,onRemove:n,size:s="sm",className:r=""}){const a=s==="sm"?"px-1.5 py-0.5 text-[10px]":"px-2.5 py-1 text-sm";return t.jsxs("span",{className:`inline-flex items-center gap-1 rounded bg-wine/10 text-wine/70 whitespace-nowrap ${a} ${r}`,children:[e,n&&t.jsx("button",{onClick:n,className:"ml-0.5 inline-flex h-3.5 w-3.5 items-center justify-center rounded hover:bg-wine/20 hover:text-wine",children:t.jsx("svg",{className:"h-2.5 w-2.5",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function Ws({tags:e,onTagsChange:n,suggestedTags:s=[]}){const[r,a]=l.useState(!1),[o,c]=l.useState(""),i=l.useRef(null),d=l.useRef(null);l.useEffect(()=>{const x=m=>{i.current&&!i.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),l.useEffect(()=>{r&&d.current&&d.current.focus()},[r]);const u=x=>{const m=x.trim().toLowerCase();m&&!e.includes(m)&&n([...e,m]),c("")},h=x=>{n(e.filter(m=>m!==x))},f=x=>{x.key==="Enter"&&o.trim()&&(x.preventDefault(),u(o))},g=s.filter(x=>!e.includes(x));return t.jsxs("div",{className:"relative",ref:i,children:[t.jsxs("button",{onClick:()=>a(!r),className:"btn btn-sm btn-ghost !h-auto !px-2 !py-1 border border-dashed border-sage/40 text-sage hover:border-sage hover:text-wine",children:[t.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),r&&t.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-sage/20",children:[t.jsx("input",{ref:d,type:"text",value:o,onChange:x=>c(x.target.value),onKeyDown:f,placeholder:"Type and press Enter",className:"w-full rounded border border-sage/30 px-2 py-1 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"}),e.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(x=>t.jsx(it,{tag:x,onRemove:()=>h(x)},x))}),g.length>0&&t.jsxs("div",{className:"mt-2 border-t border-sage/20 pt-2",children:[t.jsx("p",{className:"mb-1 text-xs text-sage",children:"Suggestions:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:g.slice(0,5).map(x=>t.jsx("button",{onClick:()=>u(x),className:"badge badge-neutral hover:bg-champagne-light cursor-pointer",children:x},x))})]})]})]})}function qt({children:e,items:n}){const[s,r]=l.useState(!1),[a,o]=l.useState({x:0,y:0}),c=l.useRef(null);l.useEffect(()=>{const u=f=>{c.current&&!c.current.contains(f.target)&&r(!1)},h=f=>{f.key==="Escape"&&r(!1)};return document.addEventListener("mousedown",u),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",h)}},[]);const i=u=>{u.preventDefault(),o({x:u.clientX,y:u.clientY}),r(!0)},d=u=>{u.onClick(),r(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onContextMenu:i,children:e}),s&&t.jsx("div",{ref:c,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-sage/20",style:{left:a.x,top:a.y},children:n.map((u,h)=>u.divider?t.jsx("div",{className:"my-1 border-t border-sage/20"},h):t.jsxs("button",{onClick:()=>d(u),className:`btn btn-ghost !h-auto !justify-start w-full gap-2 px-4 py-2 text-left text-sm rounded-none ${u.danger?"text-flatred hover:bg-flatred-50":""}`,children:[u.icon,u.label]},h))})]})}const H={POSTINGS:"postings",CONNECTIONS:"connections",SETTINGS:"settings",SCHEMA_VERSION:"schemaVersion",VIEW_PREFERENCE:"viewPreference",COLLAPSED_COLUMNS:"collapsedColumns",STATS_EXPANDED:"statsExpanded"};async function qe(){return(await chrome.storage.local.get(H.POSTINGS))[H.POSTINGS]||[]}async function Je(e){await chrome.storage.local.set({[H.POSTINGS]:e})}async function de(){return(await chrome.storage.local.get(H.CONNECTIONS))[H.CONNECTIONS]||[]}async function Qe(e){await chrome.storage.local.set({[H.CONNECTIONS]:e})}async function Ln(e){const n=await de(),s=n.findIndex(r=>r.id===e.id);s>=0?n[s]={...e,dateModified:Date.now()}:n.push(e),await Qe(n)}async function Us(e){const s=(await de()).filter(o=>o.id!==e);await Qe(s);const a=(await qe()).map(o=>({...o,connectionIds:o.connectionIds.filter(c=>c!==e)}));await Je(a)}async function Hs(e,n){const s=await de(),r=await qe(),a=s.findIndex(c=>c.id===e);if(a>=0){const c=s[a];c.linkedPostingIds.includes(n)||(s[a]={...c,linkedPostingIds:[...c.linkedPostingIds,n],dateModified:Date.now()})}const o=r.findIndex(c=>c.id===n);if(o>=0){const c=r[o];c.connectionIds.includes(e)||(r[o]={...c,connectionIds:[...c.connectionIds,e],dateModified:Date.now()})}await Qe(s),await Je(r)}async function En(e,n){const s=await de(),r=await qe(),a=s.findIndex(c=>c.id===e);if(a>=0){const c=s[a];s[a]={...c,linkedPostingIds:c.linkedPostingIds.filter(i=>i!==n),dateModified:Date.now()}}const o=r.findIndex(c=>c.id===n);if(o>=0){const c=r[o];r[o]={...c,connectionIds:c.connectionIds.filter(i=>i!==e),dateModified:Date.now()}}await Qe(s),await Je(r)}async function _s(){return(await chrome.storage.local.get(H.SETTINGS))[H.SETTINGS]||Vs()}function Vs(){return{defaultView:"kanban",theme:"light",collapsedColumns:["rejected"]}}async function Ks(){return(await chrome.storage.local.get(H.VIEW_PREFERENCE))[H.VIEW_PREFERENCE]||"kanban"}async function Ys(e){await chrome.storage.local.set({[H.VIEW_PREFERENCE]:e})}async function Gs(){return(await chrome.storage.local.get(H.COLLAPSED_COLUMNS))[H.COLLAPSED_COLUMNS]??["rejected"]}async function Xs(e){await chrome.storage.local.set({[H.COLLAPSED_COLUMNS]:e})}async function qs(){return(await chrome.storage.local.get(H.STATS_EXPANDED))[H.STATS_EXPANDED]??!1}async function Js(e){await chrome.storage.local.set({[H.STATS_EXPANDED]:e})}async function Qs(){return(await chrome.storage.local.get(H.SCHEMA_VERSION))[H.SCHEMA_VERSION]||1}async function Zs(e){await chrome.storage.local.set({[H.SCHEMA_VERSION]:e})}const Ct=3,Dn=["jobApplications","applications"];async function er(){const e=await Qs();if(e>=Ct)return;console.log(`[Migration] Current schema version: ${e}, target: ${Ct}`);const n=await chrome.storage.local.get([...Dn,"postings"]);let s=[],r="";for(const a of Dn)if(n[a]&&Array.isArray(n[a])&&n[a].length>0){s=n[a],r=a;break}if(s.length>0){console.log(`[Migration] Found ${s.length} V1 postings under key: ${r}`);const a=Yn(s),o=n.postings||[],c=new Set(o.map(u=>u.url)),i=a.filter(u=>!c.has(u.url)),d=[...o,...i];await Je(d),await chrome.storage.local.set({_v1_backup:s}),console.log(`[Migration] Migrated ${i.length} new postings, ${a.length-i.length} duplicates skipped`)}e<3&&await tr(),await Zs(Ct),console.log(`[Migration] Schema version updated to ${Ct}`)}async function tr(){const e=await de();if(e.length===0){console.log("[Migration] No connections to migrate");return}const n=e.map(s=>({...s,email:s.email||void 0,linkedInUrl:s.linkedInUrl||void 0,relationshipType:s.relationshipType||"other",howWeMet:s.howWeMet||void 0,relationshipStrength:s.relationshipStrength||2,notes:s.notes||s.relationshipNotes||"",contactHistory:s.contactHistory||[],dateAdded:s.dateAdded||Date.now(),dateModified:s.dateModified||Date.now()}));await Qe(n),console.log(`[Migration] Migrated ${n.length} connections to V3 schema`)}function Yn(e){return e.map(n=>({id:n.id,url:n.url,company:n.company,companyLogo:void 0,title:n.title,location:n.location,description:n.description,salary:n.salary,status:n.status,interest:nr(n.interest),tags:n.tags||[],notes:n.notes||"",dateAdded:Jt(n.dateAdded),dateModified:Jt(n.dateAdded),dateApplied:n.dateApplied?Jt(n.dateApplied):void 0,nextActionDate:void 0,connectionIds:[]}))}function nr(e){return!e||e<=1?2:e===2||e===3?3:e===4?4:5}function Jt(e){if(typeof e=="number")return e;const n=new Date(e).getTime();return isNaN(n)?Date.now():n}async function sr(){const[e,n,s]=await Promise.all([qe(),de(),_s()]);return{version:3,exportDate:new Date().toISOString(),postings:e,connections:n,settings:s}}async function rr(){const e=await sr(),n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`jobflow-backup-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s)}async function ar(e){try{const n=await e.text(),s=JSON.parse(n);let r;if(s.version===1||!s.version){const a=s.postings||s.applications||[],o=Yn(a);r={version:2,exportDate:s.exportDate||new Date().toISOString(),postings:o,connections:s.connections||[],settings:s.settings||{defaultView:"kanban",theme:"light"}}}else r=s;return Array.isArray(r.postings)?{success:!0,data:r,fileName:e.name}:{success:!1,data:null,fileName:e.name,error:"Invalid file format: missing postings array"}}catch(n){return{success:!1,data:null,fileName:e.name,error:n instanceof Error?n.message:"Failed to parse JSON file"}}}function or(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.title=="string"&&typeof n.company=="string"&&typeof n.url=="string"&&n.id.length>0&&n.title.length>0}function ir(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n){const a=s.get(r.id);(!a||r.dateModified>a.dateModified)&&s.set(r.id,r)}return Array.from(s.values())}function lr(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.name=="string"&&typeof n.company=="string"&&n.id.length>0&&n.name.length>0}function cr(e){return{id:e.id,name:e.name,email:e.email||void 0,linkedInUrl:e.linkedInUrl||void 0,company:e.company,role:e.role||void 0,relationshipType:e.relationshipType||"other",howWeMet:e.howWeMet||void 0,relationshipStrength:e.relationshipStrength||2,notes:e.notes||e.relationshipNotes||"",lastContactDate:e.lastContactDate||void 0,nextFollowUp:e.nextFollowUp||void 0,contactHistory:e.contactHistory||[],linkedPostingIds:e.linkedPostingIds||[],dateAdded:e.dateAdded||Date.now(),dateModified:e.dateModified||Date.now()}}function dr(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n)if(lr(r)){const a=cr(r),o=s.get(a.id);(!o||a.dateModified>o.dateModified)&&s.set(a.id,a)}return Array.from(s.values())}async function ur(e){var d;const n=[];let s=0;const r=[];for(let u=0;u<e.postings.length;u++){const h=e.postings[u];if(or(h)){let f=h.interest||3;if(!h.interest&&h.priority){const g=h.priority;f={1:2,2:3,3:5}[g]||3}r.push({...h,status:h.status||"saved",interest:f,tags:h.tags||[],notes:h.notes||"",dateAdded:h.dateAdded||Date.now(),dateModified:h.dateModified||Date.now(),connectionIds:h.connectionIds||[],keywords:h.keywords,keywordsExtractedAt:h.keywordsExtractedAt})}else n.push(`Posting ${u+1}: missing required field (id or title)`),s++}const[a,o]=await Promise.all([qe(),de()]),c=ir(a,r),i=dr(o,e.connections||[]);return await Promise.all([Je(c),Qe(i)]),{success:n.length===0,postings:r.length,connections:((d=e.connections)==null?void 0:d.length)||0,errors:n,skipped:s}}function hr(){return new Promise(e=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=s=>{var a;const r=(a=s.target.files)==null?void 0:a[0];e(r||null)},n.addEventListener("cancel",()=>e(null)),n.click()})}function mr({className:e=""}){const[n,s]=l.useState(!1),r=async()=>{s(!0);try{await rr()}catch(a){console.error("Export failed:",a),alert("Failed to export data. Please try again.")}finally{s(!1)}};return t.jsxs("button",{onClick:r,disabled:n,className:`inline-flex items-center gap-2 ${e}`,title:"Export data to JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),n?"Exporting...":"Export Data"]})}function xr({isOpen:e,parsedFile:n,onConfirm:s,onCancel:r,isImporting:a,importResult:o}){var i;if(!e)return null;const c=d=>{try{return new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return d}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"modal-backdrop",onClick:a?void 0:r}),t.jsx("div",{className:"modal-container",children:t.jsxs("div",{className:"modal modal-sm",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"modal-title",children:o?"Import Complete":"Import Backup"}),!a&&t.jsx("button",{onClick:r,className:"modal-close",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"modal-body",children:[n&&!n.success&&t.jsxs("div",{className:"mb-4 rounded-md bg-flatred-50 p-3 text-sm text-flatred",children:[t.jsx("p",{className:"font-medium",children:"Failed to parse file"}),t.jsx("p",{children:n.error})]}),(n==null?void 0:n.success)&&n.data&&!o&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"rounded-md bg-champagne-50 p-3",children:[t.jsxs("p",{className:"text-sm text-wine/70",children:[t.jsx("span",{className:"font-medium text-wine",children:"File:"})," ",n.fileName]}),t.jsxs("p",{className:"text-sm text-wine/70",children:[t.jsx("span",{className:"font-medium text-wine",children:"Exported:"})," ",c(n.data.exportDate)]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm font-medium text-wine",children:"Found:"}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-wine/70",children:[t.jsxs("li",{children:[n.data.postings.length," postings"]}),t.jsxs("li",{children:[((i=n.data.connections)==null?void 0:i.length)||0," connections"]})]})]}),t.jsx("div",{className:"rounded-md bg-teal-50 p-3 text-sm text-teal-600",children:t.jsx("p",{children:"Import will merge with existing data. Newer entries will overwrite older ones."})})]}),o&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`rounded-md p-3 text-sm ${o.success?"bg-teal-50 text-teal-600":"bg-pandora-50 text-pandora"}`,children:t.jsx("p",{className:"font-medium",children:o.success?"Import successful!":"Import completed with warnings"})}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-wine/70",children:[t.jsxs("li",{children:[o.postings," postings imported"]}),t.jsxs("li",{children:[o.connections," connections imported"]}),o.skipped>0&&t.jsxs("li",{className:"text-pandora",children:[o.skipped," items skipped"]})]}),o.errors.length>0&&t.jsxs("div",{className:"rounded-md bg-pandora-50 p-3",children:[t.jsx("p",{className:"text-sm font-medium text-pandora",children:"Warnings:"}),t.jsxs("ul",{className:"mt-1 list-disc pl-4 text-sm text-pandora/80",children:[o.errors.slice(0,5).map((d,u)=>t.jsx("li",{children:d},u)),o.errors.length>5&&t.jsxs("li",{children:["...and ",o.errors.length-5," more"]})]})]})]})]}),t.jsx("div",{className:"modal-footer",children:o?t.jsx("button",{onClick:r,className:"btn btn-primary",children:"Done"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:r,disabled:a,className:"btn btn-secondary",children:"Cancel"}),t.jsx("button",{onClick:s,disabled:a||!(n!=null&&n.success),className:"btn btn-primary",children:a?"Importing...":"Import"})]})})]})})]})}function fr({className:e="",onImportComplete:n}){const[s,r]=l.useState(!1),[a,o]=l.useState(null),[c,i]=l.useState(!1),[d,u]=l.useState(null),h=async()=>{const x=await hr();if(!x)return;const m=await ar(x);o(m),u(null),r(!0)},f=async()=>{if(!(!(a!=null&&a.success)||!a.data)){i(!0);try{const x=await ur(a.data);u(x),n==null||n()}catch(x){console.error("Import failed:",x),u({success:!1,postings:0,connections:0,errors:[x instanceof Error?x.message:"Unknown error occurred"],skipped:0})}finally{i(!1)}}},g=()=>{r(!1),o(null),u(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:h,className:`inline-flex items-center gap-2 ${e}`,title:"Import data from JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),t.jsx(xr,{isOpen:s,parsedFile:a,onConfirm:f,onCancel:g,isImporting:c,importResult:d})]})}function gr({availableTags:e,selectedTags:n,onChange:s}){const[r,a]=l.useState(!1),o=l.useRef(null);l.useEffect(()=>{const d=u=>{o.current&&!o.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=d=>{n.includes(d)?s(n.filter(u=>u!==d)):s([...n,d])},i=n.length>0;return t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>a(!r),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${i?"border-wine bg-champagne-50 text-wine":"border-sage/30 bg-white text-wine hover:bg-champagne-50"}`,children:[t.jsx("span",{children:"Tags"}),i&&t.jsx("span",{className:"rounded-full bg-wine px-1.5 py-0.5 text-xs text-white",children:n.length}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white py-1 shadow-lg ring-1 ring-sage/20",children:e.length===0?t.jsx("div",{className:"px-4 py-2 text-sm text-sage",children:"No tags available"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.map(d=>t.jsxs("label",{className:"checkbox-label px-4 py-2 hover:bg-champagne-50",children:[t.jsx("input",{type:"checkbox",checked:n.includes(d),onChange:()=>c(d),className:"checkbox checkbox-sm"}),t.jsx("span",{children:d})]},d))}),i&&t.jsx("div",{className:"border-t border-sage/20 px-4 py-2",children:t.jsx("button",{onClick:()=>s([]),className:"text-sm text-flatred hover:text-flatred-600",children:"Clear selection"})})]})})]})}function pr({availableCompanies:e,value:n,onChange:s}){const[r,a]=l.useState(!1),[o,c]=l.useState(n),i=l.useRef(null),d=l.useRef(null);l.useEffect(()=>{c(n)},[n]),l.useEffect(()=>{const m=v=>{d.current&&!d.current.contains(v.target)&&a(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const u=e.filter(m=>m.toLowerCase().includes(o.toLowerCase())).slice(0,10),h=m=>{const v=m.target.value;c(v),s(v),a(!0)},f=m=>{c(m),s(m),a(!1)},g=()=>{var m;c(""),s(""),(m=i.current)==null||m.focus()},x=n.length>0;return t.jsxs("div",{className:"relative",ref:d,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:i,type:"text",value:o,onChange:h,onFocus:()=>a(!0),placeholder:"Company...",className:`w-36 rounded-md border px-3 py-2 pr-8 text-sm ${x?"border-wine bg-champagne-50 text-wine":"border-sage/30 text-wine focus:border-wine focus:ring-1 focus:ring-wine"}`}),x&&t.jsx("button",{onClick:g,className:"absolute right-2 top-1/2 -translate-y-1/2 text-sage hover:text-wine",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&u.length>0&&o.length>0&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-full rounded-md bg-white py-1 shadow-lg ring-1 ring-sage/20",children:t.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.map(m=>t.jsx("button",{onClick:()=>f(m),className:"w-full px-4 py-2 text-left text-sm text-wine hover:bg-champagne-50",children:m},m))})})]})}function br({fromDate:e,toDate:n,onFromChange:s,onToChange:r}){const a=e!==null||n!==null,o=()=>{s(null),r(null)};return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-wine/70",children:"Date added:"}),t.jsx("input",{type:"date",value:e||"",onChange:c=>s(c.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${e?"border-wine bg-champagne-50 text-wine":"border-sage/30 text-wine focus:border-wine focus:ring-1 focus:ring-wine"}`}),t.jsx("span",{className:"text-sm text-sage",children:"to"}),t.jsx("input",{type:"date",value:n||"",onChange:c=>r(c.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${n?"border-wine bg-champagne-50 text-wine":"border-sage/30 text-wine focus:border-wine focus:ring-1 focus:ring-wine"}`}),a&&t.jsx("button",{onClick:o,className:"text-sage hover:text-wine",title:"Clear date range",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function vr({dateFrom:e,dateTo:n,hasDeadline:s,deadlineSoon:r,needsAction:a,hasConnections:o,noConnections:c,onDateFromChange:i,onDateToChange:d,onHasDeadlineChange:u,onDeadlineSoonChange:h,onNeedsActionChange:f,onHasConnectionsChange:g,onNoConnectionsChange:x,onClearAll:m}){const[v,j]=l.useState(!1),b=l.useRef(null);l.useEffect(()=>{const y=C=>{b.current&&!b.current.contains(C.target)&&j(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const k=[e!==null||n!==null,s,r,a,o,c].filter(Boolean).length;return t.jsxs("div",{className:"relative",ref:b,children:[t.jsxs("button",{onClick:()=>j(!v),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${k>0?"border-wine bg-champagne-50 text-wine":"border-sage/30 bg-white text-wine hover:bg-champagne-50"}`,children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),t.jsx("span",{children:"More Filters"}),k>0&&t.jsx("span",{className:"rounded-full bg-wine px-1.5 py-0.5 text-xs text-white",children:k}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${v?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&t.jsx("div",{className:"absolute right-0 z-20 mt-1 w-96 rounded-md bg-white p-4 shadow-lg ring-1 ring-sage/20",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(br,{fromDate:e,toDate:n,onFromChange:i,onToChange:d}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:s,onChange:y=>u(y.target.checked),className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Has deadline"})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:r,onChange:y=>h(y.target.checked),className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Deadline within 7 days"})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:y=>f(y.target.checked),className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Needs action (stale)"})]})]}),t.jsxs("div",{className:"border-t border-sage/20 pt-3",children:[t.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-sage",children:"Networking"}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:y=>{g(y.target.checked),y.target.checked&&x(!1)},className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Has connections"})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:c,onChange:y=>{x(y.target.checked),y.target.checked&&g(!1)},className:"checkbox checkbox-sm"}),t.jsx("span",{children:"No connections"})]})]})]}),k>0&&t.jsx("div",{className:"border-t border-sage/20 pt-3",children:t.jsx("button",{onClick:()=>{m(),j(!1)},className:"text-sm text-flatred hover:text-flatred-600",children:"Clear all filters"})})]})})]})}const wr=[{title:"Global",shortcuts:[{keys:"/",description:"Focus search"},{keys:"⌘K",description:"Focus search (alt)"},{keys:"Esc",description:"Close panel / clear search"},{keys:"?",description:"Show this help"},{keys:"N",description:"New posting"}]},{title:"Status Filter",shortcuts:[{keys:"1",description:"Filter to Saved"},{keys:"2",description:"Filter to In Progress"},{keys:"3",description:"Filter to Applied"},{keys:"4",description:"Filter to Interviewing"},{keys:"5",description:"Filter to Offer"},{keys:"6",description:"Filter to Accepted"},{keys:"7",description:"Filter to Rejected"},{keys:"0",description:"Clear status filter"}]},{title:"Card Navigation",shortcuts:[{keys:"J / ↓",description:"Next card"},{keys:"K / ↑",description:"Previous card"},{keys:"↵",description:"Open detail panel"}]},{title:"Card Actions",shortcuts:[{keys:"S",description:"Cycle priority"},{keys:"O",description:"Open original URL"},{keys:"D",description:"Delete posting"}]}];function yr({isOpen:e,onClose:n}){return l.useEffect(()=>{const s=r=>{r.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,n]),e?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"modal-backdrop",onClick:n}),t.jsx("div",{className:"modal-container",children:t.jsxs("div",{className:"modal modal-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"modal-title",children:"Keyboard Shortcuts"}),t.jsx("button",{onClick:n,className:"modal-close",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"modal-body",children:t.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:wr.map(s=>t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase text-sage",children:s.title}),t.jsx("div",{className:"space-y-2",children:s.shortcuts.map(r=>t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("span",{className:"text-sm text-wine/70",children:r.description}),t.jsx("kbd",{className:"rounded bg-champagne-100 px-2 py-1 text-xs font-mono text-wine",children:r.keys})]},r.keys))})]},s.title))})}),t.jsx("div",{className:"modal-footer justify-center",children:t.jsxs("span",{className:"text-sm text-wine/60",children:["Press ",t.jsx("kbd",{className:"rounded bg-champagne-100 px-1.5 py-0.5 font-mono text-xs text-wine",children:"Esc"})," to close"]})})]})})]}):null}const jr=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function Nr({searchQuery:e,onSearchChange:n,priorityFilter:s,onPriorityFilterChange:r,currentView:a,onViewChange:o,onAddClick:c,availableTags:i,availableCompanies:d,tagFilters:u,onTagFiltersChange:h,companyFilter:f,onCompanyFilterChange:g,dateFrom:x,dateTo:m,onDateFromChange:v,onDateToChange:j,hasDeadline:b,deadlineSoon:k,needsAction:y,hasConnections:C,noConnections:E,onHasDeadlineChange:w,onDeadlineSoonChange:L,onNeedsActionChange:M,onHasConnectionsChange:I,onNoConnectionsChange:P,onClearAllFilters:T,activeFilterCount:_,searchInputRef:F,statusFilter:Q,onStatusFilterChange:re}){const[Z,R]=l.useState(!1),V=l.useRef(null);return l.useEffect(()=>{const B=W=>{V.current&&!V.current.contains(W.target)&&R(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),t.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 bg-white px-4 py-3",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"JobFlow"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-64",children:t.jsx(Bs,{value:e,onChange:n,placeholder:"Search jobs... (Press /)",inputRef:F})}),t.jsx(Sn,{label:"Priority",options:jr,value:s,onChange:r}),t.jsx(Sn,{label:"Status",options:Ye.map(B=>({value:B,label:$e[B]})),value:Q,onChange:re}),t.jsx(gr,{availableTags:i,selectedTags:u,onChange:h}),t.jsx(pr,{availableCompanies:d,value:f,onChange:g}),t.jsx(vr,{dateFrom:x,dateTo:m,hasDeadline:b,deadlineSoon:k,needsAction:y,hasConnections:C,noConnections:E,onDateFromChange:v,onDateToChange:j,onHasDeadlineChange:w,onDeadlineSoonChange:L,onNeedsActionChange:M,onHasConnectionsChange:I,onNoConnectionsChange:P,onClearAll:T}),_>0&&t.jsxs("button",{onClick:T,className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm text-blue-600 hover:bg-blue-50",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear all (",_,")"]}),t.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[t.jsx("button",{onClick:()=>o("kanban"),className:`px-3 py-2 text-sm ${a==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),t.jsx("button",{onClick:()=>o("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${a==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),t.jsxs("div",{className:"relative",ref:V,children:[t.jsx("button",{onClick:()=>R(!Z),className:"rounded-md border border-gray-300 p-2 text-gray-600 hover:bg-gray-50",title:"Settings (? for shortcuts)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),Z&&t.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[t.jsx(mr,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"}),t.jsx(fr,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onImportComplete:()=>R(!1)})]})]}),t.jsxs("button",{onClick:c,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",title:"Add new posting (N)",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})]})}const kr={saved:"bg-pandora",in_progress:"bg-champagne-400",applied:"bg-teal",interviewing:"bg-wine",offer:"bg-pandora-500",accepted:"bg-teal-600",rejected:"bg-flatred",withdrawn:"bg-sage"};function St({icon:e,label:n,value:s,color:r="text-gray-600"}){return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`${r}`,children:e}),t.jsxs("div",{children:[t.jsx("span",{className:"text-lg font-semibold text-gray-900",children:s}),t.jsx("span",{className:"ml-1 text-sm text-gray-500",children:n})]})]})}function Cr({status:e,count:n,total:s}){const r=s>0?n/s*100:0;return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-24 text-sm text-gray-600",children:$e[e]}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"h-4 overflow-hidden rounded-full bg-gray-100",children:t.jsx("div",{className:`h-full ${kr[e]} transition-all duration-300`,style:{width:`${r}%`}})})}),t.jsx("span",{className:"w-8 text-right text-sm font-medium text-gray-700",children:n})]})}function Sr({stats:e,expanded:n,onExpandedChange:s}){return t.jsxs("div",{className:"border-b border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx(St,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"total",value:e.total}),t.jsx(St,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),label:"active",value:e.active,color:"text-blue-600"}),t.jsx(St,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),label:"this week",value:e.thisWeek,color:"text-green-600"}),e.stale>0&&t.jsx(St,{icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),label:"stale",value:e.stale,color:"text-orange-600"})]}),t.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-1 rounded px-2 py-1 text-sm text-gray-500 hover:bg-gray-100 hover:text-gray-700",children:[t.jsx("span",{children:n?"Hide":"Details"}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&t.jsxs("div",{className:"border-t border-gray-100 px-4 py-3",children:[t.jsx("h4",{className:"mb-3 text-sm font-medium text-gray-500",children:"BY STATUS"}),t.jsx("div",{className:"space-y-2",children:Ye.map(r=>t.jsx(Cr,{status:r,count:e.byStatus[r],total:e.total},r))})]})]})}const Qt=[{status:"saved",label:"BOOKMARKED",shortLabel:"BOOKMARKED"},{status:"in_progress",label:"APPLYING",shortLabel:"APPLYING"},{status:"applied",label:"APPLIED",shortLabel:"APPLIED"},{status:"interviewing",label:"INTERVIEWING",shortLabel:"INTERVIEW"},{status:"offer",label:"NEGOTIATING",shortLabel:"NEGOTIATE"},{status:"accepted",label:"ACCEPTED",shortLabel:"ACCEPTED"}],Lr={saved:{dot:"bg-pandora",bg:"bg-champagne-100",bgActive:"bg-pandora",text:"text-wine",textActive:"text-white",border:"border-pandora/30"},in_progress:{dot:"bg-champagne-400",bg:"bg-champagne-50",bgActive:"bg-champagne-400",text:"text-wine",textActive:"text-wine",border:"border-champagne-300"},applied:{dot:"bg-teal",bg:"bg-teal-100",bgActive:"bg-teal",text:"text-wine",textActive:"text-white",border:"border-teal/30"},interviewing:{dot:"bg-flatred",bg:"bg-flatred-50",bgActive:"bg-flatred",text:"text-wine",textActive:"text-white",border:"border-flatred/30"},offer:{dot:"bg-pandora-500",bg:"bg-pandora-50",bgActive:"bg-pandora-500",text:"text-wine",textActive:"text-white",border:"border-pandora/30"},accepted:{dot:"bg-teal-600",bg:"bg-teal-100",bgActive:"bg-teal-600",text:"text-wine",textActive:"text-white",border:"border-teal-600/30"},rejected:{dot:"bg-sage-600",bg:"bg-sage-100",bgActive:"bg-sage-600",text:"text-wine",textActive:"text-white",border:"border-sage/30"},withdrawn:{dot:"bg-sage-400",bg:"bg-sage-50",bgActive:"bg-sage-400",text:"text-wine",textActive:"text-wine-400",border:"border-sage/30"}};function Er({postings:e,activeStatus:n,onStatusClick:s}){const r=Qt.reduce((d,u)=>(d[u.status]=e.filter(h=>h.status===u.status).length,d),{}),a=e.filter(d=>d.status==="rejected").length,o=e.filter(d=>d.status==="withdrawn").length,c=a+o,i=d=>{s(n===d?null:d)};return t.jsx("div",{className:"sticky top-0 z-sticky border-b border-sage/20 bg-champagne-100/80 backdrop-blur-sm",children:t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[Qt.map((d,u)=>{const h=r[d.status],f=n===d.status,g=Lr[d.status],x=h>0;return t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{onClick:()=>i(d.status),className:`
                    group relative flex items-center gap-2 rounded-lg px-3 py-2
                    transition-all duration-base
                    ${f?`${g.bgActive} ${g.textActive} shadow-md`:`${g.bg} ${g.text} hover:shadow-sm`}
                    ${x?"cursor-pointer":"cursor-default opacity-60"}
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2
                  `,disabled:!x&&!f,children:[t.jsx("span",{className:`
                      h-2 w-2 rounded-full
                      ${f?"bg-white/80":g.dot}
                      transition-transform duration-base
                      ${f?"scale-110":"group-hover:scale-110"}
                    `}),t.jsx("span",{className:"text-xs font-semibold tracking-wide",children:d.label}),h>0&&t.jsx("span",{className:`
                        ml-1 rounded-full px-1.5 py-0.5 text-xs font-bold
                        ${f?"bg-white/20 text-white":"bg-white/80 text-wine shadow-sm"}
                        transition-all duration-base
                      `,children:h}),h===0&&t.jsx("span",{className:"text-xs opacity-40",children:"– –"})]}),u<Qt.length-1&&t.jsx("svg",{className:"mx-1 h-4 w-4 flex-shrink-0 text-sage/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]},d.status)}),t.jsx("div",{className:"flex-1"}),c>0&&t.jsxs("div",{className:"flex items-center gap-2 border-l border-sage/30 pl-4",children:[a>0&&t.jsxs("button",{onClick:()=>i("rejected"),className:`
                    flex items-center gap-1.5 rounded-lg px-2.5 py-1.5
                    transition-all duration-base
                    ${n==="rejected"?"bg-flatred-700 text-white shadow-md":"bg-flatred-50 text-flatred-700 hover:bg-flatred-100"}
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred
                  `,children:[t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),t.jsx("span",{className:"text-xs font-medium",children:"Rejected"}),t.jsx("span",{className:"rounded-full bg-white/80 px-1.5 text-xs font-bold text-flatred-700",children:a})]}),o>0&&t.jsxs("button",{onClick:()=>i("withdrawn"),className:`
                    flex items-center gap-1.5 rounded-lg px-2.5 py-1.5
                    transition-all duration-base
                    ${n==="withdrawn"?"bg-sage-600 text-white shadow-md":"bg-sage-100 text-sage-700 hover:bg-sage-200"}
                    focus:outline-none focus-visible:ring-2 focus-visible:ring-sage
                  `,children:[t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),t.jsx("span",{className:"text-xs font-medium",children:"Withdrawn"}),t.jsx("span",{className:"rounded-full bg-white/80 px-1.5 text-xs font-bold text-sage-700",children:o})]})]}),n&&t.jsxs("button",{onClick:()=>s(null),className:"btn btn-sm btn-ghost ml-2",children:[t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})})})}const $t=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ze(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function hn(e){return"nodeType"in e}function se(e){var n,s;return e?Ze(e)?e:hn(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function mn(e){const{Document:n}=se(e);return e instanceof n}function xt(e){return Ze(e)?!1:e instanceof se(e).HTMLElement}function Gn(e){return e instanceof se(e).SVGElement}function et(e){return e?Ze(e)?e.document:hn(e)?mn(e)?e:xt(e)||Gn(e)?e.ownerDocument:document:document:document}const De=$t?l.useLayoutEffect:l.useEffect;function zt(e){const n=l.useRef(e);return De(()=>{n.current=e}),l.useCallback(function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return n.current==null?void 0:n.current(...r)},[])}function Dr(){const e=l.useRef(null),n=l.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),s=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ut(e,n){n===void 0&&(n=[e]);const s=l.useRef(e);return De(()=>{s.current!==e&&(s.current=e)},n),s}function ft(e,n){const s=l.useRef();return l.useMemo(()=>{const r=e(s.current);return s.current=r,r},[...n])}function Mt(e){const n=zt(e),s=l.useRef(null),r=l.useCallback(a=>{a!==s.current&&(n==null||n(a,s.current)),s.current=a},[]);return[s,r]}function At(e){const n=l.useRef();return l.useEffect(()=>{n.current=e},[e]),n.current}let Zt={};function Ft(e,n){return l.useMemo(()=>{if(n)return n;const s=Zt[e]==null?0:Zt[e]+1;return Zt[e]=s,e+"-"+s},[e,n])}function Xn(e){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return r.reduce((o,c)=>{const i=Object.entries(c);for(const[d,u]of i){const h=o[d];h!=null&&(o[d]=h+e*u)}return o},{...n})}}const Ge=Xn(1),ht=Xn(-1);function Mr(e){return"clientX"in e&&"clientY"in e}function xn(e){if(!e)return!1;const{KeyboardEvent:n}=se(e.target);return n&&e instanceof n}function Ar(e){if(!e)return!1;const{TouchEvent:n}=se(e.target);return n&&e instanceof n}function Rt(e){if(Ar(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return Mr(e)?{x:e.clientX,y:e.clientY}:null}const Xe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Xe.Translate.toString(e),Xe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:r}=e;return n+" "+s+"ms "+r}}}),Mn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Rr(e){return e.matches(Mn)?e:e.querySelector(Mn)}const Ir={display:"none"};function Tr(e){let{id:n,value:s}=e;return U.createElement("div",{id:n,style:Ir},s)}function Or(e){let{id:n,announcement:s,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return U.createElement("div",{id:n,style:a,role:"status","aria-live":r,"aria-atomic":!0},s)}function Pr(){const[e,n]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&n(r)},[]),announcement:e}}const qn=l.createContext(null);function $r(e){const n=l.useContext(qn);l.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function zr(){const[e]=l.useState(()=>new Set),n=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:a,event:o}=r;e.forEach(c=>{var i;return(i=c[a])==null?void 0:i.call(c,o)})},[e]),n]}const Fr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Br={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function Wr(e){let{announcements:n=Br,container:s,hiddenTextDescribedById:r,screenReaderInstructions:a=Fr}=e;const{announce:o,announcement:c}=Pr(),i=Ft("DndLiveRegion"),[d,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),$r(l.useMemo(()=>({onDragStart(f){let{active:g}=f;o(n.onDragStart({active:g}))},onDragMove(f){let{active:g,over:x}=f;n.onDragMove&&o(n.onDragMove({active:g,over:x}))},onDragOver(f){let{active:g,over:x}=f;o(n.onDragOver({active:g,over:x}))},onDragEnd(f){let{active:g,over:x}=f;o(n.onDragEnd({active:g,over:x}))},onDragCancel(f){let{active:g,over:x}=f;o(n.onDragCancel({active:g,over:x}))}}),[o,n])),!d)return null;const h=U.createElement(U.Fragment,null,U.createElement(Tr,{id:r,value:a.draggable}),U.createElement(Or,{id:i,announcement:c}));return s?ot.createPortal(h,s):h}var X;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(X||(X={}));function It(){}function An(e,n){return l.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Ur(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return l.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const ve=Object.freeze({x:0,y:0});function Jn(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Hr(e,n){const s=Rt(e);if(!s)return"0 0";const r={x:(s.x-n.left)/n.width*100,y:(s.y-n.top)/n.height*100};return r.x+"% "+r.y+"%"}function Qn(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return s-r}function _r(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return r-s}function Rn(e){let{left:n,top:s,height:r,width:a}=e;return[{x:n,y:s},{x:n+a,y:s},{x:n,y:s+r},{x:n+a,y:s+r}]}function Zn(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function In(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const Vr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const a=In(n,n.left,n.top),o=[];for(const c of r){const{id:i}=c,d=s.get(i);if(d){const u=Jn(In(d),a);o.push({id:i,data:{droppableContainer:c,value:u}})}}return o.sort(Qn)},Kr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const a=Rn(n),o=[];for(const c of r){const{id:i}=c,d=s.get(i);if(d){const u=Rn(d),h=a.reduce((g,x,m)=>g+Jn(u[m],x),0),f=Number((h/4).toFixed(4));o.push({id:i,data:{droppableContainer:c,value:f}})}}return o.sort(Qn)};function Yr(e,n){const s=Math.max(n.top,e.top),r=Math.max(n.left,e.left),a=Math.min(n.left+n.width,e.left+e.width),o=Math.min(n.top+n.height,e.top+e.height),c=a-r,i=o-s;if(r<a&&s<o){const d=n.width*n.height,u=e.width*e.height,h=c*i,f=h/(d+u-h);return Number(f.toFixed(4))}return 0}const Gr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const a=[];for(const o of r){const{id:c}=o,i=s.get(c);if(i){const d=Yr(i,n);d>0&&a.push({id:c,data:{droppableContainer:o,value:d}})}}return a.sort(_r)};function Xr(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function es(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:ve}function qr(e){return function(s){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce((c,i)=>({...c,top:c.top+e*i.y,bottom:c.bottom+e*i.y,left:c.left+e*i.x,right:c.right+e*i.x}),{...s})}}const Jr=qr(1);function ts(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Qr(e,n,s){const r=ts(n);if(!r)return e;const{scaleX:a,scaleY:o,x:c,y:i}=r,d=e.left-c-(1-a)*parseFloat(s),u=e.top-i-(1-o)*parseFloat(s.slice(s.indexOf(" ")+1)),h=a?e.width/a:e.width,f=o?e.height/o:e.height;return{width:h,height:f,top:u,right:d+h,bottom:u+f,left:d}}const Zr={ignoreTransform:!1};function gt(e,n){n===void 0&&(n=Zr);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:u,transformOrigin:h}=se(e).getComputedStyle(e);u&&(s=Qr(s,u,h))}const{top:r,left:a,width:o,height:c,bottom:i,right:d}=s;return{top:r,left:a,width:o,height:c,bottom:i,right:d}}function Tn(e){return gt(e,{ignoreTransform:!0})}function ea(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function ta(e,n){return n===void 0&&(n=se(e).getComputedStyle(e)),n.position==="fixed"}function na(e,n){n===void 0&&(n=se(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=n[a];return typeof o=="string"?s.test(o):!1})}function Bt(e,n){const s=[];function r(a){if(n!=null&&s.length>=n||!a)return s;if(mn(a)&&a.scrollingElement!=null&&!s.includes(a.scrollingElement))return s.push(a.scrollingElement),s;if(!xt(a)||Gn(a)||s.includes(a))return s;const o=se(e).getComputedStyle(a);return a!==e&&na(a,o)&&s.push(a),ta(a,o)?s:r(a.parentNode)}return e?r(e):s}function ns(e){const[n]=Bt(e,1);return n??null}function en(e){return!$t||!e?null:Ze(e)?e:hn(e)?mn(e)||e===et(e).scrollingElement?window:xt(e)?e:null:null}function ss(e){return Ze(e)?e.scrollX:e.scrollLeft}function rs(e){return Ze(e)?e.scrollY:e.scrollTop}function cn(e){return{x:ss(e),y:rs(e)}}var J;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(J||(J={}));function as(e){return!$t||!e?!1:e===document.scrollingElement}function os(e){const n={x:0,y:0},s=as(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},a=e.scrollTop<=n.y,o=e.scrollLeft<=n.x,c=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:a,isLeft:o,isBottom:c,isRight:i,maxScroll:r,minScroll:n}}const sa={x:.2,y:.2};function ra(e,n,s,r,a){let{top:o,left:c,right:i,bottom:d}=s;r===void 0&&(r=10),a===void 0&&(a=sa);const{isTop:u,isBottom:h,isLeft:f,isRight:g}=os(e),x={x:0,y:0},m={x:0,y:0},v={height:n.height*a.y,width:n.width*a.x};return!u&&o<=n.top+v.height?(x.y=J.Backward,m.y=r*Math.abs((n.top+v.height-o)/v.height)):!h&&d>=n.bottom-v.height&&(x.y=J.Forward,m.y=r*Math.abs((n.bottom-v.height-d)/v.height)),!g&&i>=n.right-v.width?(x.x=J.Forward,m.x=r*Math.abs((n.right-v.width-i)/v.width)):!f&&c<=n.left+v.width&&(x.x=J.Backward,m.x=r*Math.abs((n.left+v.width-c)/v.width)),{direction:x,speed:m}}function aa(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:c}=window;return{top:0,left:0,right:o,bottom:c,width:o,height:c}}const{top:n,left:s,right:r,bottom:a}=e.getBoundingClientRect();return{top:n,left:s,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function is(e){return e.reduce((n,s)=>Ge(n,cn(s)),ve)}function oa(e){return e.reduce((n,s)=>n+ss(s),0)}function ia(e){return e.reduce((n,s)=>n+rs(s),0)}function ls(e,n){if(n===void 0&&(n=gt),!e)return;const{top:s,left:r,bottom:a,right:o}=n(e);ns(e)&&(a<=0||o<=0||s>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const la=[["x",["left","right"],oa],["y",["top","bottom"],ia]];class fn{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Bt(s),a=is(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[o,c,i]of la)for(const d of c)Object.defineProperty(this,d,{get:()=>{const u=i(r),h=a[o]-u;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lt{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...s)})},this.target=n}add(n,s,r){var a;(a=this.target)==null||a.addEventListener(n,s,r),this.listeners.push([n,s,r])}}function ca(e){const{EventTarget:n}=se(e);return e instanceof n?e:et(e)}function tn(e,n){const s=Math.abs(e.x),r=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+r**2)>n:"x"in n&&"y"in n?s>n.x&&r>n.y:"x"in n?s>n.x:"y"in n?r>n.y:!1}var fe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(fe||(fe={}));function On(e){e.preventDefault()}function da(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(A||(A={}));const cs={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter,A.Tab]},ua=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case A.Right:return{...s,x:s.x+25};case A.Left:return{...s,x:s.x-25};case A.Down:return{...s,y:s.y+25};case A.Up:return{...s,y:s.y-25}}};class gn{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new lt(et(s)),this.windowListeners=new lt(se(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fe.Resize,this.handleCancel),this.windowListeners.add(fe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,r=n.node.current;r&&ls(r),s(ve)}handleKeyDown(n){if(xn(n)){const{active:s,context:r,options:a}=this.props,{keyboardCodes:o=cs,coordinateGetter:c=ua,scrollBehavior:i="smooth"}=a,{code:d}=n;if(o.end.includes(d)){this.handleEnd(n);return}if(o.cancel.includes(d)){this.handleCancel(n);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:ve;this.referenceCoordinates||(this.referenceCoordinates=h);const f=c(n,{active:s,context:r.current,currentCoordinates:h});if(f){const g=ht(f,h),x={x:0,y:0},{scrollableAncestors:m}=r.current;for(const v of m){const j=n.code,{isTop:b,isRight:k,isLeft:y,isBottom:C,maxScroll:E,minScroll:w}=os(v),L=aa(v),M={x:Math.min(j===A.Right?L.right-L.width/2:L.right,Math.max(j===A.Right?L.left:L.left+L.width/2,f.x)),y:Math.min(j===A.Down?L.bottom-L.height/2:L.bottom,Math.max(j===A.Down?L.top:L.top+L.height/2,f.y))},I=j===A.Right&&!k||j===A.Left&&!y,P=j===A.Down&&!C||j===A.Up&&!b;if(I&&M.x!==f.x){const T=v.scrollLeft+g.x,_=j===A.Right&&T<=E.x||j===A.Left&&T>=w.x;if(_&&!g.y){v.scrollTo({left:T,behavior:i});return}_?x.x=v.scrollLeft-T:x.x=j===A.Right?v.scrollLeft-E.x:v.scrollLeft-w.x,x.x&&v.scrollBy({left:-x.x,behavior:i});break}else if(P&&M.y!==f.y){const T=v.scrollTop+g.y,_=j===A.Down&&T<=E.y||j===A.Up&&T>=w.y;if(_&&!g.x){v.scrollTo({top:T,behavior:i});return}_?x.y=v.scrollTop-T:x.y=j===A.Down?v.scrollTop-E.y:v.scrollTop-w.y,x.y&&v.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(n,Ge(ht(f,this.referenceCoordinates),x))}}}handleMove(n,s){const{onMove:r}=this.props;n.preventDefault(),r(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gn.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:r=cs,onActivation:a}=n,{active:o}=s;const{code:c}=e.nativeEvent;if(r.start.includes(c)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Pn(e){return!!(e&&"distance"in e)}function $n(e){return!!(e&&"delay"in e)}class pn{constructor(n,s,r){var a;r===void 0&&(r=ca(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:o}=n,{target:c}=o;this.props=n,this.events=s,this.document=et(c),this.documentListeners=new lt(this.document),this.listeners=new lt(r),this.windowListeners=new lt(se(c)),this.initialCoordinates=(a=Rt(o))!=null?a:ve,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(fe.Resize,this.handleCancel),this.windowListeners.add(fe.DragStart,On),this.windowListeners.add(fe.VisibilityChange,this.handleCancel),this.windowListeners.add(fe.ContextMenu,On),this.documentListeners.add(fe.Keydown,this.handleKeydown),s){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($n(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(Pn(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:r,onPending:a}=this.props;a(r,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(fe.Click,da,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fe.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:r,initialCoordinates:a,props:o}=this,{onMove:c,options:{activationConstraint:i}}=o;if(!a)return;const d=(s=Rt(n))!=null?s:ve,u=ht(a,d);if(!r&&i){if(Pn(i)){if(i.tolerance!=null&&tn(u,i.tolerance))return this.handleCancel();if(tn(u,i.distance))return this.handleStart()}if($n(i)&&tn(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}n.cancelable&&n.preventDefault(),c(d)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===A.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const ha={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class bn extends pn{constructor(n){const{event:s}=n,r=et(s.target);super(n,ha,r)}}bn.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return!s.isPrimary||s.button!==0?!1:(r==null||r({event:s}),!0)}}];const ma={move:{name:"mousemove"},end:{name:"mouseup"}};var dn;(function(e){e[e.RightClick=2]="RightClick"})(dn||(dn={}));class xa extends pn{constructor(n){super(n,ma,et(n.event.target))}}xa.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return s.button===dn.RightClick?!1:(r==null||r({event:s}),!0)}}];const nn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fa extends pn{constructor(n){super(n,nn)}static setup(){return window.addEventListener(nn.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(nn.move.name,n)};function n(){}}}fa.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;const{touches:a}=s;return a.length>1?!1:(r==null||r({event:s}),!0)}}];var ct;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ct||(ct={}));var Tt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Tt||(Tt={}));function ga(e){let{acceleration:n,activator:s=ct.Pointer,canScroll:r,draggingRect:a,enabled:o,interval:c=5,order:i=Tt.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:g}=e;const x=ba({delta:f,disabled:!o}),[m,v]=Dr(),j=l.useRef({x:0,y:0}),b=l.useRef({x:0,y:0}),k=l.useMemo(()=>{switch(s){case ct.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case ct.DraggableRect:return a}},[s,a,d]),y=l.useRef(null),C=l.useCallback(()=>{const w=y.current;if(!w)return;const L=j.current.x*b.current.x,M=j.current.y*b.current.y;w.scrollBy(L,M)},[]),E=l.useMemo(()=>i===Tt.TreeOrder?[...u].reverse():u,[i,u]);l.useEffect(()=>{if(!o||!u.length||!k){v();return}for(const w of E){if((r==null?void 0:r(w))===!1)continue;const L=u.indexOf(w),M=h[L];if(!M)continue;const{direction:I,speed:P}=ra(w,M,k,n,g);for(const T of["x","y"])x[T][I[T]]||(P[T]=0,I[T]=0);if(P.x>0||P.y>0){v(),y.current=w,m(C,c),j.current=P,b.current=I;return}}j.current={x:0,y:0},b.current={x:0,y:0},v()},[n,C,r,v,o,c,JSON.stringify(k),JSON.stringify(x),m,u,E,h,JSON.stringify(g)])}const pa={x:{[J.Backward]:!1,[J.Forward]:!1},y:{[J.Backward]:!1,[J.Forward]:!1}};function ba(e){let{delta:n,disabled:s}=e;const r=At(n);return ft(a=>{if(s||!r||!a)return pa;const o={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[J.Backward]:a.x[J.Backward]||o.x===-1,[J.Forward]:a.x[J.Forward]||o.x===1},y:{[J.Backward]:a.y[J.Backward]||o.y===-1,[J.Forward]:a.y[J.Forward]||o.y===1}}},[s,n,r])}function va(e,n){const s=n!=null?e.get(n):void 0,r=s?s.node.current:null;return ft(a=>{var o;return n==null?null:(o=r??a)!=null?o:null},[r,n])}function wa(e,n){return l.useMemo(()=>e.reduce((s,r)=>{const{sensor:a}=r,o=a.activators.map(c=>({eventName:c.eventName,handler:n(c.handler,r)}));return[...s,...o]},[]),[e,n])}var mt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mt||(mt={}));var un;(function(e){e.Optimized="optimized"})(un||(un={}));const zn=new Map;function ya(e,n){let{dragging:s,dependencies:r,config:a}=n;const[o,c]=l.useState(null),{frequency:i,measure:d,strategy:u}=a,h=l.useRef(e),f=j(),g=ut(f),x=l.useCallback(function(b){b===void 0&&(b=[]),!g.current&&c(k=>k===null?b:k.concat(b.filter(y=>!k.includes(y))))},[g]),m=l.useRef(null),v=ft(b=>{if(f&&!s)return zn;if(!b||b===zn||h.current!==e||o!=null){const k=new Map;for(let y of e){if(!y)continue;if(o&&o.length>0&&!o.includes(y.id)&&y.rect.current){k.set(y.id,y.rect.current);continue}const C=y.node.current,E=C?new fn(d(C),C):null;y.rect.current=E,E&&k.set(y.id,E)}return k}return b},[e,o,s,f,d]);return l.useEffect(()=>{h.current=e},[e]),l.useEffect(()=>{f||x()},[s,f]),l.useEffect(()=>{o&&o.length>0&&c(null)},[JSON.stringify(o)]),l.useEffect(()=>{f||typeof i!="number"||m.current!==null||(m.current=setTimeout(()=>{x(),m.current=null},i))},[i,f,x,...r]),{droppableRects:v,measureDroppableContainers:x,measuringScheduled:o!=null};function j(){switch(u){case mt.Always:return!1;case mt.BeforeDragging:return s;default:return!s}}}function vn(e,n){return ft(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function ja(e,n){return vn(e,n)}function Na(e){let{callback:n,disabled:s}=e;const r=zt(n),a=l.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,s]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Wt(e){let{callback:n,disabled:s}=e;const r=zt(n),a=l.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[s]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function ka(e){return new fn(gt(e),e)}function Fn(e,n,s){n===void 0&&(n=ka);const[r,a]=l.useState(null);function o(){a(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??s)!=null?u:null}const h=n(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const c=Na({callback(d){if(e)for(const u of d){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),i=Wt({callback:o});return De(()=>{o(),e?(i==null||i.observe(e),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),c==null||c.disconnect())},[e]),r}function Ca(e){const n=vn(e);return es(e,n)}const Bn=[];function Sa(e){const n=l.useRef(e),s=ft(r=>e?r&&r!==Bn&&e&&n.current&&e.parentNode===n.current.parentNode?r:Bt(e):Bn,[e]);return l.useEffect(()=>{n.current=e},[e]),s}function La(e){const[n,s]=l.useState(null),r=l.useRef(e),a=l.useCallback(o=>{const c=en(o.target);c&&s(i=>i?(i.set(c,cn(c)),new Map(i)):null)},[]);return l.useEffect(()=>{const o=r.current;if(e!==o){c(o);const i=e.map(d=>{const u=en(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,cn(u)]):null}).filter(d=>d!=null);s(i.length?new Map(i):null),r.current=e}return()=>{c(e),c(o)};function c(i){i.forEach(d=>{const u=en(d);u==null||u.removeEventListener("scroll",a)})}},[a,e]),l.useMemo(()=>e.length?n?Array.from(n.values()).reduce((o,c)=>Ge(o,c),ve):is(e):ve,[e,n])}function Wn(e,n){n===void 0&&(n=[]);const s=l.useRef(null);return l.useEffect(()=>{s.current=null},n),l.useEffect(()=>{const r=e!==ve;r&&!s.current&&(s.current=e),!r&&s.current&&(s.current=null)},[e]),s.current?ht(e,s.current):ve}function Ea(e){l.useEffect(()=>{if(!$t)return;const n=e.map(s=>{let{sensor:r}=s;return r.setup==null?void 0:r.setup()});return()=>{for(const s of n)s==null||s()}},e.map(n=>{let{sensor:s}=n;return s}))}function Da(e,n){return l.useMemo(()=>e.reduce((s,r)=>{let{eventName:a,handler:o}=r;return s[a]=c=>{o(c,n)},s},{}),[e,n])}function ds(e){return l.useMemo(()=>e?ea(e):null,[e])}const Un=[];function Ma(e,n){n===void 0&&(n=gt);const[s]=e,r=ds(s?se(s):null),[a,o]=l.useState(Un);function c(){o(()=>e.length?e.map(d=>as(d)?r:new fn(n(d),d)):Un)}const i=Wt({callback:c});return De(()=>{i==null||i.disconnect(),c(),e.forEach(d=>i==null?void 0:i.observe(d))},[e]),a}function us(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return xt(n)?n:e}function Aa(e){let{measure:n}=e;const[s,r]=l.useState(null),a=l.useCallback(u=>{for(const{target:h}of u)if(xt(h)){r(f=>{const g=n(h);return f?{...f,width:g.width,height:g.height}:g});break}},[n]),o=Wt({callback:a}),c=l.useCallback(u=>{const h=us(u);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?n(h):null)},[n,o]),[i,d]=Mt(c);return l.useMemo(()=>({nodeRef:i,rect:s,setRef:d}),[s,i,d])}const Ra=[{sensor:bn,options:{}},{sensor:gn,options:{}}],Ia={current:{}},Et={draggable:{measure:Tn},droppable:{measure:Tn,strategy:mt.WhileDragging,frequency:un.Optimized},dragOverlay:{measure:gt}};class dt extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,r;return(s=(r=this.get(n))==null?void 0:r.node.current)!=null?s:void 0}}const Ta={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new dt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:It},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Et,measureDroppableContainers:It,windowRect:null,measuringScheduled:!1},hs={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:It,draggableNodes:new Map,over:null,measureDroppableContainers:It},pt=l.createContext(hs),ms=l.createContext(Ta);function Oa(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new dt}}}function Pa(e,n){switch(n.type){case X.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case X.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case X.DragEnd:case X.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case X.RegisterDroppable:{const{element:s}=n,{id:r}=s,a=new dt(e.droppable.containers);return a.set(r,s),{...e,droppable:{...e.droppable,containers:a}}}case X.SetDroppableDisabled:{const{id:s,key:r,disabled:a}=n,o=e.droppable.containers.get(s);if(!o||r!==o.key)return e;const c=new dt(e.droppable.containers);return c.set(s,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:c}}}case X.UnregisterDroppable:{const{id:s,key:r}=n,a=e.droppable.containers.get(s);if(!a||r!==a.key)return e;const o=new dt(e.droppable.containers);return o.delete(s),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function $a(e){let{disabled:n}=e;const{active:s,activatorEvent:r,draggableNodes:a}=l.useContext(pt),o=At(r),c=At(s==null?void 0:s.id);return l.useEffect(()=>{if(!n&&!r&&o&&c!=null){if(!xn(o)||document.activeElement===o.target)return;const i=a.get(c);if(!i)return;const{activatorNode:d,node:u}=i;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[d.current,u.current]){if(!h)continue;const f=Rr(h);if(f){f.focus();break}}})}},[r,n,a,c,o]),null}function xs(e,n){let{transform:s,...r}=n;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...r}),s):s}function za(e){return l.useMemo(()=>({draggable:{...Et.draggable,...e==null?void 0:e.draggable},droppable:{...Et.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Et.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Fa(e){let{activeNode:n,measure:s,initialRect:r,config:a=!0}=e;const o=l.useRef(!1),{x:c,y:i}=typeof a=="boolean"?{x:a,y:a}:a;De(()=>{if(!c&&!i||!n){o.current=!1;return}if(o.current||!r)return;const u=n==null?void 0:n.node.current;if(!u||u.isConnected===!1)return;const h=s(u),f=es(h,r);if(c||(f.x=0),i||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const g=ns(u);g&&g.scrollBy({top:f.y,left:f.x})}},[n,c,i,r,s])}const Ut=l.createContext({...ve,scaleX:1,scaleY:1});var Pe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Pe||(Pe={}));const Ba=l.memo(function(n){var s,r,a,o;let{id:c,accessibility:i,autoScroll:d=!0,children:u,sensors:h=Ra,collisionDetection:f=Gr,measuring:g,modifiers:x,...m}=n;const v=l.useReducer(Pa,void 0,Oa),[j,b]=v,[k,y]=zr(),[C,E]=l.useState(Pe.Uninitialized),w=C===Pe.Initialized,{draggable:{active:L,nodes:M,translate:I},droppable:{containers:P}}=j,T=L!=null?M.get(L):null,_=l.useRef({initial:null,translated:null}),F=l.useMemo(()=>{var Y;return L!=null?{id:L,data:(Y=T==null?void 0:T.data)!=null?Y:Ia,rect:_}:null},[L,T]),Q=l.useRef(null),[re,Z]=l.useState(null),[R,V]=l.useState(null),B=ut(m,Object.values(m)),W=Ft("DndDescribedBy",c),me=l.useMemo(()=>P.getEnabled(),[P]),ee=za(g),{droppableRects:ge,measureDroppableContainers:S,measuringScheduled:$}=ya(me,{dragging:w,dependencies:[I.x,I.y],config:ee.droppable}),z=va(M,L),we=l.useMemo(()=>R?Rt(R):null,[R]),ae=rt(),ye=ja(z,ee.draggable.measure);Fa({activeNode:L!=null?M.get(L):null,config:ae.layoutShiftCompensation,initialRect:ye,measure:ee.draggable.measure});const K=Fn(z,ee.draggable.measure,ye),Ue=Fn(z?z.parentElement:null),ue=l.useRef({activatorEvent:null,active:null,activeNode:z,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),tt=P.getNodeFor((s=ue.current.over)==null?void 0:s.id),Le=Aa({measure:ee.dragOverlay.measure}),Me=(r=Le.nodeRef.current)!=null?r:z,oe=w?(a=Le.rect)!=null?a:K:null,ie=!!(Le.nodeRef.current&&Le.rect),nt=Ca(ie?null:K),st=ds(Me?se(Me):null),pe=Sa(w?tt??z:null),He=Ma(pe),ze=xs(x,{transform:{x:I.x-nt.x,y:I.y-nt.y,scaleX:1,scaleY:1},activatorEvent:R,active:F,activeNodeRect:K,containerNodeRect:Ue,draggingNodeRect:oe,over:ue.current.over,overlayNodeRect:Le.rect,scrollableAncestors:pe,scrollableAncestorRects:He,windowRect:st}),bt=we?Ge(we,I):null,vt=La(pe),Ae=Wn(vt),Ht=Wn(vt,[K]),Re=Ge(ze,Ae),Ie=oe?Jr(oe,ze):null,Fe=F&&Ie?f({active:F,collisionRect:Ie,droppableRects:ge,droppableContainers:me,pointerCoordinates:bt}):null,wt=Zn(Fe,"id"),[je,be]=l.useState(null),_t=ie?ze:Ge(ze,Ht),Vt=Xr(_t,(o=je==null?void 0:je.rect)!=null?o:null,K),_e=l.useRef(null),yt=l.useCallback((Y,te)=>{let{sensor:q,options:Ne}=te;if(Q.current==null)return;const le=M.get(Q.current);if(!le)return;const ne=Y.nativeEvent,ce=new q({active:Q.current,activeNode:le,event:ne,options:Ne,context:ue,onAbort(G){if(!M.get(G))return;const{onDragAbort:he}=B.current,xe={id:G};he==null||he(xe),k({type:"onDragAbort",event:xe})},onPending(G,ke,he,xe){if(!M.get(G))return;const{onDragPending:We}=B.current,Ce={id:G,constraint:ke,initialCoordinates:he,offset:xe};We==null||We(Ce),k({type:"onDragPending",event:Ce})},onStart(G){const ke=Q.current;if(ke==null)return;const he=M.get(ke);if(!he)return;const{onDragStart:xe}=B.current,Be={activatorEvent:ne,active:{id:ke,data:he.data,rect:_}};ot.unstable_batchedUpdates(()=>{xe==null||xe(Be),E(Pe.Initializing),b({type:X.DragStart,initialCoordinates:G,active:ke}),k({type:"onDragStart",event:Be}),Z(_e.current),V(ne)})},onMove(G){b({type:X.DragMove,coordinates:G})},onEnd:Te(X.DragEnd),onCancel:Te(X.DragCancel)});_e.current=ce;function Te(G){return async function(){const{active:he,collisions:xe,over:Be,scrollAdjustedTranslate:We}=ue.current;let Ce=null;if(he&&We){const{cancelDrop:Oe}=B.current;Ce={activatorEvent:ne,active:he,collisions:xe,delta:We,over:Be},G===X.DragEnd&&typeof Oe=="function"&&await Promise.resolve(Oe(Ce))&&(G=X.DragCancel)}Q.current=null,ot.unstable_batchedUpdates(()=>{b({type:G}),E(Pe.Uninitialized),be(null),Z(null),V(null),_e.current=null;const Oe=G===X.DragEnd?"onDragEnd":"onDragCancel";if(Ce){const Ke=B.current[Oe];Ke==null||Ke(Ce),k({type:Oe,event:Ce})}})}}},[M]),Kt=l.useCallback((Y,te)=>(q,Ne)=>{const le=q.nativeEvent,ne=M.get(Ne);if(Q.current!==null||!ne||le.dndKit||le.defaultPrevented)return;const ce={active:ne};Y(q,te.options,ce)===!0&&(le.dndKit={capturedBy:te.sensor},Q.current=Ne,yt(q,te))},[M,yt]),jt=wa(h,Kt);Ea(h),De(()=>{K&&C===Pe.Initializing&&E(Pe.Initialized)},[K,C]),l.useEffect(()=>{const{onDragMove:Y}=B.current,{active:te,activatorEvent:q,collisions:Ne,over:le}=ue.current;if(!te||!q)return;const ne={active:te,activatorEvent:q,collisions:Ne,delta:{x:Re.x,y:Re.y},over:le};ot.unstable_batchedUpdates(()=>{Y==null||Y(ne),k({type:"onDragMove",event:ne})})},[Re.x,Re.y]),l.useEffect(()=>{const{active:Y,activatorEvent:te,collisions:q,droppableContainers:Ne,scrollAdjustedTranslate:le}=ue.current;if(!Y||Q.current==null||!te||!le)return;const{onDragOver:ne}=B.current,ce=Ne.get(wt),Te=ce&&ce.rect.current?{id:ce.id,rect:ce.rect.current,data:ce.data,disabled:ce.disabled}:null,G={active:Y,activatorEvent:te,collisions:q,delta:{x:le.x,y:le.y},over:Te};ot.unstable_batchedUpdates(()=>{be(Te),ne==null||ne(G),k({type:"onDragOver",event:G})})},[wt]),De(()=>{ue.current={activatorEvent:R,active:F,activeNode:z,collisionRect:Ie,collisions:Fe,droppableRects:ge,draggableNodes:M,draggingNode:Me,draggingNodeRect:oe,droppableContainers:P,over:je,scrollableAncestors:pe,scrollAdjustedTranslate:Re},_.current={initial:oe,translated:Ie}},[F,z,Fe,Ie,M,Me,oe,ge,P,je,pe,Re]),ga({...ae,delta:I,draggingRect:Ie,pointerCoordinates:bt,scrollableAncestors:pe,scrollableAncestorRects:He});const Ve=l.useMemo(()=>({active:F,activeNode:z,activeNodeRect:K,activatorEvent:R,collisions:Fe,containerNodeRect:Ue,dragOverlay:Le,draggableNodes:M,droppableContainers:P,droppableRects:ge,over:je,measureDroppableContainers:S,scrollableAncestors:pe,scrollableAncestorRects:He,measuringConfiguration:ee,measuringScheduled:$,windowRect:st}),[F,z,K,R,Fe,Ue,Le,M,P,ge,je,S,pe,He,ee,$,st]),Nt=l.useMemo(()=>({activatorEvent:R,activators:jt,active:F,activeNodeRect:K,ariaDescribedById:{draggable:W},dispatch:b,draggableNodes:M,over:je,measureDroppableContainers:S}),[R,jt,F,K,b,W,M,je,S]);return U.createElement(qn.Provider,{value:y},U.createElement(pt.Provider,{value:Nt},U.createElement(ms.Provider,{value:Ve},U.createElement(Ut.Provider,{value:Vt},u)),U.createElement($a,{disabled:(i==null?void 0:i.restoreFocus)===!1})),U.createElement(Wr,{...i,hiddenTextDescribedById:W}));function rt(){const Y=(re==null?void 0:re.autoScrollEnabled)===!1,te=typeof d=="object"?d.enabled===!1:d===!1,q=w&&!Y&&!te;return typeof d=="object"?{...d,enabled:q}:{enabled:q}}}),Wa=l.createContext(null),Hn="button",Ua="Draggable";function Ha(e){let{id:n,data:s,disabled:r=!1,attributes:a}=e;const o=Ft(Ua),{activators:c,activatorEvent:i,active:d,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:g}=l.useContext(pt),{role:x=Hn,roleDescription:m="draggable",tabIndex:v=0}=a??{},j=(d==null?void 0:d.id)===n,b=l.useContext(j?Ut:Wa),[k,y]=Mt(),[C,E]=Mt(),w=Da(c,n),L=ut(s);De(()=>(f.set(n,{id:n,key:o,node:k,activatorNode:C,data:L}),()=>{const I=f.get(n);I&&I.key===o&&f.delete(n)}),[f,n]);const M=l.useMemo(()=>({role:x,tabIndex:v,"aria-disabled":r,"aria-pressed":j&&x===Hn?!0:void 0,"aria-roledescription":m,"aria-describedby":h.draggable}),[r,x,v,j,m,h.draggable]);return{active:d,activatorEvent:i,activeNodeRect:u,attributes:M,isDragging:j,listeners:r?void 0:w,node:k,over:g,setNodeRef:y,setActivatorNodeRef:E,transform:b}}function _a(){return l.useContext(ms)}const Va="Droppable",Ka={timeout:25};function fs(e){let{data:n,disabled:s=!1,id:r,resizeObserverConfig:a}=e;const o=Ft(Va),{active:c,dispatch:i,over:d,measureDroppableContainers:u}=l.useContext(pt),h=l.useRef({disabled:s}),f=l.useRef(!1),g=l.useRef(null),x=l.useRef(null),{disabled:m,updateMeasurementsFor:v,timeout:j}={...Ka,...a},b=ut(v??r),k=l.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),x.current=null},j)},[j]),y=Wt({callback:k,disabled:m||!c}),C=l.useCallback((M,I)=>{y&&(I&&(y.unobserve(I),f.current=!1),M&&y.observe(M))},[y]),[E,w]=Mt(C),L=ut(n);return l.useEffect(()=>{!y||!E.current||(y.disconnect(),f.current=!1,y.observe(E.current))},[E,y]),l.useEffect(()=>(i({type:X.RegisterDroppable,element:{id:r,key:o,disabled:s,node:E,rect:g,data:L}}),()=>i({type:X.UnregisterDroppable,key:o,id:r})),[r]),l.useEffect(()=>{s!==h.current.disabled&&(i({type:X.SetDroppableDisabled,id:r,key:o,disabled:s}),h.current.disabled=s)},[r,o,s,i]),{active:c,rect:g,isOver:(d==null?void 0:d.id)===r,node:E,over:d,setNodeRef:w}}function Ya(e){let{animation:n,children:s}=e;const[r,a]=l.useState(null),[o,c]=l.useState(null),i=At(s);return!s&&!r&&i&&a(i),De(()=>{if(!o)return;const d=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(d==null||u==null){a(null);return}Promise.resolve(n(u,o)).then(()=>{a(null)})},[n,r,o]),U.createElement(U.Fragment,null,s,r?l.cloneElement(r,{ref:c}):null)}const Ga={x:0,y:0,scaleX:1,scaleY:1};function Xa(e){let{children:n}=e;return U.createElement(pt.Provider,{value:hs},U.createElement(Ut.Provider,{value:Ga},n))}const qa={position:"fixed",touchAction:"none"},Ja=e=>xn(e)?"transform 250ms ease":void 0,Qa=l.forwardRef((e,n)=>{let{as:s,activatorEvent:r,adjustScale:a,children:o,className:c,rect:i,style:d,transform:u,transition:h=Ja}=e;if(!i)return null;const f=a?u:{...u,scaleX:1,scaleY:1},g={...qa,width:i.width,height:i.height,top:i.top,left:i.left,transform:Xe.Transform.toString(f),transformOrigin:a&&r?Hr(r,i):void 0,transition:typeof h=="function"?h(r):h,...d};return U.createElement(s,{className:c,style:g,ref:n},o)}),Za=e=>n=>{let{active:s,dragOverlay:r}=n;const a={},{styles:o,className:c}=e;if(o!=null&&o.active)for(const[i,d]of Object.entries(o.active))d!==void 0&&(a[i]=s.node.style.getPropertyValue(i),s.node.style.setProperty(i,d));if(o!=null&&o.dragOverlay)for(const[i,d]of Object.entries(o.dragOverlay))d!==void 0&&r.node.style.setProperty(i,d);return c!=null&&c.active&&s.node.classList.add(c.active),c!=null&&c.dragOverlay&&r.node.classList.add(c.dragOverlay),function(){for(const[d,u]of Object.entries(a))s.node.style.setProperty(d,u);c!=null&&c.active&&s.node.classList.remove(c.active)}},eo=e=>{let{transform:{initial:n,final:s}}=e;return[{transform:Xe.Transform.toString(n)},{transform:Xe.Transform.toString(s)}]},to={duration:250,easing:"ease",keyframes:eo,sideEffects:Za({styles:{active:{opacity:"0"}}})};function no(e){let{config:n,draggableNodes:s,droppableContainers:r,measuringConfiguration:a}=e;return zt((o,c)=>{if(n===null)return;const i=s.get(o);if(!i)return;const d=i.node.current;if(!d)return;const u=us(c);if(!u)return;const{transform:h}=se(c).getComputedStyle(c),f=ts(h);if(!f)return;const g=typeof n=="function"?n:so(n);return ls(d,a.draggable.measure),g({active:{id:o,data:i.data,node:d,rect:a.draggable.measure(d)},draggableNodes:s,dragOverlay:{node:c,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:f})})}function so(e){const{duration:n,easing:s,sideEffects:r,keyframes:a}={...to,...e};return o=>{let{active:c,dragOverlay:i,transform:d,...u}=o;if(!n)return;const h={x:i.rect.left-c.rect.left,y:i.rect.top-c.rect.top},f={scaleX:d.scaleX!==1?c.rect.width*d.scaleX/i.rect.width:1,scaleY:d.scaleY!==1?c.rect.height*d.scaleY/i.rect.height:1},g={x:d.x-h.x,y:d.y-h.y,...f},x=a({...u,active:c,dragOverlay:i,transform:{initial:d,final:g}}),[m]=x,v=x[x.length-1];if(JSON.stringify(m)===JSON.stringify(v))return;const j=r==null?void 0:r({active:c,dragOverlay:i,...u}),b=i.node.animate(x,{duration:n,easing:s,fill:"forwards"});return new Promise(k=>{b.onfinish=()=>{j==null||j(),k()}})}}let _n=0;function ro(e){return l.useMemo(()=>{if(e!=null)return _n++,_n},[e])}const ao=U.memo(e=>{let{adjustScale:n=!1,children:s,dropAnimation:r,style:a,transition:o,modifiers:c,wrapperElement:i="div",className:d,zIndex:u=999}=e;const{activatorEvent:h,active:f,activeNodeRect:g,containerNodeRect:x,draggableNodes:m,droppableContainers:v,dragOverlay:j,over:b,measuringConfiguration:k,scrollableAncestors:y,scrollableAncestorRects:C,windowRect:E}=_a(),w=l.useContext(Ut),L=ro(f==null?void 0:f.id),M=xs(c,{activatorEvent:h,active:f,activeNodeRect:g,containerNodeRect:x,draggingNodeRect:j.rect,over:b,overlayNodeRect:j.rect,scrollableAncestors:y,scrollableAncestorRects:C,transform:w,windowRect:E}),I=vn(g),P=no({config:r,draggableNodes:m,droppableContainers:v,measuringConfiguration:k}),T=I?j.setRef:void 0;return U.createElement(Xa,null,U.createElement(Ya,{animation:P},f&&L?U.createElement(Qa,{key:L,id:f.id,ref:T,as:i,activatorEvent:h,adjustScale:n,className:d,transition:o,rect:I,style:{zIndex:u,...a},transform:M},s):null))});function Ot(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const oo=[A.Down,A.Right,A.Up,A.Left],io=(e,n)=>{let{context:{active:s,collisionRect:r,droppableRects:a,droppableContainers:o,over:c,scrollableAncestors:i}}=n;if(oo.includes(e.code)){if(e.preventDefault(),!s||!r)return;const d=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const g=a.get(f.id);if(g)switch(e.code){case A.Down:r.top<g.top&&d.push(f);break;case A.Up:r.top>g.top&&d.push(f);break;case A.Left:r.left>g.left&&d.push(f);break;case A.Right:r.left<g.left&&d.push(f);break}});const u=Kr({collisionRect:r,droppableRects:a,droppableContainers:d});let h=Zn(u,"id");if(h===(c==null?void 0:c.id)&&u.length>1&&(h=u[1].id),h!=null){const f=o.get(s.id),g=o.get(h),x=g?a.get(g.id):null,m=g==null?void 0:g.node.current;if(m&&x&&f&&g){const j=Bt(m).some((w,L)=>i[L]!==w),b=gs(f,g),k=lo(f,g),y=j||!b?{x:0,y:0}:{x:k?r.width-x.width:0,y:k?r.height-x.height:0},C={x:x.left,y:x.top};return y.x&&y.y?C:ht(C,y)}}}};function gs(e,n){return!Ot(e)||!Ot(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function lo(e,n){return!Ot(e)||!Ot(n)||!gs(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}function ps({connection:e,onSelect:n,onEdit:s,compact:r=!1}){const a=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,o=e.nextFollowUp&&!a&&new Date(e.nextFollowUp)<=new Date(Date.now()+7*24*60*60*1e3),c=Array.from({length:3},(d,u)=>t.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${u<e.relationshipStrength?"bg-teal":"bg-champagne-200"}`},u)),i=d=>d?new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null;return r?t.jsxs("div",{className:"flex cursor-pointer items-center gap-3 rounded-lg p-2 transition-colors hover:bg-champagne-50",onClick:()=>n(e.id),children:[t.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-teal-100 text-sm font-medium text-teal-600",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate text-sm font-medium text-wine",children:e.name}),t.jsxs("p",{className:"truncate text-xs text-wine/60",children:[e.role?`${e.role} @ `:"",e.company]})]}),a&&t.jsx("span",{className:"text-xs text-pandora",title:"Follow-up due",children:"!"})]}):t.jsxs("div",{className:"cursor-pointer rounded-lg border border-sage/20 bg-white p-4 transition-all duration-base hover:-translate-y-0.5 hover:shadow-md",onClick:()=>n(e.id),children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-teal-100 text-lg font-semibold text-teal-600",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"truncate font-medium text-wine",children:e.name}),t.jsx("span",{className:"flex gap-0.5",children:c})]}),t.jsxs("p",{className:"truncate text-sm text-wine/70",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[t.jsx("span",{className:"rounded-full bg-champagne-100 px-2 py-0.5 text-xs text-wine",children:Dt[e.relationshipType]}),e.linkedPostingIds.length>0&&t.jsxs("span",{className:"text-xs text-wine/60",children:[e.linkedPostingIds.length," posting",e.linkedPostingIds.length!==1?"s":""]})]})]}),s&&t.jsx("button",{onClick:d=>{d.stopPropagation(),s(e.id)},className:"btn btn-icon btn-ghost !h-8 !w-8",title:"Edit connection",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-sage/10 pt-3 text-xs text-wine/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.lastContactDate&&t.jsxs("span",{children:["Last contact: ",i(e.lastContactDate)]}),e.contactHistory.length>0&&t.jsxs("span",{children:[e.contactHistory.length," interaction",e.contactHistory.length!==1?"s":""]})]}),e.nextFollowUp&&t.jsxs("span",{className:`flex items-center gap-1 ${a?"font-medium text-flatred":o?"text-pandora":"text-wine/50"}`,children:[a&&t.jsx("svg",{className:"h-3.5 w-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Follow-up: ",i(e.nextFollowUp)]})]})]})}function co({connections:e,onSelectConnection:n,onEditConnection:s,onAddConnection:r}){const[a,o]=l.useState(""),[c,i]=l.useState("all"),[d,u]=l.useState(""),h=l.useMemo(()=>[...new Set(e.map(v=>v.company))].sort(),[e]),f=l.useMemo(()=>e.filter(m=>{var v,j;if(a){const b=a.toLowerCase();if(!(m.name.toLowerCase().includes(b)||m.company.toLowerCase().includes(b)||((v=m.role)==null?void 0:v.toLowerCase().includes(b))||((j=m.notes)==null?void 0:j.toLowerCase().includes(b))))return!1}if(d&&m.company!==d)return!1;switch(c){case"follow-up-due":return m.nextFollowUp&&new Date(m.nextFollowUp)<=new Date;case"has-postings":return m.linkedPostingIds.length>0;case"no-postings":return m.linkedPostingIds.length===0;default:return!0}}),[e,a,c,d]),g=l.useMemo(()=>[...f].sort((m,v)=>{const j=m.nextFollowUp&&new Date(m.nextFollowUp)<=new Date,b=v.nextFollowUp&&new Date(v.nextFollowUp)<=new Date;return j&&!b?-1:!j&&b?1:m.name.localeCompare(v.name)}),[f]),x=e.filter(m=>m.nextFollowUp&&new Date(m.nextFollowUp)<=new Date).length;return t.jsxs("div",{className:"flex h-full flex-col overflow-hidden p-4",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-wine",children:"Connections"}),t.jsxs("p",{className:"text-sm text-wine/60",children:[e.length," connection",e.length!==1?"s":"",x>0&&t.jsxs("span",{className:"ml-2 text-pandora",children:["(",x," follow-up",x!==1?"s":""," due)"]})]})]}),t.jsxs("button",{onClick:r,className:"btn btn-primary",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Connection"]})]}),t.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative min-w-[200px] flex-1",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-sage",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:a,onChange:m=>o(m.target.value),className:"input pl-9"})]}),t.jsxs("select",{value:c,onChange:m=>i(m.target.value),className:"input select w-auto",children:[t.jsx("option",{value:"all",children:"All Connections"}),t.jsx("option",{value:"follow-up-due",children:"Follow-up Due"}),t.jsx("option",{value:"has-postings",children:"Linked to Postings"}),t.jsx("option",{value:"no-postings",children:"No Postings Linked"})]}),t.jsxs("select",{value:d,onChange:m=>u(m.target.value),className:"input select w-auto",children:[t.jsx("option",{value:"",children:"All Companies"}),h.map(m=>t.jsx("option",{value:m,children:m},m))]}),(a||c!=="all"||d)&&t.jsx("button",{onClick:()=>{o(""),i("all"),u("")},className:"btn btn-sm btn-ghost text-flatred hover:text-flatred-600",children:"Clear filters"})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:g.length===0?t.jsxs("div",{className:"py-12 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-champagne-100",children:t.jsx("svg",{className:"h-8 w-8 text-wine/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.length===0?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-1 text-lg font-medium text-wine",children:"No connections yet"}),t.jsx("p",{className:"mb-4 text-wine/60",children:"Start building your network by adding contacts you meet during your job search."}),t.jsxs("button",{onClick:r,className:"btn btn-primary",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Your First Connection"]})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-1 text-lg font-medium text-wine",children:"No matches found"}),t.jsx("p",{className:"text-wine/60",children:"Try adjusting your search or filters."})]})]}):t.jsx("div",{className:"grid gap-3",children:g.map(m=>t.jsx(ps,{connection:m,onSelect:n,onEdit:s},m.id))})})]})}function uo({isOpen:e,onClose:n,onSave:s,connection:r,postings:a=[],prefilledCompany:o}){const c=!!r,[i,d]=l.useState({name:"",email:"",linkedInUrl:"",company:o||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),[u,h]=l.useState({});l.useEffect(()=>{e&&(d(r?{name:r.name,email:r.email||"",linkedInUrl:r.linkedInUrl||"",company:r.company,role:r.role||"",relationshipType:r.relationshipType,howWeMet:r.howWeMet||"",relationshipStrength:r.relationshipStrength,notes:r.notes,nextFollowUp:r.nextFollowUp||"",linkedPostingIds:r.linkedPostingIds}:{name:"",email:"",linkedInUrl:"",company:o||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),h({}))},[e,r,o]);const f=b=>{const{name:k,value:y}=b.target;d(C=>({...C,[k]:y})),u[k]&&h(C=>({...C,[k]:""}))},g=b=>{d(k=>({...k,relationshipStrength:b}))},x=b=>{d(k=>({...k,linkedPostingIds:k.linkedPostingIds.includes(b)?k.linkedPostingIds.filter(y=>y!==b):[...k.linkedPostingIds,b]}))},m=()=>{const b={};return i.name.trim()||(b.name="Name is required"),i.company.trim()||(b.company="Company is required"),i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)&&(b.email="Invalid email address"),i.linkedInUrl&&!i.linkedInUrl.includes("linkedin.com")&&(b.linkedInUrl="Must be a LinkedIn URL"),h(b),Object.keys(b).length===0},v=b=>{if(b.preventDefault(),!m())return;const k=Date.now(),y={id:(r==null?void 0:r.id)||`conn_${k}_${Math.random().toString(36).slice(2,9)}`,name:i.name.trim(),email:i.email.trim()||void 0,linkedInUrl:i.linkedInUrl.trim()||void 0,company:i.company.trim(),role:i.role.trim()||void 0,relationshipType:i.relationshipType,howWeMet:i.howWeMet.trim()||void 0,relationshipStrength:i.relationshipStrength,notes:i.notes,lastContactDate:r==null?void 0:r.lastContactDate,nextFollowUp:i.nextFollowUp||void 0,contactHistory:(r==null?void 0:r.contactHistory)||[],linkedPostingIds:i.linkedPostingIds,dateAdded:(r==null?void 0:r.dateAdded)||k,dateModified:k};s(y),n()};if(!e)return null;const j=[...a].sort((b,k)=>{const y=b.company.toLowerCase()===i.company.toLowerCase(),C=k.company.toLowerCase()===i.company.toLowerCase();return y&&!C?-1:!y&&C?1:b.company.localeCompare(k.company)});return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c?"Edit Connection":"Add Connection"}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("form",{onSubmit:v,className:"flex-1 overflow-auto p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:i.name,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.name?"border-red-300":"border-gray-200"}`,placeholder:"John Smith"}),u.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"company",value:i.company,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.company?"border-red-300":"border-gray-200"}`,placeholder:"Anthropic"}),u.company&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.company})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),t.jsx("input",{type:"text",name:"role",value:i.role,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Technical Recruiter"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(Dt).map(b=>t.jsx("button",{type:"button",onClick:()=>d(k=>({...k,relationshipType:b})),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${i.relationshipType===b?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"} border`,children:Dt[b]},b))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship Strength"}),t.jsx("div",{className:"flex gap-4",children:[1,2,3].map(b=>t.jsxs("button",{type:"button",onClick:()=>g(b),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${i.relationshipStrength===b?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"flex gap-0.5",children:Array.from({length:3},(k,y)=>t.jsx("span",{className:`w-2 h-2 rounded-full ${y<b?"bg-indigo-500":"bg-gray-200"}`},y))}),t.jsx("span",{className:"text-sm",children:Vn[b]})]},b))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How did you meet?"}),t.jsx("input",{type:"text",name:"howWeMet",value:i.howWeMet,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Career fair at MIT, October 2024"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:i.email,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.email?"border-red-300":"border-gray-200"}`,placeholder:"john@company.com"}),u.email&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),t.jsx("input",{type:"url",name:"linkedInUrl",value:i.linkedInUrl,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.linkedInUrl?"border-red-300":"border-gray-200"}`,placeholder:"linkedin.com/in/..."}),u.linkedInUrl&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.linkedInUrl})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Follow-up Date"}),t.jsx("input",{type:"date",name:"nextFollowUp",value:i.nextFollowUp,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{name:"notes",value:i.notes,onChange:f,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Any notes about this connection..."})]}),a.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Postings"}),t.jsx("div",{className:"max-h-40 overflow-auto border border-gray-200 rounded-lg",children:j.slice(0,10).map(b=>t.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.linkedPostingIds.includes(b.id),onChange:()=>x(b.id),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),t.jsxs("span",{className:"text-sm text-gray-700 truncate",children:[b.title," @ ",b.company]})]},b.id))}),a.length>10&&t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Showing first 10 postings. Search by company name to find more."})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:c?"Save Changes":"Add Connection"})]})]})})}function ho({connection:e,linkedPostings:n,isOpen:s,onClose:r,onEdit:a,onDelete:o,onLogContact:c,onViewPosting:i,onUnlinkPosting:d,onUpdateFollowUp:u}){const[h,f]=l.useState(!1),[g,x]=l.useState({type:"email",notes:"",date:new Date().toISOString().split("T")[0]}),[m,v]=l.useState(!1);if(!s)return null;const j=Array.from({length:3},(w,L)=>t.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${L<e.relationshipStrength?"bg-indigo-500":"bg-gray-200"}`},L)),b=w=>w?new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",k=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,y=()=>{const w={id:`contact_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,date:g.date,type:g.type,notes:g.notes.trim()||void 0};c(w),f(!1),x({type:"email",notes:"",date:new Date().toISOString().split("T")[0]})},C=()=>{o(),v(!1)},E=[...e.contactHistory].sort((w,L)=>new Date(L.date).getTime()-new Date(w.date).getTime());return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:r}),t.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-semibold text-xl flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-gray-600",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"flex gap-0.5",children:j}),t.jsxs("span",{className:"text-sm text-gray-500",children:[Vn[e.relationshipStrength]," connection"]})]})]})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[e.email&&t.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.email]}),e.linkedInUrl&&t.jsxs("a",{href:e.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"View LinkedIn Profile"]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Type"}),t.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 text-gray-700 text-sm",children:Dt[e.relationshipType]})]}),e.howWeMet&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"How We Met"}),t.jsx("p",{className:"text-gray-700",children:e.howWeMet})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Next Follow-up"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"date",value:e.nextFollowUp||"",onChange:w=>u(w.target.value||void 0),className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${k?"border-red-300 bg-red-50":"border-gray-200"}`}),k&&t.jsxs("span",{className:"text-sm text-red-600 font-medium flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Overdue!"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Contact History"}),t.jsxs("button",{onClick:()=>f(!h),className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Contact"]})]}),h&&t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),t.jsx("select",{value:g.type,onChange:w=>x({...g,type:w.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Object.keys(kt).map(w=>t.jsx("option",{value:w,children:kt[w]},w))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:g.date,onChange:w=>x({...g,date:w.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Notes (optional)"}),t.jsx("textarea",{value:g.notes,onChange:w=>x({...g,notes:w.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Brief description of the conversation..."})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),t.jsx("button",{onClick:y,className:"px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save"})]})]}),E.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No contact history yet."}):t.jsx("div",{className:"space-y-3",children:E.map(w=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-xs text-gray-500",children:kt[w.type].charAt(0)})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:kt[w.type]}),t.jsx("span",{className:"text-xs text-gray-400",children:b(w.date)})]}),w.notes&&t.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:w.notes})]})]},w.id))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:["Linked Postings (",n.length,")"]}),n.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No postings linked yet."}):t.jsx("div",{className:"space-y-2",children:n.map(w=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("button",{onClick:()=>i(w.id),className:"text-left flex-1 hover:text-indigo-600",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.title}),t.jsxs("p",{className:"text-xs text-gray-500",children:[w.company," · ",w.status]})]}),t.jsx("button",{onClick:()=>d(w.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Unlink posting",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w.id))})]}),e.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Notes"}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.notes})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{onClick:()=>v(!0),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Edit Connection"})]})]}),m&&t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Connection?"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["This will permanently delete ",t.jsx("strong",{children:e.name})," and remove them from all linked postings."]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}function sn({connections:e,onClick:n,size:s="sm"}){if(e.length===0)return null;const a=e.map(c=>c.name).slice(0,3).join(", ")+(e.length>3?` +${e.length-3} more`:""),o=s==="sm"?"text-xs gap-1 px-1.5 py-0.5":"text-sm gap-1.5 px-2 py-1";return t.jsxs("button",{onClick:c=>{c.stopPropagation(),n==null||n()},className:`flex items-center ${o} bg-indigo-50 text-indigo-600 rounded-full hover:bg-indigo-100 transition-colors`,title:a,children:[t.jsx("svg",{className:s==="sm"?"w-3 h-3":"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.jsx("span",{children:e.length})]})}function mo({isOpen:e,onClose:n,connections:s,posting:r,linkedConnectionIds:a,onLinkConnection:o,onUnlinkConnection:c,onCreateConnection:i}){const[d,u]=l.useState(""),h=l.useMemo(()=>{const x=s.filter(j=>{var k;if(!d)return!0;const b=d.toLowerCase();return j.name.toLowerCase().includes(b)||j.company.toLowerCase().includes(b)||((k=j.role)==null?void 0:k.toLowerCase().includes(b))}),m=x.filter(j=>j.company.toLowerCase()===r.company.toLowerCase()),v=x.filter(j=>j.company.toLowerCase()!==r.company.toLowerCase());return{sameCompany:m,others:v}},[s,r.company,d]),f=x=>{a.includes(x)?c(x):o(x)};if(!e)return null;const g=x=>{const m=a.includes(x.id);return t.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${m?"bg-teal-50":"hover:bg-champagne-50"}`,children:[t.jsx("input",{type:"checkbox",checked:m,onChange:()=>f(x.id),className:"checkbox checkbox-sm"}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-teal/10 flex items-center justify-center text-teal font-medium text-sm flex-shrink-0",children:x.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:`text-sm font-medium truncate ${m?"text-teal-700":"text-wine"}`,children:x.name}),t.jsxs("p",{className:"text-xs text-wine/60 truncate",children:[x.role?`${x.role} @ `:"",x.company]})]})]},x.id)};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Link Connections"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[r.title," @ ",r.company]})]}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:d,onChange:x=>u(x.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",autoFocus:!0})]})}),t.jsx("div",{className:"flex-1 overflow-auto p-4",children:s.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-gray-500 mb-3",children:"No connections yet"}),t.jsx("button",{onClick:i,className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"+ Create your first connection"})]}):h.sameCompany.length===0&&h.others.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"No connections match your search"})}):t.jsxs("div",{className:"space-y-4",children:[h.sameCompany.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["At ",r.company," (",h.sameCompany.length,")"]}),t.jsx("div",{className:"space-y-1",children:h.sameCompany.map(g)})]}),h.others.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["Other Connections (",h.others.length,")"]}),t.jsx("div",{className:"space-y-1",children:h.others.map(g)})]})]})}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsxs("button",{onClick:i,className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Connection"]}),t.jsx("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Done"})]})]})})}const rn={google:"google.com",alphabet:"abc.xyz",meta:"meta.com",facebook:"facebook.com",amazon:"amazon.com",apple:"apple.com",microsoft:"microsoft.com",netflix:"netflix.com",airbnb:"airbnb.com",uber:"uber.com",lyft:"lyft.com",spotify:"spotify.com",slack:"slack.com",salesforce:"salesforce.com",stripe:"stripe.com",shopify:"shopify.com",twilio:"twilio.com",zoom:"zoom.us",dropbox:"dropbox.com",linkedin:"linkedin.com",twitter:"twitter.com",x:"x.com",snap:"snap.com",snapchat:"snapchat.com",pinterest:"pinterest.com",reddit:"reddit.com",discord:"discord.com",github:"github.com",gitlab:"gitlab.com",atlassian:"atlassian.com",jira:"atlassian.com",confluence:"atlassian.com",notion:"notion.so",figma:"figma.com",canva:"canva.com",adobe:"adobe.com",oracle:"oracle.com",ibm:"ibm.com",intel:"intel.com",nvidia:"nvidia.com",amd:"amd.com",cisco:"cisco.com",vmware:"vmware.com",dell:"dell.com",hp:"hp.com","hewlett packard":"hp.com",samsung:"samsung.com",sony:"sony.com",lg:"lg.com",paypal:"paypal.com",square:"squareup.com",block:"block.xyz",robinhood:"robinhood.com",coinbase:"coinbase.com",plaid:"plaid.com",doordash:"doordash.com",instacart:"instacart.com",grubhub:"grubhub.com",postmates:"postmates.com",peloton:"onepeloton.com",tesla:"tesla.com",spacex:"spacex.com",palantir:"palantir.com",databricks:"databricks.com",snowflake:"snowflake.com",datadog:"datadoghq.com",splunk:"splunk.com",elastic:"elastic.co",mongodb:"mongodb.com",redis:"redis.com",cloudflare:"cloudflare.com",fastly:"fastly.com",akamai:"akamai.com",okta:"okta.com",auth0:"auth0.com",hashicorp:"hashicorp.com",docker:"docker.com",kubernetes:"kubernetes.io",redhat:"redhat.com","red hat":"redhat.com",canonical:"canonical.com",ubuntu:"ubuntu.com",suse:"suse.com",vercel:"vercel.com",netlify:"netlify.com",heroku:"heroku.com",digitalocean:"digitalocean.com",linode:"linode.com",vultr:"vultr.com",aws:"aws.amazon.com","amazon web services":"aws.amazon.com",gcp:"cloud.google.com","google cloud":"cloud.google.com",azure:"azure.microsoft.com",deloitte:"deloitte.com",mckinsey:"mckinsey.com",bcg:"bcg.com",bain:"bain.com",accenture:"accenture.com",kpmg:"kpmg.com",pwc:"pwc.com",ey:"ey.com","ernst & young":"ey.com",jpmorgan:"jpmorgan.com","goldman sachs":"goldmansachs.com","morgan stanley":"morganstanley.com","bank of america":"bankofamerica.com","wells fargo":"wellsfargo.com",citi:"citi.com",citibank:"citi.com",chase:"chase.com","capital one":"capitalone.com","american express":"americanexpress.com",amex:"americanexpress.com",visa:"visa.com",mastercard:"mastercard.com"};function xo(e){if(!e)return null;const n=e.toLowerCase().trim();if(rn[n])return rn[n];for(const[r,a]of Object.entries(rn))if(n.startsWith(r+" ")||n.startsWith(r+","))return a;const s=n.replace(/\s*(inc\.?|llc\.?|ltd\.?|corp\.?|corporation|company|co\.?|limited|gmbh|ag|sa|plc)\.?\s*$/i,"").replace(/[^a-z0-9\s]/g,"").trim().replace(/\s+/g,"");return s.length<2?null:`${s}.com`}function fo(e,n=128){const s=xo(e);return s?`https://www.google.com/s2/favicons?domain=${s}&sz=${n}`:null}function bs(e,n){return e||fo(n)}const go={saved:"bg-pandora/15 text-pandora-600 border-pandora/30",in_progress:"bg-champagne-200/50 text-champagne-700 border-champagne-400/30",applied:"bg-teal/10 text-teal-600 border-teal/30",interviewing:"bg-wine/10 text-wine border-wine/30",offer:"bg-pandora-500/15 text-pandora-600 border-pandora-500/30",accepted:"bg-teal-600/15 text-teal-700 border-teal-600/30",rejected:"bg-flatred/10 text-flatred border-flatred/30",withdrawn:"bg-sage/10 text-sage-500 border-sage/20"};function an(e){return e.split(" ").slice(0,2).map(n=>n[0]).join("").toUpperCase()}function wn(e){return Math.floor((Date.now()-e)/(1e3*60*60*24))}function on(e){const n=wn(e);return n===0?"Today":n===1?"1d":`${n}d`}function po(e,n){return e<=3?"text-sage":e<=7?"text-pandora":n?"text-flatred font-semibold":"text-flatred"}function bo(e){return Pt(e.status)?!1:wn(e.dateModified)>=7}function yn({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,onEdit:o,variant:c="kanban",linkedConnections:i=[],onConnectionClick:d,isSelected:u=!1,columnWidth:h=280}){const[f,g]=l.useState(!1),x=bs(e.companyLogo,e.company),m=x&&!f,v=w=>{const L=w.currentTarget;L.naturalWidth<=16&&L.naturalHeight<=16&&g(!0)},j=h<260,b=h>350,k=[{label:"Open URL",onClick:()=>window.open(e.url,"_blank"),icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(w=>w!==e.status).map(w=>({label:`Move to ${$e[w]}`,onClick:()=>r(e.id,w)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>a(e.id),danger:!0,icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],y=bo(e),C=wn(e.dateModified),E=po(C,y);return c==="list"?t.jsx(qt,{items:k,children:t.jsxs("div",{onClick:()=>n(e.id),className:"group flex cursor-pointer items-center bg-white px-4 py-3 transition-colors hover:bg-champagne-50/50",children:[t.jsxs("div",{className:"relative w-12 flex-shrink-0",children:[m?t.jsx("img",{src:x,alt:e.company,className:"h-9 w-9 rounded-md object-contain bg-white",onLoad:v,onError:()=>g(!0)}):t.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-champagne-100 text-xs font-semibold text-wine/70",children:an(e.company)}),y&&t.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-flatred text-white",children:t.jsx("span",{className:"text-[10px] font-bold",children:"!"})})]}),t.jsxs("div",{className:"min-w-[200px] flex-1 pr-4",children:[t.jsx("p",{className:"truncate text-sm font-medium text-wine group-hover:text-flatred transition-colors",children:e.title}),t.jsx("p",{className:"truncate text-xs text-wine/50",children:e.company})]}),t.jsx("div",{className:"w-[120px] flex-shrink-0 px-2",children:t.jsx("span",{className:"text-xs text-wine/60 truncate block",children:e.location||"—"})}),t.jsx("div",{className:"w-[100px] flex-shrink-0 px-2",children:t.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-[11px] font-medium ${go[e.status]}`,children:$e[e.status]})}),t.jsx("div",{className:"w-[140px] flex-shrink-0 px-2 overflow-hidden",children:e.tags.length>0?t.jsx("div",{className:"flex flex-nowrap gap-1 overflow-x-auto scrollbar-hide",children:e.tags.map(w=>t.jsx(it,{tag:w,size:"sm",className:"flex-shrink-0"},w))}):t.jsx("span",{className:"text-xs text-wine/30",children:"—"})}),t.jsx("div",{className:"w-[70px] flex-shrink-0 px-2",onClick:w=>w.stopPropagation(),children:t.jsx(Lt,{priority:e.interest,onChange:w=>s(e.id,w),size:"sm"})}),t.jsx("div",{className:`w-[50px] flex-shrink-0 px-2 text-right text-xs ${E}`,children:on(e.dateModified)}),t.jsx("div",{className:"w-[36px] flex-shrink-0 flex justify-center",onClick:w=>w.stopPropagation(),children:t.jsx(sn,{connections:i,onClick:d,size:"sm"})})]})}):b?t.jsx(qt,{items:k,children:t.jsx("div",{onClick:()=>n(e.id),className:`relative group cursor-pointer rounded-lg border bg-white shadow-sm transition-all duration-base hover:-translate-y-0.5 hover:shadow-md ${y?"border-flatred/30":"border-sage/20"} ${u?"bg-champagne-50 ring-2 ring-champagne-300":""} px-3 py-2`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[m?t.jsx("img",{src:x,alt:e.company,className:"h-10 w-10 rounded object-contain bg-white",onLoad:v,onError:()=>g(!0)}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-champagne-200 text-sm font-medium text-wine",children:an(e.company)}),y&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-flatred-50",children:t.jsx("svg",{className:"h-3 w-3 text-flatred",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-baseline gap-1.5",children:[t.jsx("p",{className:"truncate font-medium text-wine",children:e.title}),t.jsx("span",{className:"text-wine/30 flex-shrink-0",children:"•"}),t.jsx("p",{className:"truncate text-sm text-wine/60",children:e.company})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.location&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"truncate text-xs text-wine/50 max-w-[120px]",children:e.location}),t.jsx("span",{className:"text-wine/20 flex-shrink-0",children:"|"})]}),t.jsx("div",{className:"flex items-center gap-1.5 flex-shrink-0",onClick:w=>w.stopPropagation(),children:t.jsx(Lt,{priority:e.interest,onChange:w=>s(e.id,w),size:"sm"})}),t.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(w=>t.jsx(it,{tag:w,size:"sm"},w)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-sage flex-shrink-0",children:["+",e.tags.length-2]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:w=>w.stopPropagation(),children:[t.jsx(sn,{connections:i,onClick:d,size:"sm"}),t.jsxs("div",{className:`flex items-center gap-1 text-xs ${E}`,children:[y&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),on(e.dateModified)]})]})]})})}):t.jsx(qt,{items:k,children:t.jsxs("div",{onClick:()=>n(e.id),className:`relative group cursor-pointer rounded-lg border bg-white shadow-sm transition-all duration-base hover:-translate-y-0.5 hover:shadow-md ${y?"border-flatred/30":"border-sage/20"} ${u?"bg-champagne-50 ring-2 ring-champagne-300":""} p-3`,children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[m?t.jsx("img",{src:x,alt:e.company,className:"h-10 w-10 rounded object-contain bg-white",onLoad:v,onError:()=>g(!0)}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-champagne-200 text-sm font-medium text-wine",children:an(e.company)}),y&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-flatred-50",children:t.jsx("svg",{className:"h-3 w-3 text-flatred",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate font-medium text-wine",children:e.title}),t.jsx("p",{className:"truncate text-sm text-wine/70",children:e.company}),!j&&t.jsx("p",{className:"truncate text-xs text-wine/50",children:e.location})]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsxs("div",{className:"flex items-center gap-2",onClick:w=>w.stopPropagation(),children:[t.jsx(Lt,{priority:e.interest,onChange:w=>s(e.id,w),size:"sm"}),!j&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(w=>t.jsx(it,{tag:w,size:"sm"},w)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-sage",children:["+",e.tags.length-2]})]}),t.jsx(sn,{connections:i,onClick:d,size:"sm"})]})]}),t.jsxs("div",{className:`flex items-center gap-1 text-xs ${E}`,children:[y&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),on(e.dateModified)]})]})]})})}function vo({isOpen:e,onClose:n,onSave:s,posting:r}){const[a,o]=l.useState({title:"",company:"",location:"",salary:"",description:"",interest:3}),[c,i]=l.useState({});l.useEffect(()=>{e&&r&&(o({title:r.title,company:r.company,location:r.location,salary:r.salary||"",description:r.description,interest:r.interest}),i({}))},[e,r]);const d=()=>{const h={};return a.title.trim()||(h.title="Job title is required"),a.company.trim()||(h.company="Company is required"),i(h),Object.keys(h).length===0},u=h=>{h.preventDefault(),!(!d()||!r)&&(s(r.id,{title:a.title.trim(),company:a.company.trim(),location:a.location.trim(),salary:a.salary.trim()||void 0,description:a.description.trim(),interest:a.interest,dateModified:Date.now()}),n())};return!e||!r?null:t.jsxs("div",{className:"fixed inset-0 z-modal flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-wine/40 backdrop-blur-sm animate-fade-in",onClick:n}),t.jsxs("div",{className:"relative w-full max-w-lg rounded-xl bg-white shadow-2xl animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-sage/20 px-6 py-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-wine",children:"Edit Posting"}),t.jsx("button",{onClick:n,className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:u,className:"p-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-sm font-medium text-wine",children:["Job Title ",t.jsx("span",{className:"text-flatred",children:"*"})]}),t.jsx("input",{type:"text",value:a.title,onChange:h=>o({...a,title:h.target.value}),className:`input w-full ${c.title?"border-flatred":""}`,placeholder:"e.g., Senior Software Engineer"}),c.title&&t.jsx("p",{className:"mt-1 text-sm text-flatred",children:c.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-sm font-medium text-wine",children:["Company ",t.jsx("span",{className:"text-flatred",children:"*"})]}),t.jsx("input",{type:"text",value:a.company,onChange:h=>o({...a,company:h.target.value}),className:`input w-full ${c.company?"border-flatred":""}`,placeholder:"e.g., Acme Inc."}),c.company&&t.jsx("p",{className:"mt-1 text-sm text-flatred",children:c.company})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Location"}),t.jsx("input",{type:"text",value:a.location,onChange:h=>o({...a,location:h.target.value}),className:"input w-full",placeholder:"e.g., San Francisco, CA or Remote"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Salary"}),t.jsx("input",{type:"text",value:a.salary,onChange:h=>o({...a,salary:h.target.value}),className:"input w-full",placeholder:"e.g., $120,000 - $150,000"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Interest Level"}),t.jsx(Kn,{interest:a.interest,onChange:h=>o({...a,interest:h}),size:"md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Description"}),t.jsx("textarea",{value:a.description,onChange:h=>o({...a,description:h.target.value}),className:"input w-full h-32 resize-none",placeholder:"Job description..."})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})]})]})}function wo({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,onEdit:o,linkedConnections:c,onConnectionClick:i,isSelected:d,columnWidth:u}){const{attributes:h,listeners:f,setNodeRef:g,transform:x,isDragging:m}=Ha({id:e.id}),v={transform:Xe.Translate.toString(x)};return t.jsx("div",{ref:g,style:v,...f,...h,className:`touch-none ${m?"opacity-50":""}`,children:t.jsx(yn,{posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,onEdit:o,variant:"kanban",linkedConnections:c,onConnectionClick:i,isSelected:d,columnWidth:u})})}const yo={saved:"bg-champagne-50/50 border-sage/20",in_progress:"bg-champagne-50/50 border-sage/20",applied:"bg-champagne-50/50 border-sage/20",interviewing:"bg-champagne-50/50 border-sage/20",offer:"bg-champagne-50/50 border-sage/20",accepted:"bg-champagne-50/50 border-sage/20",rejected:"bg-champagne-50/50 border-sage/20",withdrawn:"bg-champagne-50/50 border-sage/20"},jo={saved:"bg-pandora",in_progress:"bg-champagne-400",applied:"bg-teal",interviewing:"bg-wine",offer:"bg-pandora-500",accepted:"bg-teal-600",rejected:"bg-flatred",withdrawn:"bg-sage-400"},No={saved:"ring-pandora bg-pandora-100",in_progress:"ring-champagne-400 bg-champagne-100",applied:"ring-teal bg-teal-100",interviewing:"ring-wine bg-wine-100",offer:"ring-pandora-500 bg-pandora-100",accepted:"ring-teal-600 bg-teal-200",rejected:"ring-flatred bg-flatred-100",withdrawn:"ring-sage bg-sage-100"};function ko({status:e,postings:n,onPostingSelect:s,onPriorityChange:r,onStatusChange:a,onDelete:o,onEdit:c,onAdd:i,onCollapse:d,isOver:u=!1,isDragging:h=!1,getLinkedConnections:f,onConnectionClick:g,selectedPostingId:x,columnWidth:m}){const{setNodeRef:v}=fs({id:e}),j=l.useRef(null),[b,k]=l.useState(!1),y=l.useCallback(()=>{const C=j.current;if(!C)return;const E=C.scrollHeight>C.clientHeight,w=C.scrollTop+C.clientHeight>=C.scrollHeight-10;k(E&&!w)},[]);return l.useEffect(()=>{y()},[n.length,y]),l.useEffect(()=>{const C=j.current;if(C)return C.addEventListener("scroll",y),window.addEventListener("resize",y),()=>{C.removeEventListener("scroll",y),window.removeEventListener("resize",y)}},[y]),t.jsxs("div",{ref:v,className:`flex h-full w-full flex-col rounded-lg border overflow-hidden transition-colors duration-200 ${yo[e]} ${u?`ring-2 ${No[e]}`:""} ${h&&!u?"opacity-75":""}`,children:[t.jsxs("div",{className:`flex items-center justify-between px-3 py-2.5 ${jo[e]}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:d,className:"btn btn-icon btn-ghost !h-6 !w-6 text-white/60 hover:text-white hover:bg-white/20",title:`Collapse ${$e[e]} column`,children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"font-medium text-white",children:$e[e]})]}),t.jsx("span",{className:"rounded-full bg-white/20 px-2 py-0.5 text-xs font-semibold text-white",children:n.length})]}),t.jsxs("div",{className:"relative flex-1",children:[t.jsxs("div",{ref:j,className:"absolute inset-0 space-y-2 overflow-y-auto p-2 scrollbar-subtle",children:[n.map(C=>t.jsx(wo,{posting:C,onSelect:s,onPriorityChange:r,onStatusChange:a,onDelete:o,onEdit:c,linkedConnections:f==null?void 0:f(C.id),onConnectionClick:()=>g==null?void 0:g(C.id),isSelected:x===C.id,columnWidth:m},C.id)),n.length===0&&t.jsx("div",{className:`rounded-lg border-2 border-dashed py-8 text-center text-sm transition-colors ${u?"border-sage bg-champagne-100 text-wine":"border-transparent text-wine/40"}`,children:u?"Drop here":"No postings"})]}),b&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center pb-1 pointer-events-none",children:t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white/80 shadow-sm border border-sage/20",children:t.jsx("svg",{className:"w-3 h-3 text-sage",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})})]}),i&&t.jsxs("button",{onClick:()=>i(e),className:"group flex items-center justify-center gap-1.5 border-t border-sage/20 bg-white/50 px-3 py-2 text-sm text-wine/30 transition-all hover:bg-champagne-50 hover:text-wine/60 rounded-b-lg",children:[t.jsx("svg",{className:"h-4 w-4 opacity-50 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:"Add posting"})]})]})}const Co={saved:{bg:"bg-pandora",text:"text-white",border:"border-pandora-600",hover:"hover:bg-pandora-500"},in_progress:{bg:"bg-champagne-400",text:"text-wine",border:"border-champagne-500",hover:"hover:bg-champagne-300"},applied:{bg:"bg-teal",text:"text-white",border:"border-teal-600",hover:"hover:bg-teal-400"},interviewing:{bg:"bg-wine",text:"text-white",border:"border-wine-700",hover:"hover:bg-wine-400"},offer:{bg:"bg-pandora-500",text:"text-white",border:"border-pandora-600",hover:"hover:bg-pandora-400"},accepted:{bg:"bg-teal-600",text:"text-white",border:"border-teal-700",hover:"hover:bg-teal-500"},rejected:{bg:"bg-flatred",text:"text-white",border:"border-flatred-700",hover:"hover:bg-flatred-400"},withdrawn:{bg:"bg-sage",text:"text-wine",border:"border-sage-600",hover:"hover:bg-sage-300"}},So={saved:"ring-pandora",in_progress:"ring-champagne-400",applied:"ring-teal",interviewing:"ring-wine",offer:"ring-pandora-500",accepted:"ring-teal-600",rejected:"ring-flatred",withdrawn:"ring-sage"};function Lo({status:e,count:n,onExpand:s,isOver:r=!1,isAnimating:a=!1}){const{setNodeRef:o}=fs({id:e}),c=Co[e],i={saved:"SAVED",in_progress:"IN PROG",applied:"APPLIED",interviewing:"INTRVW",offer:"OFFER",accepted:"ACCEPT",rejected:"REJECT",withdrawn:"WTHDRN"};return t.jsx("div",{ref:o,className:`
        group relative flex-1 flex items-center cursor-pointer
        ${c.bg} ${c.hover}
        ${r?`ring-2 ${So[e]} ring-inset`:""}
        rounded-l-lg
        transition-all duration-300 ease-out
        hover:flex-[1.4] hover:shadow-lg hover:z-10
        origin-right
        ${a?"animate-slide-in-left":""}
      `,onClick:s,title:`Expand ${$e[e]} column (${n})`,children:t.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full px-1.5 py-2 gap-1",children:[t.jsx("span",{className:`flex items-center justify-center min-w-[20px] h-[20px] rounded-full bg-white/30 ${c.text} text-[11px] font-bold`,children:n}),t.jsx("span",{className:`text-[9px] font-bold tracking-wider whitespace-nowrap ${c.text} opacity-90 flex-1 flex items-center`,style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)"},children:i[e]}),t.jsx("svg",{className:`h-3 w-3 ${c.text} opacity-0 group-hover:opacity-80 transition-opacity duration-200 flex-shrink-0`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}const Eo=280,Do=220,Mo=500,Ao={saved:"bg-pandora",in_progress:"bg-champagne-400",applied:"bg-teal",interviewing:"bg-wine",offer:"bg-pandora-500",accepted:"bg-teal-600",rejected:"bg-flatred",withdrawn:"bg-sage"};function Ro(e){return e?Ao[e]:"bg-sage/30"}function Io({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,onEdit:o,onAdd:c,collapsedColumns:i,onCollapseChange:d,getLinkedConnections:u,onConnectionClick:h,selectedPostingId:f}){const[g,x]=l.useState(null),[m,v]=l.useState(null),[j,b]=l.useState(null),[k,y]=l.useState(null),[C,E]=l.useState(null),[w,L]=l.useState(()=>{const S=localStorage.getItem("kanban-column-widths");if(S)try{return JSON.parse(S)}catch{}return Ye.reduce(($,z)=>($[z]=Eo,$),{})});l.useEffect(()=>{localStorage.setItem("kanban-column-widths",JSON.stringify(w))},[w]);const[M,I]=l.useState(null),P=l.useRef(0),T=l.useRef(0),_=Ur(An(bn,{activationConstraint:{distance:8}}),An(gn,{coordinateGetter:io})),F=S=>e.filter($=>$.status===S),Q=g?e.find(S=>S.id===g):null,re=l.useCallback(S=>{x(S.active.id)},[]),Z=l.useCallback(S=>{var $;v(($=S.over)==null?void 0:$.id)},[]),R=l.useCallback(S=>{const{active:$,over:z}=S;if(x(null),v(null),!z)return;const we=$.id,ae=z.id;if(Ye.includes(ae)){const ye=e.find(K=>K.id===we);ye&&ye.status!==ae&&r(we,ae)}},[e,r]),V=l.useCallback(()=>{x(null),v(null)},[]),B=l.useCallback(S=>{!i.includes(S)&&C===null&&(E(S),setTimeout(()=>{E(null),y(S),d([...i,S]),setTimeout(()=>y(null),250)},200))},[i,C,d]),W=l.useCallback(S=>{b(S),d(i.filter($=>$!==S)),setTimeout(()=>b(null),200)},[i,d]),me=Ye.filter(S=>i.includes(S)),ee=Ye.filter(S=>!i.includes(S)),ge=l.useCallback((S,$)=>{$.preventDefault(),$.stopPropagation(),I(S),P.current=$.clientX,T.current=w[S]},[w]);return l.useEffect(()=>{if(!M)return;const S=z=>{const we=z.clientX-P.current,ae=Math.min(Mo,Math.max(Do,T.current+we));L(ye=>({...ye,[M]:ae}))},$=()=>{I(null)};return document.addEventListener("mousemove",S),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",$)}},[M]),t.jsxs(Ba,{sensors:_,collisionDetection:Vr,onDragStart:re,onDragOver:Z,onDragEnd:R,onDragCancel:V,children:[t.jsxs("div",{className:"flex h-full",children:[t.jsx("div",{className:"flex flex-1 gap-3 overflow-x-auto p-4",children:ee.map(S=>t.jsxs("div",{className:`relative flex-shrink-0 group origin-right ${j===S?"animate-slide-in-right":""} ${C===S?"animate-slide-out-right":""}`,style:{width:w[S]},children:[t.jsx(ko,{status:S,postings:F(S),onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,onEdit:o,onAdd:c,onCollapse:()=>B(S),isOver:m===S,isDragging:g!==null,getLinkedConnections:u,onConnectionClick:h,selectedPostingId:f,columnWidth:w[S]}),t.jsx("div",{className:`absolute top-0 right-0 w-1 h-full cursor-col-resize
                  ${M===S?"bg-flatred":"bg-transparent hover:bg-sage/50"}
                  transition-colors`,onMouseDown:$=>ge(S,$)})]},S))}),me.length>0&&t.jsxs("div",{className:"flex h-full",children:[t.jsx("div",{className:"flex flex-col w-12 h-full py-1",children:me.map(S=>t.jsx(Lo,{status:S,count:F(S).length,onExpand:()=>W(S),isOver:m===S,isAnimating:k===S},S))}),t.jsx("div",{className:`w-2.5 h-full ${Ro(me[0])}`})]})]}),t.jsx(ao,{dropAnimation:null,children:Q?t.jsx("div",{className:"rotate-3 opacity-90",children:t.jsx(yn,{posting:Q,onSelect:()=>{},onPriorityChange:()=>{},onStatusChange:()=>{},onDelete:()=>{},variant:"kanban"})}):null})]})}function To({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,getLinkedConnections:o,onConnectionClick:c}){const[i,d]=l.useState("dateAdded"),[u,h]=l.useState("desc"),f=m=>{i===m?h(u==="asc"?"desc":"asc"):(d(m),h("asc"))},g=[...e].sort((m,v)=>{let j=0;switch(i){case"title":j=m.title.localeCompare(v.title);break;case"company":j=m.company.localeCompare(v.company);break;case"location":j=(m.location||"").localeCompare(v.location||"");break;case"dateAdded":j=m.dateAdded-v.dateAdded;break;case"priority":j=m.interest-v.interest;break;case"status":j=m.status.localeCompare(v.status);break}return u==="asc"?j:-j}),x=({field:m,label:v,className:j=""})=>t.jsxs("button",{onClick:()=>f(m),className:`flex items-center gap-1 text-left text-[11px] font-semibold uppercase tracking-wide text-wine/50 transition-colors hover:text-wine ${j}`,children:[v,t.jsx("svg",{className:`h-3 w-3 transition-transform ${i===m?"opacity-100":"opacity-0"} ${u==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return t.jsxs("div",{className:"h-full overflow-auto",children:[t.jsx("div",{className:"sticky top-0 z-10 border-b border-sage/30 bg-champagne-50/95 backdrop-blur-sm",children:t.jsxs("div",{className:"flex items-center px-4 py-2.5",children:[t.jsx("div",{className:"w-12 flex-shrink-0"}),t.jsx("div",{className:"min-w-[200px] flex-1 pr-4",children:t.jsx(x,{field:"title",label:"Position"})}),t.jsx("div",{className:"w-[120px] flex-shrink-0 px-2",children:t.jsx(x,{field:"location",label:"Location"})}),t.jsx("div",{className:"w-[100px] flex-shrink-0 px-2",children:t.jsx(x,{field:"status",label:"Status"})}),t.jsx("div",{className:"w-[140px] flex-shrink-0 px-2",children:t.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-wine/50",children:"Tags"})}),t.jsx("div",{className:"w-[70px] flex-shrink-0 px-2",children:t.jsx(x,{field:"priority",label:"Priority"})}),t.jsx("div",{className:"w-[50px] flex-shrink-0 px-2 text-right",children:t.jsx(x,{field:"dateAdded",label:"Updated",className:"justify-end"})}),t.jsx("div",{className:"w-[36px] flex-shrink-0"})]})}),t.jsxs("div",{className:"divide-y divide-sage/10",children:[g.map(m=>t.jsx(yn,{posting:m,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:a,variant:"list",linkedConnections:o==null?void 0:o(m.id),onConnectionClick:()=>c==null?void 0:c(m.id)},m.id)),e.length===0&&t.jsxs("div",{className:"py-16 text-center",children:[t.jsx("div",{className:"text-wine/40 text-sm",children:"No postings found"}),t.jsx("div",{className:"text-wine/30 text-xs mt-1",children:"Try adjusting your filters"})]})]})]})}function Oo({keyword:e,onClose:n}){if(!e.contexts||e.contexts.length===0)return null;const s=r=>{const a=e.term.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`(${a})`,"gi");return r.split(o).map((i,d)=>o.test(i)?t.jsx("mark",{className:"bg-yellow-200 px-0.5 rounded",children:i},d):t.jsx("span",{children:i},d))};return t.jsxs("div",{className:"mt-1 mb-2 ml-6 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-medium text-gray-700",children:['"',e.term,'" appears ',e.frequency," time",e.frequency!==1?"s":""]}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"space-y-2",children:e.contexts.map((r,a)=>t.jsxs("div",{className:"text-gray-600 text-xs leading-relaxed",children:[t.jsxs("span",{className:"text-gray-400 mr-1",children:[a+1,"."]}),s(r)]},a))})]})}function Po({keyword:e,onToggleAddressed:n}){const[s,r]=l.useState(!1),a=t.jsx("span",{className:"flex gap-0.5",title:`${e.importance} importance`,children:[0,1,2].map(o=>t.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full ${e.importance==="high"&&o<3||e.importance==="medium"&&o<2||e.importance==="low"&&o<1?"bg-teal":"bg-sage/30"}`},o))});return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center gap-2 py-1.5 group",children:[t.jsx("input",{type:"checkbox",checked:e.addressed,onChange:o=>n(e.term,o.target.checked),className:"checkbox checkbox-sm"}),t.jsx("button",{onClick:()=>r(!s),className:`flex-1 text-left text-sm ${e.addressed?"text-sage line-through":"text-wine"} hover:text-wine/70 transition-colors`,children:e.term}),a,t.jsxs("span",{className:"text-xs text-sage opacity-0 group-hover:opacity-100 transition-opacity",children:[e.frequency,"x"]})]}),s&&e.contexts&&e.contexts.length>0&&t.jsx(Oo,{keyword:e,onClose:()=>r(!1)})]})}function $o({keywords:e,onToggleAddressed:n,onRefresh:s,isExtracting:r=!1}){const a=l.useMemo(()=>Es(e),[e]),o=l.useMemo(()=>Ds(e),[e]);return e.length===0&&!r?t.jsxs("div",{className:"p-4 text-center",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No keywords extracted"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Extract keywords from the job description to track your application coverage."}),t.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Extract Keywords"]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Keywords Analysis"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," keyword",e.length!==1?"s":""," extracted"]})]}),t.jsx("button",{onClick:s,disabled:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors disabled:opacity-50",title:"Re-extract keywords",children:t.jsx("svg",{className:`w-4 h-4 ${r?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Coverage"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[o.addressed,"/",o.total," addressed (",o.percentage,"%)"]})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${o.percentage}%`}})})]}),t.jsx("div",{className:"space-y-3",children:Ts.map(c=>{const i=a[c];if(i.length===0)return null;const d=o.byCategory[c];return t.jsx(zo,{category:c,keywords:i,addressedCount:d.addressed,totalCount:d.total,onToggleAddressed:n},c)})})]})}function zo({category:e,keywords:n,addressedCount:s,totalCount:r,onToggleAddressed:a}){return t.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h4",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:[Is[e]," (",r,")"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:[s,"/",r]})]}),t.jsx("div",{className:"space-y-0.5",children:n.map(o=>t.jsx(Po,{keyword:o,onToggleAddressed:a},o.term))})]})}function Fo({posting:e,isOpen:n,onClose:s,onUpdate:r,onDelete:a,onEdit:o,connections:c=[],linkedConnections:i=[],onLinkConnection:d,onUnlinkConnection:u,onViewConnection:h,onAddConnection:f,onExtractKeywords:g,isExtractingKeywords:x=!1}){var re,Z;const[m,v]=l.useState(""),[j,b]=l.useState(!1),[k,y]=l.useState(!1),[C,E]=l.useState("details"),[w,L]=l.useState(!1);l.useEffect(()=>{L(!1)},[e==null?void 0:e.id]),l.useEffect(()=>{e&&v(e.notes)},[e==null?void 0:e.id,e==null?void 0:e.notes]),l.useEffect(()=>{E("details")},[e==null?void 0:e.id]);const M=()=>{e&&m!==e.notes&&r(e.id,{notes:m})},I=()=>{e&&(a(e.id),b(!1),s())},P=(R,V)=>{if(!e||!e.keywords)return;const B=e.keywords.map(W=>W.term===R?{...W,addressed:V}:W);r(e.id,{keywords:B})},T=()=>{e&&g&&g(e.id)};if(!e)return null;const _=R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),F=((re=e.keywords)==null?void 0:re.length)||0,Q=((Z=e.keywords)==null?void 0:Z.filter(R=>R.addressed).length)||0;return t.jsxs(Fs,{isOpen:n,onClose:s,width:"max-w-lg",children:[t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"border-b border-sage/20 bg-champagne-50 px-4 py-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(()=>{const R=bs(e.companyLogo,e.company),V=R&&!w,B=W=>{const me=W.currentTarget;me.naturalWidth<=16&&me.naturalHeight<=16&&L(!0)};return V?t.jsx("img",{src:R,alt:e.company,className:"h-12 w-12 rounded-lg object-contain bg-white border border-sage/20 flex-shrink-0",onLoad:B,onError:()=>L(!0)}):t.jsx("div",{className:"h-12 w-12 rounded-lg bg-champagne-200 flex items-center justify-center text-sm font-semibold text-wine flex-shrink-0",children:e.company.split(" ").slice(0,2).map(W=>W[0]).join("").toUpperCase()})})(),t.jsxs("div",{className:"min-w-0",children:[t.jsx("h2",{className:"text-lg font-semibold text-wine",children:e.title}),t.jsx("p",{className:"text-wine/80",children:e.company}),e.location&&t.jsx("p",{className:"text-sm text-wine/60",children:e.location})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[o&&t.jsx("button",{onClick:()=>o(e.id),className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine hover:bg-sage/10",title:"Edit posting",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),t.jsx("button",{onClick:()=>window.open(e.url,"_blank"),className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine hover:bg-sage/10",title:"Open URL (O)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),t.jsx("button",{onClick:s,className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine hover:bg-sage/10",title:"Close (Esc or ⌘S)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.jsxs("div",{className:"mt-4 flex gap-1 border-b border-sage/20 -mb-px",children:[t.jsx(ln,{active:C==="details",onClick:()=>E("details"),children:"Details"}),t.jsx(ln,{active:C==="keywords",onClick:()=>E("keywords"),badge:F>0?`${Q}/${F}`:void 0,children:"Keywords"}),t.jsx(ln,{active:C==="connections",onClick:()=>E("connections"),badge:i.length>0?i.length.toString():void 0,children:"Connections"})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[C==="details"&&t.jsx(Bo,{posting:e,notes:m,setNotes:v,handleNotesBlur:M,onUpdate:r}),C==="keywords"&&t.jsx("div",{className:"p-4",children:t.jsx($o,{keywords:e.keywords||[],onToggleAddressed:P,onRefresh:T,isExtracting:x})}),C==="connections"&&t.jsx(Wo,{linkedConnections:i,onViewConnection:h,onShowQuickLink:()=>y(!0)})]}),t.jsx("div",{className:"border-t border-sage/20 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between text-xs text-wine/50",children:[t.jsxs("div",{children:[t.jsxs("p",{children:["Added: ",_(e.dateAdded)]}),t.jsxs("p",{children:["Modified: ",_(e.dateModified)]})]}),j?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-flatred",children:"Delete this posting?"}),t.jsx("button",{onClick:I,className:"btn btn-sm btn-primary",children:"Yes"}),t.jsx("button",{onClick:()=>b(!1),className:"btn btn-sm btn-secondary",children:"No"})]}):t.jsx("button",{onClick:()=>b(!0),className:"btn btn-sm btn-danger",children:"Delete posting"})]})})]}),e&&t.jsx(mo,{isOpen:k,onClose:()=>y(!1),connections:c,posting:e,linkedConnectionIds:i.map(R=>R.id),onLinkConnection:R=>{d==null||d(R)},onUnlinkConnection:R=>{u==null||u(R)},onCreateConnection:()=>{y(!1),f==null||f()}})]})}function ln({active:e,onClick:n,children:s,badge:r}){return t.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${e?"border-wine text-wine":"border-transparent text-sage hover:text-wine hover:border-sage"}`,children:[s,r&&t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${e?"bg-champagne-100 text-wine":"bg-champagne-50 text-wine/60"}`,children:r})]})}function Bo({posting:e,notes:n,setNotes:s,handleNotesBlur:r,onUpdate:a}){return t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Status"}),t.jsx("select",{value:e.status,onChange:o=>a(e.id,{status:o.target.value}),className:"w-full rounded-md border border-sage/30 px-3 py-2 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine",children:Rs.map(o=>t.jsx("option",{value:o,children:$e[o]},o))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Interest"}),t.jsx(Lt,{priority:e.interest,onChange:o=>a(e.id,{interest:o})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Tags"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.tags.map(o=>t.jsx(it,{tag:o,onRemove:()=>a(e.id,{tags:e.tags.filter(c=>c!==o)})},o)),t.jsx(Ws,{tags:e.tags,onTagsChange:o=>a(e.id,{tags:o}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Next Action Date"}),t.jsx("input",{type:"date",value:e.nextActionDate||"",onChange:o=>a(e.id,{nextActionDate:o.target.value||void 0}),className:"w-full rounded-md border border-sage/30 px-3 py-2 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"})]}),e.salary&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Salary"}),t.jsx("p",{className:"text-sm text-wine/70",children:e.salary})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Description"}),t.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-sage/20 bg-champagne-50 p-3 text-sm text-wine/70 whitespace-pre-wrap",children:e.description||"No description available"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Notes"}),t.jsx("textarea",{value:n,onChange:o=>s(o.target.value),onBlur:r,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-sage/30 px-3 py-2 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"})]})]})}function Wo({linkedConnections:e,onViewConnection:n,onShowQuickLink:s}){return t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium text-wine",children:["Linked Connections (",e.length,")"]}),t.jsx("button",{onClick:s,className:"text-xs text-flatred hover:text-flatred-600",children:"+ Link Connection"})]}),e.length>0?t.jsx("div",{className:"space-y-2",children:e.map(r=>t.jsx(ps,{connection:r,onSelect:a=>n==null?void 0:n(a),compact:!0},r.id))}):t.jsxs("div",{className:"rounded-md bg-champagne-50 p-4 text-center",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-full bg-champagne-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-sage",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-sm text-wine/60 mb-2",children:"No connections linked"}),t.jsx("button",{onClick:s,className:"text-sm text-flatred hover:text-flatred-600",children:"Link a connection"})]})]})}function Uo(e){return Pt(e.status)?!1:(Date.now()-e.dateModified)/(1e3*60*60*24)>=7}function Ho(e){return(Date.now()-e.dateAdded)/864e5<=7}function _o(e){return l.useMemo(()=>{const n={saved:0,in_progress:0,applied:0,interviewing:0,offer:0,accepted:0,rejected:0,withdrawn:0};let s=0,r=0,a=0;return e.forEach(o=>{n[o.status]++,Pt(o.status)||s++,Ho(o)&&r++,Uo(o)&&a++}),{total:e.length,active:s,thisWeek:r,stale:a,byStatus:n}},[e])}function Vo(e){const n=l.useCallback(s=>{const r=s.target,a=r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r.isContentEditable;for(const o of e){if(a&&!o.allowInInput&&s.key!=="Escape")continue;const c=o.meta?s.metaKey:!s.metaKey,i=o.ctrl?s.ctrlKey:!s.ctrlKey,d=o.shift?s.shiftKey:!s.shiftKey;if((s.key.toLowerCase()===o.key.toLowerCase()||s.key===o.key)&&c&&i&&d){s.preventDefault(),o.handler();return}}},[e]);l.useEffect(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n])}function Ko(){const[e,n]=l.useState([]),[s,r]=l.useState([]),[a,o]=l.useState(!0),[c,i]=l.useState("jobs"),[d,u]=l.useState("kanban"),[h,f]=l.useState(""),[g,x]=l.useState(null),[m,v]=l.useState(null),[j,b]=l.useState(!1),[k,y]=l.useState(!1),[C,E]=l.useState(null),[w,L]=l.useState(["rejected"]),[M,I]=l.useState(null),[P,T]=l.useState(!1),[_,F]=l.useState(!1),[Q,re]=l.useState(null),[Z,R]=l.useState([]),[V,B]=l.useState(""),[W,me]=l.useState(null),[ee,ge]=l.useState(null),[S,$]=l.useState(!1),[z,we]=l.useState(!1),[ae,ye]=l.useState(!1),[K,Ue]=l.useState(!1),[ue,tt]=l.useState(!1),[Le,Me]=l.useState(!1),[oe,ie]=l.useState(null),nt=l.useRef(null),[st,pe]=l.useState(!1),[He,ze]=l.useState(!1),bt=_o(e),vt=l.useCallback(async p=>{ze(p);try{await Js(p)}catch(N){console.error("Failed to save stats expanded preference:",N)}},[]);l.useEffect(()=>{(async()=>{try{await er();const[D,O,Ee,Gt,Xt]=await Promise.all([qe(),de(),Ks(),Gs(),qs()]);n(D),r(O),u(Ee),L(Gt),ze(Xt)}catch(D){console.error("Failed to initialize app:",D)}finally{o(!1)}})();const N=D=>{D.postings&&n(D.postings.newValue||[]),D.connections&&r(D.connections.newValue||[])};return chrome.storage.onChanged.addListener(N),()=>chrome.storage.onChanged.removeListener(N)},[]),l.useEffect(()=>{const N=new URLSearchParams(window.location.search).get("highlight");N&&(v(N),b(!0))},[]);const Ae=l.useCallback(async p=>{try{await Je(p),n(p)}catch(N){console.error("Failed to save postings:",N)}},[]),Ht=l.useCallback(async p=>{u(p);try{await Ys(p)}catch(N){console.error("Failed to save view preference:",N)}},[]),Re=l.useCallback(async p=>{L(p);try{await Xs(p)}catch(N){console.error("Failed to save collapsed columns:",N)}},[]),Ie=l.useMemo(()=>{const p=new Set;return e.forEach(N=>N.tags.forEach(D=>p.add(D))),Array.from(p).sort()},[e]),Fe=l.useMemo(()=>{const p=new Set;return e.forEach(N=>p.add(N.company)),Array.from(p).sort()},[e]),wt=p=>Pt(p.status)?!1:(Date.now()-p.dateModified)/(1e3*60*60*24)>=7,je=p=>{if(!p.nextActionDate)return!1;const N=new Date(p.nextActionDate),D=new Date,O=(N.getTime()-D.getTime())/(1e3*60*60*24);return O>=0&&O<=7},be=l.useMemo(()=>e.filter(p=>{const N=h.toLowerCase(),D=!h||p.title.toLowerCase().includes(N)||p.company.toLowerCase().includes(N)||p.location.toLowerCase().includes(N)||p.notes.toLowerCase().includes(N)||p.tags.some(at=>at.toLowerCase().includes(N)),O=!g||p.interest===g,Ee=!oe||p.status===oe,Gt=Z.length===0||Z.some(at=>p.tags.includes(at)),Xt=!V||p.company.toLowerCase().includes(V.toLowerCase()),Nn=new Date(p.dateAdded),ys=!W||Nn>=new Date(W),js=!ee||Nn<=new Date(ee+"T23:59:59"),Ns=!S||!!p.nextActionDate,ks=!z||je(p),Cs=!ae||wt(p),kn=s.filter(at=>at.linkedPostingIds.includes(p.id)),Ss=!K||kn.length>0,Ls=!ue||kn.length===0;return D&&O&&Ee&&Gt&&Xt&&ys&&js&&Ns&&ks&&Cs&&Ss&&Ls}),[e,s,h,g,oe,Z,V,W,ee,S,z,ae,K,ue]),_t=l.useMemo(()=>{let p=0;return h&&p++,g!==null&&p++,oe!==null&&p++,Z.length>0&&p++,V&&p++,(W||ee)&&p++,S&&p++,z&&p++,ae&&p++,K&&p++,ue&&p++,p},[h,g,oe,Z,V,W,ee,S,z,ae,K,ue]),Vt=l.useCallback(()=>{f(""),x(null),ie(null),R([]),B(""),me(null),ge(null),$(!1),we(!1),ye(!1),Ue(!1),tt(!1)},[]),_e=l.useCallback(()=>{var p;(p=nt.current)==null||p.focus()},[]),yt=l.useCallback(()=>{if(!m)return;const p=e.find(D=>D.id===m);if(!p)return;const N=p.interest%5+1;rt(m,N)},[m,e]),Kt=l.useCallback(()=>{if(!m)return;const p=e.find(N=>N.id===m);p&&window.open(p.url,"_blank")},[m,e]),jt=l.useCallback(()=>{m&&confirm("Are you sure you want to delete this posting?")&&q(m)},[m]),Ve=l.useCallback(p=>{if(be.length===0)return;const N=m?be.findIndex(O=>O.id===m):-1;let D;p==="next"?D=N<be.length-1?N+1:0:D=N>0?N-1:be.length-1,v(be[D].id)},[be,m]),Nt=p=>{v(p),b(!0)},rt=(p,N)=>{const D=e.map(O=>O.id===p?{...O,interest:N,dateModified:Date.now()}:O);Ae(D)},Y=(p,N)=>{const D=e.map(O=>O.id===p?{...O,status:N,dateModified:Date.now(),dateApplied:N==="applied"&&!O.dateApplied?Date.now():O.dateApplied}:O);Ae(D)},te=(p,N)=>{const D=e.map(O=>O.id===p?{...O,...N,dateModified:Date.now()}:O);Ae(D)},q=p=>{const N=e.filter(D=>D.id!==p);Ae(N),m===p&&(v(null),b(!1))},Ne=p=>{const N=e.find(D=>D.id===p);N&&(E(N),y(!0))},le=(p,N)=>{te(p,N),y(!1),E(null)},ne=l.useCallback(p=>{const N=e.find(D=>D.id===p);!N||!N.description||(pe(!0),setTimeout(()=>{try{const D=Ms(N.description),O=e.map(Ee=>Ee.id===p?{...Ee,keywords:D,keywordsExtractedAt:Date.now(),dateModified:Date.now()}:Ee);Ae(O)}catch(D){console.error("Failed to extract keywords:",D)}finally{pe(!1)}},10))},[e,Ae]),ce=l.useCallback(p=>s.filter(N=>N.linkedPostingIds.includes(p)),[s]),Te=l.useCallback(async p=>{if(m)try{await Hs(p,m);const N=await de();r(N)}catch(N){console.error("Failed to link connection:",N)}},[m]),G=l.useCallback(async p=>{if(m)try{await En(p,m);const N=await de();r(N)}catch(N){console.error("Failed to unlink connection:",N)}},[m]),ke=l.useCallback(p=>{console.log("View connection:",p)},[]),he=l.useCallback(()=>{re(null),F(!0)},[]),xe=l.useCallback(p=>{const N=s.find(D=>D.id===p);N&&(re(N),F(!0))},[s]),Be=l.useCallback(async p=>{try{await Ln(p);const N=await de();r(N),F(!1),re(null)}catch(N){console.error("Failed to save connection:",N)}},[]),We=l.useCallback(async p=>{if(confirm("Are you sure you want to delete this connection?"))try{await Us(p);const N=await de();r(N),T(!1),I(null)}catch(N){console.error("Failed to delete connection:",N)}},[]),Ce=l.useCallback(p=>{I(p),T(!0)},[]),Oe=l.useCallback(async(p,N)=>{const D=s.find(O=>O.id===p);if(D)try{const O={...D,...N,dateModified:Date.now()};await Ln(O);const Ee=await de();r(Ee)}catch(O){console.error("Failed to update connection:",O)}},[s]),Ke=l.useCallback(p=>{v(p),b(!0)},[]),vs=l.useCallback(p=>{const N=s.find(D=>D.id===p);return N?e.filter(D=>N.linkedPostingIds.includes(D.id)):[]},[s,e]),jn=l.useCallback(()=>{alert("Use the extension popup on a job posting page to add new jobs.")},[]),ws=l.useCallback(p=>{p==="jobs"||p==="connections"?i(p):p==="settings"?console.log("Settings clicked"):p==="help"&&Me(!0)},[]);Vo([{key:"/",handler:_e},{key:"k",meta:!0,handler:_e},{key:"Escape",allowInInput:!0,handler:()=>{j?b(!1):h&&f("")}},{key:"?",handler:()=>Me(!0)},{key:"n",handler:jn},{key:"1",handler:()=>ie("saved")},{key:"2",handler:()=>ie("in_progress")},{key:"3",handler:()=>ie("applied")},{key:"4",handler:()=>ie("interviewing")},{key:"5",handler:()=>ie("offer")},{key:"6",handler:()=>ie("accepted")},{key:"7",handler:()=>ie("rejected")},{key:"0",handler:()=>ie(null)},{key:"j",handler:()=>Ve("next")},{key:"ArrowDown",handler:()=>Ve("next")},{key:"k",handler:()=>Ve("prev")},{key:"ArrowUp",handler:()=>Ve("prev")},{key:"Enter",handler:()=>m&&b(!0)},{key:"s",handler:yt},{key:"e",handler:()=>m&&b(!0)},{key:"o",handler:Kt},{key:"d",handler:jt},{key:"s",meta:!0,allowInInput:!0,handler:()=>b(!1)}]);const Yt=e.find(p=>p.id===m)||null;if(a)return t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-champagne-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-flatred border-t-transparent"}),t.jsx("p",{className:"mt-2 text-wine/70",children:"Loading..."})]})});const Se=s.find(p=>p.id===M)||null;return t.jsxs("div",{className:"flex h-screen bg-champagne-50",children:[t.jsx(zs,{currentPage:c,onNavigate:ws,jobCount:e.length,connectionCount:s.length}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:c==="jobs"?t.jsxs(t.Fragment,{children:[t.jsx(Er,{postings:e,activeStatus:oe,onStatusClick:ie}),t.jsx(Nr,{searchQuery:h,onSearchChange:f,priorityFilter:g,onPriorityFilterChange:x,currentView:d,onViewChange:Ht,onAddClick:jn,availableTags:Ie,availableCompanies:Fe,tagFilters:Z,onTagFiltersChange:R,companyFilter:V,onCompanyFilterChange:B,dateFrom:W,dateTo:ee,onDateFromChange:me,onDateToChange:ge,hasDeadline:S,deadlineSoon:z,needsAction:ae,hasConnections:K,noConnections:ue,onHasDeadlineChange:$,onDeadlineSoonChange:we,onNeedsActionChange:ye,onHasConnectionsChange:Ue,onNoConnectionsChange:tt,onClearAllFilters:Vt,activeFilterCount:_t,searchInputRef:nt,statusFilter:oe,onStatusFilterChange:ie}),t.jsx(Sr,{stats:bt,expanded:He,onExpandedChange:vt}),t.jsx("main",{className:"flex-1 overflow-hidden",children:d==="kanban"?t.jsx(Io,{postings:be,onPostingSelect:Nt,onPriorityChange:rt,onStatusChange:Y,onDelete:q,onEdit:p=>{v(p),b(!0)},collapsedColumns:w,onCollapseChange:Re,getLinkedConnections:ce,onConnectionClick:Ke,selectedPostingId:m}):t.jsx(To,{postings:be,onPostingSelect:Nt,onPriorityChange:rt,onStatusChange:Y,onDelete:q,getLinkedConnections:ce,onConnectionClick:Ke})}),t.jsx(Fo,{posting:Yt,isOpen:j,onClose:()=>b(!1),onUpdate:te,onDelete:q,onEdit:Ne,connections:s,linkedConnections:Yt?ce(Yt.id):[],onLinkConnection:Te,onUnlinkConnection:G,onViewConnection:ke,onAddConnection:he,onExtractKeywords:ne,isExtractingKeywords:st})]}):t.jsx(co,{connections:s,onSelectConnection:Ce,onAddConnection:he,onEditConnection:xe})}),t.jsx(uo,{isOpen:_,onClose:()=>{F(!1),re(null)},onSave:Be,connection:Q}),Se&&t.jsx(ho,{connection:Se,isOpen:P,onClose:()=>{T(!1),I(null)},onEdit:()=>xe(Se.id),onDelete:()=>We(Se.id),linkedPostings:vs(Se.id),onViewPosting:p=>{v(p),b(!0),i("jobs")},onLogContact:async p=>{const N={...Se,contactHistory:[...Se.contactHistory,p],lastContactDate:p.date};await Oe(Se.id,N)},onUnlinkPosting:async p=>{await En(Se.id,p);const N=await de();r(N)},onUpdateFollowUp:async p=>{await Oe(Se.id,{nextFollowUp:p})}}),t.jsx(vo,{isOpen:k,onClose:()=>{y(!1),E(null)},onSave:le,posting:C}),t.jsx(yr,{isOpen:Le,onClose:()=>Me(!1)})]})}As.createRoot(document.getElementById("root")).render(t.jsx(U.StrictMode,{children:t.jsx(Ko,{})}));
