import{r as i,j as t,R as W,a as ot,g as Ns,b as ks,e as Cs,c as Ss}from"./extractor-BlsyOXNW.js";const Ls=["saved","in_progress","applied","interviewing","offer","accepted","rejected","withdrawn"],Re={saved:"Saved",in_progress:"In Progress",applied:"Applied",interviewing:"Interviewing",offer:"Offer",accepted:"Accepted",rejected:"Rejected",withdrawn:"Withdrawn"},Ue=["saved","in_progress","applied","interviewing","offer","accepted","rejected"],Ds={required_skill:"Required Skills",preferred_skill:"Preferred Skills",soft_skill:"Soft Skills",experience:"Experience",education:"Education",values:"Values & Culture",tools:"Tools",industry:"Industry"},Es=["required_skill","preferred_skill","soft_skill","experience","education","tools","values","industry"],Lt={recruiter:"Recruiter",employee:"Employee",referral:"Referral",alumni:"Alumni",other:"Other"},Un={1:"Weak",2:"Moderate",3:"Strong"},kt={email:"Email",call:"Call",meeting:"Meeting",linkedin:"LinkedIn",other:"Other"},Ms=["accepted","rejected","withdrawn"];function Ot(e){return Ms.includes(e)}const Rs={saved:"bg-pandora",in_progress:"bg-champagne-400",applied:"bg-teal",interviewing:"bg-wine",offer:"bg-pandora-500",accepted:"bg-teal-600",rejected:"bg-flatred",withdrawn:"bg-sage"};function As({status:e,count:n,total:s}){const r=s>0?n/s*100:0;return n===0?null:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-16 truncate text-xs text-champagne/70",children:Re[e]}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"h-1.5 overflow-hidden rounded-full bg-wine-400/30",children:t.jsx("div",{className:`h-full ${Rs[e]} transition-all duration-300`,style:{width:`${r}%`}})})}),t.jsx("span",{className:"w-5 text-right text-xs font-medium text-champagne/80",children:n})]})}function Is({stats:e,isExpanded:n}){const[s,r]=i.useState(()=>{const o=localStorage.getItem("sidebar-stats-expanded");return o!==null?o==="true":!1});return i.useEffect(()=>{localStorage.setItem("sidebar-stats-expanded",String(s))},[s]),n?t.jsxs("div",{className:"px-3 py-2",children:[t.jsxs("button",{onClick:()=>r(!s),className:"flex w-full items-center justify-between rounded-lg px-2 py-1.5 text-champagne/70 transition-colors hover:bg-wine-400/20 hover:text-champagne",children:[t.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Stats"}),t.jsx("svg",{className:`h-4 w-4 transition-transform duration-200 ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-1",children:[t.jsxs("div",{className:"rounded-lg bg-wine-400/20 px-2 py-1.5 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-champagne",children:e.total}),t.jsx("div",{className:"text-[10px] text-champagne/60",children:"Total"})]}),t.jsxs("div",{className:"rounded-lg bg-wine-400/20 px-2 py-1.5 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-pandora",children:e.active}),t.jsx("div",{className:"text-[10px] text-champagne/60",children:"Active"})]}),t.jsxs("div",{className:"rounded-lg bg-wine-400/20 px-2 py-1.5 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-teal-400",children:e.thisWeek}),t.jsx("div",{className:"text-[10px] text-champagne/60",children:"Week"})]})]}),e.stale>0&&t.jsxs("div",{className:"mt-1.5 flex items-center justify-center gap-1 rounded-lg bg-flatred/20 px-2 py-1",children:[t.jsx("svg",{className:"h-3 w-3 text-flatred",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsxs("span",{className:"text-xs text-flatred",children:[e.stale," stale"]})]}),s&&t.jsxs("div",{className:"mt-3 space-y-1.5 border-t border-wine-400/30 pt-3",children:[t.jsx("div",{className:"mb-2 text-[10px] font-medium uppercase tracking-wider text-champagne/50",children:"By Status"}),Ue.map(o=>t.jsx(As,{status:o,count:e.byStatus[o],total:e.total},o))]})]}):t.jsx("div",{className:"flex flex-col items-center gap-1 py-2",children:t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-wine-400/20",children:t.jsx("span",{className:"text-sm font-bold text-champagne",children:e.total})})})}const Os=(e,n)=>[{id:"jobs",label:"Jobs",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),badge:e},{id:"connections",label:"Connections",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),badge:n}],Ts=[{id:"settings",label:"Settings",icon:t.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"help",label:"Help",icon:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}];function wn({children:e,label:n,show:s}){const[r,o]=i.useState(!1);return s?t.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[e,r&&t.jsxs("div",{className:"absolute left-full top-1/2 z-tooltip ml-2 -translate-y-1/2 whitespace-nowrap rounded-md bg-wine-600 px-2.5 py-1.5 text-xs font-medium text-white shadow-lg",children:[n,t.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-wine-600"})]})]}):t.jsx(t.Fragment,{children:e})}function Ps({currentPage:e,onNavigate:n,jobCount:s,connectionCount:r,stats:o}){const[a,d]=i.useState(()=>{const c=localStorage.getItem("sidebar-expanded");return c!==null?c==="true":!0});i.useEffect(()=>{localStorage.setItem("sidebar-expanded",String(a))},[a]);const l=Os(s,r);return t.jsxs("aside",{className:`
        flex flex-col bg-wine transition-all duration-slow ease-out
        ${a?"w-56":"w-16"}
      `,children:[t.jsxs("div",{className:`flex items-center border-b border-wine-400/30 p-4 ${a?"justify-between":"justify-center"}`,children:[a&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-flatred",children:t.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("span",{className:"text-lg font-bold text-champagne",children:"JobFlow"})]}),t.jsx("button",{onClick:()=>d(!a),className:"flex h-8 w-8 items-center justify-center rounded-lg text-champagne/70 transition-colors hover:bg-wine-400/20 hover:text-champagne",title:a?"Collapse sidebar":"Expand sidebar",children:t.jsx("svg",{className:`h-5 w-5 transition-transform duration-slow ${a?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),t.jsx("nav",{className:"flex-1 p-2",children:t.jsx("ul",{className:"space-y-1",children:l.map(c=>{const u=e===c.id;return t.jsx("li",{children:t.jsx(wn,{label:c.label,show:!a,children:t.jsxs("button",{onClick:()=>n(c.id),className:`
                      group flex w-full items-center gap-3 rounded-lg px-3 py-2.5
                      transition-all duration-base
                      ${u?"bg-flatred text-white shadow-md":"text-champagne/80 hover:bg-pandora/20 hover:text-pandora"}
                      ${a?"":"justify-center"}
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2 focus-visible:ring-offset-wine
                    `,children:[t.jsx("span",{className:`flex-shrink-0 transition-transform duration-base ${u?"":"group-hover:scale-110"}`,children:c.icon}),a&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-1 text-left text-sm font-medium",children:c.label}),c.badge!==void 0&&c.badge>0&&t.jsx("span",{className:`
                              rounded-full px-2 py-0.5 text-xs font-bold
                              ${u?"bg-white/20 text-white":"bg-pandora/30 text-pandora"}
                            `,children:c.badge})]}),!a&&c.badge!==void 0&&c.badge>0&&t.jsx("span",{className:"absolute -right-0.5 -top-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-pandora text-[10px] font-bold text-white",children:c.badge>99?"99+":c.badge})]})})},c.id)})})}),o&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-4 border-t border-wine-400/30"}),t.jsx(Is,{stats:o,isExpanded:a})]}),t.jsx("div",{className:"mx-4 border-t border-wine-400/30"}),t.jsx("nav",{className:"p-2",children:t.jsx("ul",{className:"space-y-1",children:Ts.map(c=>{const u=e===c.id;return t.jsx("li",{children:t.jsx(wn,{label:c.label,show:!a,children:t.jsxs("button",{onClick:()=>n(c.id),className:`
                      group flex w-full items-center gap-3 rounded-lg px-3 py-2.5
                      transition-all duration-base
                      ${u?"bg-flatred text-white shadow-md":"text-champagne/60 hover:bg-wine-400/20 hover:text-champagne"}
                      ${a?"":"justify-center"}
                      focus:outline-none focus-visible:ring-2 focus-visible:ring-flatred focus-visible:ring-offset-2 focus-visible:ring-offset-wine
                    `,children:[t.jsx("span",{className:"flex-shrink-0",children:c.icon}),a&&t.jsx("span",{className:"text-sm font-medium",children:c.label})]})})},c.id)})})}),a&&t.jsx("div",{className:"border-t border-wine-400/30 p-4",children:t.jsxs("p",{className:"text-xs text-champagne/50",children:["Press ",t.jsx("kbd",{className:"rounded bg-wine-400/30 px-1.5 py-0.5 font-mono text-champagne/70",children:"?"})," for shortcuts"]})})]})}function zs({isOpen:e,onClose:n,title:s,children:r,width:o="max-w-md"}){const a=i.useCallback(d=>{d.key==="Escape"&&n()},[n]);return i.useEffect(()=>(e&&(document.addEventListener("keydown",a),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",a),document.body.style.overflow=""}),[e,a]),e?t.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-wine/50 animate-fade-in",onClick:n}),t.jsx("div",{className:"fixed inset-y-0 right-0 flex max-w-full pl-10 animate-slide-right",children:t.jsx("div",{className:`w-screen ${o}`,children:t.jsxs("div",{className:"flex h-full flex-col bg-white shadow-xl",children:[s&&t.jsxs("div",{className:"flex items-center justify-between border-b border-sage/20 px-4 py-3",children:[t.jsx("h2",{className:"text-lg font-semibold text-wine",children:s}),t.jsxs("button",{onClick:n,className:"rounded-md text-sage hover:text-wine focus:outline-none focus:ring-2 focus:ring-wine",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:r})]})})})]}):null}function Fs({value:e,onChange:n,placeholder:s="Search...",debounceMs:r=300,inputRef:o}){const[a,d]=i.useState(e);i.useEffect(()=>{d(e)},[e]),i.useEffect(()=>{const u=setTimeout(()=>{a!==e&&n(a)},r);return()=>clearTimeout(u)},[a,e,n,r]);const l=u=>{d(u.target.value)},c=()=>{d(""),n("")};return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:t.jsx("svg",{className:"h-5 w-5 text-sage",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"})})}),t.jsx("input",{ref:o,type:"text",value:a,onChange:l,placeholder:s,className:"block w-full rounded-md border border-sage/30 bg-white py-2 pl-10 pr-8 text-sm text-wine placeholder-sage focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"}),a&&t.jsx("button",{onClick:c,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-sage hover:text-wine",children:t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function yn({label:e,options:n,value:s,onChange:r}){const[o,a]=i.useState(!1),d=i.useRef(null);i.useEffect(()=>{const c=u=>{d.current&&!d.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const l=n.find(c=>c.value===s);return t.jsxs("div",{className:"relative",ref:d,children:[t.jsxs("button",{onClick:()=>a(!o),className:"inline-flex items-center gap-1 rounded-md border border-sage/30 bg-white px-3 py-2 text-sm font-medium text-wine hover:bg-champagne-50 focus:outline-none focus:ring-2 focus:ring-wine",children:[l?l.label:e,t.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})]}),o&&t.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-sage/20",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>{r(null),a(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===null?"bg-champagne-100 text-wine":"text-wine/80 hover:bg-champagne-50"}`,children:"All"}),n.map(c=>t.jsx("button",{onClick:()=>{r(c.value),a(!1)},className:`block w-full px-4 py-2 text-left text-sm ${s===c.value?"bg-champagne-100 text-wine":"text-wine/80 hover:bg-champagne-50"}`,children:c.label},String(c.value)))]})})]})}function Wn({interest:e,onChange:n,size:s="md",readOnly:r=!1}){const o=s==="sm"?"h-3.5 w-3.5":"h-4 w-4",a=s==="sm"?"gap-0":"gap-0.5",d=l=>{!r&&n&&n(l)};return t.jsx("div",{className:`flex ${a}`,title:`Interest: ${e}/5`,children:[1,2,3,4,5].map(l=>t.jsx("button",{onClick:()=>d(l),disabled:r,className:`${r?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,title:`Interest ${l}`,children:t.jsx("svg",{className:`${o} ${l<=e?"text-pandora":"text-sage/30"}`,viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})})},l))})}function Ct({priority:e,onChange:n,size:s="md",readOnly:r=!1}){return t.jsx(Wn,{interest:e,onChange:n,size:s,readOnly:r})}function it({tag:e,onRemove:n,size:s="sm",className:r=""}){const o=s==="sm"?"px-1.5 py-0.5 text-[10px]":"px-2.5 py-1 text-sm";return t.jsxs("span",{className:`inline-flex items-center gap-1 rounded bg-wine/10 text-wine/70 whitespace-nowrap ${o} ${r}`,children:[e,n&&t.jsx("button",{onClick:n,className:"ml-0.5 inline-flex h-3.5 w-3.5 items-center justify-center rounded hover:bg-wine/20 hover:text-wine",children:t.jsx("svg",{className:"h-2.5 w-2.5",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})})]})}function $s({tags:e,onTagsChange:n,suggestedTags:s=[]}){const[r,o]=i.useState(!1),[a,d]=i.useState(""),l=i.useRef(null),c=i.useRef(null);i.useEffect(()=>{const x=m=>{l.current&&!l.current.contains(m.target)&&o(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),i.useEffect(()=>{r&&c.current&&c.current.focus()},[r]);const u=x=>{const m=x.trim().toLowerCase();m&&!e.includes(m)&&n([...e,m]),d("")},h=x=>{n(e.filter(m=>m!==x))},f=x=>{x.key==="Enter"&&a.trim()&&(x.preventDefault(),u(a))},p=s.filter(x=>!e.includes(x));return t.jsxs("div",{className:"relative",ref:l,children:[t.jsxs("button",{onClick:()=>o(!r),className:"btn btn-sm btn-ghost !h-auto !px-2 !py-1 border border-dashed border-sage/40 text-sage hover:border-sage hover:text-wine",children:[t.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})}),"Add tag"]}),r&&t.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white p-3 shadow-lg ring-1 ring-sage/20",children:[t.jsx("input",{ref:c,type:"text",value:a,onChange:x=>d(x.target.value),onKeyDown:f,placeholder:"Type and press Enter",className:"w-full rounded border border-sage/30 px-2 py-1 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"}),e.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(x=>t.jsx(it,{tag:x,onRemove:()=>h(x)},x))}),p.length>0&&t.jsxs("div",{className:"mt-2 border-t border-sage/20 pt-2",children:[t.jsx("p",{className:"mb-1 text-xs text-sage",children:"Suggestions:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:p.slice(0,5).map(x=>t.jsx("button",{onClick:()=>u(x),className:"badge badge-neutral hover:bg-champagne-light cursor-pointer",children:x},x))})]})]})]})}function Yt({children:e,items:n}){const[s,r]=i.useState(!1),[o,a]=i.useState({x:0,y:0}),d=i.useRef(null);i.useEffect(()=>{const u=f=>{d.current&&!d.current.contains(f.target)&&r(!1)},h=f=>{f.key==="Escape"&&r(!1)};return document.addEventListener("mousedown",u),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",h)}},[]);const l=u=>{u.preventDefault(),a({x:u.clientX,y:u.clientY}),r(!0)},c=u=>{u.onClick(),r(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onContextMenu:l,children:e}),s&&t.jsx("div",{ref:d,className:"fixed z-50 min-w-[160px] rounded-md bg-white py-1 shadow-lg ring-1 ring-sage/20",style:{left:o.x,top:o.y},children:n.map((u,h)=>u.divider?t.jsx("div",{className:"my-1 border-t border-sage/20"},h):t.jsxs("button",{onClick:()=>c(u),className:`btn btn-ghost !h-auto !justify-start w-full gap-2 px-4 py-2 text-left text-sm rounded-none ${u.danger?"text-flatred hover:bg-flatred-50":""}`,children:[u.icon,u.label]},h))})]})}const Q={POSTINGS:"postings",CONNECTIONS:"connections",SETTINGS:"settings",SCHEMA_VERSION:"schemaVersion",VIEW_PREFERENCE:"viewPreference",COLLAPSED_COLUMNS:"collapsedColumns"};async function Xe(){return(await chrome.storage.local.get(Q.POSTINGS))[Q.POSTINGS]||[]}async function qe(e){await chrome.storage.local.set({[Q.POSTINGS]:e})}async function le(){return(await chrome.storage.local.get(Q.CONNECTIONS))[Q.CONNECTIONS]||[]}async function Ge(e){await chrome.storage.local.set({[Q.CONNECTIONS]:e})}async function jn(e){const n=await le(),s=n.findIndex(r=>r.id===e.id);s>=0?n[s]={...e,dateModified:Date.now()}:n.push(e),await Ge(n)}async function Bs(e){const s=(await le()).filter(a=>a.id!==e);await Ge(s);const o=(await Xe()).map(a=>({...a,connectionIds:a.connectionIds.filter(d=>d!==e)}));await qe(o)}async function Us(e,n){const s=await le(),r=await Xe(),o=s.findIndex(d=>d.id===e);if(o>=0){const d=s[o];d.linkedPostingIds.includes(n)||(s[o]={...d,linkedPostingIds:[...d.linkedPostingIds,n],dateModified:Date.now()})}const a=r.findIndex(d=>d.id===n);if(a>=0){const d=r[a];d.connectionIds.includes(e)||(r[a]={...d,connectionIds:[...d.connectionIds,e],dateModified:Date.now()})}await Ge(s),await qe(r)}async function Nn(e,n){const s=await le(),r=await Xe(),o=s.findIndex(d=>d.id===e);if(o>=0){const d=s[o];s[o]={...d,linkedPostingIds:d.linkedPostingIds.filter(l=>l!==n),dateModified:Date.now()}}const a=r.findIndex(d=>d.id===n);if(a>=0){const d=r[a];r[a]={...d,connectionIds:d.connectionIds.filter(l=>l!==e),dateModified:Date.now()}}await Ge(s),await qe(r)}async function Ws(){return(await chrome.storage.local.get(Q.SETTINGS))[Q.SETTINGS]||Hs()}function Hs(){return{defaultView:"kanban",theme:"light",collapsedColumns:["rejected"]}}async function _s(){return(await chrome.storage.local.get(Q.VIEW_PREFERENCE))[Q.VIEW_PREFERENCE]||"kanban"}async function Vs(e){await chrome.storage.local.set({[Q.VIEW_PREFERENCE]:e})}async function Ks(){return(await chrome.storage.local.get(Q.COLLAPSED_COLUMNS))[Q.COLLAPSED_COLUMNS]??["rejected"]}async function Ys(e){await chrome.storage.local.set({[Q.COLLAPSED_COLUMNS]:e})}async function Xs(){return(await chrome.storage.local.get(Q.SCHEMA_VERSION))[Q.SCHEMA_VERSION]||1}async function qs(e){await chrome.storage.local.set({[Q.SCHEMA_VERSION]:e})}const kn=3,Cn=["jobApplications","applications"];async function Gs(){const e=await Xs();if(e>=kn)return;const n=await chrome.storage.local.get([...Cn,"postings"]);let s=[];for(const r of Cn)if(n[r]&&Array.isArray(n[r])&&n[r].length>0){s=n[r];break}if(s.length>0){const r=Hn(s),o=n.postings||[],a=new Set(o.map(c=>c.url)),d=r.filter(c=>!a.has(c.url)),l=[...o,...d];await qe(l),await chrome.storage.local.set({_v1_backup:s})}e<3&&await Js(),await qs(kn)}async function Js(){const e=await le();if(e.length===0)return;const n=e.map(s=>({...s,email:s.email||void 0,linkedInUrl:s.linkedInUrl||void 0,relationshipType:s.relationshipType||"other",howWeMet:s.howWeMet||void 0,relationshipStrength:s.relationshipStrength||2,notes:s.notes||s.relationshipNotes||"",contactHistory:s.contactHistory||[],dateAdded:s.dateAdded||Date.now(),dateModified:s.dateModified||Date.now()}));await Ge(n)}function Hn(e){return e.map(n=>({id:n.id,url:n.url,company:n.company,companyLogo:void 0,title:n.title,location:n.location,description:n.description,salary:n.salary,status:n.status,interest:Qs(n.interest),tags:n.tags||[],notes:n.notes||"",dateAdded:Xt(n.dateAdded),dateModified:Xt(n.dateAdded),dateApplied:n.dateApplied?Xt(n.dateApplied):void 0,nextActionDate:void 0,connectionIds:[]}))}function Qs(e){return!e||e<=1?2:e===2||e===3?3:e===4?4:5}function Xt(e){if(typeof e=="number")return e;const n=new Date(e).getTime();return isNaN(n)?Date.now():n}async function Zs(){const[e,n,s]=await Promise.all([Xe(),le(),Ws()]);return{version:3,exportDate:new Date().toISOString(),postings:e,connections:n,settings:s}}async function er(){const e=await Zs(),n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=`jobflow-backup-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s)}async function tr(e){try{const n=await e.text(),s=JSON.parse(n);let r;if(s.version===1||!s.version){const o=s.postings||s.applications||[],a=Hn(o);r={version:2,exportDate:s.exportDate||new Date().toISOString(),postings:a,connections:s.connections||[],settings:s.settings||{defaultView:"kanban",theme:"light"}}}else r=s;return Array.isArray(r.postings)?{success:!0,data:r,fileName:e.name}:{success:!1,data:null,fileName:e.name,error:"Invalid file format: missing postings array"}}catch(n){return{success:!1,data:null,fileName:e.name,error:n instanceof Error?n.message:"Failed to parse JSON file"}}}function nr(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.title=="string"&&typeof n.company=="string"&&typeof n.url=="string"&&n.id.length>0&&n.title.length>0}function sr(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n){const o=s.get(r.id);(!o||r.dateModified>o.dateModified)&&s.set(r.id,r)}return Array.from(s.values())}function rr(e){if(typeof e!="object"||e===null)return!1;const n=e;return typeof n.id=="string"&&typeof n.name=="string"&&typeof n.company=="string"&&n.id.length>0&&n.name.length>0}function ar(e){return{id:e.id,name:e.name,email:e.email||void 0,linkedInUrl:e.linkedInUrl||void 0,company:e.company,role:e.role||void 0,relationshipType:e.relationshipType||"other",howWeMet:e.howWeMet||void 0,relationshipStrength:e.relationshipStrength||2,notes:e.notes||e.relationshipNotes||"",lastContactDate:e.lastContactDate||void 0,nextFollowUp:e.nextFollowUp||void 0,contactHistory:e.contactHistory||[],linkedPostingIds:e.linkedPostingIds||[],dateAdded:e.dateAdded||Date.now(),dateModified:e.dateModified||Date.now()}}function or(e,n){const s=new Map(e.map(r=>[r.id,r]));for(const r of n)if(rr(r)){const o=ar(r),a=s.get(o.id);(!a||o.dateModified>a.dateModified)&&s.set(o.id,o)}return Array.from(s.values())}async function ir(e){var c;const n=[];let s=0;const r=[];for(let u=0;u<e.postings.length;u++){const h=e.postings[u];if(nr(h)){let f=h.interest||3;if(!h.interest&&h.priority){const p=h.priority;f={1:2,2:3,3:5}[p]||3}r.push({...h,status:h.status||"saved",interest:f,tags:h.tags||[],notes:h.notes||"",dateAdded:h.dateAdded||Date.now(),dateModified:h.dateModified||Date.now(),connectionIds:h.connectionIds||[],keywords:h.keywords,keywordsExtractedAt:h.keywordsExtractedAt})}else n.push(`Posting ${u+1}: missing required field (id or title)`),s++}const[o,a]=await Promise.all([Xe(),le()]),d=sr(o,r),l=or(a,e.connections||[]);return await Promise.all([qe(d),Ge(l)]),{success:n.length===0,postings:r.length,connections:((c=e.connections)==null?void 0:c.length)||0,errors:n,skipped:s}}function lr(){return new Promise(e=>{const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=s=>{var o;const r=(o=s.target.files)==null?void 0:o[0];e(r||null)},n.addEventListener("cancel",()=>e(null)),n.click()})}function cr({className:e=""}){const[n,s]=i.useState(!1),r=async()=>{s(!0);try{await er()}catch(o){console.error("Export failed:",o),alert("Failed to export data. Please try again.")}finally{s(!1)}};return t.jsxs("button",{onClick:r,disabled:n,className:`inline-flex items-center gap-2 ${e}`,title:"Export data to JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),n?"Exporting...":"Export Data"]})}function dr({isOpen:e,parsedFile:n,onConfirm:s,onCancel:r,isImporting:o,importResult:a}){var l;if(!e)return null;const d=c=>{try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return c}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"modal-backdrop",onClick:o?void 0:r}),t.jsx("div",{className:"modal-container",children:t.jsxs("div",{className:"modal modal-sm",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"modal-title",children:a?"Import Complete":"Import Backup"}),!o&&t.jsx("button",{onClick:r,className:"modal-close",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"modal-body",children:[n&&!n.success&&t.jsxs("div",{className:"mb-4 rounded-md bg-flatred-50 p-3 text-sm text-flatred",children:[t.jsx("p",{className:"font-medium",children:"Failed to parse file"}),t.jsx("p",{children:n.error})]}),(n==null?void 0:n.success)&&n.data&&!a&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"rounded-md bg-champagne-50 p-3",children:[t.jsxs("p",{className:"text-sm text-wine/70",children:[t.jsx("span",{className:"font-medium text-wine",children:"File:"})," ",n.fileName]}),t.jsxs("p",{className:"text-sm text-wine/70",children:[t.jsx("span",{className:"font-medium text-wine",children:"Exported:"})," ",d(n.data.exportDate)]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm font-medium text-wine",children:"Found:"}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-wine/70",children:[t.jsxs("li",{children:[n.data.postings.length," postings"]}),t.jsxs("li",{children:[((l=n.data.connections)==null?void 0:l.length)||0," connections"]})]})]}),t.jsx("div",{className:"rounded-md bg-teal-50 p-3 text-sm text-teal-600",children:t.jsx("p",{children:"Import will merge with existing data. Newer entries will overwrite older ones."})})]}),a&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`rounded-md p-3 text-sm ${a.success?"bg-teal-50 text-teal-600":"bg-pandora-50 text-pandora"}`,children:t.jsx("p",{className:"font-medium",children:a.success?"Import successful!":"Import completed with warnings"})}),t.jsxs("ul",{className:"ml-4 list-disc text-sm text-wine/70",children:[t.jsxs("li",{children:[a.postings," postings imported"]}),t.jsxs("li",{children:[a.connections," connections imported"]}),a.skipped>0&&t.jsxs("li",{className:"text-pandora",children:[a.skipped," items skipped"]})]}),a.errors.length>0&&t.jsxs("div",{className:"rounded-md bg-pandora-50 p-3",children:[t.jsx("p",{className:"text-sm font-medium text-pandora",children:"Warnings:"}),t.jsxs("ul",{className:"mt-1 list-disc pl-4 text-sm text-pandora/80",children:[a.errors.slice(0,5).map((c,u)=>t.jsx("li",{children:c},u)),a.errors.length>5&&t.jsxs("li",{children:["...and ",a.errors.length-5," more"]})]})]})]})]}),t.jsx("div",{className:"modal-footer",children:a?t.jsx("button",{onClick:r,className:"btn btn-primary",children:"Done"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:r,disabled:o,className:"btn btn-secondary",children:"Cancel"}),t.jsx("button",{onClick:s,disabled:o||!(n!=null&&n.success),className:"btn btn-primary",children:o?"Importing...":"Import"})]})})]})})]})}function ur({className:e="",onImportComplete:n}){const[s,r]=i.useState(!1),[o,a]=i.useState(null),[d,l]=i.useState(!1),[c,u]=i.useState(null),h=async()=>{const x=await lr();if(!x)return;const m=await tr(x);a(m),u(null),r(!0)},f=async()=>{if(!(!(o!=null&&o.success)||!o.data)){l(!0);try{const x=await ir(o.data);u(x),n==null||n()}catch(x){console.error("Import failed:",x),u({success:!1,postings:0,connections:0,errors:[x instanceof Error?x.message:"Unknown error occurred"],skipped:0})}finally{l(!1)}}},p=()=>{r(!1),a(null),u(null)};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:h,className:`inline-flex items-center gap-2 ${e}`,title:"Import data from JSON file",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Data"]}),t.jsx(dr,{isOpen:s,parsedFile:o,onConfirm:f,onCancel:p,isImporting:d,importResult:c})]})}function hr({availableTags:e,selectedTags:n,onChange:s}){const[r,o]=i.useState(!1),a=i.useRef(null);i.useEffect(()=>{const c=u=>{a.current&&!a.current.contains(u.target)&&o(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const d=c=>{n.includes(c)?s(n.filter(u=>u!==c)):s([...n,c])},l=n.length>0;return t.jsxs("div",{className:"relative",ref:a,children:[t.jsxs("button",{onClick:()=>o(!r),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${l?"border-wine bg-champagne-50 text-wine":"border-sage/30 bg-white text-wine hover:bg-champagne-50"}`,children:[t.jsx("span",{children:"Tags"}),l&&t.jsx("span",{className:"rounded-full bg-wine px-1.5 py-0.5 text-xs text-white",children:n.length}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-md bg-white py-1 shadow-lg ring-1 ring-sage/20",children:e.length===0?t.jsx("div",{className:"px-4 py-2 text-sm text-sage",children:"No tags available"}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.map(c=>t.jsxs("label",{className:"checkbox-label px-4 py-2 hover:bg-champagne-50",children:[t.jsx("input",{type:"checkbox",checked:n.includes(c),onChange:()=>d(c),className:"checkbox checkbox-sm"}),t.jsx("span",{children:c})]},c))}),l&&t.jsx("div",{className:"border-t border-sage/20 px-4 py-2",children:t.jsx("button",{onClick:()=>s([]),className:"text-sm text-flatred hover:text-flatred-600",children:"Clear selection"})})]})})]})}function mr({availableCompanies:e,value:n,onChange:s}){const[r,o]=i.useState(!1),[a,d]=i.useState(n),l=i.useRef(null),c=i.useRef(null);i.useEffect(()=>{d(n)},[n]),i.useEffect(()=>{const m=v=>{c.current&&!c.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const u=e.filter(m=>m.toLowerCase().includes(a.toLowerCase())).slice(0,10),h=m=>{const v=m.target.value;d(v),s(v),o(!0)},f=m=>{d(m),s(m),o(!1)},p=()=>{var m;d(""),s(""),(m=l.current)==null||m.focus()},x=n.length>0;return t.jsxs("div",{className:"relative",ref:c,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:l,type:"text",value:a,onChange:h,onFocus:()=>o(!0),placeholder:"Company...",className:`w-36 rounded-md border px-3 py-2 pr-8 text-sm ${x?"border-wine bg-champagne-50 text-wine":"border-sage/30 text-wine focus:border-wine focus:ring-1 focus:ring-wine"}`}),x&&t.jsx("button",{onClick:p,className:"absolute right-2 top-1/2 -translate-y-1/2 text-sage hover:text-wine",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&u.length>0&&a.length>0&&t.jsx("div",{className:"absolute left-0 z-20 mt-1 w-full rounded-md bg-white py-1 shadow-lg ring-1 ring-sage/20",children:t.jsx("div",{className:"max-h-48 overflow-y-auto",children:u.map(m=>t.jsx("button",{onClick:()=>f(m),className:"w-full px-4 py-2 text-left text-sm text-wine hover:bg-champagne-50",children:m},m))})})]})}function xr({fromDate:e,toDate:n,onFromChange:s,onToChange:r}){const o=e!==null||n!==null,a=()=>{s(null),r(null)};return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-wine/70",children:"Date added:"}),t.jsx("input",{type:"date",value:e||"",onChange:d=>s(d.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${e?"border-wine bg-champagne-50 text-wine":"border-sage/30 text-wine focus:border-wine focus:ring-1 focus:ring-wine"}`}),t.jsx("span",{className:"text-sm text-sage",children:"to"}),t.jsx("input",{type:"date",value:n||"",onChange:d=>r(d.target.value||null),className:`rounded-md border px-2 py-1.5 text-sm ${n?"border-wine bg-champagne-50 text-wine":"border-sage/30 text-wine focus:border-wine focus:ring-1 focus:ring-wine"}`}),o&&t.jsx("button",{onClick:a,className:"text-sage hover:text-wine",title:"Clear date range",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function fr({dateFrom:e,dateTo:n,hasDeadline:s,deadlineSoon:r,needsAction:o,hasConnections:a,noConnections:d,onDateFromChange:l,onDateToChange:c,onHasDeadlineChange:u,onDeadlineSoonChange:h,onNeedsActionChange:f,onHasConnectionsChange:p,onNoConnectionsChange:x,onClearAll:m}){const[v,j]=i.useState(!1),b=i.useRef(null);i.useEffect(()=>{const y=C=>{b.current&&!b.current.contains(C.target)&&j(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const k=[e!==null||n!==null,s,r,o,a,d].filter(Boolean).length;return t.jsxs("div",{className:"relative",ref:b,children:[t.jsxs("button",{onClick:()=>j(!v),className:`flex items-center gap-2 rounded-md border px-3 py-2 text-sm ${k>0?"border-wine bg-champagne-50 text-wine":"border-sage/30 bg-white text-wine hover:bg-champagne-50"}`,children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),t.jsx("span",{children:"More Filters"}),k>0&&t.jsx("span",{className:"rounded-full bg-wine px-1.5 py-0.5 text-xs text-white",children:k}),t.jsx("svg",{className:`h-4 w-4 transition-transform ${v?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&t.jsx("div",{className:"absolute right-0 z-20 mt-1 w-96 rounded-md bg-white p-4 shadow-lg ring-1 ring-sage/20",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(xr,{fromDate:e,toDate:n,onFromChange:l,onToChange:c}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:s,onChange:y=>u(y.target.checked),className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Has deadline"})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:r,onChange:y=>h(y.target.checked),className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Deadline within 7 days"})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:y=>f(y.target.checked),className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Needs action (stale)"})]})]}),t.jsxs("div",{className:"border-t border-sage/20 pt-3",children:[t.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-sage",children:"Networking"}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:y=>{p(y.target.checked),y.target.checked&&x(!1)},className:"checkbox checkbox-sm"}),t.jsx("span",{children:"Has connections"})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:d,onChange:y=>{x(y.target.checked),y.target.checked&&p(!1)},className:"checkbox checkbox-sm"}),t.jsx("span",{children:"No connections"})]})]})]}),k>0&&t.jsx("div",{className:"border-t border-sage/20 pt-3",children:t.jsx("button",{onClick:()=>{m(),j(!1)},className:"text-sm text-flatred hover:text-flatred-600",children:"Clear all filters"})})]})})]})}const gr=[{title:"Global",shortcuts:[{keys:"/",description:"Focus search"},{keys:"⌘K",description:"Focus search (alt)"},{keys:"Esc",description:"Close panel / clear search"},{keys:"?",description:"Show this help"},{keys:"N",description:"New posting"}]},{title:"Status Filter",shortcuts:[{keys:"1",description:"Filter to Saved"},{keys:"2",description:"Filter to In Progress"},{keys:"3",description:"Filter to Applied"},{keys:"4",description:"Filter to Interviewing"},{keys:"5",description:"Filter to Offer"},{keys:"6",description:"Filter to Accepted"},{keys:"7",description:"Filter to Rejected"},{keys:"0",description:"Clear status filter"}]},{title:"Card Navigation",shortcuts:[{keys:"J / ↓",description:"Next card"},{keys:"K / ↑",description:"Previous card"},{keys:"↵",description:"Open detail panel"}]},{title:"Card Actions",shortcuts:[{keys:"S",description:"Cycle priority"},{keys:"O",description:"Open original URL"},{keys:"D",description:"Delete posting"}]}];function pr({isOpen:e,onClose:n}){return i.useEffect(()=>{const s=r=>{r.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,n]),e?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"modal-backdrop",onClick:n}),t.jsx("div",{className:"modal-container",children:t.jsxs("div",{className:"modal modal-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"modal-title",children:"Keyboard Shortcuts"}),t.jsx("button",{onClick:n,className:"modal-close",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"modal-body",children:t.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:gr.map(s=>t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-sm font-semibold uppercase text-sage",children:s.title}),t.jsx("div",{className:"space-y-2",children:s.shortcuts.map(r=>t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("span",{className:"text-sm text-wine/70",children:r.description}),t.jsx("kbd",{className:"rounded bg-champagne-100 px-2 py-1 text-xs font-mono text-wine",children:r.keys})]},r.keys))})]},s.title))})}),t.jsx("div",{className:"modal-footer justify-center",children:t.jsxs("span",{className:"text-sm text-wine/60",children:["Press ",t.jsx("kbd",{className:"rounded bg-champagne-100 px-1.5 py-0.5 font-mono text-xs text-wine",children:"Esc"})," to close"]})})]})})]}):null}const br=[{value:3,label:"High Priority"},{value:2,label:"Medium Priority"},{value:1,label:"Low Priority"}];function vr({searchQuery:e,onSearchChange:n,priorityFilter:s,onPriorityFilterChange:r,currentView:o,onViewChange:a,onAddClick:d,availableTags:l,availableCompanies:c,tagFilters:u,onTagFiltersChange:h,companyFilter:f,onCompanyFilterChange:p,dateFrom:x,dateTo:m,onDateFromChange:v,onDateToChange:j,hasDeadline:b,deadlineSoon:k,needsAction:y,hasConnections:C,noConnections:D,onHasDeadlineChange:w,onDeadlineSoonChange:L,onNeedsActionChange:M,onHasConnectionsChange:I,onNoConnectionsChange:z,onClearAllFilters:O,activeFilterCount:_,searchInputRef:B,statusFilter:G,onStatusFilterChange:re}){const[J,A]=i.useState(!1),V=i.useRef(null);return i.useEffect(()=>{const $=U=>{V.current&&!V.current.contains(U.target)&&A(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]),t.jsx("header",{className:"flex items-center gap-3 border-b border-gray-200 bg-white px-4 py-3",children:t.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[t.jsx("div",{className:"w-64",children:t.jsx(Fs,{value:e,onChange:n,placeholder:"Search jobs... (Press /)",inputRef:B})}),t.jsx(yn,{label:"Priority",options:br,value:s,onChange:r}),t.jsx(yn,{label:"Status",options:Ue.map($=>({value:$,label:Re[$]})),value:G,onChange:re}),t.jsx(hr,{availableTags:l,selectedTags:u,onChange:h}),t.jsx(mr,{availableCompanies:c,value:f,onChange:p}),t.jsx(fr,{dateFrom:x,dateTo:m,hasDeadline:b,deadlineSoon:k,needsAction:y,hasConnections:C,noConnections:D,onDateFromChange:v,onDateToChange:j,onHasDeadlineChange:w,onDeadlineSoonChange:L,onNeedsActionChange:M,onHasConnectionsChange:I,onNoConnectionsChange:z,onClearAll:O}),_>0&&t.jsxs("button",{onClick:O,className:"flex items-center gap-1 rounded-md px-2 py-1 text-sm text-blue-600 hover:bg-blue-50",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear all (",_,")"]}),t.jsxs("div",{className:"flex rounded-md border border-gray-300",children:[t.jsx("button",{onClick:()=>a("kanban"),className:`px-3 py-2 text-sm ${o==="kanban"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Kanban view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}),t.jsx("button",{onClick:()=>a("list"),className:`border-l border-gray-300 px-3 py-2 text-sm ${o==="list"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"List view",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),t.jsxs("div",{className:"relative",ref:V,children:[t.jsx("button",{onClick:()=>A(!J),className:"rounded-md border border-gray-300 p-2 text-gray-600 hover:bg-gray-50",title:"Settings (? for shortcuts)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),J&&t.jsxs("div",{className:"absolute right-0 z-20 mt-1 w-48 rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[t.jsx(cr,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"}),t.jsx(ur,{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onImportComplete:()=>A(!1)})]})]}),t.jsxs("button",{onClick:d,className:"inline-flex items-center gap-1 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",title:"Add new posting (N)",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]})})}const Tt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Je(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function ln(e){return"nodeType"in e}function se(e){var n,s;return e?Je(e)?e:ln(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function cn(e){const{Document:n}=se(e);return e instanceof n}function xt(e){return Je(e)?!1:e instanceof se(e).HTMLElement}function _n(e){return e instanceof se(e).SVGElement}function Qe(e){return e?Je(e)?e.document:ln(e)?cn(e)?e:xt(e)||_n(e)?e.ownerDocument:document:document:document}const Ae=Tt?i.useLayoutEffect:i.useEffect;function Pt(e){const n=i.useRef(e);return Ae(()=>{n.current=e}),i.useCallback(function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n.current==null?void 0:n.current(...r)},[])}function wr(){const e=i.useRef(null),n=i.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),s=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ut(e,n){n===void 0&&(n=[e]);const s=i.useRef(e);return Ae(()=>{s.current!==e&&(s.current=e)},n),s}function ft(e,n){const s=i.useRef();return i.useMemo(()=>{const r=e(s.current);return s.current=r,r},[...n])}function Dt(e){const n=Pt(e),s=i.useRef(null),r=i.useCallback(o=>{o!==s.current&&(n==null||n(o,s.current)),s.current=o},[]);return[s,r]}function Et(e){const n=i.useRef();return i.useEffect(()=>{n.current=e},[e]),n.current}let qt={};function zt(e,n){return i.useMemo(()=>{if(n)return n;const s=qt[e]==null?0:qt[e]+1;return qt[e]=s,e+"-"+s},[e,n])}function Vn(e){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return r.reduce((a,d)=>{const l=Object.entries(d);for(const[c,u]of l){const h=a[c];h!=null&&(a[c]=h+e*u)}return a},{...n})}}const Ke=Vn(1),ht=Vn(-1);function yr(e){return"clientX"in e&&"clientY"in e}function dn(e){if(!e)return!1;const{KeyboardEvent:n}=se(e.target);return n&&e instanceof n}function jr(e){if(!e)return!1;const{TouchEvent:n}=se(e.target);return n&&e instanceof n}function Mt(e){if(jr(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return yr(e)?{x:e.clientX,y:e.clientY}:null}const Ye=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Ye.Translate.toString(e),Ye.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:r}=e;return n+" "+s+"ms "+r}}}),Sn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nr(e){return e.matches(Sn)?e:e.querySelector(Sn)}const kr={display:"none"};function Cr(e){let{id:n,value:s}=e;return W.createElement("div",{id:n,style:kr},s)}function Sr(e){let{id:n,announcement:s,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return W.createElement("div",{id:n,style:o,role:"status","aria-live":r,"aria-atomic":!0},s)}function Lr(){const[e,n]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&n(r)},[]),announcement:e}}const Kn=i.createContext(null);function Dr(e){const n=i.useContext(Kn);i.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function Er(){const[e]=i.useState(()=>new Set),n=i.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[i.useCallback(r=>{let{type:o,event:a}=r;e.forEach(d=>{var l;return(l=d[o])==null?void 0:l.call(d,a)})},[e]),n]}const Mr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Rr={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function Ar(e){let{announcements:n=Rr,container:s,hiddenTextDescribedById:r,screenReaderInstructions:o=Mr}=e;const{announce:a,announcement:d}=Lr(),l=zt("DndLiveRegion"),[c,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),Dr(i.useMemo(()=>({onDragStart(f){let{active:p}=f;a(n.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;n.onDragMove&&a(n.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;a(n.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;a(n.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;a(n.onDragCancel({active:p,over:x}))}}),[a,n])),!c)return null;const h=W.createElement(W.Fragment,null,W.createElement(Cr,{id:r,value:o.draggable}),W.createElement(Sr,{id:l,announcement:d}));return s?ot.createPortal(h,s):h}var Y;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Y||(Y={}));function Rt(){}function Ln(e,n){return i.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Ir(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const we=Object.freeze({x:0,y:0});function Yn(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Or(e,n){const s=Mt(e);if(!s)return"0 0";const r={x:(s.x-n.left)/n.width*100,y:(s.y-n.top)/n.height*100};return r.x+"% "+r.y+"%"}function Xn(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return s-r}function Tr(e,n){let{data:{value:s}}=e,{data:{value:r}}=n;return r-s}function Dn(e){let{left:n,top:s,height:r,width:o}=e;return[{x:n,y:s},{x:n+o,y:s},{x:n,y:s+r},{x:n+o,y:s+r}]}function qn(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function En(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const Pr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const o=En(n,n.left,n.top),a=[];for(const d of r){const{id:l}=d,c=s.get(l);if(c){const u=Yn(En(c),o);a.push({id:l,data:{droppableContainer:d,value:u}})}}return a.sort(Xn)},zr=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const o=Dn(n),a=[];for(const d of r){const{id:l}=d,c=s.get(l);if(c){const u=Dn(c),h=o.reduce((p,x,m)=>p+Yn(u[m],x),0),f=Number((h/4).toFixed(4));a.push({id:l,data:{droppableContainer:d,value:f}})}}return a.sort(Xn)};function Fr(e,n){const s=Math.max(n.top,e.top),r=Math.max(n.left,e.left),o=Math.min(n.left+n.width,e.left+e.width),a=Math.min(n.top+n.height,e.top+e.height),d=o-r,l=a-s;if(r<o&&s<a){const c=n.width*n.height,u=e.width*e.height,h=d*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const $r=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:r}=e;const o=[];for(const a of r){const{id:d}=a,l=s.get(d);if(l){const c=Fr(l,n);c>0&&o.push({id:d,data:{droppableContainer:a,value:c}})}}return o.sort(Tr)};function Br(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function Gn(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:we}function Ur(e){return function(s){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((d,l)=>({...d,top:d.top+e*l.y,bottom:d.bottom+e*l.y,left:d.left+e*l.x,right:d.right+e*l.x}),{...s})}}const Wr=Ur(1);function Jn(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Hr(e,n,s){const r=Jn(n);if(!r)return e;const{scaleX:o,scaleY:a,x:d,y:l}=r,c=e.left-d-(1-o)*parseFloat(s),u=e.top-l-(1-a)*parseFloat(s.slice(s.indexOf(" ")+1)),h=o?e.width/o:e.width,f=a?e.height/a:e.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const _r={ignoreTransform:!1};function gt(e,n){n===void 0&&(n=_r);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:u,transformOrigin:h}=se(e).getComputedStyle(e);u&&(s=Hr(s,u,h))}const{top:r,left:o,width:a,height:d,bottom:l,right:c}=s;return{top:r,left:o,width:a,height:d,bottom:l,right:c}}function Mn(e){return gt(e,{ignoreTransform:!0})}function Vr(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function Kr(e,n){return n===void 0&&(n=se(e).getComputedStyle(e)),n.position==="fixed"}function Yr(e,n){n===void 0&&(n=se(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=n[o];return typeof a=="string"?s.test(a):!1})}function Ft(e,n){const s=[];function r(o){if(n!=null&&s.length>=n||!o)return s;if(cn(o)&&o.scrollingElement!=null&&!s.includes(o.scrollingElement))return s.push(o.scrollingElement),s;if(!xt(o)||_n(o)||s.includes(o))return s;const a=se(e).getComputedStyle(o);return o!==e&&Yr(o,a)&&s.push(o),Kr(o,a)?s:r(o.parentNode)}return e?r(e):s}function Qn(e){const[n]=Ft(e,1);return n??null}function Gt(e){return!Tt||!e?null:Je(e)?e:ln(e)?cn(e)||e===Qe(e).scrollingElement?window:xt(e)?e:null:null}function Zn(e){return Je(e)?e.scrollX:e.scrollLeft}function es(e){return Je(e)?e.scrollY:e.scrollTop}function rn(e){return{x:Zn(e),y:es(e)}}var q;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(q||(q={}));function ts(e){return!Tt||!e?!1:e===document.scrollingElement}function ns(e){const n={x:0,y:0},s=ts(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},o=e.scrollTop<=n.y,a=e.scrollLeft<=n.x,d=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:d,isRight:l,maxScroll:r,minScroll:n}}const Xr={x:.2,y:.2};function qr(e,n,s,r,o){let{top:a,left:d,right:l,bottom:c}=s;r===void 0&&(r=10),o===void 0&&(o=Xr);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=ns(e),x={x:0,y:0},m={x:0,y:0},v={height:n.height*o.y,width:n.width*o.x};return!u&&a<=n.top+v.height?(x.y=q.Backward,m.y=r*Math.abs((n.top+v.height-a)/v.height)):!h&&c>=n.bottom-v.height&&(x.y=q.Forward,m.y=r*Math.abs((n.bottom-v.height-c)/v.height)),!p&&l>=n.right-v.width?(x.x=q.Forward,m.x=r*Math.abs((n.right-v.width-l)/v.width)):!f&&d<=n.left+v.width&&(x.x=q.Backward,m.x=r*Math.abs((n.left+v.width-d)/v.width)),{direction:x,speed:m}}function Gr(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:d}=window;return{top:0,left:0,right:a,bottom:d,width:a,height:d}}const{top:n,left:s,right:r,bottom:o}=e.getBoundingClientRect();return{top:n,left:s,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function ss(e){return e.reduce((n,s)=>Ke(n,rn(s)),we)}function Jr(e){return e.reduce((n,s)=>n+Zn(s),0)}function Qr(e){return e.reduce((n,s)=>n+es(s),0)}function rs(e,n){if(n===void 0&&(n=gt),!e)return;const{top:s,left:r,bottom:o,right:a}=n(e);Qn(e)&&(o<=0||a<=0||s>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Zr=[["x",["left","right"],Jr],["y",["top","bottom"],Qr]];class un{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ft(s),o=ss(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[a,d,l]of Zr)for(const c of d)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=o[a]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lt{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...s)})},this.target=n}add(n,s,r){var o;(o=this.target)==null||o.addEventListener(n,s,r),this.listeners.push([n,s,r])}}function ea(e){const{EventTarget:n}=se(e);return e instanceof n?e:Qe(e)}function Jt(e,n){const s=Math.abs(e.x),r=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+r**2)>n:"x"in n&&"y"in n?s>n.x&&r>n.y:"x"in n?s>n.x:"y"in n?r>n.y:!1}var fe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(fe||(fe={}));function Rn(e){e.preventDefault()}function ta(e){e.stopPropagation()}var R;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(R||(R={}));const as={start:[R.Space,R.Enter],cancel:[R.Esc],end:[R.Space,R.Enter,R.Tab]},na=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case R.Right:return{...s,x:s.x+25};case R.Left:return{...s,x:s.x-25};case R.Down:return{...s,y:s.y+25};case R.Up:return{...s,y:s.y-25}}};class hn{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new lt(Qe(s)),this.windowListeners=new lt(se(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fe.Resize,this.handleCancel),this.windowListeners.add(fe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,r=n.node.current;r&&rs(r),s(we)}handleKeyDown(n){if(dn(n)){const{active:s,context:r,options:o}=this.props,{keyboardCodes:a=as,coordinateGetter:d=na,scrollBehavior:l="smooth"}=o,{code:c}=n;if(a.end.includes(c)){this.handleEnd(n);return}if(a.cancel.includes(c)){this.handleCancel(n);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:we;this.referenceCoordinates||(this.referenceCoordinates=h);const f=d(n,{active:s,context:r.current,currentCoordinates:h});if(f){const p=ht(f,h),x={x:0,y:0},{scrollableAncestors:m}=r.current;for(const v of m){const j=n.code,{isTop:b,isRight:k,isLeft:y,isBottom:C,maxScroll:D,minScroll:w}=ns(v),L=Gr(v),M={x:Math.min(j===R.Right?L.right-L.width/2:L.right,Math.max(j===R.Right?L.left:L.left+L.width/2,f.x)),y:Math.min(j===R.Down?L.bottom-L.height/2:L.bottom,Math.max(j===R.Down?L.top:L.top+L.height/2,f.y))},I=j===R.Right&&!k||j===R.Left&&!y,z=j===R.Down&&!C||j===R.Up&&!b;if(I&&M.x!==f.x){const O=v.scrollLeft+p.x,_=j===R.Right&&O<=D.x||j===R.Left&&O>=w.x;if(_&&!p.y){v.scrollTo({left:O,behavior:l});return}_?x.x=v.scrollLeft-O:x.x=j===R.Right?v.scrollLeft-D.x:v.scrollLeft-w.x,x.x&&v.scrollBy({left:-x.x,behavior:l});break}else if(z&&M.y!==f.y){const O=v.scrollTop+p.y,_=j===R.Down&&O<=D.y||j===R.Up&&O>=w.y;if(_&&!p.x){v.scrollTo({top:O,behavior:l});return}_?x.y=v.scrollTop-O:x.y=j===R.Down?v.scrollTop-D.y:v.scrollTop-w.y,x.y&&v.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(n,Ke(ht(f,this.referenceCoordinates),x))}}}handleMove(n,s){const{onMove:r}=this.props;n.preventDefault(),r(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}hn.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:r=as,onActivation:o}=n,{active:a}=s;const{code:d}=e.nativeEvent;if(r.start.includes(d)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function An(e){return!!(e&&"distance"in e)}function In(e){return!!(e&&"delay"in e)}class mn{constructor(n,s,r){var o;r===void 0&&(r=ea(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:a}=n,{target:d}=a;this.props=n,this.events=s,this.document=Qe(d),this.documentListeners=new lt(this.document),this.listeners=new lt(r),this.windowListeners=new lt(se(d)),this.initialCoordinates=(o=Mt(a))!=null?o:we,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(fe.Resize,this.handleCancel),this.windowListeners.add(fe.DragStart,Rn),this.windowListeners.add(fe.VisibilityChange,this.handleCancel),this.windowListeners.add(fe.ContextMenu,Rn),this.documentListeners.add(fe.Keydown,this.handleKeydown),s){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(In(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(An(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:r,onPending:o}=this.props;o(r,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(fe.Click,ta,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fe.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:d,options:{activationConstraint:l}}=a;if(!o)return;const c=(s=Mt(n))!=null?s:we,u=ht(o,c);if(!r&&l){if(An(l)){if(l.tolerance!=null&&Jt(u,l.tolerance))return this.handleCancel();if(Jt(u,l.distance))return this.handleStart()}if(In(l)&&Jt(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}n.cancelable&&n.preventDefault(),d(c)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===R.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const sa={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xn extends mn{constructor(n){const{event:s}=n,r=Qe(s.target);super(n,sa,r)}}xn.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return!s.isPrimary||s.button!==0?!1:(r==null||r({event:s}),!0)}}];const ra={move:{name:"mousemove"},end:{name:"mouseup"}};var an;(function(e){e[e.RightClick=2]="RightClick"})(an||(an={}));class aa extends mn{constructor(n){super(n,ra,Qe(n.event.target))}}aa.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;return s.button===an.RightClick?!1:(r==null||r({event:s}),!0)}}];const Qt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class oa extends mn{constructor(n){super(n,Qt)}static setup(){return window.addEventListener(Qt.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Qt.move.name,n)};function n(){}}}oa.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:r}=n;const{touches:o}=s;return o.length>1?!1:(r==null||r({event:s}),!0)}}];var ct;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ct||(ct={}));var At;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(At||(At={}));function ia(e){let{acceleration:n,activator:s=ct.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:d=5,order:l=At.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=e;const x=ca({delta:f,disabled:!a}),[m,v]=wr(),j=i.useRef({x:0,y:0}),b=i.useRef({x:0,y:0}),k=i.useMemo(()=>{switch(s){case ct.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case ct.DraggableRect:return o}},[s,o,c]),y=i.useRef(null),C=i.useCallback(()=>{const w=y.current;if(!w)return;const L=j.current.x*b.current.x,M=j.current.y*b.current.y;w.scrollBy(L,M)},[]),D=i.useMemo(()=>l===At.TreeOrder?[...u].reverse():u,[l,u]);i.useEffect(()=>{if(!a||!u.length||!k){v();return}for(const w of D){if((r==null?void 0:r(w))===!1)continue;const L=u.indexOf(w),M=h[L];if(!M)continue;const{direction:I,speed:z}=qr(w,M,k,n,p);for(const O of["x","y"])x[O][I[O]]||(z[O]=0,I[O]=0);if(z.x>0||z.y>0){v(),y.current=w,m(C,d),j.current=z,b.current=I;return}}j.current={x:0,y:0},b.current={x:0,y:0},v()},[n,C,r,v,a,d,JSON.stringify(k),JSON.stringify(x),m,u,D,h,JSON.stringify(p)])}const la={x:{[q.Backward]:!1,[q.Forward]:!1},y:{[q.Backward]:!1,[q.Forward]:!1}};function ca(e){let{delta:n,disabled:s}=e;const r=Et(n);return ft(o=>{if(s||!r||!o)return la;const a={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[q.Backward]:o.x[q.Backward]||a.x===-1,[q.Forward]:o.x[q.Forward]||a.x===1},y:{[q.Backward]:o.y[q.Backward]||a.y===-1,[q.Forward]:o.y[q.Forward]||a.y===1}}},[s,n,r])}function da(e,n){const s=n!=null?e.get(n):void 0,r=s?s.node.current:null;return ft(o=>{var a;return n==null?null:(a=r??o)!=null?a:null},[r,n])}function ua(e,n){return i.useMemo(()=>e.reduce((s,r)=>{const{sensor:o}=r,a=o.activators.map(d=>({eventName:d.eventName,handler:n(d.handler,r)}));return[...s,...a]},[]),[e,n])}var mt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mt||(mt={}));var on;(function(e){e.Optimized="optimized"})(on||(on={}));const On=new Map;function ha(e,n){let{dragging:s,dependencies:r,config:o}=n;const[a,d]=i.useState(null),{frequency:l,measure:c,strategy:u}=o,h=i.useRef(e),f=j(),p=ut(f),x=i.useCallback(function(b){b===void 0&&(b=[]),!p.current&&d(k=>k===null?b:k.concat(b.filter(y=>!k.includes(y))))},[p]),m=i.useRef(null),v=ft(b=>{if(f&&!s)return On;if(!b||b===On||h.current!==e||a!=null){const k=new Map;for(let y of e){if(!y)continue;if(a&&a.length>0&&!a.includes(y.id)&&y.rect.current){k.set(y.id,y.rect.current);continue}const C=y.node.current,D=C?new un(c(C),C):null;y.rect.current=D,D&&k.set(y.id,D)}return k}return b},[e,a,s,f,c]);return i.useEffect(()=>{h.current=e},[e]),i.useEffect(()=>{f||x()},[s,f]),i.useEffect(()=>{a&&a.length>0&&d(null)},[JSON.stringify(a)]),i.useEffect(()=>{f||typeof l!="number"||m.current!==null||(m.current=setTimeout(()=>{x(),m.current=null},l))},[l,f,x,...r]),{droppableRects:v,measureDroppableContainers:x,measuringScheduled:a!=null};function j(){switch(u){case mt.Always:return!1;case mt.BeforeDragging:return s;default:return!s}}}function fn(e,n){return ft(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function ma(e,n){return fn(e,n)}function xa(e){let{callback:n,disabled:s}=e;const r=Pt(n),o=i.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,s]);return i.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function $t(e){let{callback:n,disabled:s}=e;const r=Pt(n),o=i.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[s]);return i.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function fa(e){return new un(gt(e),e)}function Tn(e,n,s){n===void 0&&(n=fa);const[r,o]=i.useState(null);function a(){o(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??s)!=null?u:null}const h=n(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const d=xa({callback(c){if(e)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),l=$t({callback:a});return Ae(()=>{a(),e?(l==null||l.observe(e),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),d==null||d.disconnect())},[e]),r}function ga(e){const n=fn(e);return Gn(e,n)}const Pn=[];function pa(e){const n=i.useRef(e),s=ft(r=>e?r&&r!==Pn&&e&&n.current&&e.parentNode===n.current.parentNode?r:Ft(e):Pn,[e]);return i.useEffect(()=>{n.current=e},[e]),s}function ba(e){const[n,s]=i.useState(null),r=i.useRef(e),o=i.useCallback(a=>{const d=Gt(a.target);d&&s(l=>l?(l.set(d,rn(d)),new Map(l)):null)},[]);return i.useEffect(()=>{const a=r.current;if(e!==a){d(a);const l=e.map(c=>{const u=Gt(c);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,rn(u)]):null}).filter(c=>c!=null);s(l.length?new Map(l):null),r.current=e}return()=>{d(e),d(a)};function d(l){l.forEach(c=>{const u=Gt(c);u==null||u.removeEventListener("scroll",o)})}},[o,e]),i.useMemo(()=>e.length?n?Array.from(n.values()).reduce((a,d)=>Ke(a,d),we):ss(e):we,[e,n])}function zn(e,n){n===void 0&&(n=[]);const s=i.useRef(null);return i.useEffect(()=>{s.current=null},n),i.useEffect(()=>{const r=e!==we;r&&!s.current&&(s.current=e),!r&&s.current&&(s.current=null)},[e]),s.current?ht(e,s.current):we}function va(e){i.useEffect(()=>{if(!Tt)return;const n=e.map(s=>{let{sensor:r}=s;return r.setup==null?void 0:r.setup()});return()=>{for(const s of n)s==null||s()}},e.map(n=>{let{sensor:s}=n;return s}))}function wa(e,n){return i.useMemo(()=>e.reduce((s,r)=>{let{eventName:o,handler:a}=r;return s[o]=d=>{a(d,n)},s},{}),[e,n])}function os(e){return i.useMemo(()=>e?Vr(e):null,[e])}const Fn=[];function ya(e,n){n===void 0&&(n=gt);const[s]=e,r=os(s?se(s):null),[o,a]=i.useState(Fn);function d(){a(()=>e.length?e.map(c=>ts(c)?r:new un(n(c),c)):Fn)}const l=$t({callback:d});return Ae(()=>{l==null||l.disconnect(),d(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),o}function is(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return xt(n)?n:e}function ja(e){let{measure:n}=e;const[s,r]=i.useState(null),o=i.useCallback(u=>{for(const{target:h}of u)if(xt(h)){r(f=>{const p=n(h);return f?{...f,width:p.width,height:p.height}:p});break}},[n]),a=$t({callback:o}),d=i.useCallback(u=>{const h=is(u);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?n(h):null)},[n,a]),[l,c]=Dt(d);return i.useMemo(()=>({nodeRef:l,rect:s,setRef:c}),[s,l,c])}const Na=[{sensor:xn,options:{}},{sensor:hn,options:{}}],ka={current:{}},St={draggable:{measure:Mn},droppable:{measure:Mn,strategy:mt.WhileDragging,frequency:on.Optimized},dragOverlay:{measure:gt}};class dt extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,r;return(s=(r=this.get(n))==null?void 0:r.node.current)!=null?s:void 0}}const Ca={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new dt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Rt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:St,measureDroppableContainers:Rt,windowRect:null,measuringScheduled:!1},ls={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Rt,draggableNodes:new Map,over:null,measureDroppableContainers:Rt},pt=i.createContext(ls),cs=i.createContext(Ca);function Sa(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new dt}}}function La(e,n){switch(n.type){case Y.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Y.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Y.DragEnd:case Y.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Y.RegisterDroppable:{const{element:s}=n,{id:r}=s,o=new dt(e.droppable.containers);return o.set(r,s),{...e,droppable:{...e.droppable,containers:o}}}case Y.SetDroppableDisabled:{const{id:s,key:r,disabled:o}=n,a=e.droppable.containers.get(s);if(!a||r!==a.key)return e;const d=new dt(e.droppable.containers);return d.set(s,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:d}}}case Y.UnregisterDroppable:{const{id:s,key:r}=n,o=e.droppable.containers.get(s);if(!o||r!==o.key)return e;const a=new dt(e.droppable.containers);return a.delete(s),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Da(e){let{disabled:n}=e;const{active:s,activatorEvent:r,draggableNodes:o}=i.useContext(pt),a=Et(r),d=Et(s==null?void 0:s.id);return i.useEffect(()=>{if(!n&&!r&&a&&d!=null){if(!dn(a)||document.activeElement===a.target)return;const l=o.get(d);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=Nr(h);if(f){f.focus();break}}})}},[r,n,o,d,a]),null}function ds(e,n){let{transform:s,...r}=n;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),s):s}function Ea(e){return i.useMemo(()=>({draggable:{...St.draggable,...e==null?void 0:e.draggable},droppable:{...St.droppable,...e==null?void 0:e.droppable},dragOverlay:{...St.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ma(e){let{activeNode:n,measure:s,initialRect:r,config:o=!0}=e;const a=i.useRef(!1),{x:d,y:l}=typeof o=="boolean"?{x:o,y:o}:o;Ae(()=>{if(!d&&!l||!n){a.current=!1;return}if(a.current||!r)return;const u=n==null?void 0:n.node.current;if(!u||u.isConnected===!1)return;const h=s(u),f=Gn(h,r);if(d||(f.x=0),l||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=Qn(u);p&&p.scrollBy({top:f.y,left:f.x})}},[n,d,l,r,s])}const Bt=i.createContext({...we,scaleX:1,scaleY:1});var $e;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})($e||($e={}));const Ra=i.memo(function(n){var s,r,o,a;let{id:d,accessibility:l,autoScroll:c=!0,children:u,sensors:h=Na,collisionDetection:f=$r,measuring:p,modifiers:x,...m}=n;const v=i.useReducer(La,void 0,Sa),[j,b]=v,[k,y]=Er(),[C,D]=i.useState($e.Uninitialized),w=C===$e.Initialized,{draggable:{active:L,nodes:M,translate:I},droppable:{containers:z}}=j,O=L!=null?M.get(L):null,_=i.useRef({initial:null,translated:null}),B=i.useMemo(()=>{var X;return L!=null?{id:L,data:(X=O==null?void 0:O.data)!=null?X:ka,rect:_}:null},[L,O]),G=i.useRef(null),[re,J]=i.useState(null),[A,V]=i.useState(null),$=ut(m,Object.values(m)),U=zt("DndDescribedBy",d),ye=i.useMemo(()=>z.getEnabled(),[z]),Z=Ea(p),{droppableRects:ge,measureDroppableContainers:S,measuringScheduled:P}=ha(ye,{dragging:w,dependencies:[I.x,I.y],config:Z.droppable}),F=da(M,L),je=i.useMemo(()=>A?Mt(A):null,[A]),ae=Ve(),Ne=ma(F,Z.draggable.measure);Ma({activeNode:L!=null?M.get(L):null,config:ae.layoutShiftCompensation,initialRect:Ne,measure:Z.draggable.measure});const K=Tn(F,Z.draggable.measure,Ne),We=Tn(F?F.parentElement:null),ce=i.useRef({activatorEvent:null,active:null,activeNode:F,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ze=z.getNodeFor((s=ce.current.over)==null?void 0:s.id),De=ja({measure:Z.dragOverlay.measure}),Ie=(r=De.nodeRef.current)!=null?r:F,de=w?(o=De.rect)!=null?o:K:null,ue=!!(De.nodeRef.current&&De.rect),et=ga(ue?null:K),tt=os(Ie?se(Ie):null),pe=pa(w?Ze??F:null),He=ya(pe),be=ds(x,{transform:{x:I.x-et.x,y:I.y-et.y,scaleX:1,scaleY:1},activatorEvent:A,active:B,activeNodeRect:K,containerNodeRect:We,draggingNodeRect:de,over:ce.current.over,overlayNodeRect:De.rect,scrollableAncestors:pe,scrollableAncestorRects:He,windowRect:tt}),bt=je?Ke(je,I):null,vt=ba(pe),Ut=zn(vt),Wt=zn(vt,[K]),Oe=Ke(be,Ut),Te=de?Wr(de,be):null,oe=B&&Te?f({active:B,collisionRect:Te,droppableRects:ge,droppableContainers:ye,pointerCoordinates:bt}):null,wt=qn(oe,"id"),[ke,nt]=i.useState(null),Ht=ue?be:Ke(be,Wt),_t=Br(Ht,(a=ke==null?void 0:ke.rect)!=null?a:null,K),st=i.useRef(null),Be=i.useCallback((X,ee)=>{let{sensor:te,options:he}=ee;if(G.current==null)return;const ie=M.get(G.current);if(!ie)return;const ne=X.nativeEvent,me=new te({active:G.current,activeNode:ie,event:ne,options:he,context:ce,onAbort(H){if(!M.get(H))return;const{onDragAbort:xe}=$.current,ve={id:H};xe==null||xe(ve),k({type:"onDragAbort",event:ve})},onPending(H,Ce,xe,ve){if(!M.get(H))return;const{onDragPending:ze}=$.current,Se={id:H,constraint:Ce,initialCoordinates:xe,offset:ve};ze==null||ze(Se),k({type:"onDragPending",event:Se})},onStart(H){const Ce=G.current;if(Ce==null)return;const xe=M.get(Ce);if(!xe)return;const{onDragStart:ve}=$.current,Pe={activatorEvent:ne,active:{id:Ce,data:xe.data,rect:_}};ot.unstable_batchedUpdates(()=>{ve==null||ve(Pe),D($e.Initializing),b({type:Y.DragStart,initialCoordinates:H,active:Ce}),k({type:"onDragStart",event:Pe}),J(st.current),V(ne)})},onMove(H){b({type:Y.DragMove,coordinates:H})},onEnd:Ee(Y.DragEnd),onCancel:Ee(Y.DragCancel)});st.current=me;function Ee(H){return async function(){const{active:xe,collisions:ve,over:Pe,scrollAdjustedTranslate:ze}=ce.current;let Se=null;if(xe&&ze){const{cancelDrop:Fe}=$.current;Se={activatorEvent:ne,active:xe,collisions:ve,delta:ze,over:Pe},H===Y.DragEnd&&typeof Fe=="function"&&await Promise.resolve(Fe(Se))&&(H=Y.DragCancel)}G.current=null,ot.unstable_batchedUpdates(()=>{b({type:H}),D($e.Uninitialized),nt(null),J(null),V(null),st.current=null;const Fe=H===Y.DragEnd?"onDragEnd":"onDragCancel";if(Se){const rt=$.current[Fe];rt==null||rt(Se),k({type:Fe,event:Se})}})}}},[M]),yt=i.useCallback((X,ee)=>(te,he)=>{const ie=te.nativeEvent,ne=M.get(he);if(G.current!==null||!ne||ie.dndKit||ie.defaultPrevented)return;const me={active:ne};X(te,ee.options,me)===!0&&(ie.dndKit={capturedBy:ee.sensor},G.current=he,Be(te,ee))},[M,Be]),_e=ua(h,yt);va(h),Ae(()=>{K&&C===$e.Initializing&&D($e.Initialized)},[K,C]),i.useEffect(()=>{const{onDragMove:X}=$.current,{active:ee,activatorEvent:te,collisions:he,over:ie}=ce.current;if(!ee||!te)return;const ne={active:ee,activatorEvent:te,collisions:he,delta:{x:Oe.x,y:Oe.y},over:ie};ot.unstable_batchedUpdates(()=>{X==null||X(ne),k({type:"onDragMove",event:ne})})},[Oe.x,Oe.y]),i.useEffect(()=>{const{active:X,activatorEvent:ee,collisions:te,droppableContainers:he,scrollAdjustedTranslate:ie}=ce.current;if(!X||G.current==null||!ee||!ie)return;const{onDragOver:ne}=$.current,me=he.get(wt),Ee=me&&me.rect.current?{id:me.id,rect:me.rect.current,data:me.data,disabled:me.disabled}:null,H={active:X,activatorEvent:ee,collisions:te,delta:{x:ie.x,y:ie.y},over:Ee};ot.unstable_batchedUpdates(()=>{nt(Ee),ne==null||ne(H),k({type:"onDragOver",event:H})})},[wt]),Ae(()=>{ce.current={activatorEvent:A,active:B,activeNode:F,collisionRect:Te,collisions:oe,droppableRects:ge,draggableNodes:M,draggingNode:Ie,draggingNodeRect:de,droppableContainers:z,over:ke,scrollableAncestors:pe,scrollAdjustedTranslate:Oe},_.current={initial:de,translated:Te}},[B,F,oe,Te,M,Ie,de,ge,z,ke,pe,Oe]),ia({...ae,delta:I,draggingRect:Te,pointerCoordinates:bt,scrollableAncestors:pe,scrollableAncestorRects:He});const jt=i.useMemo(()=>({active:B,activeNode:F,activeNodeRect:K,activatorEvent:A,collisions:oe,containerNodeRect:We,dragOverlay:De,draggableNodes:M,droppableContainers:z,droppableRects:ge,over:ke,measureDroppableContainers:S,scrollableAncestors:pe,scrollableAncestorRects:He,measuringConfiguration:Z,measuringScheduled:P,windowRect:tt}),[B,F,K,A,oe,We,De,M,z,ge,ke,S,pe,He,Z,P,tt]),Nt=i.useMemo(()=>({activatorEvent:A,activators:_e,active:B,activeNodeRect:K,ariaDescribedById:{draggable:U},dispatch:b,draggableNodes:M,over:ke,measureDroppableContainers:S}),[A,_e,B,K,b,U,M,ke,S]);return W.createElement(Kn.Provider,{value:y},W.createElement(pt.Provider,{value:Nt},W.createElement(cs.Provider,{value:jt},W.createElement(Bt.Provider,{value:_t},u)),W.createElement(Da,{disabled:(l==null?void 0:l.restoreFocus)===!1})),W.createElement(Ar,{...l,hiddenTextDescribedById:U}));function Ve(){const X=(re==null?void 0:re.autoScrollEnabled)===!1,ee=typeof c=="object"?c.enabled===!1:c===!1,te=w&&!X&&!ee;return typeof c=="object"?{...c,enabled:te}:{enabled:te}}}),Aa=i.createContext(null),$n="button",Ia="Draggable";function Oa(e){let{id:n,data:s,disabled:r=!1,attributes:o}=e;const a=zt(Ia),{activators:d,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=i.useContext(pt),{role:x=$n,roleDescription:m="draggable",tabIndex:v=0}=o??{},j=(c==null?void 0:c.id)===n,b=i.useContext(j?Bt:Aa),[k,y]=Dt(),[C,D]=Dt(),w=wa(d,n),L=ut(s);Ae(()=>(f.set(n,{id:n,key:a,node:k,activatorNode:C,data:L}),()=>{const I=f.get(n);I&&I.key===a&&f.delete(n)}),[f,n]);const M=i.useMemo(()=>({role:x,tabIndex:v,"aria-disabled":r,"aria-pressed":j&&x===$n?!0:void 0,"aria-roledescription":m,"aria-describedby":h.draggable}),[r,x,v,j,m,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:M,isDragging:j,listeners:r?void 0:w,node:k,over:p,setNodeRef:y,setActivatorNodeRef:D,transform:b}}function Ta(){return i.useContext(cs)}const Pa="Droppable",za={timeout:25};function us(e){let{data:n,disabled:s=!1,id:r,resizeObserverConfig:o}=e;const a=zt(Pa),{active:d,dispatch:l,over:c,measureDroppableContainers:u}=i.useContext(pt),h=i.useRef({disabled:s}),f=i.useRef(!1),p=i.useRef(null),x=i.useRef(null),{disabled:m,updateMeasurementsFor:v,timeout:j}={...za,...o},b=ut(v??r),k=i.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),x.current=null},j)},[j]),y=$t({callback:k,disabled:m||!d}),C=i.useCallback((M,I)=>{y&&(I&&(y.unobserve(I),f.current=!1),M&&y.observe(M))},[y]),[D,w]=Dt(C),L=ut(n);return i.useEffect(()=>{!y||!D.current||(y.disconnect(),f.current=!1,y.observe(D.current))},[D,y]),i.useEffect(()=>(l({type:Y.RegisterDroppable,element:{id:r,key:a,disabled:s,node:D,rect:p,data:L}}),()=>l({type:Y.UnregisterDroppable,key:a,id:r})),[r]),i.useEffect(()=>{s!==h.current.disabled&&(l({type:Y.SetDroppableDisabled,id:r,key:a,disabled:s}),h.current.disabled=s)},[r,a,s,l]),{active:d,rect:p,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:w}}function Fa(e){let{animation:n,children:s}=e;const[r,o]=i.useState(null),[a,d]=i.useState(null),l=Et(s);return!s&&!r&&l&&o(l),Ae(()=>{if(!a)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){o(null);return}Promise.resolve(n(u,a)).then(()=>{o(null)})},[n,r,a]),W.createElement(W.Fragment,null,s,r?i.cloneElement(r,{ref:d}):null)}const $a={x:0,y:0,scaleX:1,scaleY:1};function Ba(e){let{children:n}=e;return W.createElement(pt.Provider,{value:ls},W.createElement(Bt.Provider,{value:$a},n))}const Ua={position:"fixed",touchAction:"none"},Wa=e=>dn(e)?"transform 250ms ease":void 0,Ha=i.forwardRef((e,n)=>{let{as:s,activatorEvent:r,adjustScale:o,children:a,className:d,rect:l,style:c,transform:u,transition:h=Wa}=e;if(!l)return null;const f=o?u:{...u,scaleX:1,scaleY:1},p={...Ua,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ye.Transform.toString(f),transformOrigin:o&&r?Or(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return W.createElement(s,{className:d,style:p,ref:n},a)}),_a=e=>n=>{let{active:s,dragOverlay:r}=n;const o={},{styles:a,className:d}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(o[l]=s.node.style.getPropertyValue(l),s.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return d!=null&&d.active&&s.node.classList.add(d.active),d!=null&&d.dragOverlay&&r.node.classList.add(d.dragOverlay),function(){for(const[c,u]of Object.entries(o))s.node.style.setProperty(c,u);d!=null&&d.active&&s.node.classList.remove(d.active)}},Va=e=>{let{transform:{initial:n,final:s}}=e;return[{transform:Ye.Transform.toString(n)},{transform:Ye.Transform.toString(s)}]},Ka={duration:250,easing:"ease",keyframes:Va,sideEffects:_a({styles:{active:{opacity:"0"}}})};function Ya(e){let{config:n,draggableNodes:s,droppableContainers:r,measuringConfiguration:o}=e;return Pt((a,d)=>{if(n===null)return;const l=s.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=is(d);if(!u)return;const{transform:h}=se(d).getComputedStyle(d),f=Jn(h);if(!f)return;const p=typeof n=="function"?n:Xa(n);return rs(c,o.draggable.measure),p({active:{id:a,data:l.data,node:c,rect:o.draggable.measure(c)},draggableNodes:s,dragOverlay:{node:d,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:f})})}function Xa(e){const{duration:n,easing:s,sideEffects:r,keyframes:o}={...Ka,...e};return a=>{let{active:d,dragOverlay:l,transform:c,...u}=a;if(!n)return;const h={x:l.rect.left-d.rect.left,y:l.rect.top-d.rect.top},f={scaleX:c.scaleX!==1?d.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?d.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},x=o({...u,active:d,dragOverlay:l,transform:{initial:c,final:p}}),[m]=x,v=x[x.length-1];if(JSON.stringify(m)===JSON.stringify(v))return;const j=r==null?void 0:r({active:d,dragOverlay:l,...u}),b=l.node.animate(x,{duration:n,easing:s,fill:"forwards"});return new Promise(k=>{b.onfinish=()=>{j==null||j(),k()}})}}let Bn=0;function qa(e){return i.useMemo(()=>{if(e!=null)return Bn++,Bn},[e])}const Ga=W.memo(e=>{let{adjustScale:n=!1,children:s,dropAnimation:r,style:o,transition:a,modifiers:d,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:x,draggableNodes:m,droppableContainers:v,dragOverlay:j,over:b,measuringConfiguration:k,scrollableAncestors:y,scrollableAncestorRects:C,windowRect:D}=Ta(),w=i.useContext(Bt),L=qa(f==null?void 0:f.id),M=ds(d,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:j.rect,over:b,overlayNodeRect:j.rect,scrollableAncestors:y,scrollableAncestorRects:C,transform:w,windowRect:D}),I=fn(p),z=Ya({config:r,draggableNodes:m,droppableContainers:v,measuringConfiguration:k}),O=I?j.setRef:void 0;return W.createElement(Ba,null,W.createElement(Fa,{animation:z},f&&L?W.createElement(Ha,{key:L,id:f.id,ref:O,as:l,activatorEvent:h,adjustScale:n,className:c,transition:a,rect:I,style:{zIndex:u,...o},transform:M},s):null))});function It(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const Ja=[R.Down,R.Right,R.Up,R.Left],Qa=(e,n)=>{let{context:{active:s,collisionRect:r,droppableRects:o,droppableContainers:a,over:d,scrollableAncestors:l}}=n;if(Ja.includes(e.code)){if(e.preventDefault(),!s||!r)return;const c=[];a.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=o.get(f.id);if(p)switch(e.code){case R.Down:r.top<p.top&&c.push(f);break;case R.Up:r.top>p.top&&c.push(f);break;case R.Left:r.left>p.left&&c.push(f);break;case R.Right:r.left<p.left&&c.push(f);break}});const u=zr({collisionRect:r,droppableRects:o,droppableContainers:c});let h=qn(u,"id");if(h===(d==null?void 0:d.id)&&u.length>1&&(h=u[1].id),h!=null){const f=a.get(s.id),p=a.get(h),x=p?o.get(p.id):null,m=p==null?void 0:p.node.current;if(m&&x&&f&&p){const j=Ft(m).some((w,L)=>l[L]!==w),b=hs(f,p),k=Za(f,p),y=j||!b?{x:0,y:0}:{x:k?r.width-x.width:0,y:k?r.height-x.height:0},C={x:x.left,y:x.top};return y.x&&y.y?C:ht(C,y)}}}};function hs(e,n){return!It(e)||!It(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function Za(e,n){return!It(e)||!It(n)||!hs(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}function ms({connection:e,onSelect:n,onEdit:s,compact:r=!1}){const o=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,a=e.nextFollowUp&&!o&&new Date(e.nextFollowUp)<=new Date(Date.now()+7*24*60*60*1e3),d=Array.from({length:3},(c,u)=>t.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${u<e.relationshipStrength?"bg-teal":"bg-champagne-200"}`},u)),l=c=>c?new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null;return r?t.jsxs("div",{className:"flex cursor-pointer items-center gap-3 rounded-lg p-2 transition-colors hover:bg-champagne-50",onClick:()=>n(e.id),children:[t.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-teal-100 text-sm font-medium text-teal-600",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate text-sm font-medium text-wine",children:e.name}),t.jsxs("p",{className:"truncate text-xs text-wine/60",children:[e.role?`${e.role} @ `:"",e.company]})]}),o&&t.jsx("span",{className:"text-xs text-pandora",title:"Follow-up due",children:"!"})]}):t.jsxs("div",{className:"cursor-pointer rounded-lg border border-sage/20 bg-white p-4 transition-all duration-base hover:-translate-y-0.5 hover:shadow-md",onClick:()=>n(e.id),children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-teal-100 text-lg font-semibold text-teal-600",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"truncate font-medium text-wine",children:e.name}),t.jsx("span",{className:"flex gap-0.5",children:d})]}),t.jsxs("p",{className:"truncate text-sm text-wine/70",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[t.jsx("span",{className:"rounded-full bg-champagne-100 px-2 py-0.5 text-xs text-wine",children:Lt[e.relationshipType]}),e.linkedPostingIds.length>0&&t.jsxs("span",{className:"text-xs text-wine/60",children:[e.linkedPostingIds.length," posting",e.linkedPostingIds.length!==1?"s":""]})]})]}),s&&t.jsx("button",{onClick:c=>{c.stopPropagation(),s(e.id)},className:"btn btn-icon btn-ghost !h-8 !w-8",title:"Edit connection",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-sage/10 pt-3 text-xs text-wine/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e.lastContactDate&&t.jsxs("span",{children:["Last contact: ",l(e.lastContactDate)]}),e.contactHistory.length>0&&t.jsxs("span",{children:[e.contactHistory.length," interaction",e.contactHistory.length!==1?"s":""]})]}),e.nextFollowUp&&t.jsxs("span",{className:`flex items-center gap-1 ${o?"font-medium text-flatred":a?"text-pandora":"text-wine/50"}`,children:[o&&t.jsx("svg",{className:"h-3.5 w-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Follow-up: ",l(e.nextFollowUp)]})]})]})}function eo({connections:e,onSelectConnection:n,onEditConnection:s,onAddConnection:r}){const[o,a]=i.useState(""),[d,l]=i.useState("all"),[c,u]=i.useState(""),h=i.useMemo(()=>[...new Set(e.map(v=>v.company))].sort(),[e]),f=i.useMemo(()=>e.filter(m=>{var v,j;if(o){const b=o.toLowerCase();if(!(m.name.toLowerCase().includes(b)||m.company.toLowerCase().includes(b)||((v=m.role)==null?void 0:v.toLowerCase().includes(b))||((j=m.notes)==null?void 0:j.toLowerCase().includes(b))))return!1}if(c&&m.company!==c)return!1;switch(d){case"follow-up-due":return m.nextFollowUp&&new Date(m.nextFollowUp)<=new Date;case"has-postings":return m.linkedPostingIds.length>0;case"no-postings":return m.linkedPostingIds.length===0;default:return!0}}),[e,o,d,c]),p=i.useMemo(()=>[...f].sort((m,v)=>{const j=m.nextFollowUp&&new Date(m.nextFollowUp)<=new Date,b=v.nextFollowUp&&new Date(v.nextFollowUp)<=new Date;return j&&!b?-1:!j&&b?1:m.name.localeCompare(v.name)}),[f]),x=e.filter(m=>m.nextFollowUp&&new Date(m.nextFollowUp)<=new Date).length;return t.jsxs("div",{className:"flex h-full flex-col overflow-hidden p-4",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-wine",children:"Connections"}),t.jsxs("p",{className:"text-sm text-wine/60",children:[e.length," connection",e.length!==1?"s":"",x>0&&t.jsxs("span",{className:"ml-2 text-pandora",children:["(",x," follow-up",x!==1?"s":""," due)"]})]})]}),t.jsxs("button",{onClick:r,className:"btn btn-primary",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Connection"]})]}),t.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative min-w-[200px] flex-1",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-sage",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:o,onChange:m=>a(m.target.value),className:"input pl-9"})]}),t.jsxs("select",{value:d,onChange:m=>l(m.target.value),className:"input select w-auto",children:[t.jsx("option",{value:"all",children:"All Connections"}),t.jsx("option",{value:"follow-up-due",children:"Follow-up Due"}),t.jsx("option",{value:"has-postings",children:"Linked to Postings"}),t.jsx("option",{value:"no-postings",children:"No Postings Linked"})]}),t.jsxs("select",{value:c,onChange:m=>u(m.target.value),className:"input select w-auto",children:[t.jsx("option",{value:"",children:"All Companies"}),h.map(m=>t.jsx("option",{value:m,children:m},m))]}),(o||d!=="all"||c)&&t.jsx("button",{onClick:()=>{a(""),l("all"),u("")},className:"btn btn-sm btn-ghost text-flatred hover:text-flatred-600",children:"Clear filters"})]}),t.jsx("div",{className:"flex-1 overflow-auto",children:p.length===0?t.jsxs("div",{className:"py-12 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-champagne-100",children:t.jsx("svg",{className:"h-8 w-8 text-wine/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.length===0?t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-1 text-lg font-medium text-wine",children:"No connections yet"}),t.jsx("p",{className:"mb-4 text-wine/60",children:"Start building your network by adding contacts you meet during your job search."}),t.jsxs("button",{onClick:r,className:"btn btn-primary",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Your First Connection"]})]}):t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"mb-1 text-lg font-medium text-wine",children:"No matches found"}),t.jsx("p",{className:"text-wine/60",children:"Try adjusting your search or filters."})]})]}):t.jsx("div",{className:"grid gap-3",children:p.map(m=>t.jsx(ms,{connection:m,onSelect:n,onEdit:s},m.id))})})]})}function to({isOpen:e,onClose:n,onSave:s,connection:r,postings:o=[],prefilledCompany:a}){const d=!!r,[l,c]=i.useState({name:"",email:"",linkedInUrl:"",company:a||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),[u,h]=i.useState({});i.useEffect(()=>{e&&(c(r?{name:r.name,email:r.email||"",linkedInUrl:r.linkedInUrl||"",company:r.company,role:r.role||"",relationshipType:r.relationshipType,howWeMet:r.howWeMet||"",relationshipStrength:r.relationshipStrength,notes:r.notes,nextFollowUp:r.nextFollowUp||"",linkedPostingIds:r.linkedPostingIds}:{name:"",email:"",linkedInUrl:"",company:a||"",role:"",relationshipType:"other",howWeMet:"",relationshipStrength:2,notes:"",nextFollowUp:"",linkedPostingIds:[]}),h({}))},[e,r,a]);const f=b=>{const{name:k,value:y}=b.target;c(C=>({...C,[k]:y})),u[k]&&h(C=>({...C,[k]:""}))},p=b=>{c(k=>({...k,relationshipStrength:b}))},x=b=>{c(k=>({...k,linkedPostingIds:k.linkedPostingIds.includes(b)?k.linkedPostingIds.filter(y=>y!==b):[...k.linkedPostingIds,b]}))},m=()=>{const b={};return l.name.trim()||(b.name="Name is required"),l.company.trim()||(b.company="Company is required"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(b.email="Invalid email address"),l.linkedInUrl&&!l.linkedInUrl.includes("linkedin.com")&&(b.linkedInUrl="Must be a LinkedIn URL"),h(b),Object.keys(b).length===0},v=b=>{if(b.preventDefault(),!m())return;const k=Date.now(),y={id:(r==null?void 0:r.id)||`conn_${k}_${Math.random().toString(36).slice(2,9)}`,name:l.name.trim(),email:l.email.trim()||void 0,linkedInUrl:l.linkedInUrl.trim()||void 0,company:l.company.trim(),role:l.role.trim()||void 0,relationshipType:l.relationshipType,howWeMet:l.howWeMet.trim()||void 0,relationshipStrength:l.relationshipStrength,notes:l.notes,lastContactDate:r==null?void 0:r.lastContactDate,nextFollowUp:l.nextFollowUp||void 0,contactHistory:(r==null?void 0:r.contactHistory)||[],linkedPostingIds:l.linkedPostingIds,dateAdded:(r==null?void 0:r.dateAdded)||k,dateModified:k};s(y),n()};if(!e)return null;const j=[...o].sort((b,k)=>{const y=b.company.toLowerCase()===l.company.toLowerCase(),C=k.company.toLowerCase()===l.company.toLowerCase();return y&&!C?-1:!y&&C?1:b.company.localeCompare(k.company)});return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d?"Edit Connection":"Add Connection"}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("form",{onSubmit:v,className:"flex-1 overflow-auto p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:l.name,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.name?"border-red-300":"border-gray-200"}`,placeholder:"John Smith"}),u.name&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"company",value:l.company,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.company?"border-red-300":"border-gray-200"}`,placeholder:"Anthropic"}),u.company&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.company})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),t.jsx("input",{type:"text",name:"role",value:l.role,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Technical Recruiter"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(Lt).map(b=>t.jsx("button",{type:"button",onClick:()=>c(k=>({...k,relationshipType:b})),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${l.relationshipType===b?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"} border`,children:Lt[b]},b))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship Strength"}),t.jsx("div",{className:"flex gap-4",children:[1,2,3].map(b=>t.jsxs("button",{type:"button",onClick:()=>p(b),className:`flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors ${l.relationshipStrength===b?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"flex gap-0.5",children:Array.from({length:3},(k,y)=>t.jsx("span",{className:`w-2 h-2 rounded-full ${y<b?"bg-indigo-500":"bg-gray-200"}`},y))}),t.jsx("span",{className:"text-sm",children:Un[b]})]},b))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How did you meet?"}),t.jsx("input",{type:"text",name:"howWeMet",value:l.howWeMet,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Career fair at MIT, October 2024"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:l.email,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.email?"border-red-300":"border-gray-200"}`,placeholder:"john@company.com"}),u.email&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),t.jsx("input",{type:"url",name:"linkedInUrl",value:l.linkedInUrl,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${u.linkedInUrl?"border-red-300":"border-gray-200"}`,placeholder:"linkedin.com/in/..."}),u.linkedInUrl&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.linkedInUrl})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Follow-up Date"}),t.jsx("input",{type:"date",name:"nextFollowUp",value:l.nextFollowUp,onChange:f,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),t.jsx("textarea",{name:"notes",value:l.notes,onChange:f,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Any notes about this connection..."})]}),o.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Postings"}),t.jsx("div",{className:"max-h-40 overflow-auto border border-gray-200 rounded-lg",children:j.slice(0,10).map(b=>t.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:l.linkedPostingIds.includes(b.id),onChange:()=>x(b.id),className:"w-4 h-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500"}),t.jsxs("span",{className:"text-sm text-gray-700 truncate",children:[b.title," @ ",b.company]})]},b.id))}),o.length>10&&t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Showing first 10 postings. Search by company name to find more."})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:d?"Save Changes":"Add Connection"})]})]})})}function no({connection:e,linkedPostings:n,isOpen:s,onClose:r,onEdit:o,onDelete:a,onLogContact:d,onViewPosting:l,onUnlinkPosting:c,onUpdateFollowUp:u}){const[h,f]=i.useState(!1),[p,x]=i.useState({type:"email",notes:"",date:new Date().toISOString().split("T")[0]}),[m,v]=i.useState(!1);if(!s)return null;const j=Array.from({length:3},(w,L)=>t.jsx("span",{className:`inline-block w-2.5 h-2.5 rounded-full ${L<e.relationshipStrength?"bg-indigo-500":"bg-gray-200"}`},L)),b=w=>w?new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not set",k=e.nextFollowUp&&new Date(e.nextFollowUp)<=new Date,y=()=>{const w={id:`contact_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,date:p.date,type:p.type,notes:p.notes.trim()||void 0};d(w),f(!1),x({type:"email",notes:"",date:new Date().toISOString().split("T")[0]})},C=()=>{a(),v(!1)},D=[...e.contactHistory].sort((w,L)=>new Date(L.date).getTime()-new Date(w.date).getTime());return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:r}),t.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl z-50 flex flex-col overflow-hidden",children:[t.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-semibold text-xl flex-shrink-0",children:e.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-gray-600",children:[e.role?`${e.role} @ `:"",e.company]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:"flex gap-0.5",children:j}),t.jsxs("span",{className:"text-sm text-gray-500",children:[Un[e.relationshipStrength]," connection"]})]})]})]}),t.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[e.email&&t.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.email]}),e.linkedInUrl&&t.jsxs("a",{href:e.linkedInUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-gray-600 hover:text-indigo-600",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"View LinkedIn Profile"]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Type"}),t.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 text-gray-700 text-sm",children:Lt[e.relationshipType]})]}),e.howWeMet&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"How We Met"}),t.jsx("p",{className:"text-gray-700",children:e.howWeMet})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Next Follow-up"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"date",value:e.nextFollowUp||"",onChange:w=>u(w.target.value||void 0),className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${k?"border-red-300 bg-red-50":"border-gray-200"}`}),k&&t.jsxs("span",{className:"text-sm text-red-600 font-medium flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Overdue!"]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Contact History"}),t.jsxs("button",{onClick:()=>f(!h),className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Contact"]})]}),h&&t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),t.jsx("select",{value:p.type,onChange:w=>x({...p,type:w.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:Object.keys(kt).map(w=>t.jsx("option",{value:w,children:kt[w]},w))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Date"}),t.jsx("input",{type:"date",value:p.date,onChange:w=>x({...p,date:w.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Notes (optional)"}),t.jsx("textarea",{value:p.notes,onChange:w=>x({...p,notes:w.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Brief description of the conversation..."})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),t.jsx("button",{onClick:y,className:"px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save"})]})]}),D.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No contact history yet."}):t.jsx("div",{className:"space-y-3",children:D.map(w=>t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-xs text-gray-500",children:kt[w.type].charAt(0)})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:kt[w.type]}),t.jsx("span",{className:"text-xs text-gray-400",children:b(w.date)})]}),w.notes&&t.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:w.notes})]})]},w.id))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:["Linked Postings (",n.length,")"]}),n.length===0?t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No postings linked yet."}):t.jsx("div",{className:"space-y-2",children:n.map(w=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("button",{onClick:()=>l(w.id),className:"text-left flex-1 hover:text-indigo-600",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.title}),t.jsxs("p",{className:"text-xs text-gray-500",children:[w.company," · ",w.status]})]}),t.jsx("button",{onClick:()=>c(w.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Unlink posting",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w.id))})]}),e.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Notes"}),t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.notes})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[t.jsx("button",{onClick:()=>v(!0),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"}),t.jsx("button",{onClick:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Edit Connection"})]})]}),m&&t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Connection?"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["This will permanently delete ",t.jsx("strong",{children:e.name})," and remove them from all linked postings."]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),t.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}function Zt({connections:e,onClick:n,size:s="sm"}){if(e.length===0)return null;const o=e.map(d=>d.name).slice(0,3).join(", ")+(e.length>3?` +${e.length-3} more`:""),a=s==="sm"?"text-xs gap-1 px-1.5 py-0.5":"text-sm gap-1.5 px-2 py-1";return t.jsxs("button",{onClick:d=>{d.stopPropagation(),n==null||n()},className:`flex items-center ${a} bg-indigo-50 text-indigo-600 rounded-full hover:bg-indigo-100 transition-colors`,title:o,children:[t.jsx("svg",{className:s==="sm"?"w-3 h-3":"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.jsx("span",{children:e.length})]})}function so({isOpen:e,onClose:n,connections:s,posting:r,linkedConnectionIds:o,onLinkConnection:a,onUnlinkConnection:d,onCreateConnection:l}){const[c,u]=i.useState(""),h=i.useMemo(()=>{const x=s.filter(j=>{var k;if(!c)return!0;const b=c.toLowerCase();return j.name.toLowerCase().includes(b)||j.company.toLowerCase().includes(b)||((k=j.role)==null?void 0:k.toLowerCase().includes(b))}),m=x.filter(j=>j.company.toLowerCase()===r.company.toLowerCase()),v=x.filter(j=>j.company.toLowerCase()!==r.company.toLowerCase());return{sameCompany:m,others:v}},[s,r.company,c]),f=x=>{o.includes(x)?d(x):a(x)};if(!e)return null;const p=x=>{const m=o.includes(x.id);return t.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${m?"bg-teal-50":"hover:bg-champagne-50"}`,children:[t.jsx("input",{type:"checkbox",checked:m,onChange:()=>f(x.id),className:"checkbox checkbox-sm"}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-teal/10 flex items-center justify-center text-teal font-medium text-sm flex-shrink-0",children:x.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:`text-sm font-medium truncate ${m?"text-teal-700":"text-wine"}`,children:x.name}),t.jsxs("p",{className:"text-xs text-wine/60 truncate",children:[x.role?`${x.role} @ `:"",x.company]})]})]},x.id)};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Link Connections"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[r.title," @ ",r.company]})]}),t.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"px-6 py-3 border-b border-gray-100",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search connections...",value:c,onChange:x=>u(x.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",autoFocus:!0})]})}),t.jsx("div",{className:"flex-1 overflow-auto p-4",children:s.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-gray-500 mb-3",children:"No connections yet"}),t.jsx("button",{onClick:l,className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"+ Create your first connection"})]}):h.sameCompany.length===0&&h.others.length===0?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"No connections match your search"})}):t.jsxs("div",{className:"space-y-4",children:[h.sameCompany.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["At ",r.company," (",h.sameCompany.length,")"]}),t.jsx("div",{className:"space-y-1",children:h.sameCompany.map(p)})]}),h.others.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2 px-1",children:["Other Connections (",h.others.length,")"]}),t.jsx("div",{className:"space-y-1",children:h.others.map(p)})]})]})}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 bg-gray-50",children:[t.jsxs("button",{onClick:l,className:"text-sm text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Connection"]}),t.jsx("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Done"})]})]})})}const en={google:"google.com",alphabet:"abc.xyz",meta:"meta.com",facebook:"facebook.com",amazon:"amazon.com",apple:"apple.com",microsoft:"microsoft.com",netflix:"netflix.com",airbnb:"airbnb.com",uber:"uber.com",lyft:"lyft.com",spotify:"spotify.com",slack:"slack.com",salesforce:"salesforce.com",stripe:"stripe.com",shopify:"shopify.com",twilio:"twilio.com",zoom:"zoom.us",dropbox:"dropbox.com",linkedin:"linkedin.com",twitter:"twitter.com",x:"x.com",snap:"snap.com",snapchat:"snapchat.com",pinterest:"pinterest.com",reddit:"reddit.com",discord:"discord.com",github:"github.com",gitlab:"gitlab.com",atlassian:"atlassian.com",jira:"atlassian.com",confluence:"atlassian.com",notion:"notion.so",figma:"figma.com",canva:"canva.com",adobe:"adobe.com",oracle:"oracle.com",ibm:"ibm.com",intel:"intel.com",nvidia:"nvidia.com",amd:"amd.com",cisco:"cisco.com",vmware:"vmware.com",dell:"dell.com",hp:"hp.com","hewlett packard":"hp.com",samsung:"samsung.com",sony:"sony.com",lg:"lg.com",paypal:"paypal.com",square:"squareup.com",block:"block.xyz",robinhood:"robinhood.com",coinbase:"coinbase.com",plaid:"plaid.com",doordash:"doordash.com",instacart:"instacart.com",grubhub:"grubhub.com",postmates:"postmates.com",peloton:"onepeloton.com",tesla:"tesla.com",spacex:"spacex.com",palantir:"palantir.com",databricks:"databricks.com",snowflake:"snowflake.com",datadog:"datadoghq.com",splunk:"splunk.com",elastic:"elastic.co",mongodb:"mongodb.com",redis:"redis.com",cloudflare:"cloudflare.com",fastly:"fastly.com",akamai:"akamai.com",okta:"okta.com",auth0:"auth0.com",hashicorp:"hashicorp.com",docker:"docker.com",kubernetes:"kubernetes.io",redhat:"redhat.com","red hat":"redhat.com",canonical:"canonical.com",ubuntu:"ubuntu.com",suse:"suse.com",vercel:"vercel.com",netlify:"netlify.com",heroku:"heroku.com",digitalocean:"digitalocean.com",linode:"linode.com",vultr:"vultr.com",aws:"aws.amazon.com","amazon web services":"aws.amazon.com",gcp:"cloud.google.com","google cloud":"cloud.google.com",azure:"azure.microsoft.com",deloitte:"deloitte.com",mckinsey:"mckinsey.com",bcg:"bcg.com",bain:"bain.com",accenture:"accenture.com",kpmg:"kpmg.com",pwc:"pwc.com",ey:"ey.com","ernst & young":"ey.com",jpmorgan:"jpmorgan.com","goldman sachs":"goldmansachs.com","morgan stanley":"morganstanley.com","bank of america":"bankofamerica.com","wells fargo":"wellsfargo.com",citi:"citi.com",citibank:"citi.com",chase:"chase.com","capital one":"capitalone.com","american express":"americanexpress.com",amex:"americanexpress.com",visa:"visa.com",mastercard:"mastercard.com"};function ro(e){if(!e)return null;const n=e.toLowerCase().trim();if(en[n])return en[n];for(const[r,o]of Object.entries(en))if(n.startsWith(r+" ")||n.startsWith(r+","))return o;const s=n.replace(/\s*(inc\.?|llc\.?|ltd\.?|corp\.?|corporation|company|co\.?|limited|gmbh|ag|sa|plc)\.?\s*$/i,"").replace(/[^a-z0-9\s]/g,"").trim().replace(/\s+/g,"");return s.length<2?null:`${s}.com`}function ao(e,n=128){const s=ro(e);return s?`https://www.google.com/s2/favicons?domain=${s}&sz=${n}`:null}function xs(e,n){return e||ao(n)}const oo={saved:"bg-pandora/15 text-pandora-600 border-pandora/30",in_progress:"bg-champagne-200/50 text-champagne-700 border-champagne-400/30",applied:"bg-teal/10 text-teal-600 border-teal/30",interviewing:"bg-wine/10 text-wine border-wine/30",offer:"bg-pandora-500/15 text-pandora-600 border-pandora-500/30",accepted:"bg-teal-600/15 text-teal-700 border-teal-600/30",rejected:"bg-flatred/10 text-flatred border-flatred/30",withdrawn:"bg-sage/10 text-sage-500 border-sage/20"};function tn(e){return e.split(" ").slice(0,2).map(n=>n[0]).join("").toUpperCase()}function gn(e){return Math.floor((Date.now()-e)/(1e3*60*60*24))}function nn(e){const n=gn(e);return n===0?"Today":n===1?"1d":`${n}d`}function io(e,n){return e<=3?"text-sage":e<=7?"text-pandora":n?"text-flatred font-semibold":"text-flatred"}function lo(e){return Ot(e.status)?!1:gn(e.dateModified)>=7}function pn({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,onEdit:a,variant:d="kanban",linkedConnections:l=[],onConnectionClick:c,isSelected:u=!1,columnWidth:h=280}){const[f,p]=i.useState(!1),x=xs(e.companyLogo,e.company),m=x&&!f,v=w=>{const L=w.currentTarget;L.naturalWidth<=16&&L.naturalHeight<=16&&p(!0)},j=h<260,b=h>350,k=[{label:"Open URL",onClick:()=>window.open(e.url,"_blank"),icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})},{divider:!0,label:"",onClick:()=>{}},...["saved","in_progress","applied","interviewing","offer","rejected"].filter(w=>w!==e.status).map(w=>({label:`Move to ${Re[w]}`,onClick:()=>r(e.id,w)})),{divider:!0,label:"",onClick:()=>{}},{label:"Delete",onClick:()=>o(e.id),danger:!0,icon:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],y=lo(e),C=gn(e.dateModified),D=io(C,y);return d==="list"?t.jsx(Yt,{items:k,children:t.jsxs("div",{onClick:()=>n(e.id),className:"group flex cursor-pointer items-center bg-white px-4 py-3 transition-colors hover:bg-champagne-50/50",children:[t.jsxs("div",{className:"relative w-12 flex-shrink-0",children:[m?t.jsx("img",{src:x,alt:e.company,className:"h-9 w-9 rounded-md object-contain bg-white",onLoad:v,onError:()=>p(!0)}):t.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-champagne-100 text-xs font-semibold text-wine/70",children:tn(e.company)}),y&&t.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-flatred text-white",children:t.jsx("span",{className:"text-[10px] font-bold",children:"!"})})]}),t.jsxs("div",{className:"min-w-[200px] flex-1 pr-4",children:[t.jsx("p",{className:"truncate text-sm font-medium text-wine group-hover:text-flatred transition-colors",children:e.title}),t.jsx("p",{className:"truncate text-xs text-wine/50",children:e.company})]}),t.jsx("div",{className:"w-[120px] flex-shrink-0 px-2",children:t.jsx("span",{className:"text-xs text-wine/60 truncate block",children:e.location||"—"})}),t.jsx("div",{className:"w-[100px] flex-shrink-0 px-2",children:t.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-[11px] font-medium ${oo[e.status]}`,children:Re[e.status]})}),t.jsx("div",{className:"w-[140px] flex-shrink-0 px-2 overflow-hidden",children:e.tags.length>0?t.jsx("div",{className:"flex flex-nowrap gap-1 overflow-x-auto scrollbar-hide",children:e.tags.map(w=>t.jsx(it,{tag:w,size:"sm",className:"flex-shrink-0"},w))}):t.jsx("span",{className:"text-xs text-wine/30",children:"—"})}),t.jsx("div",{className:"w-[70px] flex-shrink-0 px-2",onClick:w=>w.stopPropagation(),children:t.jsx(Ct,{priority:e.interest,onChange:w=>s(e.id,w),size:"sm"})}),t.jsx("div",{className:`w-[50px] flex-shrink-0 px-2 text-right text-xs ${D}`,children:nn(e.dateModified)}),t.jsx("div",{className:"w-[36px] flex-shrink-0 flex justify-center",onClick:w=>w.stopPropagation(),children:t.jsx(Zt,{connections:l,onClick:c,size:"sm"})})]})}):b?t.jsx(Yt,{items:k,children:t.jsx("div",{onClick:()=>n(e.id),className:`relative group cursor-pointer rounded-lg border bg-white shadow-sm transition-all duration-base hover:-translate-y-0.5 hover:shadow-md ${y?"border-flatred/30":"border-sage/20"} ${u?"bg-champagne-50 ring-2 ring-champagne-300":""} px-3 py-2`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[m?t.jsx("img",{src:x,alt:e.company,className:"h-10 w-10 rounded object-contain bg-white",onLoad:v,onError:()=>p(!0)}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-champagne-200 text-sm font-medium text-wine",children:tn(e.company)}),y&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-flatred-50",children:t.jsx("svg",{className:"h-3 w-3 text-flatred",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-baseline gap-1.5",children:[t.jsx("p",{className:"truncate font-medium text-wine",children:e.title}),t.jsx("span",{className:"text-wine/30 flex-shrink-0",children:"•"}),t.jsx("p",{className:"truncate text-sm text-wine/60",children:e.company})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.location&&t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"truncate text-xs text-wine/50 max-w-[120px]",children:e.location}),t.jsx("span",{className:"text-wine/20 flex-shrink-0",children:"|"})]}),t.jsx("div",{className:"flex items-center gap-1.5 flex-shrink-0",onClick:w=>w.stopPropagation(),children:t.jsx(Ct,{priority:e.interest,onChange:w=>s(e.id,w),size:"sm"})}),t.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(w=>t.jsx(it,{tag:w,size:"sm"},w)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-sage flex-shrink-0",children:["+",e.tags.length-2]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",onClick:w=>w.stopPropagation(),children:[t.jsx(Zt,{connections:l,onClick:c,size:"sm"}),t.jsxs("div",{className:`flex items-center gap-1 text-xs ${D}`,children:[y&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),nn(e.dateModified)]})]})]})})}):t.jsx(Yt,{items:k,children:t.jsxs("div",{onClick:()=>n(e.id),className:`relative group cursor-pointer rounded-lg border bg-white shadow-sm transition-all duration-base hover:-translate-y-0.5 hover:shadow-md ${y?"border-flatred/30":"border-sage/20"} ${u?"bg-champagne-50 ring-2 ring-champagne-300":""} p-3`,children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[m?t.jsx("img",{src:x,alt:e.company,className:"h-10 w-10 rounded object-contain bg-white",onLoad:v,onError:()=>p(!0)}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-champagne-200 text-sm font-medium text-wine",children:tn(e.company)}),y&&t.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-flatred-50",children:t.jsx("svg",{className:"h-3 w-3 text-flatred",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"truncate font-medium text-wine",children:e.title}),t.jsx("p",{className:"truncate text-sm text-wine/70",children:e.company}),!j&&t.jsx("p",{className:"truncate text-xs text-wine/50",children:e.location})]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsxs("div",{className:"flex items-center gap-2",onClick:w=>w.stopPropagation(),children:[t.jsx(Ct,{priority:e.interest,onChange:w=>s(e.id,w),size:"sm"}),!j&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.tags.slice(0,2).map(w=>t.jsx(it,{tag:w,size:"sm"},w)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-sage",children:["+",e.tags.length-2]})]}),t.jsx(Zt,{connections:l,onClick:c,size:"sm"})]})]}),t.jsxs("div",{className:`flex items-center gap-1 text-xs ${D}`,children:[y&&t.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),nn(e.dateModified)]})]})]})})}function co({isOpen:e,onClose:n,onSave:s,posting:r}){const[o,a]=i.useState({title:"",company:"",location:"",salary:"",description:"",interest:3}),[d,l]=i.useState({});i.useEffect(()=>{e&&r&&(a({title:r.title,company:r.company,location:r.location,salary:r.salary||"",description:r.description,interest:r.interest}),l({}))},[e,r]);const c=()=>{const h={};return o.title.trim()||(h.title="Job title is required"),o.company.trim()||(h.company="Company is required"),l(h),Object.keys(h).length===0},u=h=>{h.preventDefault(),!(!c()||!r)&&(s(r.id,{title:o.title.trim(),company:o.company.trim(),location:o.location.trim(),salary:o.salary.trim()||void 0,description:o.description.trim(),interest:o.interest,dateModified:Date.now()}),n())};return!e||!r?null:t.jsxs("div",{className:"fixed inset-0 z-modal flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-wine/40 backdrop-blur-sm animate-fade-in",onClick:n}),t.jsxs("div",{className:"relative w-full max-w-lg rounded-xl bg-white shadow-2xl animate-scale-in",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-sage/20 px-6 py-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-wine",children:"Edit Posting"}),t.jsx("button",{onClick:n,className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:u,className:"p-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-sm font-medium text-wine",children:["Job Title ",t.jsx("span",{className:"text-flatred",children:"*"})]}),t.jsx("input",{type:"text",value:o.title,onChange:h=>a({...o,title:h.target.value}),className:`input w-full ${d.title?"border-flatred":""}`,placeholder:"e.g., Senior Software Engineer"}),d.title&&t.jsx("p",{className:"mt-1 text-sm text-flatred",children:d.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-sm font-medium text-wine",children:["Company ",t.jsx("span",{className:"text-flatred",children:"*"})]}),t.jsx("input",{type:"text",value:o.company,onChange:h=>a({...o,company:h.target.value}),className:`input w-full ${d.company?"border-flatred":""}`,placeholder:"e.g., Acme Inc."}),d.company&&t.jsx("p",{className:"mt-1 text-sm text-flatred",children:d.company})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Location"}),t.jsx("input",{type:"text",value:o.location,onChange:h=>a({...o,location:h.target.value}),className:"input w-full",placeholder:"e.g., San Francisco, CA or Remote"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Salary"}),t.jsx("input",{type:"text",value:o.salary,onChange:h=>a({...o,salary:h.target.value}),className:"input w-full",placeholder:"e.g., $120,000 - $150,000"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Interest Level"}),t.jsx(Wn,{interest:o.interest,onChange:h=>a({...o,interest:h}),size:"md"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Description"}),t.jsx("textarea",{value:o.description,onChange:h=>a({...o,description:h.target.value}),className:"input w-full h-32 resize-none",placeholder:"Job description..."})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})]})]})}function uo({posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,onEdit:a,linkedConnections:d,onConnectionClick:l,isSelected:c,columnWidth:u}){const{attributes:h,listeners:f,setNodeRef:p,transform:x,isDragging:m}=Oa({id:e.id}),v={transform:Ye.Translate.toString(x)};return t.jsx("div",{ref:p,style:v,...f,...h,className:`touch-none ${m?"opacity-50":""}`,children:t.jsx(pn,{posting:e,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,onEdit:a,variant:"kanban",linkedConnections:d,onConnectionClick:l,isSelected:c,columnWidth:u})})}const ho={saved:"bg-champagne-50/50 border-sage/20",in_progress:"bg-champagne-50/50 border-sage/20",applied:"bg-champagne-50/50 border-sage/20",interviewing:"bg-champagne-50/50 border-sage/20",offer:"bg-champagne-50/50 border-sage/20",accepted:"bg-champagne-50/50 border-sage/20",rejected:"bg-champagne-50/50 border-sage/20",withdrawn:"bg-champagne-50/50 border-sage/20"},mo={saved:"bg-pandora",in_progress:"bg-champagne-400",applied:"bg-teal",interviewing:"bg-wine",offer:"bg-pandora-500",accepted:"bg-teal-600",rejected:"bg-flatred",withdrawn:"bg-sage-400"},xo={saved:"ring-pandora bg-pandora-100",in_progress:"ring-champagne-400 bg-champagne-100",applied:"ring-teal bg-teal-100",interviewing:"ring-wine bg-wine-100",offer:"ring-pandora-500 bg-pandora-100",accepted:"ring-teal-600 bg-teal-200",rejected:"ring-flatred bg-flatred-100",withdrawn:"ring-sage bg-sage-100"};function fo({status:e,postings:n,onPostingSelect:s,onPriorityChange:r,onStatusChange:o,onDelete:a,onEdit:d,onAdd:l,onCollapse:c,isOver:u=!1,isDragging:h=!1,getLinkedConnections:f,onConnectionClick:p,selectedPostingId:x,columnWidth:m}){const{setNodeRef:v}=us({id:e}),j=i.useRef(null),[b,k]=i.useState(!1),y=i.useCallback(()=>{const C=j.current;if(!C)return;const D=C.scrollHeight>C.clientHeight,w=C.scrollTop+C.clientHeight>=C.scrollHeight-10;k(D&&!w)},[]);return i.useEffect(()=>{y()},[n.length,y]),i.useEffect(()=>{const C=j.current;if(C)return C.addEventListener("scroll",y),window.addEventListener("resize",y),()=>{C.removeEventListener("scroll",y),window.removeEventListener("resize",y)}},[y]),t.jsxs("div",{ref:v,className:`flex h-full w-full flex-col rounded-lg border overflow-hidden transition-colors duration-200 ${ho[e]} ${u?`ring-2 ${xo[e]}`:""} ${h&&!u?"opacity-75":""}`,children:[t.jsxs("div",{className:`flex items-center justify-between px-3 py-2.5 ${mo[e]}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:c,className:"btn btn-icon btn-ghost !h-6 !w-6 text-white/60 hover:text-white hover:bg-white/20",title:`Collapse ${Re[e]} column`,children:t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"font-medium text-white",children:Re[e]})]}),t.jsx("span",{className:"rounded-full bg-white/20 px-2 py-0.5 text-xs font-semibold text-white",children:n.length})]}),t.jsxs("div",{className:"relative flex-1",children:[t.jsxs("div",{ref:j,className:"absolute inset-0 space-y-2 overflow-y-auto p-2 scrollbar-subtle",children:[n.map(C=>t.jsx(uo,{posting:C,onSelect:s,onPriorityChange:r,onStatusChange:o,onDelete:a,onEdit:d,linkedConnections:f==null?void 0:f(C.id),onConnectionClick:()=>p==null?void 0:p(C.id),isSelected:x===C.id,columnWidth:m},C.id)),n.length===0&&t.jsx("div",{className:`rounded-lg border-2 border-dashed py-8 text-center text-sm transition-colors ${u?"border-sage bg-champagne-100 text-wine":"border-transparent text-wine/40"}`,children:u?"Drop here":"No postings"})]}),b&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center pb-1 pointer-events-none",children:t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-white/80 shadow-sm border border-sage/20",children:t.jsx("svg",{className:"w-3 h-3 text-sage",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})})]}),l&&t.jsxs("button",{onClick:()=>l(e),className:"group flex items-center justify-center gap-1.5 border-t border-sage/20 bg-white/50 px-3 py-2 text-sm text-wine/30 transition-all hover:bg-champagne-50 hover:text-wine/60 rounded-b-lg",children:[t.jsx("svg",{className:"h-4 w-4 opacity-50 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:"Add posting"})]})]})}const go={saved:{bg:"bg-pandora",text:"text-white",border:"border-pandora-600",hover:"hover:bg-pandora-500"},in_progress:{bg:"bg-champagne-400",text:"text-wine",border:"border-champagne-500",hover:"hover:bg-champagne-300"},applied:{bg:"bg-teal",text:"text-white",border:"border-teal-600",hover:"hover:bg-teal-400"},interviewing:{bg:"bg-wine",text:"text-white",border:"border-wine-700",hover:"hover:bg-wine-400"},offer:{bg:"bg-pandora-500",text:"text-white",border:"border-pandora-600",hover:"hover:bg-pandora-400"},accepted:{bg:"bg-teal-600",text:"text-white",border:"border-teal-700",hover:"hover:bg-teal-500"},rejected:{bg:"bg-flatred",text:"text-white",border:"border-flatred-700",hover:"hover:bg-flatred-400"},withdrawn:{bg:"bg-sage",text:"text-wine",border:"border-sage-600",hover:"hover:bg-sage-300"}},po={saved:"ring-pandora",in_progress:"ring-champagne-400",applied:"ring-teal",interviewing:"ring-wine",offer:"ring-pandora-500",accepted:"ring-teal-600",rejected:"ring-flatred",withdrawn:"ring-sage"};function bo({status:e,count:n,onExpand:s,onCollapse:r,isOver:o=!1,isAnimating:a=!1,isCollapsed:d=!0}){const{setNodeRef:l}=us({id:e}),c=go[e],u={saved:"SAVED",in_progress:"IN PROG",applied:"APPLIED",interviewing:"INTRVW",offer:"OFFER",accepted:"ACCEPT",rejected:"REJECT",withdrawn:"WTHDRN"};return d?t.jsx("div",{ref:l,className:`
        group relative flex-1 flex items-center justify-center cursor-pointer
        ${c.bg} ${c.hover}
        ${o?`ring-2 ${po[e]} ring-inset`:""}
        rounded-l-lg
        transition-all duration-200 ease-out
        hover:flex-[1.5] hover:shadow-lg hover:z-10
        hover:-ml-3
        ${a?"animate-tab-slide-in":""}
      `,onClick:s,title:`Expand ${Re[e]} column (${n})`,children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-2 gap-1",children:[t.jsx("span",{className:`flex items-center justify-center min-w-[20px] h-[20px] rounded-full bg-white/30 ${c.text} text-[11px] font-bold`,children:n}),t.jsx("span",{className:`text-[9px] font-bold tracking-wider whitespace-nowrap ${c.text} opacity-90 flex-1 flex items-center`,style:{writingMode:"vertical-rl",textOrientation:"mixed",transform:"rotate(180deg)"},children:u[e]}),t.jsx("svg",{className:`h-3 w-3 ${c.text} opacity-0 group-hover:opacity-80 transition-opacity duration-200 flex-shrink-0`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}):t.jsx("div",{className:`
          group relative flex-1 flex items-center justify-center cursor-pointer
          bg-champagne-100/50 hover:bg-champagne-200/70
          border-l border-champagne-200/50
          transition-all duration-200
        `,onClick:r,title:`Collapse ${Re[e]} column`,children:t.jsx("div",{className:`w-2 h-2 rounded-full ${c.bg} opacity-40 group-hover:opacity-70 transition-opacity`})})}const vo=280,wo=220,yo=500,jo={saved:"bg-pandora",in_progress:"bg-champagne-400",applied:"bg-teal",interviewing:"bg-wine",offer:"bg-pandora-500",accepted:"bg-teal-600",rejected:"bg-flatred",withdrawn:"bg-sage"};function No(e){return e?jo[e]:"bg-sage/30"}function ko({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,onEdit:a,onAdd:d,collapsedColumns:l,onCollapseChange:c,getLinkedConnections:u,onConnectionClick:h,selectedPostingId:f}){const[p,x]=i.useState(null),[m,v]=i.useState(null),[j,b]=i.useState(null),[k,y]=i.useState(null),[C,D]=i.useState(null),[w,L]=i.useState(()=>{const S=localStorage.getItem("kanban-column-widths");if(S)try{return JSON.parse(S)}catch{}return Ue.reduce((P,F)=>(P[F]=vo,P),{})});i.useEffect(()=>{localStorage.setItem("kanban-column-widths",JSON.stringify(w))},[w]);const[M,I]=i.useState(null),z=i.useRef(0),O=i.useRef(0),_=Ir(Ln(xn,{activationConstraint:{distance:8}}),Ln(hn,{coordinateGetter:Qa})),B=S=>e.filter(P=>P.status===S),G=p?e.find(S=>S.id===p):null,re=i.useCallback(S=>{x(S.active.id)},[]),J=i.useCallback(S=>{var P;v((P=S.over)==null?void 0:P.id)},[]),A=i.useCallback(S=>{const{active:P,over:F}=S;if(x(null),v(null),!F)return;const je=P.id,ae=F.id;if(Ue.includes(ae)){const Ne=e.find(K=>K.id===je);Ne&&Ne.status!==ae&&r(je,ae)}},[e,r]),V=i.useCallback(()=>{x(null),v(null)},[]),$=i.useCallback(S=>{!l.includes(S)&&C===null&&(D(S),setTimeout(()=>{D(null),y(S),c([...l,S]),setTimeout(()=>y(null),250)},200))},[l,C,c]),U=i.useCallback(S=>{b(S),c(l.filter(P=>P!==S)),setTimeout(()=>b(null),200)},[l,c]),ye=Ue.filter(S=>l.includes(S)),Z=Ue.filter(S=>!l.includes(S)),ge=i.useCallback((S,P)=>{P.preventDefault(),P.stopPropagation(),I(S),z.current=P.clientX,O.current=w[S]},[w]);return i.useEffect(()=>{if(!M)return;const S=F=>{const je=F.clientX-z.current,ae=Math.min(yo,Math.max(wo,O.current+je));L(Ne=>({...Ne,[M]:ae}))},P=()=>{I(null)};return document.addEventListener("mousemove",S),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",P)}},[M]),t.jsxs(Ra,{sensors:_,collisionDetection:Pr,onDragStart:re,onDragOver:J,onDragEnd:A,onDragCancel:V,children:[t.jsxs("div",{className:"flex h-full",children:[t.jsx("div",{className:"flex flex-1 gap-3 overflow-x-auto p-4",children:Z.map(S=>t.jsxs("div",{className:`relative flex-shrink-0 group origin-right ${j===S?"animate-slide-in-right":""} ${C===S?"animate-slide-out-right":""}`,style:{width:w[S]},children:[t.jsx(fo,{status:S,postings:B(S),onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,onEdit:a,onAdd:d,onCollapse:()=>$(S),isOver:m===S,isDragging:p!==null,getLinkedConnections:u,onConnectionClick:h,selectedPostingId:f,columnWidth:w[S]}),t.jsx("div",{className:`absolute top-0 right-0 w-1 h-full cursor-col-resize
                  ${M===S?"bg-flatred":"bg-transparent hover:bg-sage/50"}
                  transition-colors`,onMouseDown:P=>ge(S,P)})]},S))}),t.jsxs("div",{className:"flex h-full flex-shrink-0",children:[t.jsx("div",{className:"flex flex-col w-12 h-full py-1",children:Ue.map(S=>{const P=l.includes(S);return t.jsx(bo,{status:S,count:B(S).length,onExpand:()=>U(S),onCollapse:()=>$(S),isOver:m===S,isAnimating:k===S,isCollapsed:P},S)})}),t.jsx("div",{className:`w-2.5 h-full transition-colors duration-200 ${No(ye[0])}`})]})]}),t.jsx(Ga,{dropAnimation:null,children:G?t.jsx("div",{className:"rotate-3 opacity-90",children:t.jsx(pn,{posting:G,onSelect:()=>{},onPriorityChange:()=>{},onStatusChange:()=>{},onDelete:()=>{},variant:"kanban"})}):null})]})}function Co({postings:e,onPostingSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,getLinkedConnections:a,onConnectionClick:d}){const[l,c]=i.useState("dateAdded"),[u,h]=i.useState("desc"),f=m=>{l===m?h(u==="asc"?"desc":"asc"):(c(m),h("asc"))},p=[...e].sort((m,v)=>{let j=0;switch(l){case"title":j=m.title.localeCompare(v.title);break;case"company":j=m.company.localeCompare(v.company);break;case"location":j=(m.location||"").localeCompare(v.location||"");break;case"dateAdded":j=m.dateAdded-v.dateAdded;break;case"priority":j=m.interest-v.interest;break;case"status":j=m.status.localeCompare(v.status);break}return u==="asc"?j:-j}),x=({field:m,label:v,className:j=""})=>t.jsxs("button",{onClick:()=>f(m),className:`flex items-center gap-1 text-left text-[11px] font-semibold uppercase tracking-wide text-wine/50 transition-colors hover:text-wine ${j}`,children:[v,t.jsx("svg",{className:`h-3 w-3 transition-transform ${l===m?"opacity-100":"opacity-0"} ${u==="desc"?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]});return t.jsxs("div",{className:"h-full overflow-auto",children:[t.jsx("div",{className:"sticky top-0 z-10 border-b border-sage/30 bg-champagne-50/95 backdrop-blur-sm",children:t.jsxs("div",{className:"flex items-center px-4 py-2.5",children:[t.jsx("div",{className:"w-12 flex-shrink-0"}),t.jsx("div",{className:"min-w-[200px] flex-1 pr-4",children:t.jsx(x,{field:"title",label:"Position"})}),t.jsx("div",{className:"w-[120px] flex-shrink-0 px-2",children:t.jsx(x,{field:"location",label:"Location"})}),t.jsx("div",{className:"w-[100px] flex-shrink-0 px-2",children:t.jsx(x,{field:"status",label:"Status"})}),t.jsx("div",{className:"w-[140px] flex-shrink-0 px-2",children:t.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-wine/50",children:"Tags"})}),t.jsx("div",{className:"w-[70px] flex-shrink-0 px-2",children:t.jsx(x,{field:"priority",label:"Priority"})}),t.jsx("div",{className:"w-[50px] flex-shrink-0 px-2 text-right",children:t.jsx(x,{field:"dateAdded",label:"Updated",className:"justify-end"})}),t.jsx("div",{className:"w-[36px] flex-shrink-0"})]})}),t.jsxs("div",{className:"divide-y divide-sage/10",children:[p.map(m=>t.jsx(pn,{posting:m,onSelect:n,onPriorityChange:s,onStatusChange:r,onDelete:o,variant:"list",linkedConnections:a==null?void 0:a(m.id),onConnectionClick:()=>d==null?void 0:d(m.id)},m.id)),e.length===0&&t.jsxs("div",{className:"py-16 text-center",children:[t.jsx("div",{className:"text-wine/40 text-sm",children:"No postings found"}),t.jsx("div",{className:"text-wine/30 text-xs mt-1",children:"Try adjusting your filters"})]})]})]})}function So({keyword:e,onClose:n}){if(!e.contexts||e.contexts.length===0)return null;const s=r=>{const o=e.term.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=new RegExp(`(${o})`,"gi");return r.split(a).map((l,c)=>a.test(l)?t.jsx("mark",{className:"bg-yellow-200 px-0.5 rounded",children:l},c):t.jsx("span",{children:l},c))};return t.jsxs("div",{className:"mt-1 mb-2 ml-6 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-medium text-gray-700",children:['"',e.term,'" appears ',e.frequency," time",e.frequency!==1?"s":""]}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"space-y-2",children:e.contexts.map((r,o)=>t.jsxs("div",{className:"text-gray-600 text-xs leading-relaxed",children:[t.jsxs("span",{className:"text-gray-400 mr-1",children:[o+1,"."]}),s(r)]},o))})]})}function Lo({keyword:e,onToggleAddressed:n}){const[s,r]=i.useState(!1),o=t.jsx("span",{className:"flex gap-0.5",title:`${e.importance} importance`,children:[0,1,2].map(a=>t.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full ${e.importance==="high"&&a<3||e.importance==="medium"&&a<2||e.importance==="low"&&a<1?"bg-teal":"bg-sage/30"}`},a))});return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center gap-2 py-1.5 group",children:[t.jsx("input",{type:"checkbox",checked:e.addressed,onChange:a=>n(e.term,a.target.checked),className:"checkbox checkbox-sm"}),t.jsx("button",{onClick:()=>r(!s),className:`flex-1 text-left text-sm ${e.addressed?"text-sage line-through":"text-wine"} hover:text-wine/70 transition-colors`,children:e.term}),o,t.jsxs("span",{className:"text-xs text-sage opacity-0 group-hover:opacity-100 transition-opacity",children:[e.frequency,"x"]})]}),s&&e.contexts&&e.contexts.length>0&&t.jsx(So,{keyword:e,onClose:()=>r(!1)})]})}function Do({keywords:e,onToggleAddressed:n,onRefresh:s,isExtracting:r=!1}){const o=i.useMemo(()=>Ns(e),[e]),a=i.useMemo(()=>ks(e),[e]);return e.length===0&&!r?t.jsxs("div",{className:"p-4 text-center",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),t.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No keywords extracted"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Extract keywords from the job description to track your application coverage."}),t.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Extract Keywords"]})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Keywords Analysis"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[e.length," keyword",e.length!==1?"s":""," extracted"]})]}),t.jsx("button",{onClick:s,disabled:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors disabled:opacity-50",title:"Re-extract keywords",children:t.jsx("svg",{className:`w-4 h-4 ${r?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Coverage"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[a.addressed,"/",a.total," addressed (",a.percentage,"%)"]})]}),t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${a.percentage}%`}})})]}),t.jsx("div",{className:"space-y-3",children:Es.map(d=>{const l=o[d];if(l.length===0)return null;const c=a.byCategory[d];return t.jsx(Eo,{category:d,keywords:l,addressedCount:c.addressed,totalCount:c.total,onToggleAddressed:n},d)})})]})}function Eo({category:e,keywords:n,addressedCount:s,totalCount:r,onToggleAddressed:o}){return t.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h4",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:[Ds[e]," (",r,")"]}),t.jsxs("span",{className:"text-xs text-gray-400",children:[s,"/",r]})]}),t.jsx("div",{className:"space-y-0.5",children:n.map(a=>t.jsx(Lo,{keyword:a,onToggleAddressed:o},a.term))})]})}function Mo({posting:e,isOpen:n,onClose:s,onUpdate:r,onDelete:o,onEdit:a,connections:d=[],linkedConnections:l=[],onLinkConnection:c,onUnlinkConnection:u,onViewConnection:h,onAddConnection:f,onExtractKeywords:p,isExtractingKeywords:x=!1}){var re,J;const[m,v]=i.useState(""),[j,b]=i.useState(!1),[k,y]=i.useState(!1),[C,D]=i.useState("details"),[w,L]=i.useState(!1);i.useEffect(()=>{L(!1)},[e==null?void 0:e.id]),i.useEffect(()=>{e&&v(e.notes)},[e==null?void 0:e.id,e==null?void 0:e.notes]),i.useEffect(()=>{D("details")},[e==null?void 0:e.id]);const M=()=>{e&&m!==e.notes&&r(e.id,{notes:m})},I=()=>{e&&(o(e.id),b(!1),s())},z=(A,V)=>{if(!e||!e.keywords)return;const $=e.keywords.map(U=>U.term===A?{...U,addressed:V}:U);r(e.id,{keywords:$})},O=()=>{e&&p&&p(e.id)};if(!e)return null;const _=A=>new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),B=((re=e.keywords)==null?void 0:re.length)||0,G=((J=e.keywords)==null?void 0:J.filter(A=>A.addressed).length)||0;return t.jsxs(zs,{isOpen:n,onClose:s,width:"max-w-lg",children:[t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"border-b border-sage/20 bg-champagne-50 px-4 py-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(()=>{const A=xs(e.companyLogo,e.company),V=A&&!w,$=U=>{const ye=U.currentTarget;ye.naturalWidth<=16&&ye.naturalHeight<=16&&L(!0)};return V?t.jsx("img",{src:A,alt:e.company,className:"h-12 w-12 rounded-lg object-contain bg-white border border-sage/20 flex-shrink-0",onLoad:$,onError:()=>L(!0)}):t.jsx("div",{className:"h-12 w-12 rounded-lg bg-champagne-200 flex items-center justify-center text-sm font-semibold text-wine flex-shrink-0",children:e.company.split(" ").slice(0,2).map(U=>U[0]).join("").toUpperCase()})})(),t.jsxs("div",{className:"min-w-0",children:[t.jsx("h2",{className:"text-lg font-semibold text-wine",children:e.title}),t.jsx("p",{className:"text-wine/80",children:e.company}),e.location&&t.jsx("p",{className:"text-sm text-wine/60",children:e.location})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[a&&t.jsx("button",{onClick:()=>a(e.id),className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine hover:bg-sage/10",title:"Edit posting",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),t.jsx("button",{onClick:()=>window.open(e.url,"_blank"),className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine hover:bg-sage/10",title:"Open URL (O)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),t.jsx("button",{onClick:s,className:"btn btn-icon btn-ghost text-wine/50 hover:text-wine hover:bg-sage/10",title:"Close (Esc or ⌘S)",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.jsxs("div",{className:"mt-4 flex gap-1 border-b border-sage/20 -mb-px",children:[t.jsx(sn,{active:C==="details",onClick:()=>D("details"),children:"Details"}),t.jsx(sn,{active:C==="keywords",onClick:()=>D("keywords"),badge:B>0?`${G}/${B}`:void 0,children:"Keywords"}),t.jsx(sn,{active:C==="connections",onClick:()=>D("connections"),badge:l.length>0?l.length.toString():void 0,children:"Connections"})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[C==="details"&&t.jsx(Ro,{posting:e,notes:m,setNotes:v,handleNotesBlur:M,onUpdate:r}),C==="keywords"&&t.jsx("div",{className:"p-4",children:t.jsx(Do,{keywords:e.keywords||[],onToggleAddressed:z,onRefresh:O,isExtracting:x})}),C==="connections"&&t.jsx(Ao,{linkedConnections:l,onViewConnection:h,onShowQuickLink:()=>y(!0)})]}),t.jsx("div",{className:"border-t border-sage/20 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between text-xs text-wine/50",children:[t.jsxs("div",{children:[t.jsxs("p",{children:["Added: ",_(e.dateAdded)]}),t.jsxs("p",{children:["Modified: ",_(e.dateModified)]})]}),j?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-flatred",children:"Delete this posting?"}),t.jsx("button",{onClick:I,className:"btn btn-sm btn-primary",children:"Yes"}),t.jsx("button",{onClick:()=>b(!1),className:"btn btn-sm btn-secondary",children:"No"})]}):t.jsx("button",{onClick:()=>b(!0),className:"btn btn-sm btn-danger",children:"Delete posting"})]})})]}),e&&t.jsx(so,{isOpen:k,onClose:()=>y(!1),connections:d,posting:e,linkedConnectionIds:l.map(A=>A.id),onLinkConnection:A=>{c==null||c(A)},onUnlinkConnection:A=>{u==null||u(A)},onCreateConnection:()=>{y(!1),f==null||f()}})]})}function sn({active:e,onClick:n,children:s,badge:r}){return t.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-3 py-2 text-sm font-medium border-b-2 transition-colors ${e?"border-wine text-wine":"border-transparent text-sage hover:text-wine hover:border-sage"}`,children:[s,r&&t.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${e?"bg-champagne-100 text-wine":"bg-champagne-50 text-wine/60"}`,children:r})]})}function Ro({posting:e,notes:n,setNotes:s,handleNotesBlur:r,onUpdate:o}){return t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Status"}),t.jsx("select",{value:e.status,onChange:a=>o(e.id,{status:a.target.value}),className:"w-full rounded-md border border-sage/30 px-3 py-2 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine",children:Ls.map(a=>t.jsx("option",{value:a,children:Re[a]},a))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Interest"}),t.jsx(Ct,{priority:e.interest,onChange:a=>o(e.id,{interest:a})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Tags"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.tags.map(a=>t.jsx(it,{tag:a,onRemove:()=>o(e.id,{tags:e.tags.filter(d=>d!==a)})},a)),t.jsx($s,{tags:e.tags,onTagsChange:a=>o(e.id,{tags:a}),suggestedTags:["remote","hybrid","onsite","startup","enterprise","contract"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Next Action Date"}),t.jsx("input",{type:"date",value:e.nextActionDate||"",onChange:a=>o(e.id,{nextActionDate:a.target.value||void 0}),className:"w-full rounded-md border border-sage/30 px-3 py-2 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"})]}),e.salary&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Salary"}),t.jsx("p",{className:"text-sm text-wine/70",children:e.salary})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Description"}),t.jsx("div",{className:"max-h-48 overflow-y-auto rounded-md border border-sage/20 bg-champagne-50 p-3 text-sm text-wine/70 whitespace-pre-wrap",children:e.description||"No description available"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-wine",children:"Notes"}),t.jsx("textarea",{value:n,onChange:a=>s(a.target.value),onBlur:r,rows:4,placeholder:"Add notes about this application...",className:"w-full resize-none rounded-md border border-sage/30 px-3 py-2 text-sm text-wine focus:border-wine focus:outline-none focus:ring-1 focus:ring-wine"})]})]})}function Ao({linkedConnections:e,onViewConnection:n,onShowQuickLink:s}){return t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium text-wine",children:["Linked Connections (",e.length,")"]}),t.jsx("button",{onClick:s,className:"text-xs text-flatred hover:text-flatred-600",children:"+ Link Connection"})]}),e.length>0?t.jsx("div",{className:"space-y-2",children:e.map(r=>t.jsx(ms,{connection:r,onSelect:o=>n==null?void 0:n(o),compact:!0},r.id))}):t.jsxs("div",{className:"rounded-md bg-champagne-50 p-4 text-center",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-full bg-champagne-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-sage",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),t.jsx("p",{className:"text-sm text-wine/60 mb-2",children:"No connections linked"}),t.jsx("button",{onClick:s,className:"text-sm text-flatred hover:text-flatred-600",children:"Link a connection"})]})]})}function Io(e){return Ot(e.status)?!1:(Date.now()-e.dateModified)/(1e3*60*60*24)>=7}function Oo(e){return(Date.now()-e.dateAdded)/864e5<=7}function To(e){return i.useMemo(()=>{const n={saved:0,in_progress:0,applied:0,interviewing:0,offer:0,accepted:0,rejected:0,withdrawn:0};let s=0,r=0,o=0;return e.forEach(a=>{n[a.status]++,Ot(a.status)||s++,Oo(a)&&r++,Io(a)&&o++}),{total:e.length,active:s,thisWeek:r,stale:o,byStatus:n}},[e])}function Po(e){const n=i.useCallback(s=>{const r=s.target,o=r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r.isContentEditable;for(const a of e){if(o&&!a.allowInInput&&s.key!=="Escape")continue;const d=a.meta?s.metaKey:!s.metaKey,l=a.ctrl?s.ctrlKey:!s.ctrlKey,c=a.shift?s.shiftKey:!s.shiftKey;if((s.key.toLowerCase()===a.key.toLowerCase()||s.key===a.key)&&d&&l&&c){s.preventDefault(),a.handler();return}}},[e]);i.useEffect(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n])}function zo(){const[e,n]=i.useState([]),[s,r]=i.useState([]),[o,a]=i.useState(!0),[d,l]=i.useState("jobs"),[c,u]=i.useState("kanban"),[h,f]=i.useState(""),[p,x]=i.useState(null),[m,v]=i.useState(null),[j,b]=i.useState(!1),[k,y]=i.useState(!1),[C,D]=i.useState(null),[w,L]=i.useState(["rejected"]),[M,I]=i.useState(null),[z,O]=i.useState(!1),[_,B]=i.useState(!1),[G,re]=i.useState(null),[J,A]=i.useState([]),[V,$]=i.useState(""),[U,ye]=i.useState(null),[Z,ge]=i.useState(null),[S,P]=i.useState(!1),[F,je]=i.useState(!1),[ae,Ne]=i.useState(!1),[K,We]=i.useState(!1),[ce,Ze]=i.useState(!1),[De,Ie]=i.useState(!1),[de,ue]=i.useState(null),et=i.useRef(null),[tt,pe]=i.useState(!1),He=To(e);i.useEffect(()=>{(async()=>{try{await Gs();const[E,T,Me,Kt]=await Promise.all([Xe(),le(),_s(),Ks()]);n(E),r(T),u(Me),L(Kt)}catch(E){console.error("Failed to initialize app:",E)}finally{a(!1)}})();const N=E=>{E.postings&&n(E.postings.newValue||[]),E.connections&&r(E.connections.newValue||[])};return chrome.storage.onChanged.addListener(N),()=>chrome.storage.onChanged.removeListener(N)},[]),i.useEffect(()=>{const N=new URLSearchParams(window.location.search).get("highlight");N&&(v(N),b(!0))},[]);const be=i.useCallback(async g=>{try{await qe(g),n(g)}catch(N){console.error("Failed to save postings:",N)}},[]),bt=i.useCallback(async g=>{u(g);try{await Vs(g)}catch(N){console.error("Failed to save view preference:",N)}},[]),vt=i.useCallback(async g=>{L(g);try{await Ys(g)}catch(N){console.error("Failed to save collapsed columns:",N)}},[]),Ut=i.useMemo(()=>{const g=new Set;return e.forEach(N=>N.tags.forEach(E=>g.add(E))),Array.from(g).sort()},[e]),Wt=i.useMemo(()=>{const g=new Set;return e.forEach(N=>g.add(N.company)),Array.from(g).sort()},[e]),Oe=g=>Ot(g.status)?!1:(Date.now()-g.dateModified)/(1e3*60*60*24)>=7,Te=g=>{if(!g.nextActionDate)return!1;const N=new Date(g.nextActionDate),E=new Date,T=(N.getTime()-E.getTime())/(1e3*60*60*24);return T>=0&&T<=7},oe=i.useMemo(()=>e.filter(g=>{const N=h.toLowerCase(),E=!h||g.title.toLowerCase().includes(N)||g.company.toLowerCase().includes(N)||g.location.toLowerCase().includes(N)||g.notes.toLowerCase().includes(N)||g.tags.some(at=>at.toLowerCase().includes(N)),T=!p||g.interest===p,Me=!de||g.status===de,Kt=J.length===0||J.some(at=>g.tags.includes(at)),fs=!V||g.company.toLowerCase().includes(V.toLowerCase()),bn=new Date(g.dateAdded),gs=!U||bn>=new Date(U),ps=!Z||bn<=new Date(Z+"T23:59:59"),bs=!S||!!g.nextActionDate,vs=!F||Te(g),ws=!ae||Oe(g),vn=s.filter(at=>at.linkedPostingIds.includes(g.id)),ys=!K||vn.length>0,js=!ce||vn.length===0;return E&&T&&Me&&Kt&&fs&&gs&&ps&&bs&&vs&&ws&&ys&&js}),[e,s,h,p,de,J,V,U,Z,S,F,ae,K,ce]),wt=i.useMemo(()=>{let g=0;return h&&g++,p!==null&&g++,de!==null&&g++,J.length>0&&g++,V&&g++,(U||Z)&&g++,S&&g++,F&&g++,ae&&g++,K&&g++,ce&&g++,g},[h,p,de,J,V,U,Z,S,F,ae,K,ce]),ke=i.useCallback(()=>{f(""),x(null),ue(null),A([]),$(""),ye(null),ge(null),P(!1),je(!1),Ne(!1),We(!1),Ze(!1)},[]),nt=i.useCallback(()=>{var g;(g=et.current)==null||g.focus()},[]),Ht=i.useCallback(()=>{if(!m)return;const g=e.find(E=>E.id===m);if(!g)return;const N=g.interest%5+1;_e(m,N)},[m,e]),_t=i.useCallback(()=>{if(!m)return;const g=e.find(N=>N.id===m);g&&window.open(g.url,"_blank")},[m,e]),st=i.useCallback(()=>{m&&confirm("Are you sure you want to delete this posting?")&&Ve(m)},[m]),Be=i.useCallback(g=>{if(oe.length===0)return;const N=m?oe.findIndex(T=>T.id===m):-1;let E;g==="next"?E=N<oe.length-1?N+1:0:E=N>0?N-1:oe.length-1,v(oe[E].id)},[oe,m]),yt=g=>{v(g),b(!0)},_e=(g,N)=>{const E=e.map(T=>T.id===g?{...T,interest:N,dateModified:Date.now()}:T);be(E)},jt=(g,N)=>{const E=e.map(T=>T.id===g?{...T,status:N,dateModified:Date.now(),dateApplied:N==="applied"&&!T.dateApplied?Date.now():T.dateApplied}:T);be(E)},Nt=(g,N)=>{const E=e.map(T=>T.id===g?{...T,...N,dateModified:Date.now()}:T);be(E)},Ve=g=>{const N=e.filter(E=>E.id!==g);be(N),m===g&&(v(null),b(!1))},X=g=>{const N=e.find(E=>E.id===g);N&&(D(N),y(!0))},ee=(g,N)=>{Nt(g,N),y(!1),D(null)},te=i.useCallback(g=>{const N=e.find(E=>E.id===g);!N||!N.description||(pe(!0),setTimeout(()=>{try{const E=Cs(N.description),T=e.map(Me=>Me.id===g?{...Me,keywords:E,keywordsExtractedAt:Date.now(),dateModified:Date.now()}:Me);be(T)}catch(E){console.error("Failed to extract keywords:",E)}finally{pe(!1)}},10))},[e,be]),he=i.useCallback(g=>s.filter(N=>N.linkedPostingIds.includes(g)),[s]),ie=i.useCallback(async g=>{if(m)try{await Us(g,m);const N=await le();r(N)}catch(N){console.error("Failed to link connection:",N)}},[m]),ne=i.useCallback(async g=>{if(m)try{await Nn(g,m);const N=await le();r(N)}catch(N){console.error("Failed to unlink connection:",N)}},[m]),me=i.useCallback(g=>{},[]),Ee=i.useCallback(()=>{re(null),B(!0)},[]),H=i.useCallback(g=>{const N=s.find(E=>E.id===g);N&&(re(N),B(!0))},[s]),Ce=i.useCallback(async g=>{try{await jn(g);const N=await le();r(N),B(!1),re(null)}catch(N){console.error("Failed to save connection:",N)}},[]),xe=i.useCallback(async g=>{if(confirm("Are you sure you want to delete this connection?"))try{await Bs(g);const N=await le();r(N),O(!1),I(null)}catch(N){console.error("Failed to delete connection:",N)}},[]),ve=i.useCallback(g=>{I(g),O(!0)},[]),Pe=i.useCallback(async(g,N)=>{const E=s.find(T=>T.id===g);if(E)try{const T={...E,...N,dateModified:Date.now()};await jn(T);const Me=await le();r(Me)}catch(T){console.error("Failed to update connection:",T)}},[s]),ze=i.useCallback(g=>{v(g),b(!0)},[]),Se=i.useCallback(g=>{const N=s.find(E=>E.id===g);return N?e.filter(E=>N.linkedPostingIds.includes(E.id)):[]},[s,e]),Fe=i.useCallback(()=>{alert("Use the extension popup on a job posting page to add new jobs.")},[]),rt=i.useCallback(g=>{g==="jobs"||g==="connections"?l(g):g==="settings"||g==="help"&&Ie(!0)},[]);Po([{key:"/",handler:nt},{key:"k",meta:!0,handler:nt},{key:"Escape",allowInInput:!0,handler:()=>{j?b(!1):h&&f("")}},{key:"?",handler:()=>Ie(!0)},{key:"n",handler:Fe},{key:"1",handler:()=>ue("saved")},{key:"2",handler:()=>ue("in_progress")},{key:"3",handler:()=>ue("applied")},{key:"4",handler:()=>ue("interviewing")},{key:"5",handler:()=>ue("offer")},{key:"6",handler:()=>ue("accepted")},{key:"7",handler:()=>ue("rejected")},{key:"0",handler:()=>ue(null)},{key:"j",handler:()=>Be("next")},{key:"ArrowDown",handler:()=>Be("next")},{key:"k",handler:()=>Be("prev")},{key:"ArrowUp",handler:()=>Be("prev")},{key:"Enter",handler:()=>m&&b(!0)},{key:"s",handler:Ht},{key:"e",handler:()=>m&&b(!0)},{key:"o",handler:_t},{key:"d",handler:st},{key:"s",meta:!0,allowInInput:!0,handler:()=>b(!1)}]);const Vt=e.find(g=>g.id===m)||null;if(o)return t.jsx("div",{className:"flex min-h-screen items-center justify-center bg-champagne-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-flatred border-t-transparent"}),t.jsx("p",{className:"mt-2 text-wine/70",children:"Loading..."})]})});const Le=s.find(g=>g.id===M)||null;return t.jsxs("div",{className:"flex h-screen bg-champagne-50",children:[t.jsx(Ps,{currentPage:d,onNavigate:rt,jobCount:e.length,connectionCount:s.length,stats:He}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:d==="jobs"?t.jsxs(t.Fragment,{children:[t.jsx(vr,{searchQuery:h,onSearchChange:f,priorityFilter:p,onPriorityFilterChange:x,currentView:c,onViewChange:bt,onAddClick:Fe,availableTags:Ut,availableCompanies:Wt,tagFilters:J,onTagFiltersChange:A,companyFilter:V,onCompanyFilterChange:$,dateFrom:U,dateTo:Z,onDateFromChange:ye,onDateToChange:ge,hasDeadline:S,deadlineSoon:F,needsAction:ae,hasConnections:K,noConnections:ce,onHasDeadlineChange:P,onDeadlineSoonChange:je,onNeedsActionChange:Ne,onHasConnectionsChange:We,onNoConnectionsChange:Ze,onClearAllFilters:ke,activeFilterCount:wt,searchInputRef:et,statusFilter:de,onStatusFilterChange:ue}),t.jsx("main",{className:"flex-1 overflow-hidden",children:c==="kanban"?t.jsx(ko,{postings:oe,onPostingSelect:yt,onPriorityChange:_e,onStatusChange:jt,onDelete:Ve,onEdit:g=>{v(g),b(!0)},collapsedColumns:w,onCollapseChange:vt,getLinkedConnections:he,onConnectionClick:ze,selectedPostingId:m}):t.jsx(Co,{postings:oe,onPostingSelect:yt,onPriorityChange:_e,onStatusChange:jt,onDelete:Ve,getLinkedConnections:he,onConnectionClick:ze})}),t.jsx(Mo,{posting:Vt,isOpen:j,onClose:()=>b(!1),onUpdate:Nt,onDelete:Ve,onEdit:X,connections:s,linkedConnections:Vt?he(Vt.id):[],onLinkConnection:ie,onUnlinkConnection:ne,onViewConnection:me,onAddConnection:Ee,onExtractKeywords:te,isExtractingKeywords:tt})]}):t.jsx(eo,{connections:s,onSelectConnection:ve,onAddConnection:Ee,onEditConnection:H})}),t.jsx(to,{isOpen:_,onClose:()=>{B(!1),re(null)},onSave:Ce,connection:G}),Le&&t.jsx(no,{connection:Le,isOpen:z,onClose:()=>{O(!1),I(null)},onEdit:()=>H(Le.id),onDelete:()=>xe(Le.id),linkedPostings:Se(Le.id),onViewPosting:g=>{v(g),b(!0),l("jobs")},onLogContact:async g=>{const N={...Le,contactHistory:[...Le.contactHistory,g],lastContactDate:g.date};await Pe(Le.id,N)},onUnlinkPosting:async g=>{await Nn(Le.id,g);const N=await le();r(N)},onUpdateFollowUp:async g=>{await Pe(Le.id,{nextFollowUp:g})}}),t.jsx(co,{isOpen:k,onClose:()=>{y(!1),D(null)},onSave:ee,posting:C}),t.jsx(pr,{isOpen:De,onClose:()=>Ie(!1)})]})}Ss.createRoot(document.getElementById("root")).render(t.jsx(W.StrictMode,{children:t.jsx(zo,{})}));
