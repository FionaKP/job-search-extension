function r(t,o){var a;try{const e=t.querySelector(o);return((a=e==null?void 0:e.textContent)==null?void 0:a.trim())||null}catch{return null}}function p(t,o,a){try{const e=t.querySelector(o);return(e==null?void 0:e.getAttribute(a))||null}catch{return null}}function v(t,o){try{return Array.from(t.querySelectorAll(o)).map(a=>{var e;return(e=a.textContent)==null?void 0:e.trim()}).filter(a=>!!a)}catch{return[]}}function d(t,o){for(const a of o){const e=r(t,a);if(e)return e}return null}function j(t,o,a){for(const e of o){const i=p(t,e,a);if(i)return i}return null}function s(t){return t?t.replace(/\s+/g," ").replace(/[\n\r\t]/g," ").trim():null}function f(t,o){return t?t.length<=o?t:t.slice(0,o-3)+"...":null}function y(t){if(!t)return null;try{return t.startsWith("//")?"https:"+t:t.startsWith("/")?new URL(t,window.location.origin).href:new URL(t).href}catch{return t}}function w(t){try{const o=new URL(t),e=o.hostname.split(".");if(e.includes("lever")||e.includes("greenhouse")){const l=o.pathname.split("/").filter(Boolean);if(l.length>0)return l[0].replace(/-/g," ").replace(/\b\w/g,c=>c.toUpperCase())}const i=e[0]==="www"?e[1]:e[0];return i&&i!=="jobs"&&i!=="careers"?i.charAt(0).toUpperCase()+i.slice(1):null}catch{return null}}function J(t){if(!t)return null;let o=t;const a=[/\s*[-|]\s*(?:Apply|Apply Now|Job Details).*$/i,/\s*[-|]\s*LinkedIn.*$/i,/\s*[-|]\s*Indeed.*$/i,/\s*\(.*ID:?\s*\d+.*\)$/i];for(const e of a)o=o.replace(e,"");return s(o)}const C=[/\$[\d,]+\s*[-–—]\s*\$[\d,]+(?:\s*(?:per\s+)?(?:year|yr|annually|hour|hr))?/gi,/\$[\d,]+\s*[kK]\s*[-–—]\s*\$?[\d,]+\s*[kK]?/g,/\$[\d,]+(?:\.\d{2})?\s*(?:\/\s*(?:hr|hour|yr|year|mo|month|week|wk|annual|annually))/gi,/[\d,]+\s*[-–—]\s*[\d,]+\s*(?:USD|CAD|EUR|GBP|AUD)/gi,/\$[\d,]+(?:\.\d{2})?/g];function _(t,o){for(const a of o){const e=r(t,a);if(e){const i=L(e);if(i)return i}}return F(t)}function L(t){if(!t)return null;for(const o of C){o.lastIndex=0;const a=t.match(o);if(a){const e=a[0].trim();if(/\d/.test(e))return e}}return null}function F(t){const o=['[class*="salary"]','[class*="Salary"]','[class*="compensation"]','[class*="Compensation"]','[class*="pay-"]','[class*="Pay"]','[data-testid*="salary"]','[data-automation-id*="salary"]'];for(const a of o)try{const e=r(t,a);if(e){const i=L(e);if(i)return i}}catch{}return null}function b(t){let o=0,a=0;return a+=3,t.title&&t.title.length>3?o+=3:t.title&&t.title.length>0&&(o+=1),a+=2,t.company&&t.company.length>1?o+=2:t.company&&(o+=1),a+=2,t.description&&t.description.length>100?o+=2:t.description&&t.description.length>20&&(o+=1),a+=1,t.location&&t.location.length>2&&(o+=1),a+=1,t.salary&&(o+=1),Math.round(o/a*100)/100}const $={name:"linkedin",domains:["linkedin.com"],pathPatterns:[/\/jobs\/view\//,/\/jobs\/collections\//,/\/jobs\/search\//],detect(t){return t.includes("linkedin.com/jobs")},extract(t,o){const a=d(t,[".job-details-jobs-unified-top-card__job-title h1",".job-details-jobs-unified-top-card__job-title",".jobs-unified-top-card__job-title","[data-test-job-title]",".topcard__title","h1.t-24","h1"]),e=d(t,[".job-details-jobs-unified-top-card__company-name a",".job-details-jobs-unified-top-card__company-name",".jobs-unified-top-card__company-name a",".jobs-unified-top-card__company-name","[data-test-company-name]",".topcard__org-name-link",".company-name"]),i=j(t,[".job-details-jobs-unified-top-card__company-logo img",".jobs-unified-top-card__company-logo img",".company-logo img",".topcard__org-photo img"],"src")||j(t,[".job-details-jobs-unified-top-card__company-logo img",".jobs-unified-top-card__company-logo img"],"data-delayed-url"),l=d(t,[".job-details-jobs-unified-top-card__primary-description-container .tvm__text",".jobs-unified-top-card__bullet",".job-details-jobs-unified-top-card__primary-description-without-actions .tvm__text","[data-test-job-location]",".topcard__flavor--bullet"]),c=_(t,[".job-details-jobs-unified-top-card__job-insight",".jobs-unified-top-card__job-insight",".salary-main-rail__data-body","[data-test-compensation]",".compensation__salary"]),g=r(t,".jobs-description__content")||r(t,"#job-details")||r(t,".description__text")||r(t,".jobs-box__html-content"),n={title:s(a),company:s(e),companyLogo:y(i),location:s(l),salary:s(c),description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"linkedin",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},U={name:"indeed",domains:["indeed.com","indeed.co.uk","indeed.ca"],pathPatterns:[/\/viewjob/,/\/jobs/],detect(t){return t.includes("indeed.com")||t.includes("indeed.co.uk")||t.includes("indeed.ca")},extract(t,o){const a=d(t,['h1[data-testid="jobsearch-JobInfoHeader-title"]',".jobsearch-JobInfoHeader-title","h1.icl-u-xs-mb--xs",'[data-testid="jobTitle"]',".jobTitle","h1"]),e=d(t,['[data-testid="inlineHeader-companyName"] a','[data-testid="inlineHeader-companyName"]','[data-company-name="true"]',".jobsearch-InlineCompanyRating-companyHeader a",".jobsearch-InlineCompanyRating-companyHeader",".icl-u-lg-mr--sm a"]),i=j(t,[".jobsearch-CompanyAvatar-image",'[data-testid="companyAvatar"] img',".company-logo img"],"src"),l=d(t,['[data-testid="inlineHeader-companyLocation"]','[data-testid="job-location"]',".jobsearch-JobInfoHeader-subtitle > div:last-child",".icl-u-xs-mt--xs .icl-IconFunctional--location + span"]),c=_(t,['[data-testid="attribute_snippet_testid"]',".jobsearch-JobMetadataHeader-item",".salary-snippet-container",".attribute_snippet","#salaryInfoAndJobType"]),g=r(t,"#jobDescriptionText")||r(t,".jobsearch-jobDescriptionText")||r(t,'[data-testid="jobDescriptionText"]'),n={title:s(a),company:s(e),companyLogo:y(i),location:s(l),salary:s(c),description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"indeed",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},O={name:"greenhouse",domains:["greenhouse.io","boards.greenhouse.io"],detect(t){return t.includes("greenhouse.io")},extract(t,o){const a=d(t,[".app-title","h1.job-title",".posting-headline h1","h1.heading","h1"]),e=r(t,".company-name")||p(t,'meta[property="og:site_name"]',"content")||p(t,".company-logo img","alt")||w(o),i=p(t,".company-logo img","src")||p(t,".logo img","src")||p(t,'meta[property="og:image"]',"content"),l=d(t,[".location",".body--metadata .location",'[data-test="job-location"]',".posting-categories .location"]),c=d(t,[".salary",".compensation",'[class*="salary"]']),g=r(t,"#content")||r(t,".content")||r(t,".job-description")||r(t,".section-wrapper"),n={title:s(a),company:s(e),companyLogo:y(i),location:s(l),salary:s(c),description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"greenhouse",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},H={name:"lever",domains:["lever.co","jobs.lever.co"],detect(t){return t.includes("lever.co")},extract(t,o){const a=d(t,[".posting-headline h2",".posting-headline .posting-title","h2","h1"]),e=p(t,".main-header-logo img","alt")||r(t,".posting-headline .company-name")||w(o),i=p(t,".main-header-logo img","src"),l=d(t,[".posting-categories .location",".posting-headline .location",".sort-by-time.posting-category.location",'[data-qa="posting-location"]']),c=d(t,[".posting-categories .commitment",".posting-category.commitment"]),g=r(t,".posting-description")||r(t,'[data-qa="job-description"]')||r(t,".section-wrapper.page-full-width")||r(t,".content");let n=s(l);c&&n?n=`${n} (${s(c)})`:c&&(n=s(c));const m={title:s(a),company:s(e),companyLogo:y(i),location:n,salary:null,description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"lever",confidence:0};return m.confidence=b({title:m.title,company:m.company,description:m.description,location:m.location,salary:m.salary}),m}},I={name:"workday",domains:["myworkdayjobs.com","workday.com"],detect(t){return t.includes("myworkdayjobs.com")||t.includes("workday.com")},extract(t,o){const a=d(t,['[data-automation-id="jobPostingHeader"]','[data-automation-id="jobPostingTitle"]','h2[data-automation-id="jobPostingTitle"]',".css-1q2dra3","h1","h2"]),e=d(t,['[data-automation-id="jobPostingCompanyName"]','[data-automation-id="companyName"]'])||w(o),i=p(t,'[data-automation-id="companyLogo"] img',"src")||p(t,".company-logo img","src")||p(t,'meta[property="og:image"]',"content"),l=d(t,['[data-automation-id="locations"]','[data-automation-id="jobPostingLocation"]','[data-automation-id="location"]',".css-129m7dg"]),c=_(t,['[data-automation-id="salary"]','[data-automation-id="compensation"]',".salary-range"]),g=r(t,'[data-automation-id="jobPostingDescription"]')||r(t,'[data-automation-id="jobDescription"]')||r(t,".job-description"),n={title:s(a),company:s(e),companyLogo:y(i),location:s(l),salary:s(c),description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"workday",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},B={name:"glassdoor",domains:["glassdoor.com","glassdoor.co.uk","glassdoor.ca"],pathPatterns:[/\/job-listing\//,/\/Job\//],detect(t){return(t.includes("glassdoor.com")||t.includes("glassdoor.co.uk")||t.includes("glassdoor.ca"))&&(t.includes("/job-listing/")||t.includes("/Job/"))},extract(t,o){const a=d(t,['[data-test="job-title"]',".job-title",".css-1vg6q84","h1"]),e=d(t,['[data-test="employer-name"]',".css-87uc0g",".employer-name",".company-name"]),i=p(t,'[data-test="employer-logo"] img',"src")||p(t,".employer-logo img","src")||p(t,'meta[property="og:image"]',"content"),l=d(t,['[data-test="job-location"]',".css-56kyx5",".location"]),c=_(t,['[data-test="detailSalary"]',".css-1bluz6i",".salary-estimate",".css-1xe2xww"]),g=r(t,'[data-test="job-description"]')||r(t,".jobDescriptionContent")||r(t,".desc"),n={title:s(a),company:s(e),companyLogo:y(i),location:s(l),salary:s(c),description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"glassdoor",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},N={name:"wellfound",domains:["wellfound.com","angel.co"],pathPatterns:[/\/jobs\//,/\/company\/.+\/jobs/],detect(t){return(t.includes("wellfound.com")||t.includes("angel.co"))&&(t.includes("/jobs")||t.includes("/role/"))},extract(t,o){const a=d(t,['[data-test="JobTitle"]',".styles_title__Ovpy8","h1.job-title",".styles_jobHeader__aXm_G h1","h1"]),e=d(t,['[data-test="StartupLink"]',".styles_company__jNhMv a",".styles_component__dKIYE a",".company-name",'[class*="StartupHeader"] a']),i=p(t,'[data-test="StartupLogo"] img',"src")||p(t,".styles_logo__JlBpT img","src")||p(t,'[class*="StartupHeader"] img',"src"),l=d(t,['[data-test="Location"]',".styles_location__2VOQX",".location",'[class*="LocationTag"]']),c=_(t,['[data-test="Salary"]',".styles_compensation__lUBBT",".compensation",'[class*="CompensationTag"]']),g=r(t,'[data-test="JobDescription"]')||r(t,".styles_description__nBQw2")||r(t,".job-description")||r(t,'[class*="JobDescription"]'),n={title:s(a),company:s(e),companyLogo:y(i),location:s(l),salary:s(c),description:f(s(g),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"wellfound",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},R=['[class*="company-logo"] img','[class*="companyLogo"] img','[class*="company_logo"] img','[class*="employer-logo"] img','[class*="employerLogo"] img',".logo img",'header img[alt*="logo" i]','img[alt*="company" i][alt*="logo" i]'];function q(t,o){const a=R;let e=j(t,a,"src");return e||(e=j(t,a,"data-src")),e||(e=p(t,'meta[property="og:image"]',"content")),y(e)}function M(t){const o=['link[rel="icon"]','link[rel="shortcut icon"]','link[rel="apple-touch-icon"]'];for(const a of o){const e=p(t,a,"href");if(e)return y(e)}try{return new URL("/favicon.ico",window.location.origin).href}catch{return null}}const D={name:"generic",domains:["*"],detect(){return!0},extract(t,o){const a=P(t),e=E(t),i=z(t),l=G(t),c=V(t),g=a.title??i.title??l.title??e.title??c.title??null,n=a.company??i.company??e.company??c.company??w(o),m=a.location??i.location??e.location??null,u=a.description??i.description??e.description??null,T=a.salary??i.salary??K(t),k=q(t)||M(t),h={title:J(g),company:s(n),companyLogo:y(k),location:s(m),salary:s(T),description:f(s(u),5e3),url:y(o)||o,scrapedAt:Date.now(),source:"generic",confidence:0},A=a.title?.85:.7;return h.confidence=b({title:h.title,company:h.company,description:h.description,location:h.location,salary:h.salary})*A,h}};function P(t){var a,e;const o={};try{const i=t.querySelectorAll('script[type="application/ld+json"]');for(const l of i)try{const c=JSON.parse(l.textContent||""),g=Array.isArray(c)?c:[c];for(const n of g){if(n["@type"]==="JobPosting"||(e=(a=n["@type"])==null?void 0:a.includes)!=null&&e.call(a,"JobPosting")){if(o.title=n.title||n.name,o.description=n.description,n.hiringOrganization&&(o.company=typeof n.hiringOrganization=="string"?n.hiringOrganization:n.hiringOrganization.name),n.jobLocation){const m=n.jobLocation;if(typeof m=="string")o.location=m;else if(m.address){const u=m.address;o.location=[u.addressLocality,u.addressRegion,u.addressCountry].filter(Boolean).join(", ")}}if(n.baseSalary){const m=n.baseSalary;if(typeof m=="string")o.salary=m;else if(m.value){const u=m.value;typeof u=="object"&&u.minValue&&u.maxValue?o.salary=`$${u.minValue.toLocaleString()} - $${u.maxValue.toLocaleString()}`:o.salary=`$${u.toLocaleString()}`}}break}if(n["@graph"]){for(const m of n["@graph"])if(m["@type"]==="JobPosting")return P({querySelectorAll:()=>[{textContent:JSON.stringify(m)}]})}}}catch{}}catch{}return o}function E(t){return{title:p(t,'meta[property="og:title"]',"content")||p(t,'meta[name="twitter:title"]',"content")||p(t,'meta[name="title"]',"content"),company:p(t,'meta[property="og:site_name"]',"content")||p(t,'meta[name="author"]',"content"),description:p(t,'meta[property="og:description"]',"content")||p(t,'meta[name="description"]',"content")||p(t,'meta[name="twitter:description"]',"content"),location:null}}function z(t){const o=d(t,['[class*="job-title"]','[class*="jobTitle"]','[class*="job_title"]','[class*="position-title"]','[class*="positionTitle"]','[class*="posting-title"]','[class*="vacancy-title"]','[class*="role-title"]','[data-testid*="title"]','[data-automation-id*="title"]','[data-qa*="title"]',"#job-title","#jobTitle","#position-title",'[aria-label*="job title" i]',"main h1","article h1",".content h1","h1"]),a=d(t,['[class*="company-name"]','[class*="companyName"]','[class*="company_name"]','[class*="employer-name"]','[class*="employerName"]','[class*="organization-name"]','[class*="hiring-company"]','[data-testid*="company"]','[data-testid*="employer"]','[data-automation-id*="company"]',"#company-name","#companyName",'[aria-label*="company" i]']),e=d(t,['[class*="job-location"]','[class*="jobLocation"]','[class*="job_location"]','[class*="work-location"]','[class*="position-location"]','[class*="location"]','[data-testid*="location"]','[data-automation-id*="location"]',"#job-location","#location","address",'[aria-label*="location" i]']),i=d(t,['[class*="job-description"]','[class*="jobDescription"]','[class*="job_description"]','[class*="position-description"]','[class*="role-description"]','[class*="posting-description"]','[data-testid*="description"]','[data-automation-id*="description"]',"#job-description","#jobDescription",'[aria-label*="description" i]',"article","main .content","main"]),l=d(t,['[class*="salary"]','[class*="Salary"]','[class*="compensation"]','[class*="Compensation"]','[class*="pay-range"]','[class*="payRange"]','[data-testid*="salary"]','[data-testid*="compensation"]',"#salary","#compensation"]);return{title:o,company:a,location:e,description:i,salary:l}}function G(t){const o=v(t,"h1, h2, h3");for(const a of o){const e=a==null?void 0:a.trim();if(!e)continue;const i=["engineer","developer","manager","analyst","designer","director","coordinator","specialist","consultant","lead","senior","junior","associate","intern","head of","vp","vice president","architect","administrator"],l=e.toLowerCase();if(i.some(c=>l.includes(c)))return{title:e}}return{}}function V(t){const o=t.title;if(!o)return{};const a=o.match(/^(.+?)\s+at\s+(.+?)(?:\s*[-|]|$)/i);if(a)return{title:a[1].trim(),company:a[2].trim()};const e=o.match(/^([^:]+):\s*(.+?)(?:\s*[-|]|$)/);if(e&&e[2].length>5)return{title:e[2].trim(),company:e[1].trim()};const i=o.split(/\s*[-|–—]\s*/);if(i.length>=2){const l=i[0].trim(),c=i[1].trim();if(l.length>3&&l.length<100)return{title:l,company:c.length>1&&c.length<50?c:null}}return{}}function K(t){var o;try{const e=(((o=t.body)==null?void 0:o.innerText)||"").substring(0,1e4);return L(e)}catch{return null}}const S=[$,U,O,H,I,B,N,D];function x(t,o){for(const a of S)if(a.detect(t,o))return a;return D}function W(t,o){return x(o,t).extract(t,o)}function Q(){return S.map(t=>t.name)}if(typeof window.__jobTrackerScraperLoaded>"u"){let t=function(){return W(document,window.location.href)};window.__jobTrackerScraperLoaded=!0,chrome.runtime.onMessage.addListener((o,a,e)=>{if(o.action==="scrapeJob")try{const i=t();e(i)}catch(i){console.error("JobFlow: Scraper error",i),e({url:window.location.href,title:null,company:null,companyLogo:null,location:null,salary:null,description:null,scrapedAt:Date.now(),source:"error",confidence:0})}return!0}),typeof window<"u"&&(window.__JOBFLOW_DEBUG__={testScraper:()=>{const o=x(window.location.href,document),a=o.extract(document,window.location.href);return console.log("Parser:",o.name),console.log("Data:",a),console.log("Confidence:",Math.round(a.confidence*100)+"%"),a},listParsers:()=>{const o=Q();return console.log("Available parsers:",o),o},getParserForPage:()=>{const o=x(window.location.href,document);return console.log("Parser for this page:",o.name),o.name}},console.log("JobFlow Debug: Use window.__JOBFLOW_DEBUG__.testScraper() to test the scraper")),console.log("JobFlow: Content script loaded on",window.location.hostname)}
