function r(t,o){var e;try{const a=t.querySelector(o);return((e=a==null?void 0:a.textContent)==null?void 0:e.trim())||null}catch{return null}}function g(t,o,e){try{const a=t.querySelector(o);return(a==null?void 0:a.getAttribute(e))||null}catch{return null}}function C(t,o){try{return Array.from(t.querySelectorAll(o)).map(e=>{var a;return(a=e.textContent)==null?void 0:a.trim()}).filter(e=>!!e)}catch{return[]}}function m(t,o){for(const e of o){const a=r(t,e);if(a)return a}return null}function L(t,o,e){for(const a of o){const i=g(t,a,e);if(i)return i}return null}function c(t){return t?t.replace(/\s+/g," ").replace(/[\n\r\t]/g," ").trim():null}function f(t,o){return t?t.length<=o?t:t.slice(0,o-3)+"...":null}function d(t){if(!t)return null;try{return t.startsWith("//")?"https:"+t:t.startsWith("/")?new URL(t,window.location.origin).href:new URL(t).href}catch{return t}}function w(t){try{const o=new URL(t),a=o.hostname.split(".");if(a.includes("lever")||a.includes("greenhouse")){const l=o.pathname.split("/").filter(Boolean);if(l.length>0)return l[0].replace(/-/g," ").replace(/\b\w/g,s=>s.toUpperCase())}const i=a[0]==="www"?a[1]:a[0];return i&&i!=="jobs"&&i!=="careers"?i.charAt(0).toUpperCase()+i.slice(1):null}catch{return null}}function $(t){if(!t)return null;let o=t;const e=[/\s*[-|]\s*(?:Apply|Apply Now|Job Details).*$/i,/\s*[-|]\s*LinkedIn.*$/i,/\s*[-|]\s*Indeed.*$/i,/\s*\(.*ID:?\s*\d+.*\)$/i];for(const a of e)o=o.replace(a,"");return c(o)}const J=[/\$[\d,]+\s*[-–—]\s*\$[\d,]+(?:\s*(?:per\s+)?(?:year|yr|annually|hour|hr))?/gi,/\$[\d,]+\s*[kK]\s*[-–—]\s*\$?[\d,]+\s*[kK]?/g,/\$[\d,]+(?:\.\d{2})?\s*(?:\/\s*(?:hr|hour|yr|year|mo|month|week|wk|annual|annually))/gi,/[\d,]+\s*[-–—]\s*[\d,]+\s*(?:USD|CAD|EUR|GBP|AUD)/gi,/\$[\d,]+(?:\.\d{2})?/g];function _(t,o){for(const e of o){const a=r(t,e);if(a){const i=k(a);if(i)return i}}return z(t)}function k(t){if(!t)return null;for(const o of J){o.lastIndex=0;const e=t.match(o);if(e){const a=e[0].trim();if(/\d/.test(a))return a}}return null}function z(t){const o=['[class*="salary"]','[class*="Salary"]','[class*="compensation"]','[class*="Compensation"]','[class*="pay-"]','[class*="Pay"]','[data-testid*="salary"]','[data-automation-id*="salary"]'];for(const e of o)try{const a=r(t,e);if(a){const i=k(a);if(i)return i}}catch{}return null}function b(t){let o=0,e=0;return e+=3,t.title&&t.title.length>3?o+=3:t.title&&t.title.length>0&&(o+=1),e+=2,t.company&&t.company.length>1?o+=2:t.company&&(o+=1),e+=2,t.description&&t.description.length>100?o+=2:t.description&&t.description.length>20&&(o+=1),e+=1,t.location&&t.location.length>2&&(o+=1),e+=1,t.salary&&(o+=1),Math.round(o/e*100)/100}const v=['[class*="company-logo"] img','[class*="companyLogo"] img','[class*="company_logo"] img','[class*="employer-logo"] img','[class*="employerLogo"] img',".logo img",'header img[alt*="logo" i]','img[alt*="company" i][alt*="logo" i]'],x={google:"google.com",alphabet:"abc.xyz",meta:"meta.com",facebook:"facebook.com",amazon:"amazon.com",apple:"apple.com",microsoft:"microsoft.com",netflix:"netflix.com",airbnb:"airbnb.com",uber:"uber.com",lyft:"lyft.com",spotify:"spotify.com",slack:"slack.com",salesforce:"salesforce.com",stripe:"stripe.com",shopify:"shopify.com",twilio:"twilio.com",zoom:"zoom.us",dropbox:"dropbox.com",linkedin:"linkedin.com",twitter:"twitter.com",x:"x.com",snap:"snap.com",snapchat:"snapchat.com",pinterest:"pinterest.com",reddit:"reddit.com",discord:"discord.com",github:"github.com",gitlab:"gitlab.com",atlassian:"atlassian.com",jira:"atlassian.com",confluence:"atlassian.com",notion:"notion.so",figma:"figma.com",canva:"canva.com",adobe:"adobe.com",oracle:"oracle.com",ibm:"ibm.com",intel:"intel.com",nvidia:"nvidia.com",amd:"amd.com",cisco:"cisco.com",vmware:"vmware.com",dell:"dell.com",hp:"hp.com","hewlett packard":"hp.com",samsung:"samsung.com",sony:"sony.com",lg:"lg.com",paypal:"paypal.com",square:"squareup.com",block:"block.xyz",robinhood:"robinhood.com",coinbase:"coinbase.com",plaid:"plaid.com",doordash:"doordash.com",instacart:"instacart.com",grubhub:"grubhub.com",postmates:"postmates.com",peloton:"onepeloton.com",tesla:"tesla.com",spacex:"spacex.com",palantir:"palantir.com",databricks:"databricks.com",snowflake:"snowflake.com",datadog:"datadoghq.com",splunk:"splunk.com",elastic:"elastic.co",mongodb:"mongodb.com",redis:"redis.com",cloudflare:"cloudflare.com",fastly:"fastly.com",akamai:"akamai.com",okta:"okta.com",auth0:"auth0.com",hashicorp:"hashicorp.com",docker:"docker.com",kubernetes:"kubernetes.io",redhat:"redhat.com","red hat":"redhat.com",canonical:"canonical.com",ubuntu:"ubuntu.com",suse:"suse.com",vercel:"vercel.com",netlify:"netlify.com",heroku:"heroku.com",digitalocean:"digitalocean.com",linode:"linode.com",vultr:"vultr.com",aws:"aws.amazon.com","amazon web services":"aws.amazon.com",gcp:"cloud.google.com","google cloud":"cloud.google.com",azure:"azure.microsoft.com",deloitte:"deloitte.com",mckinsey:"mckinsey.com",bcg:"bcg.com",bain:"bain.com",accenture:"accenture.com",kpmg:"kpmg.com",pwc:"pwc.com",ey:"ey.com","ernst & young":"ey.com",jpmorgan:"jpmorgan.com","goldman sachs":"goldmansachs.com","morgan stanley":"morganstanley.com","bank of america":"bankofamerica.com","wells fargo":"wellsfargo.com",citi:"citi.com",citibank:"citi.com",chase:"chase.com","capital one":"capitalone.com","american express":"americanexpress.com",amex:"americanexpress.com",visa:"visa.com",mastercard:"mastercard.com"};function F(t,o){const e=o?[...o,...v]:v;let a=L(t,e,"src");return a||(a=L(t,e,"data-src")),a||(a=g(t,'meta[property="og:image"]',"content")),d(a)}function N(t){const o=['link[rel="icon"]','link[rel="shortcut icon"]','link[rel="apple-touch-icon"]'];for(const e of o){const a=g(t,e,"href");if(a)return d(a)}try{return new URL("/favicon.ico",window.location.origin).href}catch{return null}}function U(t){if(!t)return null;const o=t.toLowerCase().trim();if(x[o])return x[o];for(const[a,i]of Object.entries(x))if(o.startsWith(a+" ")||o.startsWith(a+","))return i;const e=o.replace(/\s*(inc\.?|llc\.?|ltd\.?|corp\.?|corporation|company|co\.?|limited|gmbh|ag|sa|plc)\.?\s*$/i,"").replace(/[^a-z0-9\s]/g,"").trim().replace(/\s+/g,"");return e.length<2?null:`${e}.com`}function O(t,o=128){const e=U(t);return e?`https://www.google.com/s2/favicons?domain=${e}&sz=${o}`:null}function h(t,o,e){const a=F(t,e);if(a)return a;if(o){const i=O(o);if(i)return i}return N(t)}const H={name:"linkedin",domains:["linkedin.com"],pathPatterns:[/\/jobs\/view\//,/\/jobs\/collections\//,/\/jobs\/search\//],detect(t){return t.includes("linkedin.com/jobs")},extract(t,o){const e=m(t,[".job-details-jobs-unified-top-card__job-title h1",".job-details-jobs-unified-top-card__job-title",".jobs-unified-top-card__job-title","[data-test-job-title]",".topcard__title","h1.t-24","h1"]),a=m(t,[".job-details-jobs-unified-top-card__company-name a",".job-details-jobs-unified-top-card__company-name",".jobs-unified-top-card__company-name a",".jobs-unified-top-card__company-name","[data-test-company-name]",".topcard__org-name-link",".company-name"]),i=h(t,a,[".job-details-jobs-unified-top-card__company-logo img",".jobs-unified-top-card__company-logo img",".company-logo img",".topcard__org-photo img"]),l=m(t,[".job-details-jobs-unified-top-card__primary-description-container .tvm__text",".jobs-unified-top-card__bullet",".job-details-jobs-unified-top-card__primary-description-without-actions .tvm__text","[data-test-job-location]",".topcard__flavor--bullet"]),s=_(t,[".job-details-jobs-unified-top-card__job-insight",".jobs-unified-top-card__job-insight",".salary-main-rail__data-body","[data-test-compensation]",".compensation__salary"]),y=r(t,".jobs-description__content")||r(t,"#job-details")||r(t,".description__text")||r(t,".jobs-box__html-content"),n={title:c(e),company:c(a),companyLogo:d(i),location:c(l),salary:c(s),description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"linkedin",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},I={name:"indeed",domains:["indeed.com","indeed.co.uk","indeed.ca"],pathPatterns:[/\/viewjob/,/\/jobs/],detect(t){return t.includes("indeed.com")||t.includes("indeed.co.uk")||t.includes("indeed.ca")},extract(t,o){const e=m(t,['h1[data-testid="jobsearch-JobInfoHeader-title"]',".jobsearch-JobInfoHeader-title","h1.icl-u-xs-mb--xs",'[data-testid="jobTitle"]',".jobTitle","h1"]),a=m(t,['[data-testid="inlineHeader-companyName"] a','[data-testid="inlineHeader-companyName"]','[data-company-name="true"]',".jobsearch-InlineCompanyRating-companyHeader a",".jobsearch-InlineCompanyRating-companyHeader",".icl-u-lg-mr--sm a"]),i=h(t,a,[".jobsearch-CompanyAvatar-image",'[data-testid="companyAvatar"] img',".company-logo img"]),l=m(t,['[data-testid="inlineHeader-companyLocation"]','[data-testid="job-location"]',".jobsearch-JobInfoHeader-subtitle > div:last-child",".icl-u-xs-mt--xs .icl-IconFunctional--location + span"]),s=_(t,['[data-testid="attribute_snippet_testid"]',".jobsearch-JobMetadataHeader-item",".salary-snippet-container",".attribute_snippet","#salaryInfoAndJobType"]),y=r(t,"#jobDescriptionText")||r(t,".jobsearch-jobDescriptionText")||r(t,'[data-testid="jobDescriptionText"]'),n={title:c(e),company:c(a),companyLogo:d(i),location:c(l),salary:c(s),description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"indeed",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},q={name:"greenhouse",domains:["greenhouse.io","boards.greenhouse.io"],detect(t){return t.includes("greenhouse.io")},extract(t,o){const e=m(t,[".app-title","h1.job-title",".posting-headline h1","h1.heading","h1"]),a=r(t,".company-name")||g(t,'meta[property="og:site_name"]',"content")||g(t,".company-logo img","alt")||w(o),i=h(t,a,[".company-logo img",".logo img"]),l=m(t,[".location",".body--metadata .location",'[data-test="job-location"]',".posting-categories .location"]),s=m(t,[".salary",".compensation",'[class*="salary"]']),y=r(t,"#content")||r(t,".content")||r(t,".job-description")||r(t,".section-wrapper"),n={title:c(e),company:c(a),companyLogo:d(i),location:c(l),salary:c(s),description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"greenhouse",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},R={name:"lever",domains:["lever.co","jobs.lever.co"],detect(t){return t.includes("lever.co")},extract(t,o){const e=m(t,[".posting-headline h2",".posting-headline .posting-title","h2","h1"]),a=g(t,".main-header-logo img","alt")||r(t,".posting-headline .company-name")||w(o),i=h(t,a,[".main-header-logo img"]),l=m(t,[".posting-categories .location",".posting-headline .location",".sort-by-time.posting-category.location",'[data-qa="posting-location"]']),s=m(t,[".posting-categories .commitment",".posting-category.commitment"]),y=r(t,".posting-description")||r(t,'[data-qa="job-description"]')||r(t,".section-wrapper.page-full-width")||r(t,".content");let n=c(l);s&&n?n=`${n} (${c(s)})`:s&&(n=c(s));const p={title:c(e),company:c(a),companyLogo:d(i),location:n,salary:null,description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"lever",confidence:0};return p.confidence=b({title:p.title,company:p.company,description:p.description,location:p.location,salary:p.salary}),p}},M={name:"workday",domains:["myworkdayjobs.com","workday.com"],detect(t){return t.includes("myworkdayjobs.com")||t.includes("workday.com")},extract(t,o){const e=m(t,['[data-automation-id="jobPostingHeader"]','[data-automation-id="jobPostingTitle"]','h2[data-automation-id="jobPostingTitle"]',".css-1q2dra3","h1","h2"]),a=m(t,['[data-automation-id="jobPostingCompanyName"]','[data-automation-id="companyName"]'])||w(o),i=h(t,a,['[data-automation-id="companyLogo"] img',".company-logo img"]),l=m(t,['[data-automation-id="locations"]','[data-automation-id="jobPostingLocation"]','[data-automation-id="location"]',".css-129m7dg"]),s=_(t,['[data-automation-id="salary"]','[data-automation-id="compensation"]',".salary-range"]),y=r(t,'[data-automation-id="jobPostingDescription"]')||r(t,'[data-automation-id="jobDescription"]')||r(t,".job-description"),n={title:c(e),company:c(a),companyLogo:d(i),location:c(l),salary:c(s),description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"workday",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},B={name:"glassdoor",domains:["glassdoor.com","glassdoor.co.uk","glassdoor.ca"],pathPatterns:[/\/job-listing\//,/\/Job\//],detect(t){return(t.includes("glassdoor.com")||t.includes("glassdoor.co.uk")||t.includes("glassdoor.ca"))&&(t.includes("/job-listing/")||t.includes("/Job/"))},extract(t,o){const e=m(t,['[data-test="job-title"]',".job-title",".css-1vg6q84","h1"]),a=m(t,['[data-test="employer-name"]',".css-87uc0g",".employer-name",".company-name"]),i=h(t,a,['[data-test="employer-logo"] img',".employer-logo img"]),l=m(t,['[data-test="job-location"]',".css-56kyx5",".location"]),s=_(t,['[data-test="detailSalary"]',".css-1bluz6i",".salary-estimate",".css-1xe2xww"]),y=r(t,'[data-test="job-description"]')||r(t,".jobDescriptionContent")||r(t,".desc"),n={title:c(e),company:c(a),companyLogo:d(i),location:c(l),salary:c(s),description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"glassdoor",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},W={name:"wellfound",domains:["wellfound.com","angel.co"],pathPatterns:[/\/jobs\//,/\/company\/.+\/jobs/],detect(t){return(t.includes("wellfound.com")||t.includes("angel.co"))&&(t.includes("/jobs")||t.includes("/role/"))},extract(t,o){const e=m(t,['[data-test="JobTitle"]',".styles_title__Ovpy8","h1.job-title",".styles_jobHeader__aXm_G h1","h1"]),a=m(t,['[data-test="StartupLink"]',".styles_company__jNhMv a",".styles_component__dKIYE a",".company-name",'[class*="StartupHeader"] a']),i=h(t,a,['[data-test="StartupLogo"] img',".styles_logo__JlBpT img",'[class*="StartupHeader"] img']),l=m(t,['[data-test="Location"]',".styles_location__2VOQX",".location",'[class*="LocationTag"]']),s=_(t,['[data-test="Salary"]',".styles_compensation__lUBBT",".compensation",'[class*="CompensationTag"]']),y=r(t,'[data-test="JobDescription"]')||r(t,".styles_description__nBQw2")||r(t,".job-description")||r(t,'[class*="JobDescription"]'),n={title:c(e),company:c(a),companyLogo:d(i),location:c(l),salary:c(s),description:f(c(y),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"wellfound",confidence:0};return n.confidence=b({title:n.title,company:n.company,description:n.description,location:n.location,salary:n.salary}),n}},D={name:"generic",domains:["*"],detect(){return!0},extract(t,o){const e=T(t),a=E(t),i=K(t),l=V(t),s=G(t),y=e.title??i.title??l.title??a.title??s.title??null,n=e.company??i.company??a.company??s.company??w(o),p=e.location??i.location??a.location??null,u=e.description??i.description??a.description??null,S=e.salary??i.salary??Y(t),A=h(t,n),j={title:$(y),company:c(n),companyLogo:d(A),location:c(p),salary:c(S),description:f(c(u),5e3),url:d(o)||o,scrapedAt:Date.now(),source:"generic",confidence:0},P=e.title?.85:.7;return j.confidence=b({title:j.title,company:j.company,description:j.description,location:j.location,salary:j.salary})*P,j}};function T(t){var e,a;const o={};try{const i=t.querySelectorAll('script[type="application/ld+json"]');for(const l of i)try{const s=JSON.parse(l.textContent||""),y=Array.isArray(s)?s:[s];for(const n of y){if(n["@type"]==="JobPosting"||(a=(e=n["@type"])==null?void 0:e.includes)!=null&&a.call(e,"JobPosting")){if(o.title=n.title||n.name,o.description=n.description,n.hiringOrganization&&(o.company=typeof n.hiringOrganization=="string"?n.hiringOrganization:n.hiringOrganization.name),n.jobLocation){const p=n.jobLocation;if(typeof p=="string")o.location=p;else if(p.address){const u=p.address;o.location=[u.addressLocality,u.addressRegion,u.addressCountry].filter(Boolean).join(", ")}}if(n.baseSalary){const p=n.baseSalary;if(typeof p=="string")o.salary=p;else if(p.value){const u=p.value;typeof u=="object"&&u.minValue&&u.maxValue?o.salary=`$${u.minValue.toLocaleString()} - $${u.maxValue.toLocaleString()}`:o.salary=`$${u.toLocaleString()}`}}break}if(n["@graph"]){for(const p of n["@graph"])if(p["@type"]==="JobPosting")return T({querySelectorAll:()=>[{textContent:JSON.stringify(p)}]})}}}catch{}}catch{}return o}function E(t){return{title:g(t,'meta[property="og:title"]',"content")||g(t,'meta[name="twitter:title"]',"content")||g(t,'meta[name="title"]',"content"),company:g(t,'meta[property="og:site_name"]',"content")||g(t,'meta[name="author"]',"content"),description:g(t,'meta[property="og:description"]',"content")||g(t,'meta[name="description"]',"content")||g(t,'meta[name="twitter:description"]',"content"),location:null}}function K(t){const o=m(t,['[class*="job-title"]','[class*="jobTitle"]','[class*="job_title"]','[class*="position-title"]','[class*="positionTitle"]','[class*="posting-title"]','[class*="vacancy-title"]','[class*="role-title"]','[data-testid*="title"]','[data-automation-id*="title"]','[data-qa*="title"]',"#job-title","#jobTitle","#position-title",'[aria-label*="job title" i]',"main h1","article h1",".content h1","h1"]),e=m(t,['[class*="company-name"]','[class*="companyName"]','[class*="company_name"]','[class*="employer-name"]','[class*="employerName"]','[class*="organization-name"]','[class*="hiring-company"]','[data-testid*="company"]','[data-testid*="employer"]','[data-automation-id*="company"]',"#company-name","#companyName",'[aria-label*="company" i]']),a=m(t,['[class*="job-location"]','[class*="jobLocation"]','[class*="job_location"]','[class*="work-location"]','[class*="position-location"]','[class*="location"]','[data-testid*="location"]','[data-automation-id*="location"]',"#job-location","#location","address",'[aria-label*="location" i]']),i=m(t,['[class*="job-description"]','[class*="jobDescription"]','[class*="job_description"]','[class*="position-description"]','[class*="role-description"]','[class*="posting-description"]','[data-testid*="description"]','[data-automation-id*="description"]',"#job-description","#jobDescription",'[aria-label*="description" i]',"article","main .content","main"]),l=m(t,['[class*="salary"]','[class*="Salary"]','[class*="compensation"]','[class*="Compensation"]','[class*="pay-range"]','[class*="payRange"]','[data-testid*="salary"]','[data-testid*="compensation"]',"#salary","#compensation"]);return{title:o,company:e,location:a,description:i,salary:l}}function V(t){const o=C(t,"h1, h2, h3");for(const e of o){const a=e==null?void 0:e.trim();if(!a)continue;const i=["engineer","developer","manager","analyst","designer","director","coordinator","specialist","consultant","lead","senior","junior","associate","intern","head of","vp","vice president","architect","administrator"],l=a.toLowerCase();if(i.some(s=>l.includes(s)))return{title:a}}return{}}function G(t){const o=t.title;if(!o)return{};const e=o.match(/^(.+?)\s+at\s+(.+?)(?:\s*[-|]|$)/i);if(e)return{title:e[1].trim(),company:e[2].trim()};const a=o.match(/^([^:]+):\s*(.+?)(?:\s*[-|]|$)/);if(a&&a[2].length>5)return{title:a[2].trim(),company:a[1].trim()};const i=o.split(/\s*[-|–—]\s*/);if(i.length>=2){const l=i[0].trim(),s=i[1].trim();if(l.length>3&&l.length<100)return{title:l,company:s.length>1&&s.length<50?s:null}}return{}}function Y(t){var o;try{const a=(((o=t.body)==null?void 0:o.innerText)||"").substring(0,1e4);return k(a)}catch{return null}}const Q=[H,I,q,R,M,B,W,D];function X(t,o){for(const e of Q)if(e.detect(t,o))return e;return D}function Z(t,o){return X(o,t).extract(t,o)}if(typeof window.__jobTrackerScraperLoaded>"u"){let t=function(){return Z(document,window.location.href)};window.__jobTrackerScraperLoaded=!0,chrome.runtime.onMessage.addListener((o,e,a)=>{if(o.action==="scrapeJob")try{const i=t();a(i)}catch(i){console.error("JobFlow: Scraper error",i),a({url:window.location.href,title:null,company:null,companyLogo:null,location:null,salary:null,description:null,scrapedAt:Date.now(),source:"error",confidence:0})}return!0})}
